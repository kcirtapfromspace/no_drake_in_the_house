var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i,a;function l(e,t){return e===t||(i||(i=document.createElement("a")),i.href=t,e===i.href)}function c(t,...n){if(null==t){for(const e of n)e(void 0);return e}const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function x(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function h(e){return document.createTextNode(e)}function y(){return h(" ")}function v(){return h("")}function b(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function k(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e){let t;return{p(...n){t=n,t.forEach(t=>e.push(t))},r(){t.forEach(t=>e.splice(e.indexOf(t),1))}}}function $(e,t){t=""+t,e.data!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function L(e,t,n,s){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function M(e,t,n){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function S(e){const t=e.querySelector(":checked");return t&&t.__value}function A(e,t,n){e.classList.toggle(t,!!n)}function z(e){a=e}function j(){if(!a)throw new Error("Function called outside component initialization");return a}function T(e){j().$$.on_mount.push(e)}function B(){const e=j();return(t,n,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}(t,n,{cancelable:s});return r.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const H=[],P=[];let E=[];const F=[],I=Promise.resolve();let D=!1;function N(e){E.push(e)}const O=new Set;let R=0;function V(){if(0!==R)return;const e=a;do{try{for(;R<H.length;){const e=H[R];R++,z(e),U(e.$$)}}catch(e){throw H.length=0,R=0,e}for(z(null),H.length=0,R=0;P.length;)P.pop()();for(let e=0;e<E.length;e+=1){const t=E[e];O.has(t)||(O.add(t),t())}E.length=0}while(H.length);for(;F.length;)F.pop()();D=!1,O.clear(),z(e)}function U(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const q=new Set;let J;function Y(){J={r:0,c:[],p:J}}function G(){J.r||s(J.c),J=J.p}function Q(e,t){e&&e.i&&(q.delete(e),e.i(t))}function W(e,t,n,s){if(e&&e.o){if(q.has(e))return;q.add(e),J.c.push(()=>{q.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function Z(e){return void 0!==e?.length?e:Array.from(e)}function K(e,t){W(e,1,1,()=>{t.delete(e.key)})}function X(e,t,n,r,o,i,a,l,c,d,u,m){let g=e.length,p=i.length,f=g;const x={};for(;f--;)x[e[f].key]=f;const h=[],y=new Map,v=new Map,b=[];for(f=p;f--;){const e=m(o,i,f),s=n(e);let r=a.get(s);r?b.push(()=>r.p(e,t)):(r=d(s,e),r.c()),y.set(s,h[f]=r),s in x&&v.set(s,Math.abs(f-x[s]))}const w=new Set,k=new Set;function C(e){Q(e,1),e.m(l,u),a.set(e.key,e),u=e.first,p--}for(;g&&p;){const t=h[p-1],n=e[g-1],s=t.key,r=n.key;t===n?(u=t.first,g--,p--):y.has(r)?!a.has(s)||w.has(s)?C(t):k.has(r)?g--:v.get(s)>v.get(r)?(k.add(s),C(t)):(w.add(r),g--):(c(n,a),g--)}for(;g--;){const t=e[g];y.has(t.key)||c(t,a)}for(;p;)C(h[p-1]);return s(b),h}function ee(e){e&&e.c()}function te(e,n,o){const{fragment:i,after_update:a}=e.$$;i&&i.m(n,o),N(()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):s(n),e.$$.on_mount=[]}),a.forEach(N)}function ne(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];E.forEach(s=>-1===e.indexOf(s)?t.push(s):n.push(s)),n.forEach(e=>e()),E=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function se(e,t){-1===e.$$.dirty[0]&&(H.push(e),D||(D=!0,I.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(t,r,o,i,l,c,d=null,u=[-1]){const m=a;z(t);const p=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(m?m.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||m.$$.root};d&&d(p.root);let f=!1;if(p.ctx=o?o(t,r.props||{},(e,n,...s)=>{const r=s.length?s[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),f&&se(t,e)),n}):[],p.update(),f=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(g)}else p.fragment&&p.fragment.c();r.intro&&Q(t.$$.fragment),te(t,r.target,r.anchor),V()}z(m)}class oe{$$=void 0;$$set=void 0;$destroy(){ne(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const e=s.indexOf(n);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ie=[];function ae(t,n=e){let s;const r=new Set;function i(e){if(o(t,e)&&(t=e,s)){const e=!ie.length;for(const e of r)e[1](),ie.push(e,t);if(e){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}function a(e){i(e(t))}return{set:i,update:a,subscribe:function(o,l=e){const c=[o,l];return r.add(c),1===r.size&&(s=n(i,a)||e),o(t),()=>{r.delete(c),0===r.size&&s&&(s(),s=null)}}}}function le(t,n,o){const i=!Array.isArray(t),a=i?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return d=(t,o)=>{let d=!1;const u=[];let m=0,g=e;const p=()=>{if(m)return;g();const s=n(i?u[0]:u,t,o);l?t(s):g=r(s)?s:e},f=a.map((e,t)=>c(e,e=>{u[t]=e,m&=~(1<<t),d&&p()},()=>{m|=1<<t}));return d=!0,p(),function(){s(f),g(),d=!1}},{subscribe:ae(o,d).subscribe};var d}const ce={apiUrl:"undefined"!=typeof window?window.location.origin:"http://localhost:3000",apiVersion:"v1",appName:"No Drake in the House",environment:"development",features:{twoFactorAuth:!0,communityLists:!0,analytics:!0},development:{hotReload:!0,debugMode:!0},external:{spotifyClientId:"",appleMusicToken:""},ui:{defaultTheme:"light"},performance:{enableServiceWorker:!0,cacheDuration:parseInt("300000")},isDevelopment:()=>"development"===ce.environment,isProduction:()=>"production"===ce.environment,getApiEndpoint:e=>{const t=e.startsWith("/")?e:`/${e}`,n=t.startsWith("/api/")?t:`/api/${ce.apiVersion}${t}`;return`${ce.apiUrl}${n}`}};class de extends Error{constructor(e,t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:e}),this.name="ApiError"}}async function ue(e,t={}){const n=localStorage.getItem("auth_token"),s={...t,headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...t.headers}};try{const t=ce.getApiEndpoint(e),n=await fetch(t,s),r=await n.json();if(!n.ok)throw new de(n.status,r.message||"Request failed");return r}catch(e){if(e instanceof de)throw e;throw new de(0,"Network error occurred")}}const me=e=>ue(e),ge=(e,t)=>ue(e,{method:"POST",body:JSON.stringify(t)}),pe=(e,t)=>ue(e,{method:"PUT",body:JSON.stringify(t)}),fe=(e,t)=>ue(e,{method:"DELETE",body:t?JSON.stringify(t):void 0}),xe=ae({user:null,token:localStorage.getItem("auth_token"),refreshToken:localStorage.getItem("refresh_token"),isAuthenticated:!1,isLoading:!1}),he=le(xe,e=>e.isAuthenticated&&null!==e.token),ye=le(xe,e=>e.user),ve={login:async(e,t,n)=>{xe.update(e=>({...e,isLoading:!0}));try{const s=await ge("/auth/login",{email:e,password:t,totp_code:n});if(s.success){const{access_token:e,refresh_token:t}=s.data;return localStorage.setItem("auth_token",e),localStorage.setItem("refresh_token",t),xe.update(n=>({...n,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1})),await ve.fetchProfile(),{success:!0}}return xe.update(e=>({...e,isLoading:!1})),{success:!1,message:s.message}}catch(e){return xe.update(e=>({...e,isLoading:!1})),{success:!1,message:e.message||"Network error occurred"}}},register:async(e,t,n,s)=>{xe.update(e=>({...e,isLoading:!0}));try{const r=await ge("/auth/register",{email:e,password:t,confirm_password:n,terms_accepted:s});if(r.success){if(r.data?.access_token&&r.data?.refresh_token){const{access_token:e,refresh_token:t}=r.data;return localStorage.setItem("auth_token",e),localStorage.setItem("refresh_token",t),xe.update(n=>({...n,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1})),await ve.fetchProfile(),{success:!0,autoLogin:!0}}return xe.update(e=>({...e,isLoading:!1})),{success:!0,autoLogin:!1,message:r.message}}return xe.update(e=>({...e,isLoading:!1})),{success:!1,message:r.message,errors:r.data?.errors||null}}catch(e){if(xe.update(e=>({...e,isLoading:!1})),400===e.status&&e.message)try{const t=JSON.parse(e.message);if(t.errors)return{success:!1,message:t.message||"Registration validation failed",errors:t.errors}}catch(e){}return{success:!1,message:e.message||"Network error occurred"}}},fetchProfile:async()=>{if(localStorage.getItem("auth_token"))try{const e=await me("/users/profile");e.success&&xe.update(t=>({...t,user:e.data,isAuthenticated:!0}))}catch(e){console.error("Failed to fetch profile:",e)}},logout:async()=>{if(localStorage.getItem("auth_token"))try{await ge("/auth/logout")}catch(e){console.error("Logout request failed:",e)}localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),xe.set({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1})},refreshToken:async()=>{const e=localStorage.getItem("refresh_token");if(!e)return!1;try{const t=await ge("/auth/refresh",{refresh_token:e});if(t.success){const{access_token:e,refresh_token:n}=t.data;return localStorage.setItem("auth_token",e),localStorage.setItem("refresh_token",n),xe.update(t=>({...t,token:e,refreshToken:n,isAuthenticated:!0})),!0}}catch(e){console.error("Token refresh failed:",e)}return!1},setup2FA:async()=>{try{const e=await ge("/auth/2fa/setup");return e.success?{success:!0,qrCodeUrl:e.data.qr_code_url,secret:e.data.secret}:{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message||"Failed to setup 2FA"}}},verify2FA:async e=>{try{const t=await ge("/auth/2fa/verify",{totp_code:e});return t.success?(await ve.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Failed to verify 2FA code"}}},disable2FA:async e=>{try{const t=await ge("/auth/2fa/disable",{totp_code:e});return t.success?(await ve.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Failed to disable 2FA"}}}};if("undefined"!=typeof window){const e=localStorage.getItem("auth_token");e&&(xe.update(t=>({...t,token:e,isAuthenticated:!0})),ve.fetchProfile())}const be=ae("overview"),we={overview:{path:"/",component:null,title:"Overview"},connections:{path:"/connections",component:null,title:"Service Connections"},dnp:{path:"/dnp",component:null,title:"DNP List"},enforcement:{path:"/enforcement",component:null,title:"Enforcement"},community:{path:"/community",component:null,title:"Community Lists"},profile:{path:"/profile",component:null,title:"Profile & Settings"}},ke=e=>{if(be.set(e),"undefined"!=typeof window){const t=we[e];t&&(window.history.pushState({},t.title,t.path),document.title=`${t.title} - No Drake in the House`)}},Ce=()=>{if("undefined"!=typeof window){window.addEventListener("popstate",()=>{const e=window.location.pathname,t=Object.keys(we).find(t=>we[t].path===e)||"overview";be.set(t)});const e=window.location.pathname,t=Object.keys(we).find(t=>we[t].path===e)||"overview";be.set(t)}};function $e(e){let t;return{c(){t=f("p"),t.textContent="Please enter a valid email address",k(t,"class","mt-1 text-sm text-red-600")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function _e(e){let t;return{c(){t=f("p"),t.textContent="Password must be at least 8 characters",k(t,"class","mt-1 text-sm text-red-600")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Le(e){let t,n,s,r,o,i,a,l,c;return{c(){t=f("div"),n=f("label"),n.textContent="2FA Authentication Code",s=y(),r=f("div"),o=f("input"),i=y(),a=f("p"),a.textContent="Enter the 6-digit code from your authenticator app",k(n,"for","login-totp"),k(n,"class","block text-sm font-medium text-gray-700"),k(o,"id","login-totp"),k(o,"name","totp"),k(o,"type","text"),k(o,"autocomplete","one-time-code"),k(o,"maxlength","6"),k(o,"pattern","[0-9]6"),k(o,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(o,"placeholder","Enter 6-digit code"),k(a,"class","mt-1 text-sm text-gray-500"),k(r,"class","mt-1")},m(d,g){m(d,t,g),u(t,n),u(t,s),u(t,r),u(r,o),_(o,e[6]),u(r,i),u(r,a),l||(c=b(o,"input",e[13]),l=!0)},p(e,t){64&t&&o.value!==e[6]&&_(o,e[6])},d(e){e&&g(t),l=!1,c()}}}function Me(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[1]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","rounded-md bg-red-50 p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){2&t&&$(a,e[1])},d(e){e&&g(t)}}}function Se(e){let t;return{c(){t=h("Sign in")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Ae(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n          Signing in..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function ze(t){let n,r,o,i,a,l,c,d,p,x,h,v,C,$,L,M,S,z,j,T,B,H,P,E,F,I,D,N,O=!t[5]&&$e(),R=!t[4]&&_e(),V=t[7]&&Le(t),U=t[1]&&Me(t);function q(e,t){return e[0]?Ae:Se}let J=q(t),Y=J(t);return{c(){n=f("div"),r=f("div"),r.innerHTML='<h2 class="text-center text-3xl font-extrabold text-gray-900">Sign in to your account</h2> <p class="mt-2 text-center text-sm text-gray-600">Access your music blocklist manager</p>',o=y(),i=f("form"),a=f("div"),l=f("label"),l.textContent="Email address",c=y(),d=f("div"),p=f("input"),x=y(),O&&O.c(),h=y(),v=f("div"),C=f("label"),C.textContent="Password",$=y(),L=f("div"),M=f("input"),S=y(),R&&R.c(),z=y(),V&&V.c(),j=y(),U&&U.c(),T=y(),B=f("div"),H=f("button"),Y.c(),E=y(),F=f("div"),I=f("button"),I.textContent="Don't have an account? Create one",k(l,"for","login-email"),k(l,"class","block text-sm font-medium text-gray-700"),k(p,"id","login-email"),k(p,"name","email"),k(p,"type","email"),k(p,"autocomplete","email"),p.required=!0,k(p,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(p,"placeholder","Enter your email"),A(p,"border-red-300",!t[5]),A(p,"focus:ring-red-500",!t[5]),A(p,"focus:border-red-500",!t[5]),k(d,"class","mt-1"),k(C,"for","login-password"),k(C,"class","block text-sm font-medium text-gray-700"),k(M,"id","login-password"),k(M,"name","password"),k(M,"type","password"),k(M,"autocomplete","current-password"),M.required=!0,k(M,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(M,"placeholder","Enter your password"),A(M,"border-red-300",!t[4]),A(M,"focus:ring-red-500",!t[4]),A(M,"focus:border-red-500",!t[4]),k(L,"class","mt-1"),k(H,"type","submit"),H.disabled=P=!t[8]||t[0],k(H,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(I,"type","button"),k(I,"class","text-indigo-600 hover:text-indigo-500 text-sm font-medium"),k(F,"class","text-center"),k(i,"class","space-y-4"),k(n,"class","space-y-6")},m(e,s){m(e,n,s),u(n,r),u(n,o),u(n,i),u(i,a),u(a,l),u(a,c),u(a,d),u(d,p),_(p,t[2]),u(d,x),O&&O.m(d,null),u(i,h),u(i,v),u(v,C),u(v,$),u(v,L),u(L,M),_(M,t[3]),u(L,S),R&&R.m(L,null),u(i,z),V&&V.m(i,null),u(i,j),U&&U.m(i,null),u(i,T),u(i,B),u(B,H),Y.m(H,null),u(i,E),u(i,F),u(F,I),D||(N=[b(p,"input",t[11]),b(M,"input",t[12]),b(I,"click",t[14]),b(i,"submit",w(t[10]))],D=!0)},p(e,[t]){4&t&&p.value!==e[2]&&_(p,e[2]),32&t&&A(p,"border-red-300",!e[5]),32&t&&A(p,"focus:ring-red-500",!e[5]),32&t&&A(p,"focus:border-red-500",!e[5]),e[5]?O&&(O.d(1),O=null):O||(O=$e(),O.c(),O.m(d,null)),8&t&&M.value!==e[3]&&_(M,e[3]),16&t&&A(M,"border-red-300",!e[4]),16&t&&A(M,"focus:ring-red-500",!e[4]),16&t&&A(M,"focus:border-red-500",!e[4]),e[4]?R&&(R.d(1),R=null):R||(R=_e(),R.c(),R.m(L,null)),e[7]?V?V.p(e,t):(V=Le(e),V.c(),V.m(i,j)):V&&(V.d(1),V=null),e[1]?U?U.p(e,t):(U=Me(e),U.c(),U.m(i,T)):U&&(U.d(1),U=null),J!==(J=q(e))&&(Y.d(1),Y=J(e),Y&&(Y.c(),Y.m(H,null))),257&t&&P!==(P=!e[8]||e[0])&&(H.disabled=P)},i:e,o:e,d(e){e&&g(n),O&&O.d(),R&&R.d(),V&&V.d(),U&&U.d(),Y.d(),D=!1,s(N)}}}function je(e,t,n){let s,r,o;const i=B();let{isLoading:a=!1}=t,{error:l=""}=t,c="",d="",u="",m=!1;return e.$$set=e=>{"isLoading"in e&&n(0,a=e.isLoading),"error"in e&&n(1,l=e.error)},e.$$.update=()=>{4&e.$$.dirty&&n(5,s=0===c.length||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)),8&e.$$.dirty&&n(4,r=0===d.length||d.length>=8),60&e.$$.dirty&&n(8,o=s&&r&&c.length>0&&d.length>0),2&e.$$.dirty&&(!l||l.toLowerCase().includes("2fa")||l.toLowerCase().includes("totp")||(n(7,m=!1),n(6,u=""))),2&e.$$.dirty&&l&&(l.toLowerCase().includes("2fa")||l.toLowerCase().includes("totp"))&&n(7,m=!0)},[a,l,c,d,r,s,u,m,o,i,function(){o&&i("login",{email:c.trim(),password:d,totpCode:u||void 0})},function(){c=this.value,n(2,c)},function(){d=this.value,n(3,d)},function(){u=this.value,n(6,u),n(1,l)},()=>i("switchMode")]}class Te extends oe{constructor(e){super(),re(this,e,je,ze,o,{isLoading:0,error:1})}}function Be(e,t,n){const s=e.slice();return s[27]=t[n],s[29]=n,s}function He(t){let n;return{c(){n=f("p"),n.textContent="Please enter a valid email address",k(n,"class","mt-1 text-sm text-red-600")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Pe(e){let t,n,s=e[3].email+"";return{c(){t=f("p"),n=h(s),k(t,"class","mt-1 text-sm text-red-600")},m(e,s){m(e,t,s),u(t,n)},p(e,t){8&t&&s!==(s=e[3].email+"")&&$(n,s)},d(e){e&&g(t)}}}function Ee(e){let t,n,s,r,o,i,a,l,c,d,v,b,w,C,_,L,M,S,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,K,X,ee,te,ne,se,re,oe,ie,ae=Z(Array(5)),le=[];for(let t=0;t<ae.length;t+=1)le[t]=Fe(Be(e,ae,t));return{c(){t=f("div"),n=f("div"),s=f("span"),s.textContent="Password strength:",r=y(),o=f("span"),i=h(e[19]),l=y(),c=f("div");for(let e=0;e<le.length;e+=1)le[e].c();d=y(),v=f("div"),b=f("p"),b.textContent="Password must contain:",w=y(),C=f("div"),_=f("div"),L=f("div"),M=x("svg"),S=x("path"),z=y(),j=f("span"),j.textContent="At least 8 characters",T=y(),B=f("div"),H=f("div"),P=x("svg"),E=x("path"),F=y(),I=f("span"),I.textContent="One uppercase letter",D=y(),N=f("div"),O=f("div"),R=x("svg"),V=x("path"),U=y(),q=f("span"),q.textContent="One lowercase letter",J=y(),Y=f("div"),G=f("div"),Q=x("svg"),W=x("path"),K=y(),X=f("span"),X.textContent="One number",ee=y(),te=f("div"),ne=f("div"),se=x("svg"),re=x("path"),oe=y(),ie=f("span"),ie.textContent="One special character",k(s,"class","text-sm text-gray-600"),k(o,"class",a="text-sm font-medium "+e[18]),k(n,"class","flex items-center justify-between"),k(c,"class","mt-1 flex space-x-1"),k(t,"class","mt-2"),k(b,"class","text-xs text-gray-600"),k(S,"fill-rule","evenodd"),k(S,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),k(S,"clip-rule","evenodd"),k(M,"class","w-full h-full"),k(M,"fill","currentColor"),k(M,"viewBox","0 0 20 20"),A(M,"text-green-500",e[12]),A(M,"text-gray-400",!e[12]),k(L,"class","w-3 h-3 mr-2 flex-shrink-0"),A(j,"text-green-600",e[12]),A(j,"text-gray-500",!e[12]),k(_,"class","flex items-center"),k(E,"fill-rule","evenodd"),k(E,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),k(E,"clip-rule","evenodd"),k(P,"class","w-full h-full"),k(P,"fill","currentColor"),k(P,"viewBox","0 0 20 20"),A(P,"text-green-500",e[16]),A(P,"text-gray-400",!e[16]),k(H,"class","w-3 h-3 mr-2 flex-shrink-0"),A(I,"text-green-600",e[16]),A(I,"text-gray-500",!e[16]),k(B,"class","flex items-center"),k(V,"fill-rule","evenodd"),k(V,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),k(V,"clip-rule","evenodd"),k(R,"class","w-full h-full"),k(R,"fill","currentColor"),k(R,"viewBox","0 0 20 20"),A(R,"text-green-500",e[15]),A(R,"text-gray-400",!e[15]),k(O,"class","w-3 h-3 mr-2 flex-shrink-0"),A(q,"text-green-600",e[15]),A(q,"text-gray-500",!e[15]),k(N,"class","flex items-center"),k(W,"fill-rule","evenodd"),k(W,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),k(W,"clip-rule","evenodd"),k(Q,"class","w-full h-full"),k(Q,"fill","currentColor"),k(Q,"viewBox","0 0 20 20"),A(Q,"text-green-500",e[14]),A(Q,"text-gray-400",!e[14]),k(G,"class","w-3 h-3 mr-2 flex-shrink-0"),A(X,"text-green-600",e[14]),A(X,"text-gray-500",!e[14]),k(Y,"class","flex items-center"),k(re,"fill-rule","evenodd"),k(re,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),k(re,"clip-rule","evenodd"),k(se,"class","w-full h-full"),k(se,"fill","currentColor"),k(se,"viewBox","0 0 20 20"),A(se,"text-green-500",e[13]),A(se,"text-gray-400",!e[13]),k(ne,"class","w-3 h-3 mr-2 flex-shrink-0"),A(ie,"text-green-600",e[13]),A(ie,"text-gray-500",!e[13]),k(te,"class","flex items-center"),k(C,"class","grid grid-cols-1 gap-1 text-xs"),k(v,"class","mt-2 space-y-1")},m(e,a){m(e,t,a),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(t,l),u(t,c);for(let e=0;e<le.length;e+=1)le[e]&&le[e].m(c,null);m(e,d,a),m(e,v,a),u(v,b),u(v,w),u(v,C),u(C,_),u(_,L),u(L,M),u(M,S),u(_,z),u(_,j),u(C,T),u(C,B),u(B,H),u(H,P),u(P,E),u(B,F),u(B,I),u(C,D),u(C,N),u(N,O),u(O,R),u(R,V),u(N,U),u(N,q),u(C,J),u(C,Y),u(Y,G),u(G,Q),u(Q,W),u(Y,K),u(Y,X),u(C,ee),u(C,te),u(te,ne),u(ne,se),u(se,re),u(te,oe),u(te,ie)},p(e,t){if(524288&t&&$(i,e[19]),262144&t&&a!==(a="text-sm font-medium "+e[18])&&k(o,"class",a),2048&t){let n;for(ae=Z(Array(5)),n=0;n<ae.length;n+=1){const s=Be(e,ae,n);le[n]?le[n].p(s,t):(le[n]=Fe(s),le[n].c(),le[n].m(c,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=ae.length}4096&t&&A(M,"text-green-500",e[12]),4096&t&&A(M,"text-gray-400",!e[12]),4096&t&&A(j,"text-green-600",e[12]),4096&t&&A(j,"text-gray-500",!e[12]),65536&t&&A(P,"text-green-500",e[16]),65536&t&&A(P,"text-gray-400",!e[16]),65536&t&&A(I,"text-green-600",e[16]),65536&t&&A(I,"text-gray-500",!e[16]),32768&t&&A(R,"text-green-500",e[15]),32768&t&&A(R,"text-gray-400",!e[15]),32768&t&&A(q,"text-green-600",e[15]),32768&t&&A(q,"text-gray-500",!e[15]),16384&t&&A(Q,"text-green-500",e[14]),16384&t&&A(Q,"text-gray-400",!e[14]),16384&t&&A(X,"text-green-600",e[14]),16384&t&&A(X,"text-gray-500",!e[14]),8192&t&&A(se,"text-green-500",e[13]),8192&t&&A(se,"text-gray-400",!e[13]),8192&t&&A(ie,"text-green-600",e[13]),8192&t&&A(ie,"text-gray-500",!e[13])},d(e){e&&(g(t),g(d),g(v)),p(le,e)}}}function Fe(e){let t;return{c(){t=f("div"),k(t,"class","h-1 flex-1 rounded-full"),A(t,"bg-red-200",e[11]<=2),A(t,"bg-yellow-200",3===e[11]),A(t,"bg-blue-200",4===e[11]),A(t,"bg-green-200",5===e[11]),A(t,"bg-red-500",e[11]<=2&&e[29]<e[11]),A(t,"bg-yellow-500",3===e[11]&&e[29]<e[11]),A(t,"bg-blue-500",4===e[11]&&e[29]<e[11]),A(t,"bg-green-500",5===e[11]&&e[29]<e[11]),A(t,"bg-gray-200",e[29]>=e[11])},m(e,n){m(e,t,n)},p(e,n){2048&n&&A(t,"bg-red-200",e[11]<=2),2048&n&&A(t,"bg-yellow-200",3===e[11]),2048&n&&A(t,"bg-blue-200",4===e[11]),2048&n&&A(t,"bg-green-200",5===e[11]),2048&n&&A(t,"bg-red-500",e[11]<=2&&e[29]<e[11]),2048&n&&A(t,"bg-yellow-500",3===e[11]&&e[29]<e[11]),2048&n&&A(t,"bg-blue-500",4===e[11]&&e[29]<e[11]),2048&n&&A(t,"bg-green-500",5===e[11]&&e[29]<e[11]),2048&n&&A(t,"bg-gray-200",e[29]>=e[11])},d(e){e&&g(t)}}}function Ie(e){let t,n,s=e[3].password+"";return{c(){t=f("p"),n=h(s),k(t,"class","mt-1 text-sm text-red-600")},m(e,s){m(e,t,s),u(t,n)},p(e,t){8&t&&s!==(s=e[3].password+"")&&$(n,s)},d(e){e&&g(t)}}}function De(t){let n;return{c(){n=f("p"),n.textContent="Passwords do not match",k(n,"class","mt-1 text-sm text-red-600")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Ne(e){let t,n,s=e[3].confirm_password+"";return{c(){t=f("p"),n=h(s),k(t,"class","mt-1 text-sm text-red-600")},m(e,s){m(e,t,s),u(t,n)},p(e,t){8&t&&s!==(s=e[3].confirm_password+"")&&$(n,s)},d(e){e&&g(t)}}}function Oe(t){let n;return{c(){n=f("p"),n.textContent="You must accept the terms to continue",k(n,"class","mt-1 text-sm text-red-600")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Re(e){let t,n,s=e[3].terms_accepted+"";return{c(){t=f("p"),n=h(s),k(t,"class","mt-1 text-sm text-red-600")},m(e,s){m(e,t,s),u(t,n)},p(e,t){8&t&&s!==(s=e[3].terms_accepted+"")&&$(n,s)},d(e){e&&g(t)}}}function Ve(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[2]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-green-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","rounded-md bg-green-50 p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){4&t&&$(a,e[2])},d(e){e&&g(t)}}}function Ue(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[1]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","rounded-md bg-red-50 p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){2&t&&$(a,e[1])},d(e){e&&g(t)}}}function qe(e){let t;return{c(){t=h("Create account")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Je(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n          Creating account..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function Ye(t){let n,r,o,i,a,l,c,d,p,x,h,v,C,$,L,M,S,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne;function se(e,t){return e[3].email?Pe:e[10]?void 0:He}let re=se(t),oe=re&&re(t),ie=t[5].length>0&&Ee(t),ae=t[3].password&&Ie(t);function le(e,t){return e[3].confirm_password?Ne:!e[8]&&e[6].length>0?De:void 0}let ce=le(t),de=ce&&ce(t);function ue(e,t){return e[3].terms_accepted?Re:e[7]||!1!==e[17]?void 0:Oe}let me=ue(t),ge=me&&me(t),pe=t[2]&&Ve(t),fe=t[1]&&Ue(t);function xe(e,t){return e[0]?Je:qe}let he=xe(t),ye=he(t);return{c(){n=f("div"),r=f("div"),r.innerHTML='<h2 class="text-center text-3xl font-extrabold text-gray-900">Create your account</h2> <p class="mt-2 text-center text-sm text-gray-600">Join the music blocklist community</p>',o=y(),i=f("form"),a=f("div"),l=f("label"),l.textContent="Email address",c=y(),d=f("div"),p=f("input"),x=y(),oe&&oe.c(),h=y(),v=f("div"),C=f("label"),C.textContent="Password",$=y(),L=f("div"),M=f("input"),S=y(),ie&&ie.c(),z=y(),ae&&ae.c(),j=y(),T=f("div"),B=f("label"),B.textContent="Confirm Password",H=y(),P=f("div"),E=f("input"),F=y(),de&&de.c(),I=y(),D=f("div"),N=f("div"),O=f("input"),R=y(),V=f("div"),U=f("label"),U.innerHTML='I agree to the \n          <a href="/terms" target="_blank" class="text-indigo-600 hover:text-indigo-500 underline">Terms of Service</a>\n          and \n          <a href="/privacy" target="_blank" class="text-indigo-600 hover:text-indigo-500 underline">Privacy Policy</a>',q=y(),ge&&ge.c(),J=y(),pe&&pe.c(),Y=y(),fe&&fe.c(),G=y(),Q=f("div"),W=f("button"),ye.c(),K=y(),X=f("div"),ee=f("button"),ee.textContent="Already have an account? Sign in",k(l,"for","register-email"),k(l,"class","block text-sm font-medium text-gray-700"),k(p,"id","register-email"),k(p,"name","email"),k(p,"type","email"),k(p,"autocomplete","email"),p.required=!0,k(p,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(p,"placeholder","Enter your email"),A(p,"border-red-300",!t[10]),A(p,"focus:ring-red-500",!t[10]),A(p,"focus:border-red-500",!t[10]),k(d,"class","mt-1"),k(C,"for","register-password"),k(C,"class","block text-sm font-medium text-gray-700"),k(M,"id","register-password"),k(M,"name","password"),k(M,"type","password"),k(M,"autocomplete","new-password"),M.required=!0,k(M,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(M,"placeholder","Create a strong password"),A(M,"border-red-300",t[3].password||!t[9]&&t[5].length>0),A(M,"focus:ring-red-500",t[3].password||!t[9]&&t[5].length>0),A(M,"focus:border-red-500",t[3].password||!t[9]&&t[5].length>0),k(L,"class","mt-1"),k(B,"for","confirm-password"),k(B,"class","block text-sm font-medium text-gray-700"),k(E,"id","confirm-password"),k(E,"name","confirmPassword"),k(E,"type","password"),k(E,"autocomplete","new-password"),E.required=!0,k(E,"class","appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(E,"placeholder","Confirm your password"),A(E,"border-red-300",!t[8]&&t[6].length>0),A(E,"focus:ring-red-500",!t[8]&&t[6].length>0),A(E,"focus:border-red-500",!t[8]&&t[6].length>0),k(P,"class","mt-1"),k(O,"id","terms-accepted"),k(O,"name","termsAccepted"),k(O,"type","checkbox"),O.required=!0,k(O,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(N,"class","flex items-center h-5"),k(U,"for","terms-accepted"),k(U,"class","text-gray-700"),k(V,"class","ml-3 text-sm"),k(D,"class","flex items-start"),k(W,"type","submit"),W.disabled=Z=!t[17]||t[0],k(W,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(ee,"type","button"),k(ee,"class","text-indigo-600 hover:text-indigo-500 text-sm font-medium"),k(X,"class","text-center"),k(i,"class","space-y-4"),k(n,"class","space-y-6")},m(e,s){m(e,n,s),u(n,r),u(n,o),u(n,i),u(i,a),u(a,l),u(a,c),u(a,d),u(d,p),_(p,t[4]),u(d,x),oe&&oe.m(d,null),u(i,h),u(i,v),u(v,C),u(v,$),u(v,L),u(L,M),_(M,t[5]),u(L,S),ie&&ie.m(L,null),u(L,z),ae&&ae.m(L,null),u(i,j),u(i,T),u(T,B),u(T,H),u(T,P),u(P,E),_(E,t[6]),u(P,F),de&&de.m(P,null),u(i,I),u(i,D),u(D,N),u(N,O),O.checked=t[7],u(D,R),u(D,V),u(V,U),u(V,q),ge&&ge.m(V,null),u(i,J),pe&&pe.m(i,null),u(i,Y),fe&&fe.m(i,null),u(i,G),u(i,Q),u(Q,W),ye.m(W,null),u(i,K),u(i,X),u(X,ee),te||(ne=[b(p,"input",t[22]),b(M,"input",t[23]),b(E,"input",t[24]),b(O,"change",t[25]),b(ee,"click",t[26]),b(i,"submit",w(t[21]))],te=!0)},p(e,[t]){16&t&&p.value!==e[4]&&_(p,e[4]),1024&t&&A(p,"border-red-300",!e[10]),1024&t&&A(p,"focus:ring-red-500",!e[10]),1024&t&&A(p,"focus:border-red-500",!e[10]),re===(re=se(e))&&oe?oe.p(e,t):(oe&&oe.d(1),oe=re&&re(e),oe&&(oe.c(),oe.m(d,null))),32&t&&M.value!==e[5]&&_(M,e[5]),552&t&&A(M,"border-red-300",e[3].password||!e[9]&&e[5].length>0),552&t&&A(M,"focus:ring-red-500",e[3].password||!e[9]&&e[5].length>0),552&t&&A(M,"focus:border-red-500",e[3].password||!e[9]&&e[5].length>0),e[5].length>0?ie?ie.p(e,t):(ie=Ee(e),ie.c(),ie.m(L,z)):ie&&(ie.d(1),ie=null),e[3].password?ae?ae.p(e,t):(ae=Ie(e),ae.c(),ae.m(L,null)):ae&&(ae.d(1),ae=null),64&t&&E.value!==e[6]&&_(E,e[6]),320&t&&A(E,"border-red-300",!e[8]&&e[6].length>0),320&t&&A(E,"focus:ring-red-500",!e[8]&&e[6].length>0),320&t&&A(E,"focus:border-red-500",!e[8]&&e[6].length>0),ce===(ce=le(e))&&de?de.p(e,t):(de&&de.d(1),de=ce&&ce(e),de&&(de.c(),de.m(P,null))),128&t&&(O.checked=e[7]),me===(me=ue(e))&&ge?ge.p(e,t):(ge&&ge.d(1),ge=me&&me(e),ge&&(ge.c(),ge.m(V,null))),e[2]?pe?pe.p(e,t):(pe=Ve(e),pe.c(),pe.m(i,Y)):pe&&(pe.d(1),pe=null),e[1]?fe?fe.p(e,t):(fe=Ue(e),fe.c(),fe.m(i,G)):fe&&(fe.d(1),fe=null),he!==(he=xe(e))&&(ye.d(1),ye=he(e),ye&&(ye.c(),ye.m(W,null))),131073&t&&Z!==(Z=!e[17]||e[0])&&(W.disabled=Z)},i:e,o:e,d(e){e&&g(n),oe&&oe.d(),ie&&ie.d(),ae&&ae.d(),de&&de.d(),ge&&ge.d(),pe&&pe.d(),fe&&fe.d(),ye.d(),te=!1,s(ne)}}}function Ge(e,t,n){let s,r,o,i,a,l,c,d,u,m,g,p;const f=B();let{isLoading:x=!1}=t,{error:h=""}=t,{success:y=""}=t,{fieldErrors:v={}}=t,b="",w="",k="",C=!1;return e.$$set=e=>{"isLoading"in e&&n(0,x=e.isLoading),"error"in e&&n(1,h=e.error),"success"in e&&n(2,y=e.success),"fieldErrors"in e&&n(3,v=e.fieldErrors)},e.$$.update=()=>{32&e.$$.dirty&&n(12,s=w.length>=8),32&e.$$.dirty&&n(16,r=/[A-Z]/.test(w)),32&e.$$.dirty&&n(15,o=/[a-z]/.test(w)),32&e.$$.dirty&&n(14,i=/\d/.test(w)),32&e.$$.dirty&&n(13,a=/[!@#$%^&*(),.?":{}|<>]/.test(w)),126976&e.$$.dirty&&n(11,l=[s,r,o,i,a].filter(Boolean).length),2048&e.$$.dirty&&n(19,c=0===l?"":l<=2?"Weak":l<=3?"Fair":l<=4?"Good":"Strong"),2048&e.$$.dirty&&n(18,d=0===l?"":l<=2?"text-red-600":l<=3?"text-yellow-600":l<=4?"text-blue-600":"text-green-600"),16&e.$$.dirty&&n(10,u=0===b.length||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b)),6176&e.$$.dirty&&n(9,m=0===w.length||s&&l>=3),96&e.$$.dirty&&n(8,g=0===k.length||w===k),2032&e.$$.dirty&&n(17,p=u&&m&&g&&C&&b.length>0&&w.length>0&&k.length>0)},[x,h,y,v,b,w,k,C,g,m,u,l,s,a,i,o,r,p,d,c,f,function(){p&&!x&&f("register",{email:b.trim(),password:w,confirm_password:k,terms_accepted:C})},function(){b=this.value,n(4,b)},function(){w=this.value,n(5,w)},function(){k=this.value,n(6,k)},function(){C=this.checked,n(7,C)},()=>f("switchMode")]}class Qe extends oe{constructor(e){super(),re(this,e,Ge,Ye,o,{isLoading:0,error:1,success:2,fieldErrors:3})}}function We(t){let n,s,r,o,i,a,l,c,d,p;return{c(){n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',r=y(),o=f("div"),o.innerHTML='<h3 class="text-lg font-medium text-gray-900">Two-Factor Authentication Enabled!</h3> <p class="mt-2 text-sm text-gray-600">Your account is now protected with 2FA. You&#39;ll need to enter a code from your authenticator app each time you sign in.</p>',i=y(),a=f("div"),a.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-800"><strong>Important:</strong> Save your recovery codes in a safe place. You&#39;ll need them if you lose access to your authenticator app.</p></div></div>',l=y(),c=f("button"),c.textContent="Continue to Dashboard",k(s,"class","mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100"),k(a,"class","bg-yellow-50 rounded-lg p-4"),k(c,"type","button"),k(c,"class","w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(n,"class","text-center space-y-4")},m(e,g){m(e,n,g),u(n,s),u(n,r),u(n,o),u(n,i),u(n,a),u(n,l),u(n,c),d||(p=b(c,"click",t[15]),d=!0)},p:e,d(e){e&&g(n),d=!1,p()}}}function Ze(e){let t,n,r,o,i,a,l,c,d,p,x,h,v,w,C,$,L,M,S=e[4].length>0&&!e[6]&&Xe(),z=e[3]&&et(e);function j(e,t){return e[2]?nt:tt}let T=j(e),B=T(e);return{c(){t=f("div"),n=f("div"),r=f("h3"),r.textContent="Step 2: Verify Setup",o=y(),i=f("p"),i.textContent="Enter the 6-digit code from your authenticator app to complete setup",a=y(),l=f("div"),c=f("input"),d=y(),S&&S.c(),p=y(),z&&z.c(),x=y(),h=f("div"),v=f("button"),v.textContent="Back",w=y(),C=f("button"),B.c(),k(r,"class","text-lg font-medium text-gray-900 mb-4"),k(i,"class","text-sm text-gray-600 mb-4"),k(c,"type","text"),k(c,"maxlength","6"),k(c,"pattern","[0-9]6"),k(c,"placeholder","000000"),k(c,"class","block w-full text-center text-2xl font-mono px-3 py-3 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),A(c,"border-red-300",e[4].length>0&&!e[6]),k(l,"class","max-w-xs mx-auto"),k(n,"class","bg-gray-50 rounded-lg p-6 text-center"),k(v,"type","button"),k(v,"class","flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(C,"type","button"),C.disabled=$=!e[6]||e[2],k(C,"class","flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(h,"class","flex space-x-3"),k(t,"class","space-y-4")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(n,o),u(n,i),u(n,a),u(n,l),u(l,c),_(c,e[4]),u(l,d),S&&S.m(l,null),u(t,p),z&&z.m(t,null),u(t,x),u(t,h),u(h,v),u(h,w),u(h,C),B.m(C,null),L||(M=[b(c,"input",e[13]),b(v,"click",e[14]),b(C,"click",e[8])],L=!0)},p(e,n){16&n&&c.value!==e[4]&&_(c,e[4]),80&n&&A(c,"border-red-300",e[4].length>0&&!e[6]),e[4].length>0&&!e[6]?S||(S=Xe(),S.c(),S.m(l,null)):S&&(S.d(1),S=null),e[3]?z?z.p(e,n):(z=et(e),z.c(),z.m(t,x)):z&&(z.d(1),z=null),T!==(T=j(e))&&(B.d(1),B=T(e),B&&(B.c(),B.m(C,null))),68&n&&$!==($=!e[6]||e[2])&&(C.disabled=$)},d(e){e&&g(t),S&&S.d(),z&&z.d(),B.d(),L=!1,s(M)}}}function Ke(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M,S,A;function z(e,t){return e[0]?rt:st}let j=z(e),T=j(e);return{c(){t=f("div"),n=f("div"),r=f("h3"),r.textContent="Step 1: Scan QR Code",o=y(),T.c(),i=y(),a=f("p"),a.textContent="Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)",l=y(),c=f("div"),d=f("h4"),d.textContent="Can't scan? Enter manually:",p=y(),x=f("div"),v=f("code"),w=h(e[1]),C=y(),_=f("button"),_.textContent="Copy",L=y(),M=f("button"),M.textContent="I've added the account to my app",k(r,"class","text-lg font-medium text-gray-900 mb-4"),k(a,"class","mt-4 text-sm text-gray-600"),k(n,"class","bg-gray-50 rounded-lg p-6 text-center"),k(d,"class","text-sm font-medium text-blue-900 mb-2"),k(v,"class","flex-1 bg-white px-3 py-2 rounded border text-sm font-mono"),k(_,"type","button"),k(_,"class","px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"),k(x,"class","flex items-center space-x-2"),k(c,"class","bg-blue-50 rounded-lg p-4"),k(M,"type","button"),k(M,"class","w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(t,"class","space-y-4")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(n,o),T.m(n,null),u(n,i),u(n,a),u(t,l),u(t,c),u(c,d),u(c,p),u(c,x),u(x,v),u(v,w),u(x,C),u(x,_),u(t,L),u(t,M),S||(A=[b(_,"click",e[10]),b(M,"click",e[12])],S=!0)},p(e,t){j===(j=z(e))&&T?T.p(e,t):(T.d(1),T=j(e),T&&(T.c(),T.m(n,i))),2&t&&$(w,e[1])},d(e){e&&g(t),T.d(),S=!1,s(A)}}}function Xe(e){let t;return{c(){t=f("p"),t.textContent="Please enter a 6-digit code",k(t,"class","mt-1 text-sm text-red-600")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function et(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[3]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","rounded-md bg-red-50 p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){8&t&&$(a,e[3])},d(e){e&&g(t)}}}function tt(e){let t;return{c(){t=h("Verify & Enable")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function nt(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n            Verifying..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white inline"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function st(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>',k(n,"class","w-48 h-48 mx-auto bg-gray-200 rounded-lg flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function rt(e){let t,n,s;return{c(){t=f("div"),n=f("img"),l(n.src,s=e[0])||k(n,"src",s),k(n,"alt","2FA QR Code"),k(n,"class","w-48 h-48 mx-auto"),k(t,"class","bg-white p-4 rounded-lg inline-block")},m(e,s){m(e,t,s),u(t,n)},p(e,t){1&t&&!l(n.src,s=e[0])&&k(n,"src",s)},d(e){e&&g(t)}}}function ot(t){let n,s,r,o;return{c(){n=f("div"),s=f("button"),s.textContent="Skip for now",k(s,"type","button"),k(s,"class","text-sm text-gray-500 hover:text-gray-700"),k(n,"class","text-center")},m(e,i){m(e,n,i),u(n,s),r||(o=b(s,"click",t[9]),r=!0)},p:e,d(e){e&&g(n),r=!1,o()}}}function it(t){let n,s,r,o;function i(e,t){return 1===e[5]?Ke:2===e[5]?Ze:3===e[5]?We:void 0}let a=i(t),l=a&&a(t),c=3!==t[5]&&ot(t);return{c(){n=f("div"),s=f("div"),s.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Set up Two-Factor Authentication</h2> <p class="mt-2 text-sm text-gray-600">Add an extra layer of security to your account</p>',r=y(),l&&l.c(),o=y(),c&&c.c(),k(s,"class","text-center"),k(n,"class","max-w-md mx-auto space-y-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),l&&l.m(n,null),u(n,o),c&&c.m(n,null)},p(e,[t]){a===(a=i(e))&&l?l.p(e,t):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(n,o))),3!==e[5]?c?c.p(e,t):(c=ot(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i:e,o:e,d(e){e&&g(n),l&&l.d(),c&&c.d()}}}function at(e,t,n){let s;const r=B();let{qrCodeUrl:o=""}=t,{secret:i=""}=t,{isLoading:a=!1}=t,{error:l=""}=t,c="",d=1;return e.$$set=e=>{"qrCodeUrl"in e&&n(0,o=e.qrCodeUrl),"secret"in e&&n(1,i=e.secret),"isLoading"in e&&n(2,a=e.isLoading),"error"in e&&n(3,l=e.error)},e.$$.update=()=>{16&e.$$.dirty&&n(6,s=6===c.length&&/^\d{6}$/.test(c))},[o,i,a,l,c,d,s,r,function(){s&&r("verify",{code:c})},function(){r("cancel")},function(){navigator.clipboard.writeText(i).then(()=>{})},function(){n(5,d=3)},()=>n(5,d=2),function(){c=this.value,n(4,c)},()=>n(5,d=1),()=>r("complete")]}class lt extends oe{constructor(e){super(),re(this,e,at,it,o,{qrCodeUrl:0,secret:1,isLoading:2,error:3,showSuccess:11})}get showSuccess(){return this.$$.ctx[11]}}function ct(e){let t,n,s,r;return{c(){t=f("p"),n=h("Signing in as "),s=f("span"),r=h(e[2]),k(s,"class","font-medium"),k(t,"class","text-sm text-gray-500")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(s,r)},p(e,t){4&t&&$(r,e[2])},d(e){e&&g(t)}}}function dt(e){let t;return{c(){t=f("p"),t.textContent="Please enter a 6-digit code",k(t,"class","mt-1 text-sm text-red-600 text-center")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function ut(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[1]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","rounded-md bg-red-50 p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){2&t&&$(a,e[1])},d(e){e&&g(t)}}}function mt(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="inline-flex items-center px-4 py-2 text-sm text-gray-600"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n          Verifying code...</div>',k(t,"class","text-center")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function gt(t){let n,s,r;return{c(){n=f("button"),n.textContent="Verify Code",k(n,"type","button"),k(n,"class","w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[6]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function pt(t){let n,r,o,i,a,l,c,d,p,x,h,v,w,C,$,L,M,S,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U=t[2]&&ct(t),q=t[3].length>0&&!t[4]&&dt(),J=t[1]&&ut(t),Y=t[0]&&mt(),G=t[4]&&!t[0]&&gt(t);return{c(){n=f("div"),r=f("div"),o=f("div"),o.innerHTML='<svg class="h-6 w-6 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>',i=y(),a=f("h2"),a.textContent="Two-Factor Authentication",l=y(),c=f("p"),c.textContent="Enter the 6-digit code from your authenticator app",d=y(),U&&U.c(),p=y(),x=f("div"),h=f("div"),v=f("label"),v.textContent="Authentication Code",w=y(),C=f("div"),$=f("input"),L=y(),q&&q.c(),M=y(),J&&J.c(),S=y(),Y&&Y.c(),z=y(),G&&G.c(),j=y(),T=f("div"),B=f("p"),B.textContent="The code will automatically verify when you enter all 6 digits",H=y(),P=f("div"),E=f("button"),E.textContent="Didn't receive a code? Try again",F=y(),I=f("div"),D=f("button"),D.textContent="← Back to login",N=y(),O=f("div"),O.innerHTML='<h4 class="text-sm font-medium text-gray-900 mb-2">Having trouble?</h4> <ul class="text-xs text-gray-600 space-y-1"><li>• Make sure your device&#39;s time is correct</li> <li>• Try generating a new code in your authenticator app</li> <li>• Check that you&#39;re using the right account in your app</li></ul>',k(o,"class","mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100"),k(a,"class","mt-4 text-2xl font-bold text-gray-900"),k(c,"class","mt-2 text-sm text-gray-600"),k(r,"class","text-center"),k(v,"for","verification-code"),k(v,"class","block text-sm font-medium text-gray-700 text-center mb-2"),k($,"id","verification-code"),k($,"type","text"),k($,"maxlength","6"),k($,"pattern","[0-9]6"),k($,"placeholder","000000"),k($,"autocomplete","one-time-code"),k($,"class","block w-full text-center text-2xl font-mono px-3 py-3 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),A($,"border-red-300",t[3].length>0&&!t[4]),A($,"border-green-300",t[4]),k(C,"class","max-w-xs mx-auto"),k(B,"class","text-xs text-gray-500"),k(E,"type","button"),k(E,"class","text-sm text-indigo-600 hover:text-indigo-500"),k(D,"type","button"),k(D,"class","text-sm text-gray-500 hover:text-gray-700"),k(P,"class","space-y-1"),k(T,"class","text-center space-y-2"),k(x,"class","space-y-4"),k(O,"class","bg-gray-50 rounded-lg p-4"),k(n,"class","max-w-md mx-auto space-y-6")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),u(r,l),u(r,c),u(r,d),U&&U.m(r,null),u(n,p),u(n,x),u(x,h),u(h,v),u(h,w),u(h,C),u(C,$),_($,t[3]),u(C,L),q&&q.m(C,null),u(x,M),J&&J.m(x,null),u(x,S),Y&&Y.m(x,null),u(x,z),G&&G.m(x,null),u(x,j),u(x,T),u(T,B),u(T,H),u(T,P),u(P,E),u(P,F),u(P,I),u(I,D),u(n,N),u(n,O),R||(V=[b($,"input",t[8]),b(E,"click",t[9]),b(D,"click",t[7])],R=!0)},p(e,[t]){e[2]?U?U.p(e,t):(U=ct(e),U.c(),U.m(r,null)):U&&(U.d(1),U=null),8&t&&$.value!==e[3]&&_($,e[3]),24&t&&A($,"border-red-300",e[3].length>0&&!e[4]),16&t&&A($,"border-green-300",e[4]),e[3].length>0&&!e[4]?q||(q=dt(),q.c(),q.m(C,null)):q&&(q.d(1),q=null),e[1]?J?J.p(e,t):(J=ut(e),J.c(),J.m(x,S)):J&&(J.d(1),J=null),e[0]?Y||(Y=mt(),Y.c(),Y.m(x,z)):Y&&(Y.d(1),Y=null),e[4]&&!e[0]?G?G.p(e,t):(G=gt(e),G.c(),G.m(x,j)):G&&(G.d(1),G=null)},i:e,o:e,d(e){e&&g(n),U&&U.d(),q&&q.d(),J&&J.d(),Y&&Y.d(),G&&G.d(),R=!1,s(V)}}}function ft(e,t,n){let s;const r=B();let{isLoading:o=!1}=t,{error:i=""}=t,{email:a=""}=t,l="";function c(){s&&r("verify",{code:l})}return e.$$set=e=>{"isLoading"in e&&n(0,o=e.isLoading),"error"in e&&n(1,i=e.error),"email"in e&&n(2,a=e.email)},e.$$.update=()=>{8&e.$$.dirty&&n(4,s=6===l.length&&/^\d{6}$/.test(l)),17&e.$$.dirty&&s&&!o&&c()},[o,i,a,l,s,r,c,function(){r("back")},function(){l=this.value,n(3,l)},()=>r("resend")]}class xt extends oe{constructor(e){super(),re(this,e,ft,pt,o,{isLoading:0,error:1,email:2})}}function ht(e){let t,n,s={qrCodeUrl:e[5],secret:e[6],isLoading:e[1],error:e[2]};return t=new lt({props:s}),e[20](t),t.$on("verify",e[13]),t.$on("cancel",e[17]),t.$on("complete",e[18]),{c(){ee(t.$$.fragment)},m(e,s){te(t,e,s),n=!0},p(e,n){const s={};32&n&&(s.qrCodeUrl=e[5]),64&n&&(s.secret=e[6]),2&n&&(s.isLoading=e[1]),4&n&&(s.error=e[2]),t.$set(s)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(n){e[20](null),ne(t,n)}}}function yt(e){let t,n;return t=new xt({props:{isLoading:e[1],error:e[2],email:e[7]}}),t.$on("verify",e[11]),t.$on("back",e[16]),t.$on("resend",e[19]),{c(){ee(t.$$.fragment)},m(e,s){te(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.isLoading=e[1]),4&n&&(s.error=e[2]),128&n&&(s.email=e[7]),t.$set(s)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function vt(e){let t,n;return t=new Qe({props:{isLoading:e[1],error:e[2],success:e[3],fieldErrors:e[4]}}),t.$on("register",e[10]),t.$on("switchMode",e[14]),{c(){ee(t.$$.fragment)},m(e,s){te(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.isLoading=e[1]),4&n&&(s.error=e[2]),8&n&&(s.success=e[3]),16&n&&(s.fieldErrors=e[4]),t.$set(s)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function bt(e){let t,n,s,r,o,i,a;return t=new Te({props:{isLoading:e[1],error:e[2]}}),t.$on("login",e[9]),t.$on("switchMode",e[15]),{c(){ee(t.$$.fragment),n=y(),s=f("div"),r=f("button"),r.textContent="Set up Two-Factor Authentication",k(r,"type","button"),k(r,"class","text-sm text-gray-500 hover:text-gray-700"),k(s,"class","mt-6 text-center")},m(l,c){te(t,l,c),m(l,n,c),m(l,s,c),u(s,r),o=!0,i||(a=b(r,"click",e[12]),i=!0)},p(e,n){const s={};2&n&&(s.isLoading=e[1]),4&n&&(s.error=e[2]),t.$set(s)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){W(t.$$.fragment,e),o=!1},d(e){e&&(g(n),g(s)),ne(t,e),i=!1,a()}}}function wt(e){let t,n,s,r,o;const i=[bt,vt,yt,ht],a=[];function l(e,t){return"login"===e[0]?0:"register"===e[0]?1:"2fa-verify"===e[0]?2:"2fa-setup"===e[0]?3:-1}return~(s=l(e))&&(r=a[s]=i[s](e)),{c(){t=f("div"),n=f("div"),r&&r.c(),k(n,"class","max-w-md w-full"),k(t,"class","min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8")},m(e,r){m(e,t,r),u(t,n),~s&&a[s].m(n,null),o=!0},p(e,[t]){let o=s;s=l(e),s===o?~s&&a[s].p(e,t):(r&&(Y(),W(a[o],1,1,()=>{a[o]=null}),G()),~s?(r=a[s],r?r.p(e,t):(r=a[s]=i[s](e),r.c()),Q(r,1),r.m(n,null)):r=null)},i(e){o||(Q(r),o=!0)},o(e){W(r),o=!1},d(e){e&&g(t),~s&&a[s].d()}}}function kt(e,t,n){let s,r="login",o=!1,i="",a="",l={},c="",d="",u="";function m(){n(0,r="login"),n(2,i=""),n(7,u="")}return[r,o,i,a,l,c,d,u,s,async function(e){const{email:t,password:s,totpCode:a}=e.detail;n(1,o=!0),n(2,i="");try{const e=await ve.login(t,s,a);e.success||(e.message?.toLowerCase().includes("2fa")||e.message?.toLowerCase().includes("totp")?(n(7,u=t),n(0,r="2fa-verify")):n(2,i=e.message||"Login failed"))}catch(e){n(2,i="An unexpected error occurred")}finally{n(1,o=!1)}},async function(e){const{email:t,password:s,confirm_password:c,terms_accepted:d}=e.detail;n(1,o=!0),n(2,i=""),n(3,a=""),n(4,l={});try{const e=await ve.register(t,s,c,d);e.success?e.autoLogin?(n(3,a="Account created successfully! Welcome to No Drake in the House."),setTimeout(()=>{},1500)):(n(3,a="Account created successfully! You can now sign in."),n(0,r="login")):e.errors?(n(4,l={}),e.errors.forEach(e=>{n(4,l[e.field]=e.message,l)}),n(2,i=e.message||"Please fix the errors below")):n(2,i=e.message||"Registration failed")}catch(e){n(2,i="An unexpected error occurred")}finally{n(1,o=!1)}},async function(e){const{code:t}=e.detail;n(1,o=!0),n(2,i="");try{const e=await ve.verify2FA(t);e.success||n(2,i=e.message||"Invalid verification code")}catch(e){n(2,i="An unexpected error occurred")}finally{n(1,o=!1)}},async function(){n(1,o=!0),n(2,i="");try{const e=await ve.setup2FA();e.success?(n(5,c=e.qrCodeUrl),n(6,d=e.secret),n(0,r="2fa-setup")):n(2,i=e.message||"Failed to setup 2FA")}catch(e){n(2,i="An unexpected error occurred")}finally{n(1,o=!1)}},async function(e){const{code:t}=e.detail;n(1,o=!0),n(2,i="");try{const e=await ve.verify2FA(t);e.success?s?.showSuccess():n(2,i=e.message||"Invalid verification code")}catch(e){n(2,i="An unexpected error occurred")}finally{n(1,o=!1)}},function(){n(0,r="login"),n(2,i=""),n(3,a=""),n(4,l={})},function(){n(0,r="register"),n(2,i=""),n(3,a=""),n(4,l={})},m,function(){n(0,r="login"),n(2,i=""),n(5,c=""),n(6,d="")},function(){n(0,r="login"),n(5,c=""),n(6,d="")},()=>{n(2,i="Please try logging in again"),m()},function(e){P[e?"unshift":"push"](()=>{s=e,n(8,s)})}]}class Ct extends oe{constructor(e){super(),re(this,e,kt,wt,o,{})}}const $t=ae({connections:[],isLoading:!1,error:null}),_t=le($t,e=>e.connections.filter(e=>"active"===e.status)),Lt=le($t,e=>e.connections.find(e=>"spotify"===e.provider)),Mt=le(Lt,e=>"active"===e?.status),St={fetchConnections:async()=>{$t.update(e=>({...e,isLoading:!0,error:null}));try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/connections",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success?$t.update(e=>({...e,connections:n.data,isLoading:!1})):$t.update(e=>({...e,error:n.message,isLoading:!1}))}catch(e){$t.update(e=>({...e,error:"Failed to fetch connections",isLoading:!1}))}},initiateSpotifyAuth:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/auth",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();if(!n.success)throw new Error(n.message);window.location.href=n.data.auth_url}catch(e){$t.update(t=>({...t,error:`Failed to initiate Spotify auth: ${e instanceof Error?e.message:"Unknown error"}`}))}},handleSpotifyCallback:async(e,t)=>{try{const n=localStorage.getItem("auth_token"),s=await fetch("http://localhost:3000/api/v1/spotify/callback",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({code:e,state:t})}),r=await s.json();return r.success?(await St.fetchConnections(),{success:!0}):{success:!1,message:r.message}}catch(e){return{success:!1,message:"Failed to complete Spotify connection"}}},disconnectSpotify:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/connection",{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),n=await t.json();return n.success?(await St.fetchConnections(),{success:!0}):{success:!1,message:n.message}}catch(e){return{success:!1,message:"Failed to disconnect Spotify"}}},checkSpotifyHealth:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/health",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();if(n.success)return await St.fetchConnections(),n.data}catch(e){console.error("Spotify health check failed:",e)}}},At=ae({entries:[],isLoading:!1,error:null,searchResults:[],isSearching:!1});le(At,e=>e.entries.map(e=>e.artist));const zt=le(At,e=>e.entries.length),jt=le(At,e=>{const t=e.entries.flatMap(e=>e.tags);return[...new Set(t)].sort()}),Tt={fetchDnpList:async()=>{At.update(e=>({...e,isLoading:!0,error:null}));try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/dnp/list",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success?At.update(e=>({...e,entries:n.data,isLoading:!1})):At.update(e=>({...e,error:n.message,isLoading:!1}))}catch(e){At.update(e=>({...e,error:"Failed to fetch DNP list",isLoading:!1}))}},searchArtists:async(e,t=10)=>{if(e.trim()){At.update(e=>({...e,isSearching:!0}));try{const n=localStorage.getItem("auth_token"),s=await fetch(`http://localhost:3000/api/v1/dnp/search?q=${encodeURIComponent(e)}&limit=${t}`,{headers:{Authorization:`Bearer ${n}`}}),r=await s.json();r.success?At.update(e=>({...e,searchResults:r.data,isSearching:!1})):At.update(e=>({...e,error:r.message,isSearching:!1}))}catch(e){At.update(e=>({...e,error:"Artist search failed",isSearching:!1}))}}else At.update(e=>({...e,searchResults:[]}))},addArtist:async(e,t=[],n)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch("http://localhost:3000/api/v1/dnp/artists",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({query:e,tags:t,note:n})}),o=await r.json();return o.success?(await Tt.fetchDnpList(),{success:!0,data:o.data}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to add artist to DNP list"}}},removeArtist:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/dnp/artists/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?(await Tt.fetchDnpList(),{success:!0}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to remove artist from DNP list"}}},updateEntry:async(e,t,n)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch(`http://localhost:3000/api/v1/dnp/artists/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({tags:t,note:n})}),o=await r.json();return o.success?(await Tt.fetchDnpList(),{success:!0,data:o.data}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to update DNP entry"}}},bulkImport:async(e,t)=>{try{const n=localStorage.getItem("auth_token"),s=await fetch("http://localhost:3000/api/v1/dnp/import",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({data:e,format:t})}),r=await s.json();return r.success?(await Tt.fetchDnpList(),{success:!0,data:r.data}):{success:!1,message:r.message}}catch(e){return{success:!1,message:"Bulk import failed"}}},exportList:async(e="json")=>{try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/dnp/export?format=${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?{success:!0,data:s.data}:{success:!1,message:s.message}}catch(e){return{success:!1,message:"Export failed"}}},clearSearch:()=>{At.update(e=>({...e,searchResults:[]}))}};function Bt(t){let n,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z=t[0]?.email+"";return{c(){n=f("nav"),r=f("div"),o=f("div"),i=f("div"),i.innerHTML='<h1 class="text-xl font-semibold text-gray-900">No Drake in the House</h1>',a=y(),l=f("div"),c=f("span"),d=h(Z),p=y(),x=f("button"),x.textContent="Settings",v=y(),w=f("button"),w.textContent="Sign out",C=y(),_=f("div"),L=f("div"),M=f("nav"),S=f("button"),A=h("Overview"),j=y(),T=f("button"),B=h("Connections"),P=y(),E=f("button"),F=h("DNP List ("),I=h(t[2]),D=h(")"),O=y(),R=f("button"),V=h("Enforcement"),q=y(),J=f("button"),Y=h("Community Lists"),k(i,"class","flex items-center"),k(c,"class","text-sm text-gray-700"),k(x,"class","text-sm text-gray-500 hover:text-gray-700"),k(w,"class","text-sm text-gray-500 hover:text-gray-700"),k(l,"class","flex items-center space-x-4"),k(o,"class","flex justify-between h-16"),k(r,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),k(n,"class","bg-white shadow-sm border-b border-gray-200"),k(S,"class",z="py-4 px-1 border-b-2 font-medium text-sm "+("overview"===t[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(T,"class",H="py-4 px-1 border-b-2 font-medium text-sm "+("connections"===t[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(E,"class",N="py-4 px-1 border-b-2 font-medium text-sm "+("dnp"===t[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(R,"class",U="py-4 px-1 border-b-2 font-medium text-sm "+("enforcement"===t[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(J,"class",G="py-4 px-1 border-b-2 font-medium text-sm "+("community"===t[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(M,"class","flex space-x-8"),k(M,"aria-label","Tabs"),k(L,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),k(_,"class","bg-white shadow-sm")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(l,c),u(c,d),u(l,p),u(l,x),u(l,v),u(l,w),m(e,C,s),m(e,_,s),u(_,L),u(L,M),u(M,S),u(S,A),u(M,j),u(M,T),u(T,B),u(M,P),u(M,E),u(E,F),u(E,I),u(E,D),u(M,O),u(M,R),u(R,V),u(M,q),u(M,J),u(J,Y),Q||(W=[b(x,"click",t[5]),b(w,"click",t[3]),b(S,"click",t[6]),b(T,"click",t[7]),b(E,"click",t[8]),b(R,"click",t[9]),b(J,"click",t[10])],Q=!0)},p(e,[t]){1&t&&Z!==(Z=e[0]?.email+"")&&$(d,Z),2&t&&z!==(z="py-4 px-1 border-b-2 font-medium text-sm "+("overview"===e[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(S,"class",z),2&t&&H!==(H="py-4 px-1 border-b-2 font-medium text-sm "+("connections"===e[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(T,"class",H),4&t&&$(I,e[2]),2&t&&N!==(N="py-4 px-1 border-b-2 font-medium text-sm "+("dnp"===e[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(E,"class",N),2&t&&U!==(U="py-4 px-1 border-b-2 font-medium text-sm "+("enforcement"===e[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(R,"class",U),2&t&&G!==(G="py-4 px-1 border-b-2 font-medium text-sm "+("community"===e[1]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(J,"class",G)},i:e,o:e,d(e){e&&(g(n),g(C),g(_)),Q=!1,s(W)}}}function Ht(e,t,n){let s,r,o;function i(e){ke(e)}d(e,ye,e=>n(0,s=e)),d(e,be,e=>n(1,r=e)),d(e,zt,e=>n(2,o=e));return[s,r,o,function(){ve.logout()},i,()=>i("profile"),()=>i("overview"),()=>i("connections"),()=>i("dnp"),()=>i("enforcement"),()=>i("community")]}class Pt extends oe{constructor(e){super(),re(this,e,Ht,Bt,o,{})}}function Et(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[1]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","mb-6 bg-red-50 border border-red-200 rounded-md p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){2&t&&$(a,e[1])},d(e){e&&g(t)}}}function Ft(e){let t,n,s,r=e[2].status+"";return{c(){t=f("span"),n=h(r),k(t,"class",s="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Yt(e[2].status))},m(e,s){m(e,t,s),u(t,n)},p(e,o){4&o&&r!==(r=e[2].status+"")&&$(n,r),4&o&&s!==(s="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Yt(e[2].status))&&k(t,"class",s)},d(e){e&&g(t)}}}function It(t){let n;return{c(){n=f("p"),n.textContent="Connect your Spotify account to manage your music library",k(n,"class","text-sm text-gray-500")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Dt(e){let t,n,s,r,o,i,a=Gt(e[2].created_at)+"",l=e[2].provider_user_id&&Nt(e),c=e[2].scopes.length>0&&Ot(e);return{c(){t=f("p"),n=h("Connected "),s=h(a),r=y(),l&&l.c(),o=y(),c&&c.c(),i=v(),k(t,"class","text-sm text-gray-500")},m(e,a){m(e,t,a),u(t,n),u(t,s),u(t,r),l&&l.m(t,null),m(e,o,a),c&&c.m(e,a),m(e,i,a)},p(e,n){4&n&&a!==(a=Gt(e[2].created_at)+"")&&$(s,a),e[2].provider_user_id?l?l.p(e,n):(l=Nt(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),e[2].scopes.length>0?c?c.p(e,n):(c=Ot(e),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(e){e&&(g(t),g(o),g(i)),l&&l.d(),c&&c.d(e)}}}function Nt(e){let t,n,s=e[2].provider_user_id+"";return{c(){t=h("• User ID: "),n=h(s)},m(e,s){m(e,t,s),m(e,n,s)},p(e,t){4&t&&s!==(s=e[2].provider_user_id+"")&&$(n,s)},d(e){e&&(g(t),g(n))}}}function Ot(e){let t,n,s,r=e[2].scopes.join(", ")+"";return{c(){t=f("p"),n=h("Permissions: "),s=h(r),k(t,"class","text-xs text-gray-400 mt-1")},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,t){4&t&&r!==(r=e[2].scopes.join(", ")+"")&&$(s,r)},d(e){e&&g(t)}}}function Rt(e){let t,n,s;function r(e,t){return e[0]?qt:Ut}let o=r(e),i=o(e);return{c(){t=f("button"),i.c(),t.disabled=e[0],k(t,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed")},m(r,o){m(r,t,o),i.m(t,null),n||(s=b(t,"click",e[3]),n=!0)},p(e,n){o!==(o=r(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t,null))),1&n&&(t.disabled=e[0])},d(e){e&&g(t),i.d(),n=!1,s()}}}function Vt(t){let n,r,o,i,a;return{c(){n=f("button"),n.textContent="Check Health",r=y(),o=f("button"),o.textContent="Disconnect",k(n,"class","inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(o,"class","inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500")},m(e,s){m(e,n,s),m(e,r,s),m(e,o,s),i||(a=[b(n,"click",t[5]),b(o,"click",t[4])],i=!0)},p:e,d(e){e&&(g(n),g(r),g(o)),i=!1,s(a)}}}function Ut(e){let t;return{c(){t=h("Connect")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function qt(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n                  Connecting..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function Jt(t){let n,s,r,o,i,a,l,c,d,p,x,h,v,b,w,C,$,_,L,M,S,A,z,j,T,B=t[1]&&Et(t),H=t[2]&&Ft(t);function P(e,t){return e[2]?Dt:It}let E=P(t),F=E(t);function I(e,t){return e[2]?Vt:Rt}let D=I(t),N=D(t);return{c(){n=f("div"),s=f("div"),s.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Service Connections</h2> <p class="mt-1 text-sm text-gray-600">Connect your streaming service accounts to manage your blocklist across platforms.</p>',r=y(),B&&B.c(),o=y(),i=f("div"),a=f("ul"),l=f("li"),c=f("div"),d=f("div"),p=f("div"),p.innerHTML='<div class="h-10 w-10 rounded-full bg-green-500 flex items-center justify-center"><svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"></path></svg></div>',x=y(),h=f("div"),v=f("div"),b=f("p"),b.textContent="Spotify",w=y(),H&&H.c(),C=y(),$=f("div"),F.c(),_=y(),L=f("div"),N.c(),M=y(),S=f("li"),S.innerHTML='<div class="px-4 py-4 flex items-center justify-between opacity-50"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-gray-400 flex items-center justify-center"><svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M23.997 6.124c0-.738-.065-1.47-.24-2.19-.317-1.31-1.062-2.31-2.18-3.043C21.003.517 20.373.285 19.7.164c-.517-.093-1.038-.135-1.564-.15-.04-.001-.08-.004-.12-.004H5.986c-.04 0-.08.003-.12.004-.526.015-1.047.057-1.564.15-.673.121-1.303.353-1.877.727C1.307 1.624.562 2.624.245 3.934.07 4.654.005 5.386.005 6.124v11.748c0 .738.065 1.47.24 2.19.317 1.31 1.062 2.31 2.18 3.043.574.374 1.204.606 1.877.727.517.093 1.038.135 1.564.15.04.001.08.004.12.004h12.014c.04 0 .08-.003.12-.004.526-.015 1.047-.057 1.564-.15.673-.121 1.303-.353 1.877-.727 1.118-.733 1.863-1.733 2.18-3.043.175-.72.24-1.452.24-2.19V6.124zM12.001 4.009c2.47 0 4.471 2.001 4.471 4.471s-2.001 4.471-4.471 4.471-4.471-2.001-4.471-4.471 2.001-4.471 4.471-4.471zm0 7.542c1.693 0 3.071-1.378 3.071-3.071s-1.378-3.071-3.071-3.071-3.071 1.378-3.071 3.071 1.378 3.071 3.071 3.071z"></path></svg></div></div> <div class="ml-4"><div class="flex items-center"><p class="text-sm font-medium text-gray-900">Apple Music</p> <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-gray-600 bg-gray-100">Coming Soon</span></div> <p class="text-sm text-gray-500 mt-1">Apple Music integration will be available in a future update</p></div></div> <button disabled="" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed">Coming Soon</button></div>',A=y(),z=f("li"),z.innerHTML='<div class="px-4 py-4 flex items-center justify-between opacity-50"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-red-500 flex items-center justify-center"><svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></div></div> <div class="ml-4"><div class="flex items-center"><p class="text-sm font-medium text-gray-900">YouTube Music</p> <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-gray-600 bg-gray-100">Coming Soon</span></div> <p class="text-sm text-gray-500 mt-1">YouTube Music integration will be available in a future update</p></div></div> <button disabled="" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed">Coming Soon</button></div>',j=y(),T=f("div"),T.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">About Service Connections</h3> <div class="mt-2 text-sm text-blue-700"><p>Service connections allow you to apply your Do-Not-Play list across different streaming platforms. \n            Each connection is secured with OAuth 2.0 and only requests the minimum permissions needed to manage your blocklist.</p> <ul class="list-disc list-inside mt-2 space-y-1"><li>Spotify: Full library management and playlist modification</li> <li>Apple Music: Limited library access (coming soon)</li> <li>YouTube Music: Browser extension support only (coming soon)</li></ul></div></div></div>',k(s,"class","mb-6"),k(p,"class","flex-shrink-0 h-10 w-10"),k(b,"class","text-sm font-medium text-gray-900"),k(v,"class","flex items-center"),k($,"class","mt-1"),k(h,"class","ml-4"),k(d,"class","flex items-center"),k(L,"class","flex items-center space-x-2"),k(c,"class","px-4 py-4 flex items-center justify-between"),k(a,"class","divide-y divide-gray-200"),k(i,"class","bg-white shadow overflow-hidden sm:rounded-md"),k(T,"class","mt-6 bg-blue-50 border border-blue-200 rounded-md p-4"),k(n,"class","px-4 py-6 sm:px-0")},m(e,t){m(e,n,t),u(n,s),u(n,r),B&&B.m(n,null),u(n,o),u(n,i),u(i,a),u(a,l),u(l,c),u(c,d),u(d,p),u(d,x),u(d,h),u(h,v),u(v,b),u(v,w),H&&H.m(v,null),u(h,C),u(h,$),F.m($,null),u(c,_),u(c,L),N.m(L,null),u(a,M),u(a,S),u(a,A),u(a,z),u(n,j),u(n,T)},p(e,[t]){e[1]?B?B.p(e,t):(B=Et(e),B.c(),B.m(n,o)):B&&(B.d(1),B=null),e[2]?H?H.p(e,t):(H=Ft(e),H.c(),H.m(v,null)):H&&(H.d(1),H=null),E===(E=P(e))&&F?F.p(e,t):(F.d(1),F=E(e),F&&(F.c(),F.m($,null))),D===(D=I(e))&&N?N.p(e,t):(N.d(1),N=D(e),N&&(N.c(),N.m(L,null)))},i:e,o:e,d(e){e&&g(n),B&&B.d(),H&&H.d(),F.d(),N.d()}}}function Yt(e){switch(e){case"active":return"text-green-600 bg-green-100";case"expired":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}function Gt(e){return new Date(e).toLocaleDateString()}function Qt(e,t,n){let s;d(e,Lt,e=>n(2,s=e));let r=!1,o="";return T(()=>{const e=new URLSearchParams(window.location.search),t=e.get("code"),s=e.get("state");t&&s&&(!async function(e,t){n(0,r=!0),n(1,o="");const s=await St.handleSpotifyCallback(e,t);s.success||n(1,o=s.message||"Failed to connect Spotify");n(0,r=!1)}(t,s),window.history.replaceState({},document.title,window.location.pathname))}),[r,o,s,async function(){n(0,r=!0),n(1,o="");try{await St.initiateSpotifyAuth()}catch(e){n(1,o="Failed to initiate Spotify connection"),n(0,r=!1)}},async function(){const e=await St.disconnectSpotify();e.success||n(1,o=e.message||"Failed to disconnect Spotify")},async function(){await St.checkSpotifyHealth()}]}class Wt extends oe{constructor(e){super(),re(this,e,Qt,Jt,o,{})}}function Zt(e,t,n){const s=e.slice();return s[17]=t[n],s}function Kt(e,t,n){const s=e.slice();return s[20]=t[n],s}function Xt(e,t,n){const s=e.slice();return s[17]=t[n],s}function en(t){let n,s,r;return{c(){n=f("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',k(n,"type","button"),k(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[9]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function tn(e){let t,n=Z(e[6].searchResults),s=[];for(let t=0;t<n.length;t+=1)s[t]=an(Kt(e,n,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm")},m(e,n){m(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,r){if(320&r){let o;for(n=Z(e[6].searchResults),o=0;o<n.length;o+=1){const i=Kt(e,n,o);s[o]?s[o].p(i,r):(s[o]=an(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&g(t),p(s,e)}}}function nn(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function sn(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[20].metadata.image)||k(t,"src",n),k(t,"alt",s=e[20].canonical_name),k(t,"class","h-8 w-8 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){64&r&&!l(t.src,n=e[20].metadata.image)&&k(t,"src",n),64&r&&s!==(s=e[20].canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function rn(e){let t,n,s=e[20].metadata.genres.slice(0,2).join(", ")+"";return{c(){t=f("div"),n=h(s),k(t,"class","text-xs text-gray-500")},m(e,s){m(e,t,s),u(t,n)},p(e,t){64&t&&s!==(s=e[20].metadata.genres.slice(0,2).join(", ")+"")&&$(n,s)},d(e){e&&g(t)}}}function on(e){let t,n,s,r,o=e[17].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){64&s&&o!==(o=e[17].name+"")&&$(n,o),64&s&&r!==(r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function an(e){let t,n,s,r,o,i,a,l,c,d,x,v,w,C=e[20].canonical_name+"";function _(e,t){return e[20].metadata.image?sn:nn}let L=_(e),M=L(e),S=e[20].metadata.genres&&e[20].metadata.genres.length>0&&rn(e),A=Z(yn(e[20])),z=[];for(let t=0;t<A.length;t+=1)z[t]=on(Xt(e,A,t));function j(){return e[13](e[20])}return{c(){t=f("button"),n=f("div"),s=f("div"),M.c(),r=y(),o=f("div"),i=f("div"),a=h(C),l=y(),S&&S.c(),c=y(),d=f("div");for(let e=0;e<z.length;e+=1)z[e].c();x=y(),k(i,"class","text-sm font-medium text-gray-900"),k(s,"class","flex items-center space-x-3"),k(d,"class","flex space-x-1"),k(n,"class","flex items-center justify-between"),k(t,"type","button"),k(t,"class","w-full text-left px-4 py-2 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none")},m(e,g){m(e,t,g),u(t,n),u(n,s),M.m(s,null),u(s,r),u(s,o),u(o,i),u(i,a),u(o,l),S&&S.m(o,null),u(n,c),u(n,d);for(let e=0;e<z.length;e+=1)z[e]&&z[e].m(d,null);u(t,x),v||(w=b(t,"click",j),v=!0)},p(t,n){if(L===(L=_(e=t))&&M?M.p(e,n):(M.d(1),M=L(e),M&&(M.c(),M.m(s,r))),64&n&&C!==(C=e[20].canonical_name+"")&&$(a,C),e[20].metadata.genres&&e[20].metadata.genres.length>0?S?S.p(e,n):(S=rn(e),S.c(),S.m(o,null)):S&&(S.d(1),S=null),64&n){let t;for(A=Z(yn(e[20])),t=0;t<A.length;t+=1){const s=Xt(e,A,t);z[t]?z[t].p(s,n):(z[t]=on(s),z[t].c(),z[t].m(d,null))}for(;t<z.length;t+=1)z[t].d(1);z.length=A.length}},d(e){e&&g(t),M.d(),S&&S.d(),p(z,e),v=!1,w()}}}function ln(e){let t;return{c(){t=f("div"),t.innerHTML='<svg class="animate-spin mx-auto h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-gray-500 mt-1">Searching...</p>',k(t,"class","absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md py-2 text-center")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function cn(e){let t,n,s,r,o,i,a,l,c,d,x,v=e[1].canonical_name+"";function b(e,t){return e[1].metadata.image?un:dn}let w=b(e),C=w(e),_=e[1].metadata.genres&&e[1].metadata.genres.length>0&&mn(e),L=Z(yn(e[1])),M=[];for(let t=0;t<L.length;t+=1)M[t]=gn(Zt(e,L,t));return{c(){t=f("div"),n=f("h4"),n.textContent="Selected Artist",s=y(),r=f("div"),C.c(),o=y(),i=f("div"),a=f("div"),l=h(v),c=y(),_&&_.c(),d=y(),x=f("div");for(let e=0;e<M.length;e+=1)M[e].c();k(n,"class","text-sm font-medium text-gray-900 mb-2"),k(a,"class","text-sm font-medium text-gray-900"),k(x,"class","flex space-x-1 mt-1"),k(i,"class","flex-1"),k(r,"class","flex items-center space-x-3"),k(t,"class","bg-gray-50 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(t,s),u(t,r),C.m(r,null),u(r,o),u(r,i),u(i,a),u(a,l),u(i,c),_&&_.m(i,null),u(i,d),u(i,x);for(let e=0;e<M.length;e+=1)M[e]&&M[e].m(x,null)},p(e,t){if(w===(w=b(e))&&C?C.p(e,t):(C.d(1),C=w(e),C&&(C.c(),C.m(r,o))),2&t&&v!==(v=e[1].canonical_name+"")&&$(l,v),e[1].metadata.genres&&e[1].metadata.genres.length>0?_?_.p(e,t):(_=mn(e),_.c(),_.m(i,d)):_&&(_.d(1),_=null),2&t){let n;for(L=Z(yn(e[1])),n=0;n<L.length;n+=1){const s=Zt(e,L,n);M[n]?M[n].p(s,t):(M[n]=gn(s),M[n].c(),M[n].m(x,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=L.length}},d(e){e&&g(t),C.d(),_&&_.d(),p(M,e)}}}function dn(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function un(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[1].metadata.image)||k(t,"src",n),k(t,"alt",s=e[1].canonical_name),k(t,"class","h-12 w-12 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){2&r&&!l(t.src,n=e[1].metadata.image)&&k(t,"src",n),2&r&&s!==(s=e[1].canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function mn(e){let t,n,s=e[1].metadata.genres.join(", ")+"";return{c(){t=f("div"),n=h(s),k(t,"class","text-xs text-gray-500")},m(e,s){m(e,t,s),u(t,n)},p(e,t){2&t&&s!==(s=e[1].metadata.genres.join(", ")+"")&&$(n,s)},d(e){e&&g(t)}}}function gn(e){let t,n,s,r,o=e[17].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){2&s&&o!==(o=e[17].name+"")&&$(n,o),2&s&&r!==(r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function pn(e){let t,n;return{c(){t=f("div"),n=h(e[5]),k(t,"class","text-red-600 text-sm")},m(e,s){m(e,t,s),u(t,n)},p(e,t){32&t&&$(n,e[5])},d(e){e&&g(t)}}}function fn(e){let t;return{c(){t=h("Add to DNP List")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function xn(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n        Adding..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function hn(t){let n,r,o,i,a,l,c,d,p,x,h,v,C,$,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V=t[1]&&en(t),U=t[6].searchResults.length>0&&!t[1]&&tn(t),q=t[6].isSearching&&ln(),J=t[1]&&cn(t),Y=t[5]&&pn(t);function G(e,t){return e[4]?xn:fn}let Q=G(t),W=Q(t);return{c(){n=f("form"),r=f("div"),o=f("label"),o.textContent="Artist Name",i=y(),a=f("div"),l=f("input"),c=y(),V&&V.c(),d=y(),U&&U.c(),p=y(),q&&q.c(),x=y(),J&&J.c(),h=y(),v=f("div"),C=f("label"),C.textContent="Tags (optional)",$=y(),L=f("input"),M=y(),S=f("p"),S.textContent="Use tags to organize your DNP list. Separate multiple tags with commas.",A=y(),z=f("div"),j=f("label"),j.textContent="Note (optional)",T=y(),B=f("textarea"),H=y(),Y&&Y.c(),P=y(),E=f("div"),F=f("button"),F.textContent="Cancel",I=y(),D=f("button"),W.c(),k(o,"for","artist-search"),k(o,"class","block text-sm font-medium text-gray-700"),k(l,"id","artist-search"),k(l,"type","text"),k(l,"placeholder","Search for an artist..."),k(l,"class","block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(a,"class","mt-1 relative"),k(r,"class","relative"),k(C,"for","tags"),k(C,"class","block text-sm font-medium text-gray-700"),k(L,"id","tags"),k(L,"type","text"),k(L,"placeholder","e.g., controversial, personal, explicit (comma-separated)"),k(L,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(S,"class","mt-1 text-xs text-gray-500"),k(j,"for","note"),k(j,"class","block text-sm font-medium text-gray-700"),k(B,"id","note"),k(B,"rows","2"),k(B,"placeholder","Add a personal note about why you're blocking this artist..."),k(B,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(F,"type","button"),k(F,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(D,"type","submit"),D.disabled=N=t[4]||!t[0].trim(),k(D,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(E,"class","flex justify-end space-x-3"),k(n,"class","space-y-4")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),u(a,l),_(l,t[0]),u(a,c),V&&V.m(a,null),u(r,d),U&&U.m(r,null),u(r,p),q&&q.m(r,null),u(n,x),J&&J.m(n,null),u(n,h),u(n,v),u(v,C),u(v,$),u(v,L),_(L,t[2]),u(v,M),u(v,S),u(n,A),u(n,z),u(z,j),u(z,T),u(z,B),_(B,t[3]),u(n,H),Y&&Y.m(n,null),u(n,P),u(n,E),u(E,F),u(E,I),u(E,D),W.m(D,null),O||(R=[b(l,"input",t[12]),b(L,"input",t[14]),b(B,"input",t[15]),b(F,"click",t[16]),b(n,"submit",w(t[10]))],O=!0)},p(e,[t]){1&t&&l.value!==e[0]&&_(l,e[0]),e[1]?V?V.p(e,t):(V=en(e),V.c(),V.m(a,null)):V&&(V.d(1),V=null),e[6].searchResults.length>0&&!e[1]?U?U.p(e,t):(U=tn(e),U.c(),U.m(r,p)):U&&(U.d(1),U=null),e[6].isSearching?q||(q=ln(),q.c(),q.m(r,null)):q&&(q.d(1),q=null),e[1]?J?J.p(e,t):(J=cn(e),J.c(),J.m(n,h)):J&&(J.d(1),J=null),4&t&&L.value!==e[2]&&_(L,e[2]),8&t&&_(B,e[3]),e[5]?Y?Y.p(e,t):(Y=pn(e),Y.c(),Y.m(n,P)):Y&&(Y.d(1),Y=null),Q!==(Q=G(e))&&(W.d(1),W=Q(e),W&&(W.c(),W.m(D,null))),17&t&&N!==(N=e[4]||!e[0].trim())&&(D.disabled=N)},i:e,o:e,d(e){e&&g(n),V&&V.d(),U&&U.d(),q&&q.d(),J&&J.d(),Y&&Y.d(),W.d(),O=!1,s(R)}}}function yn(e){const t=[];return e.external_ids.spotify&&t.push({name:"Spotify",color:"bg-green-100 text-green-800"}),e.external_ids.apple&&t.push({name:"Apple",color:"bg-gray-100 text-gray-800"}),e.external_ids.musicbrainz&&t.push({name:"MusicBrainz",color:"bg-blue-100 text-blue-800"}),t}function vn(e,t,n){let s;d(e,At,e=>n(6,s=e));const r=B();let o,i="",a=null,l="",c="",u=!1,m="";function g(e){n(1,a=e),n(0,i=e.canonical_name),Tt.clearSearch()}return e.$$.update=()=>{2049&e.$$.dirty&&(o&&clearTimeout(o),n(11,o=setTimeout(()=>{i.trim()?Tt.searchArtists(i):Tt.clearSearch()},300)))},[i,a,l,c,u,m,s,r,g,function(){n(1,a=null),n(0,i=""),Tt.clearSearch()},async function(){if(!i.trim())return void n(5,m="Please enter an artist name");n(4,u=!0),n(5,m="");const e=l.split(",").map(e=>e.trim()).filter(e=>e),t=await Tt.addArtist(i,e,c.trim()||void 0);t.success?(n(0,i=""),n(1,a=null),n(2,l=""),n(3,c=""),r("artistAdded")):n(5,m=t.message||"Failed to add artist"),n(4,u=!1)},o,function(){i=this.value,n(0,i)},e=>g(e),function(){l=this.value,n(2,l)},function(){c=this.value,n(3,c)},()=>r("artistAdded")]}class bn extends oe{constructor(e){super(),re(this,e,vn,hn,o,{})}}function wn(e,t,n){const s=e.slice();return s[16]=t[n],s}function kn(e,t,n){const s=e.slice();return s[19]=t[n],s}function Cn(e){let t,n,r,o,i,a,l=e[6]?"Removing...":"Remove";return{c(){t=f("button"),t.textContent="Edit",n=y(),r=f("button"),o=h(l),k(t,"class","text-indigo-600 hover:text-indigo-900 text-sm"),r.disabled=e[6],k(r,"class","text-red-600 hover:text-red-900 text-sm disabled:opacity-50")},m(s,l){m(s,t,l),m(s,n,l),m(s,r,l),u(r,o),i||(a=[b(t,"click",e[9]),b(r,"click",e[12])],i=!0)},p(e,t){64&t&&l!==(l=e[6]?"Removing...":"Remove")&&$(o,l),64&t&&(r.disabled=e[6])},d(e){e&&(g(t),g(n),g(r)),i=!1,s(a)}}}function $n(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-6 w-6 sm:h-5 sm:w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-12 w-12 sm:h-10 sm:w-10 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function _n(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[0].artist.metadata.image)||k(t,"src",n),k(t,"alt",s=e[0].artist.canonical_name),k(t,"class","h-12 w-12 sm:h-10 sm:w-10 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){1&r&&!l(t.src,n=e[0].artist.metadata.image)&&k(t,"src",n),1&r&&s!==(s=e[0].artist.canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function Ln(e){let t,n,s=e[0].artist.metadata.genres.slice(0,2).join(", ")+"";return{c(){t=f("p"),n=h(s),k(t,"class","text-xs text-gray-500 truncate")},m(e,s){m(e,t,s),u(t,n)},p(e,t){1&t&&s!==(s=e[0].artist.metadata.genres.slice(0,2).join(", ")+"")&&$(n,s)},d(e){e&&g(t)}}}function Mn(e){let t,n,s,r,o=e[19].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[19].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){1&s&&o!==(o=e[19].name+"")&&$(n,o),1&s&&r!==(r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[19].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function Sn(e){let t,n,r,o,i,a,l=e[6]?"Removing...":"Remove";return{c(){t=f("button"),t.textContent="Edit",n=y(),r=f("button"),o=h(l),k(t,"class","text-indigo-600 hover:text-indigo-900 text-sm whitespace-nowrap"),r.disabled=e[6],k(r,"class","text-red-600 hover:text-red-900 text-sm disabled:opacity-50 whitespace-nowrap")},m(s,l){m(s,t,l),m(s,n,l),m(s,r,l),u(r,o),i||(a=[b(t,"click",e[9]),b(r,"click",e[12])],i=!0)},p(e,t){64&t&&l!==(l=e[6]?"Removing...":"Remove")&&$(o,l),64&t&&(r.disabled=e[6])},d(e){e&&(g(t),g(n),g(r)),i=!1,s(a)}}}function An(e){let t,n,s=e[0].tags.length>0&&zn(e),r=e[0].note&&Tn(e);return{c(){t=f("div"),s&&s.c(),n=y(),r&&r.c(),k(t,"class","mt-2")},m(e,o){m(e,t,o),s&&s.m(t,null),u(t,n),r&&r.m(t,null)},p(e,o){e[0].tags.length>0?s?s.p(e,o):(s=zn(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),e[0].note?r?r.p(e,o):(r=Tn(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&g(t),s&&s.d(),r&&r.d()}}}function zn(e){let t,n=Z(e[0].tags),s=[];for(let t=0;t<n.length;t+=1)s[t]=jn(wn(e,n,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","flex flex-wrap gap-1 mb-2")},m(e,n){m(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,r){if(1&r){let o;for(n=Z(e[0].tags),o=0;o<n.length;o+=1){const i=wn(e,n,o);s[o]?s[o].p(i,r):(s[o]=jn(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&g(t),p(s,e)}}}function jn(e){let t,n,s,r=e[16]+"";return{c(){t=f("span"),n=h(r),s=y(),k(t,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800")},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,t){1&t&&r!==(r=e[16]+"")&&$(n,r)},d(e){e&&g(t)}}}function Tn(e){let t,n,s,r,o=e[0].note+"";return{c(){t=f("p"),n=h('"'),s=h(o),r=h('"'),k(t,"class","text-sm text-gray-600 italic")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(t,r)},p(e,t){1&t&&o!==(o=e[0].note+"")&&$(s,o)},d(e){e&&g(t)}}}function Bn(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,L,M,S,A,z,j,T,B,H,P,E,F,I=e[5]?"Saving...":"Save",D=e[7]&&Hn(e);return{c(){t=f("div"),n=f("div"),r=f("div"),o=f("label"),i=h("Tags"),l=y(),c=f("input"),p=y(),x=f("div"),v=f("label"),w=h("Note"),L=y(),M=f("textarea"),A=y(),D&&D.c(),z=y(),j=f("div"),T=f("button"),T.textContent="Cancel",B=y(),H=f("button"),P=h(I),k(o,"for",a="edit-tags-"+e[0].artist.id),k(o,"class","block text-xs font-medium text-gray-700"),k(c,"id",d="edit-tags-"+e[0].artist.id),k(c,"type","text"),k(c,"placeholder","comma-separated tags"),k(c,"class","mt-1 block w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),k(v,"for",C="edit-note-"+e[0].artist.id),k(v,"class","block text-xs font-medium text-gray-700"),k(M,"id",S="edit-note-"+e[0].artist.id),k(M,"rows","2"),k(M,"placeholder","Personal note..."),k(M,"class","mt-1 block w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),k(x,"class","sm:col-span-2"),k(n,"class","grid grid-cols-1 sm:grid-cols-2 gap-3"),k(T,"type","button"),k(T,"class","w-full sm:w-auto px-3 py-2 sm:py-1 border border-gray-300 rounded-md text-sm sm:text-xs font-medium text-gray-700 bg-white hover:bg-gray-50"),k(H,"type","button"),H.disabled=e[5],k(H,"class","w-full sm:w-auto px-3 py-2 sm:py-1 border border-transparent rounded-md text-sm sm:text-xs font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50"),k(j,"class","flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2"),k(t,"class","mt-3 space-y-3 sm:mt-4")},m(s,a){m(s,t,a),u(t,n),u(n,r),u(r,o),u(o,i),u(r,l),u(r,c),_(c,e[3]),u(n,p),u(n,x),u(x,v),u(v,w),u(x,L),u(x,M),_(M,e[4]),u(t,A),D&&D.m(t,null),u(t,z),u(t,j),u(j,T),u(j,B),u(j,H),u(H,P),E||(F=[b(c,"input",e[13]),b(M,"input",e[14]),b(T,"click",e[10]),b(H,"click",e[11])],E=!0)},p(e,n){1&n&&a!==(a="edit-tags-"+e[0].artist.id)&&k(o,"for",a),1&n&&d!==(d="edit-tags-"+e[0].artist.id)&&k(c,"id",d),8&n&&c.value!==e[3]&&_(c,e[3]),1&n&&C!==(C="edit-note-"+e[0].artist.id)&&k(v,"for",C),1&n&&S!==(S="edit-note-"+e[0].artist.id)&&k(M,"id",S),16&n&&_(M,e[4]),e[7]?D?D.p(e,n):(D=Hn(e),D.c(),D.m(t,z)):D&&(D.d(1),D=null),32&n&&I!==(I=e[5]?"Saving...":"Save")&&$(P,I),32&n&&(H.disabled=e[5])},d(e){e&&g(t),D&&D.d(),E=!1,s(F)}}}function Hn(e){let t,n;return{c(){t=f("p"),n=h(e[7]),k(t,"class","text-xs text-red-600")},m(e,s){m(e,t,s),u(t,n)},p(e,t){128&t&&$(n,e[7])},d(e){e&&g(t)}}}function Pn(t){let n,r,o,i,a,l,c,d,x,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U=t[0].artist.canonical_name+"",q=Fn(t[0].created_at)+"",J=!t[2]&&Cn(t);function Y(e,t){return e[0].artist.metadata.image?_n:$n}let G=Y(t),Q=G(t),W=t[0].artist.metadata.genres&&t[0].artist.metadata.genres.length>0&&Ln(t),K=Z(En(t[0].artist)),X=[];for(let e=0;e<K.length;e+=1)X[e]=Mn(kn(t,K,e));let ee=!t[2]&&Sn(t),te=!t[2]&&An(t),ne=t[2]&&Bn(t);return{c(){n=f("li"),r=f("div"),o=f("div"),i=f("input"),a=y(),l=f("div"),J&&J.c(),c=y(),d=f("input"),x=y(),v=f("div"),Q.c(),w=y(),C=f("div"),_=f("div"),L=f("div"),M=f("p"),S=h(U),A=y(),W&&W.c(),z=y(),j=f("div"),T=f("div");for(let e=0;e<X.length;e+=1)X[e].c();B=y(),H=f("span"),P=h("Added "),E=h(q),F=y(),I=f("div"),ee&&ee.c(),D=y(),te&&te.c(),N=y(),ne&&ne.c(),k(i,"type","checkbox"),i.checked=t[1],k(i,"class","h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"),k(l,"class","flex items-center space-x-2"),k(o,"class","flex items-center justify-between sm:hidden"),k(d,"type","checkbox"),d.checked=t[1],k(d,"class","hidden sm:block h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded flex-shrink-0"),k(v,"class","flex-shrink-0"),k(M,"class","text-sm font-medium text-gray-900 truncate"),k(T,"class","flex flex-wrap gap-1"),k(H,"class","text-xs text-gray-400 whitespace-nowrap"),k(j,"class","flex flex-wrap items-center gap-2 mt-1"),k(L,"class","flex-1 min-w-0"),k(I,"class","hidden sm:flex items-center space-x-2 ml-4"),k(_,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between"),k(C,"class","flex-1 min-w-0"),k(r,"class","flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4"),k(n,"class",O="px-4 py-4 sm:px-6 "+(t[1]?"bg-indigo-50":"hover:bg-gray-50"))},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),J&&J.m(l,null),u(r,c),u(r,d),u(r,x),u(r,v),Q.m(v,null),u(r,w),u(r,C),u(C,_),u(_,L),u(L,M),u(M,S),u(L,A),W&&W.m(L,null),u(L,z),u(L,j),u(j,T);for(let e=0;e<X.length;e+=1)X[e]&&X[e].m(T,null);u(j,B),u(j,H),u(H,P),u(H,E),u(_,F),u(_,I),ee&&ee.m(I,null),u(C,D),te&&te.m(C,null),u(C,N),ne&&ne.m(C,null),R||(V=[b(i,"change",t[8]),b(d,"change",t[8])],R=!0)},p(e,[t]){if(2&t&&(i.checked=e[1]),e[2]?J&&(J.d(1),J=null):J?J.p(e,t):(J=Cn(e),J.c(),J.m(l,null)),2&t&&(d.checked=e[1]),G===(G=Y(e))&&Q?Q.p(e,t):(Q.d(1),Q=G(e),Q&&(Q.c(),Q.m(v,null))),1&t&&U!==(U=e[0].artist.canonical_name+"")&&$(S,U),e[0].artist.metadata.genres&&e[0].artist.metadata.genres.length>0?W?W.p(e,t):(W=Ln(e),W.c(),W.m(L,z)):W&&(W.d(1),W=null),1&t){let n;for(K=Z(En(e[0].artist)),n=0;n<K.length;n+=1){const s=kn(e,K,n);X[n]?X[n].p(s,t):(X[n]=Mn(s),X[n].c(),X[n].m(T,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=K.length}1&t&&q!==(q=Fn(e[0].created_at)+"")&&$(E,q),e[2]?ee&&(ee.d(1),ee=null):ee?ee.p(e,t):(ee=Sn(e),ee.c(),ee.m(I,null)),e[2]?te&&(te.d(1),te=null):te?te.p(e,t):(te=An(e),te.c(),te.m(C,N)),e[2]?ne?ne.p(e,t):(ne=Bn(e),ne.c(),ne.m(C,null)):ne&&(ne.d(1),ne=null),2&t&&O!==(O="px-4 py-4 sm:px-6 "+(e[1]?"bg-indigo-50":"hover:bg-gray-50"))&&k(n,"class",O)},i:e,o:e,d(e){e&&g(n),J&&J.d(),Q.d(),W&&W.d(),p(X,e),ee&&ee.d(),te&&te.d(),ne&&ne.d(),R=!1,s(V)}}}function En(e){const t=[];return e.external_ids.spotify&&t.push({name:"Spotify",color:"bg-green-100 text-green-800"}),e.external_ids.apple&&t.push({name:"Apple",color:"bg-gray-100 text-gray-800"}),e.external_ids.musicbrainz&&t.push({name:"MusicBrainz",color:"bg-blue-100 text-blue-800"}),t}function Fn(e){return new Date(e).toLocaleDateString()}function In(e,t,n){const s=B();let{entry:r}=t,{selected:o=!1}=t,i=!1,a=r.tags.join(", "),l=r.note||"",c=!1,d=!1,u="";return e.$$set=e=>{"entry"in e&&n(0,r=e.entry),"selected"in e&&n(1,o=e.selected)},[r,o,i,a,l,c,d,u,function(){s("toggleSelect")},function(){n(2,i=!0),n(3,a=r.tags.join(", ")),n(4,l=r.note||""),n(7,u="")},function(){n(2,i=!1),n(3,a=r.tags.join(", ")),n(4,l=r.note||""),n(7,u="")},async function(){n(5,c=!0),n(7,u="");const e=a.split(",").map(e=>e.trim()).filter(e=>e),t=await Tt.updateEntry(r.artist.id,e,l.trim()||void 0);t.success?n(2,i=!1):n(7,u=t.message||"Failed to update entry"),n(5,c=!1)},async function(){if(!confirm(`Are you sure you want to remove "${r.artist.canonical_name}" from your DNP list?`))return;n(6,d=!0);const e=await Tt.removeArtist(r.artist.id);e.success||n(7,u=e.message||"Failed to remove artist"),n(6,d=!1)},function(){a=this.value,n(3,a)},function(){l=this.value,n(4,l)}]}class Dn extends oe{constructor(e){super(),re(this,e,In,Pn,o,{entry:0,selected:1})}}function Nn(t){let n,r,o,i,a,l,c,d,p,v,w,C,_,L,M,S,A,z,j,T=1===t[0]?"artist":"artists";return{c(){n=f("div"),r=f("div"),o=f("div"),i=x("svg"),a=x("path"),l=y(),c=f("p"),d=f("span"),p=h(t[0]),v=y(),w=h(T),C=h(" selected"),_=y(),L=f("div"),M=f("button"),M.textContent="Clear selection",S=y(),A=f("button"),A.innerHTML='<svg class="-ml-0.5 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>\n        Remove selected',k(a,"stroke-linecap","round"),k(a,"stroke-linejoin","round"),k(a,"stroke-width","2"),k(a,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),k(i,"class","h-5 w-5 text-indigo-400 flex-shrink-0"),k(i,"fill","none"),k(i,"viewBox","0 0 24 24"),k(i,"stroke","currentColor"),k(d,"class","font-medium"),k(c,"class","ml-3 text-sm text-indigo-800"),k(o,"class","flex items-center"),k(M,"class","text-sm text-indigo-600 hover:text-indigo-500 text-center sm:text-left"),k(A,"class","inline-flex items-center justify-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),k(L,"class","flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3"),k(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0"),k(n,"class","bg-indigo-50 border border-indigo-200 rounded-md p-4")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(o,l),u(o,c),u(c,d),u(d,p),u(c,v),u(c,w),u(c,C),u(r,_),u(r,L),u(L,M),u(L,S),u(L,A),z||(j=[b(M,"click",t[2]),b(A,"click",t[1])],z=!0)},p(e,[t]){1&t&&$(p,e[0]),1&t&&T!==(T=1===e[0]?"artist":"artists")&&$(w,T)},i:e,o:e,d(e){e&&g(n),z=!1,s(j)}}}function On(e,t,n){const s=B();let{selectedCount:r=0}=t;return e.$$set=e=>{"selectedCount"in e&&n(0,r=e.selectedCount)},[r,function(){s("bulkDelete")},function(){s("clearSelection")}]}class Rn extends oe{constructor(e){super(),re(this,e,On,Nn,o,{selectedCount:0})}}function Vn(e,t,n){const s=e.slice();return s[19]=t[n],s}function Un(e,t,n){const s=e.slice();return s[22]=t[n],s}function qn(t){let n,s,r,o,i;return o=new bn({}),o.$on("artistAdded",t[11]),{c(){n=f("div"),s=f("h3"),s.textContent="Add Artist to DNP List",r=y(),ee(o.$$.fragment),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(n,"class","mb-6 bg-white shadow rounded-lg p-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),te(o,n,null),i=!0},p:e,i(e){i||(Q(o.$$.fragment,e),i=!0)},o(e){W(o.$$.fragment,e),i=!1},d(e){e&&g(n),ne(o)}}}function Jn(e){let t,n,s,r=e[22]+"";return{c(){t=f("option"),n=h(r),t.__value=s=e[22],_(t,t.__value)},m(e,s){m(e,t,s),u(t,n)},p(e,o){64&o&&r!==(r=e[22]+"")&&$(n,r),64&o&&s!==(s=e[22])&&(t.__value=s,_(t,t.__value))},d(e){e&&g(t)}}}function Yn(e){let t,n,s;return n=new Rn({props:{selectedCount:e[4].size}}),n.$on("bulkDelete",e[10]),n.$on("clearSelection",e[9]),{c(){t=f("div"),ee(n.$$.fragment),k(t,"class","mb-4")},m(e,r){m(e,t,r),te(n,t,null),s=!0},p(e,t){const s={};16&t&&(s.selectedCount=e[4].size),n.$set(s)},i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){e&&g(t),ne(n)}}}function Gn(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M=e[5].length+"",S=1!==e[5].length?"s":"",A=[],z=new Map,j=e[4].size>0&&Kn(e),T=(e[0]||e[1])&&Xn(e),B=Z(e[5]);const H=e=>e[19].artist.id;for(let t=0;t<B.length;t+=1){let n=Vn(e,B,t),s=H(n);z.set(s,A[t]=es(s,n))}return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("input"),i=y(),a=f("label"),l=h(M),c=h(" artist"),d=h(S),p=y(),j&&j.c(),x=y(),T&&T.c(),v=y(),w=f("ul");for(let e=0;e<A.length;e+=1)A[e].c();k(r,"id","select-all"),k(r,"type","checkbox"),r.checked=o=e[4].size===e[5].length&&e[5].length>0,k(r,"class","h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"),k(a,"for","select-all"),k(a,"class","ml-3 text-sm text-gray-900"),k(s,"class","flex items-center"),k(n,"class","flex items-center justify-between"),k(t,"class","px-4 py-3 bg-gray-50 border-b border-gray-200 sm:px-6"),k(w,"class","divide-y divide-gray-200")},m(o,g){m(o,t,g),u(t,n),u(n,s),u(s,r),u(s,i),u(s,a),u(a,l),u(a,c),u(a,d),u(a,p),j&&j.m(a,null),u(n,x),T&&T.m(n,null),m(o,v,g),m(o,w,g);for(let e=0;e<A.length;e+=1)A[e]&&A[e].m(w,null);C=!0,_||(L=b(r,"change",e[7]),_=!0)},p(e,t){(!C||48&t&&o!==(o=e[4].size===e[5].length&&e[5].length>0))&&(r.checked=o),(!C||32&t)&&M!==(M=e[5].length+"")&&$(l,M),(!C||32&t)&&S!==(S=1!==e[5].length?"s":"")&&$(d,S),e[4].size>0?j?j.p(e,t):(j=Kn(e),j.c(),j.m(a,null)):j&&(j.d(1),j=null),e[0]||e[1]?T?T.p(e,t):(T=Xn(e),T.c(),T.m(n,null)):T&&(T.d(1),T=null),304&t&&(B=Z(e[5]),Y(),A=X(A,t,H,0,e,B,z,w,K,es,null,Vn),G())},i(e){if(!C){for(let e=0;e<B.length;e+=1)Q(A[e]);C=!0}},o(e){for(let e=0;e<A.length;e+=1)W(A[e]);C=!1},d(e){e&&(g(t),g(v),g(w)),j&&j.d(),T&&T.d();for(let e=0;e<A.length;e+=1)A[e].d();_=!1,L()}}}function Qn(t){let n;function s(e,t){return 0===e[2].entries.length?ns:ts}let r=s(t),o=r(t);return{c(){n=f("div"),o.c(),k(n,"class","p-6 text-center")},m(e,t){m(e,n,t),o.m(n,null)},p(e,t){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n,null)))},i:e,o:e,d(e){e&&g(n),o.d()}}}function Wn(t){let n,s,r,o,i,a,l,c,d,p,v=t[2].error+"";return{c(){n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("p"),a=h(v),l=y(),c=f("button"),c.textContent="Try again",k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(s,"class","mx-auto h-8 w-8 text-red-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(i,"class","mt-2 text-sm text-red-600"),k(c,"class","mt-2 text-sm text-indigo-600 hover:text-indigo-500"),k(n,"class","p-6 text-center")},m(e,g){m(e,n,g),u(n,s),u(s,r),u(n,o),u(n,i),u(i,a),u(n,l),u(n,c),d||(p=b(c,"click",t[15]),d=!0)},p(e,t){4&t&&v!==(v=e[2].error+"")&&$(a,v)},i:e,o:e,d(e){e&&g(n),d=!1,p()}}}function Zn(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="animate-spin mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-sm text-gray-500">Loading DNP list...</p>',k(n,"class","p-6 text-center")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}function Kn(e){let t,n,s,r=e[4].size+"";return{c(){t=h("("),n=h(r),s=h(" selected)")},m(e,r){m(e,t,r),m(e,n,r),m(e,s,r)},p(e,t){16&t&&r!==(r=e[4].size+"")&&$(n,r)},d(e){e&&(g(t),g(n),g(s))}}}function Xn(t){let n,s,r;return{c(){n=f("button"),n.textContent="Clear filters",k(n,"class","text-sm text-indigo-600 hover:text-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[17]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function es(e,t){let n,s,r;return s=new Dn({props:{entry:t[19],selected:t[4].has(t[19].artist.id)}}),s.$on("toggleSelect",function(){return t[18](t[19])}),{key:e,first:null,c(){n=v(),ee(s.$$.fragment),this.first=n},m(e,t){m(e,n,t),te(s,e,t),r=!0},p(e,n){t=e;const r={};32&n&&(r.entry=t[19]),48&n&&(r.selected=t[4].has(t[19].artist.id)),s.$set(r)},i(e){r||(Q(s.$$.fragment,e),r=!0)},o(e){W(s.$$.fragment,e),r=!1},d(e){e&&g(n),ne(s,e)}}}function ts(t){let n,s,r,o,i,a;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No artists match your search",i=y(),a=f("p"),a.textContent="Try adjusting your search terms or filters.",k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500")},m(e,t){m(e,n,t),u(n,s),m(e,r,t),m(e,o,t),m(e,i,t),m(e,a,t)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a))}}}function ns(t){let n,s,r,o,i,a,l,c,d,p,h;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No artists in your DNP list",i=y(),a=f("p"),a.textContent="Get started by adding artists you want to avoid.",l=y(),c=f("div"),d=f("button"),d.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n              Add your first artist',k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500"),k(d,"class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(c,"class","mt-6")},m(e,g){m(e,n,g),u(n,s),m(e,r,g),m(e,o,g),m(e,i,g),m(e,a,g),m(e,l,g),m(e,c,g),u(c,d),p||(h=b(d,"click",t[16]),p=!0)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a),g(l),g(c)),p=!1,h()}}}function ss(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,_,L,M,S=e[2].entries.length+"",A=e[6].length+"",z=e[2].entries.filter(os).length+"";return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("div"),o=h(S),i=y(),a=f("div"),a.textContent="Total Artists",l=y(),c=f("div"),d=f("div"),p=h(A),x=y(),v=f("div"),v.textContent="Unique Tags",b=y(),w=f("div"),C=f("div"),_=h(z),L=y(),M=f("div"),M.textContent="With Notes",k(r,"class","text-2xl font-bold text-gray-900"),k(a,"class","text-sm text-gray-500"),k(s,"class","text-center"),k(d,"class","text-2xl font-bold text-gray-900"),k(v,"class","text-sm text-gray-500"),k(c,"class","text-center"),k(C,"class","text-2xl font-bold text-gray-900"),k(M,"class","text-sm text-gray-500"),k(w,"class","text-center"),k(n,"class","grid grid-cols-1 gap-4 sm:grid-cols-3"),k(t,"class","mt-6 bg-gray-50 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(r,o),u(s,i),u(s,a),u(n,l),u(n,c),u(c,d),u(d,p),u(c,x),u(c,v),u(n,b),u(n,w),u(w,C),u(C,_),u(w,L),u(w,M)},p(e,t){4&t&&S!==(S=e[2].entries.length+"")&&$(o,S),64&t&&A!==(A=e[6].length+"")&&$(p,A),4&t&&z!==(z=e[2].entries.filter(os).length+"")&&$(_,z)},d(e){e&&g(t)}}}function rs(e){let t,n,r,o,i,a,l,c,d,x,h,v,w,C,$,L,S,A,z,j,T,B,H,P,E,F,I,D,O,R,V,U,q=e[3]&&qn(e),J=Z(e[6]),K=[];for(let t=0;t<J.length;t+=1)K[t]=Jn(Un(e,J,t));let X=e[4].size>0&&Yn(e);const ee=[Zn,Wn,Qn,Gn],te=[];function ne(e,t){return e[2].isLoading?0:e[2].error?1:0===e[5].length?2:3}I=ne(e),D=te[I]=ee[I](e);let se=e[2].entries.length>0&&ss(e);return{c(){t=f("div"),n=f("div"),r=f("div"),o=f("div"),o.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Do-Not-Play List</h2> <p class="mt-1 text-sm text-gray-600">Manage artists you want to avoid across your streaming services.</p>',i=y(),a=f("button"),a.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n        Add Artist',l=y(),q&&q.c(),c=y(),d=f("div"),x=f("div"),h=f("div"),v=f("label"),v.textContent="Search artists",w=y(),C=f("div"),$=f("div"),$.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',L=y(),S=f("input"),A=y(),z=f("div"),j=f("label"),j.textContent="Filter by tag",T=y(),B=f("select"),H=f("option"),H.textContent="All tags";for(let e=0;e<K.length;e+=1)K[e].c();P=y(),X&&X.c(),E=y(),F=f("div"),D.c(),O=y(),se&&se.c(),k(a,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(r,"class","flex justify-between items-center"),k(n,"class","mb-6"),k(v,"for","search"),k(v,"class","sr-only"),k($,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),k(S,"id","search"),k(S,"type","text"),k(S,"placeholder","Search artists, tags, or notes..."),k(S,"class","block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(C,"class","relative"),k(h,"class","flex-1"),k(j,"for","tag-filter"),k(j,"class","sr-only"),H.__value="",_(H,H.__value),k(B,"id","tag-filter"),k(B,"class","block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"),void 0===e[1]&&N(()=>e[14].call(B)),k(z,"class","sm:w-48"),k(x,"class","flex flex-col sm:flex-row gap-4"),k(d,"class","mb-6 bg-white shadow rounded-lg p-4"),k(F,"class","bg-white shadow overflow-hidden sm:rounded-md"),k(t,"class","px-4 py-6 sm:px-0")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(r,i),u(r,a),u(t,l),q&&q.m(t,null),u(t,c),u(t,d),u(d,x),u(x,h),u(h,v),u(h,w),u(h,C),u(C,$),u(C,L),u(C,S),_(S,e[0]),u(x,A),u(x,z),u(z,j),u(z,T),u(z,B),u(B,H);for(let e=0;e<K.length;e+=1)K[e]&&K[e].m(B,null);M(B,e[1],!0),u(t,P),X&&X.m(t,null),u(t,E),u(t,F),te[I].m(F,null),u(t,O),se&&se.m(t,null),R=!0,V||(U=[b(a,"click",e[12]),b(S,"input",e[13]),b(B,"change",e[14])],V=!0)},p(e,[n]){if(e[3]?q?(q.p(e,n),8&n&&Q(q,1)):(q=qn(e),q.c(),Q(q,1),q.m(t,c)):q&&(Y(),W(q,1,1,()=>{q=null}),G()),1&n&&S.value!==e[0]&&_(S,e[0]),64&n){let t;for(J=Z(e[6]),t=0;t<J.length;t+=1){const s=Un(e,J,t);K[t]?K[t].p(s,n):(K[t]=Jn(s),K[t].c(),K[t].m(B,null))}for(;t<K.length;t+=1)K[t].d(1);K.length=J.length}66&n&&M(B,e[1]),e[4].size>0?X?(X.p(e,n),16&n&&Q(X,1)):(X=Yn(e),X.c(),Q(X,1),X.m(t,E)):X&&(Y(),W(X,1,1,()=>{X=null}),G());let s=I;I=ne(e),I===s?te[I].p(e,n):(Y(),W(te[s],1,1,()=>{te[s]=null}),G(),D=te[I],D?D.p(e,n):(D=te[I]=ee[I](e),D.c()),Q(D,1),D.m(F,null)),e[2].entries.length>0?se?se.p(e,n):(se=ss(e),se.c(),se.m(t,null)):se&&(se.d(1),se=null)},i(e){R||(Q(q),Q(X),Q(D),R=!0)},o(e){W(q),W(X),W(D),R=!1},d(e){e&&g(t),q&&q.d(),p(K,e),X&&X.d(),te[I].d(),se&&se.d(),V=!1,s(U)}}}const os=e=>e.note;function is(e,t,n){let s,r,o;d(e,At,e=>n(2,r=e)),d(e,jt,e=>n(6,o=e));let i="",a="",l=!1,c=new Set;function u(e){c.has(e)?c.delete(e):c.add(e),n(4,c)}function m(){c.clear(),n(4,c)}return e.$$.update=()=>{7&e.$$.dirty&&n(5,s=r.entries.filter(e=>{const t=!i||e.artist.canonical_name.toLowerCase().includes(i.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(i.toLowerCase()))||e.note&&e.note.toLowerCase().includes(i.toLowerCase()),n=!a||e.tags.includes(a);return t&&n}))},[i,a,r,l,c,s,o,function(){c.size===s.length?c.clear():n(4,c=new Set(s.map(e=>e.artist.id))),n(4,c)},u,m,async function(){if(0!==c.size&&confirm(`Are you sure you want to remove ${c.size} artist(s) from your DNP list?`)){const e=Array.from(c).map(e=>Tt.removeArtist(e));await Promise.all(e),m()}},function(){n(3,l=!1)},()=>n(3,l=!l),function(){i=this.value,n(0,i)},function(){a=S(this),n(1,a)},()=>Tt.fetchDnpList(),()=>n(3,l=!0),()=>{n(0,i=""),n(1,a="")},e=>u(e.artist.id)]}class as extends oe{constructor(e){super(),re(this,e,is,rs,o,{})}}const ls={aggressiveness:"moderate",blockCollabs:!0,blockFeaturing:!0,blockSongwriterOnly:!1},cs=ae({currentPlan:null,isPlanning:!1,isExecuting:!1,currentBatch:null,actionHistory:[],options:ls,error:null}),ds=le(cs,e=>null!==e.currentPlan),us=le(cs,e=>{if(!e.currentBatch)return null;const{totalItems:t,completedItems:n,failedItems:s,skippedItems:r}=e.currentBatch.summary,o=n+s+r;return{total:t,processed:o,completed:n,failed:s,skipped:r,percentage:t>0?Math.round(o/t*100):0}}),ms=le(cs,e=>e.actionHistory.some(e=>"completed"===e.status&&e.items.some(e=>"completed"===e.status))),gs={updateOptions:e=>{cs.update(t=>({...t,options:{...t.options,...e}}))},createPlan:async(e,t=!0)=>{let n=ls;cs.update(e=>(n=e.options,{...e,isPlanning:!0,error:null}));try{const s=localStorage.getItem("auth_token"),r=await fetch("http://localhost:3000/api/v1/spotify/library/plan",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({providers:e,options:n,dryRun:t})}),o=await r.json();return o.success?(cs.update(e=>({...e,currentPlan:o.data,isPlanning:!1})),{success:!0,data:o.data}):(cs.update(e=>({...e,error:o.message,isPlanning:!1})),{success:!1,message:o.message})}catch(e){return cs.update(e=>({...e,error:"Failed to create enforcement plan",isPlanning:!1})),{success:!1,message:"Failed to create enforcement plan"}}},executePlan:async e=>{cs.update(e=>({...e,isExecuting:!0,error:null}));try{const t=localStorage.getItem("auth_token"),n=await fetch("http://localhost:3000/api/v1/spotify/enforcement/execute",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({planId:e,dryRun:!1})}),s=await n.json();if(s.success){const e=s.data;return cs.update(t=>({...t,currentBatch:e,isExecuting:!1})),gs.pollProgress(e.id),{success:!0,data:e}}return cs.update(e=>({...e,error:s.message,isExecuting:!1})),{success:!1,message:s.message}}catch(e){return cs.update(e=>({...e,error:"Failed to execute enforcement plan",isExecuting:!1})),{success:!1,message:"Failed to execute enforcement plan"}}},pollProgress:async e=>{const t=setInterval(async()=>{try{const n=localStorage.getItem("auth_token"),s=await fetch(`http://localhost:3000/api/v1/spotify/enforcement/progress/${e}`,{headers:{Authorization:`Bearer ${n}`}}),r=await s.json();if(r.success){const e=r.data;cs.update(t=>({...t,currentBatch:e})),"completed"!==e.status&&"failed"!==e.status&&"cancelled"!==e.status||(clearInterval(t),cs.update(t=>({...t,actionHistory:[e,...t.actionHistory],currentBatch:null,currentPlan:null})))}}catch(e){console.error("Failed to poll progress:",e)}},2e3)},rollbackBatch:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch("http://localhost:3000/api/v1/spotify/enforcement/rollback",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({batchId:e})}),s=await n.json();return s.success?(await gs.fetchActionHistory(),{success:!0}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to rollback actions"}}},fetchActionHistory:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/enforcement/history",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&cs.update(e=>({...e,actionHistory:n.data}))}catch(e){console.error("Failed to fetch action history:",e)}},clearPlan:()=>{cs.update(e=>({...e,currentPlan:null,error:null}))},clearError:()=>{cs.update(e=>({...e,error:null}))}};function ps(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-yellow-800">Aggressive Settings Warning</h3> <div class="mt-2 text-sm text-yellow-700"><p>These settings may remove a significant amount of content from your library. \n              We recommend reviewing the enforcement preview carefully before executing.</p></div></div></div>',k(t,"class","bg-yellow-50 border border-yellow-200 rounded-md p-4")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function fs(t){let n,r,o,i,a,l,c,d,p,x,h,v,w,C,$,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve=("aggressive"===t[0].aggressiveness||t[0].blockSongwriterOnly)&&ps();return{c(){n=f("div"),r=f("div"),o=f("h4"),o.textContent="Enforcement Aggressiveness",i=y(),a=f("p"),a.textContent="Choose how thoroughly to apply your blocklist across your music library.",l=y(),c=f("fieldset"),d=f("legend"),d.textContent="Aggressiveness level",p=y(),x=f("div"),h=f("div"),v=f("input"),C=y(),$=f("label"),$.textContent="Conservative",_=y(),L=f("div"),L.textContent="Only remove explicitly saved/liked content. Preserves playlists and recommendations.",M=y(),S=f("div"),A=f("input"),j=y(),T=f("label"),T.textContent="Moderate (Recommended)",B=y(),H=f("div"),H.textContent="Remove from saved content and playlists. Filters recommendations where possible.",P=y(),E=f("div"),F=f("input"),D=y(),N=f("label"),N.textContent="Aggressive",O=y(),R=f("div"),R.textContent="Maximum removal including radio seeds, recommendations, and related content.",V=y(),U=f("div"),q=f("h4"),q.textContent="Collaboration Handling",J=y(),Y=f("p"),Y.textContent="Configure how to handle songs where blocked artists appear as collaborators or featured artists.",G=y(),Q=f("div"),W=f("div"),Z=f("div"),K=f("input"),ee=y(),te=f("div"),te.innerHTML='<label for="block-collabs" class="font-medium text-gray-700">Block collaborations</label> <p class="text-gray-500">Remove songs where blocked artists are listed as collaborators or co-writers.</p>',ne=y(),se=f("div"),re=f("div"),oe=f("input"),ae=y(),le=f("div"),le.innerHTML='<label for="block-featuring" class="font-medium text-gray-700">Block featuring</label> <p class="text-gray-500">Remove songs where blocked artists are featured (e.g., &quot;Song Title (feat. Blocked Artist)&quot;).</p>',ce=y(),de=f("div"),ue=f("div"),me=f("input"),pe=y(),fe=f("div"),fe.innerHTML='<label for="block-songwriter-only" class="font-medium text-gray-700">Block songwriter credits only</label> <p class="text-gray-500">Remove songs where blocked artists are credited only as songwriters (most restrictive).</p>',xe=y(),ve&&ve.c(),k(o,"class","text-base font-medium text-gray-900"),k(a,"class","text-sm leading-5 text-gray-500"),k(d,"class","sr-only"),k(v,"id","conservative"),k(v,"name","aggressiveness"),k(v,"type","radio"),v.checked=w="conservative"===t[0].aggressiveness,k(v,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k($,"for","conservative"),k($,"class","ml-3 block text-sm font-medium text-gray-700"),k(h,"class","flex items-center"),k(L,"class","ml-7 text-sm text-gray-500"),k(A,"id","moderate"),k(A,"name","aggressiveness"),k(A,"type","radio"),A.checked=z="moderate"===t[0].aggressiveness,k(A,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(T,"for","moderate"),k(T,"class","ml-3 block text-sm font-medium text-gray-700"),k(S,"class","flex items-center"),k(H,"class","ml-7 text-sm text-gray-500"),k(F,"id","aggressive"),k(F,"name","aggressiveness"),k(F,"type","radio"),F.checked=I="aggressive"===t[0].aggressiveness,k(F,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(N,"for","aggressive"),k(N,"class","ml-3 block text-sm font-medium text-gray-700"),k(E,"class","flex items-center"),k(R,"class","ml-7 text-sm text-gray-500"),k(x,"class","space-y-4"),k(c,"class","mt-4"),k(q,"class","text-base font-medium text-gray-900"),k(Y,"class","text-sm leading-5 text-gray-500"),k(K,"id","block-collabs"),k(K,"type","checkbox"),K.checked=X=t[0].blockCollabs,k(K,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(Z,"class","flex items-center h-5"),k(te,"class","ml-3 text-sm"),k(W,"class","flex items-start"),k(oe,"id","block-featuring"),k(oe,"type","checkbox"),oe.checked=ie=t[0].blockFeaturing,k(oe,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(re,"class","flex items-center h-5"),k(le,"class","ml-3 text-sm"),k(se,"class","flex items-start"),k(me,"id","block-songwriter-only"),k(me,"type","checkbox"),me.checked=ge=t[0].blockSongwriterOnly,k(me,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(ue,"class","flex items-center h-5"),k(fe,"class","ml-3 text-sm"),k(de,"class","flex items-start"),k(Q,"class","mt-4 space-y-4"),k(n,"class","space-y-6")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),u(r,l),u(r,c),u(c,d),u(c,p),u(c,x),u(x,h),u(h,v),u(h,C),u(h,$),u(x,_),u(x,L),u(x,M),u(x,S),u(S,A),u(S,j),u(S,T),u(x,B),u(x,H),u(x,P),u(x,E),u(E,F),u(E,D),u(E,N),u(x,O),u(x,R),u(n,V),u(n,U),u(U,q),u(U,J),u(U,Y),u(U,G),u(U,Q),u(Q,W),u(W,Z),u(Z,K),u(W,ee),u(W,te),u(Q,ne),u(Q,se),u(se,re),u(re,oe),u(se,ae),u(se,le),u(Q,ce),u(Q,de),u(de,ue),u(ue,me),u(de,pe),u(de,fe),u(n,xe),ve&&ve.m(n,null),he||(ye=[b(v,"change",t[4]),b(A,"change",t[5]),b(F,"change",t[6]),b(K,"change",t[7]),b(oe,"change",t[8]),b(me,"change",t[9])],he=!0)},p(e,[t]){1&t&&w!==(w="conservative"===e[0].aggressiveness)&&(v.checked=w),1&t&&z!==(z="moderate"===e[0].aggressiveness)&&(A.checked=z),1&t&&I!==(I="aggressive"===e[0].aggressiveness)&&(F.checked=I),1&t&&X!==(X=e[0].blockCollabs)&&(K.checked=X),1&t&&ie!==(ie=e[0].blockFeaturing)&&(oe.checked=ie),1&t&&ge!==(ge=e[0].blockSongwriterOnly)&&(me.checked=ge),"aggressive"===e[0].aggressiveness||e[0].blockSongwriterOnly?ve||(ve=ps(),ve.c(),ve.m(n,null)):ve&&(ve.d(1),ve=null)},i:e,o:e,d(e){e&&g(n),ve&&ve.d(),he=!1,s(ye)}}}function xs(e,t,n){let s,r;function o(e){gs.updateOptions({aggressiveness:e})}function i(e){gs.updateOptions({[e]:!s[e]})}d(e,cs,e=>n(3,r=e));return e.$$.update=()=>{8&e.$$.dirty&&n(0,s=r.options)},[s,o,i,r,()=>o("conservative"),()=>o("moderate"),()=>o("aggressive"),()=>i("blockCollabs"),()=>i("blockFeaturing"),()=>i("blockSongwriterOnly")]}class hs extends oe{constructor(e){super(),re(this,e,xs,fs,o,{})}}function ys(e,t,n){const s=e.slice();return s[2]=t[n][0],s[3]=t[n][1],s}function vs(e,t,n){const s=e.slice();return s[6]=t[n][0],s[7]=t[n][1],s}function bs(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No enforcement plan</h3> <p class="mt-1 text-sm text-gray-500">Create a plan to see the preview.</p>',k(n,"class","text-center py-6")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function ws(e){let t,n,s,r,o,i,a,l,c,d,x,v,b,w,C,_,L,M,S,A,z=Bs(e[0].estimatedDuration)+"",j=e[0].planId.slice(0,8)+"",T=e[0].resumable&&ks(),B=Z(Object.entries(e[0].impact)),H=[];for(let t=0;t<B.length;t+=1)H[t]=js(ys(e,B,t));return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("div"),o=f("h4"),o.textContent="Plan Summary",i=y(),a=f("p"),l=h("Estimated duration: "),c=h(z),d=y(),T&&T.c(),x=y(),v=f("div"),b=f("div"),b.textContent="Plan ID",w=y(),C=f("div"),_=h(j),L=h("..."),M=y();for(let e=0;e<H.length;e+=1)H[e].c();S=y(),A=f("div"),A.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Before You Execute</h3> <div class="mt-2 text-sm text-blue-700"><ul class="list-disc list-inside space-y-1"><li>This is a preview - no changes have been made yet</li> <li>Execution will modify your actual music library</li> <li>Some actions may not be reversible depending on platform limitations</li> <li>The process can be interrupted and resumed if needed</li></ul></div></div></div>',k(o,"class","text-sm font-medium text-gray-900"),k(a,"class","text-sm text-gray-500"),k(b,"class","text-sm font-medium text-gray-900"),k(C,"class","text-xs text-gray-500 font-mono"),k(v,"class","text-right"),k(s,"class","flex items-center justify-between"),k(n,"class","bg-gray-50 rounded-lg p-4"),k(A,"class","bg-blue-50 border border-blue-200 rounded-md p-4"),k(t,"class","space-y-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(r,o),u(r,i),u(r,a),u(a,l),u(a,c),u(a,d),T&&T.m(a,null),u(s,x),u(s,v),u(v,b),u(v,w),u(v,C),u(C,_),u(C,L),u(t,M);for(let e=0;e<H.length;e+=1)H[e]&&H[e].m(t,null);u(t,S),u(t,A)},p(e,n){if(1&n&&z!==(z=Bs(e[0].estimatedDuration)+"")&&$(c,z),e[0].resumable?T||(T=ks(),T.c(),T.m(a,null)):T&&(T.d(1),T=null),1&n&&j!==(j=e[0].planId.slice(0,8)+"")&&$(_,j),1&n){let s;for(B=Z(Object.entries(e[0].impact)),s=0;s<B.length;s+=1){const r=ys(e,B,s);H[s]?H[s].p(r,n):(H[s]=js(r),H[s].c(),H[s].m(t,S))}for(;s<H.length;s+=1)H[s].d(1);H.length=B.length}},d(e){e&&g(t),T&&T.d(),p(H,e)}}}function ks(e){let t;return{c(){t=h("• Resumable if interrupted")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Cs(e){let t,n,s,r,o,i,a,l,c,d,p=e[3].likedSongs.toRemove+"",x=e[3].likedSongs.collabsFound>0&&$s(e);return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Liked Songs",a=y(),l=f("p"),c=h(p),d=h(" to remove\n                    "),x&&x.c(),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),x&&x.m(l,null)},p(e,t){1&t&&p!==(p=e[3].likedSongs.toRemove+"")&&$(c,p),e[3].likedSongs.collabsFound>0?x?x.p(e,t):(x=$s(e),x.c(),x.m(l,null)):x&&(x.d(1),x=null)},d(e){e&&g(t),x&&x.d()}}}function $s(e){let t,n,s,r,o,i=e[3].likedSongs.collabsFound+"";return{c(){t=f("br"),n=f("span"),s=h("("),r=h(i),o=h(" collaborations)"),k(n,"class","text-xs")},m(e,i){m(e,t,i),m(e,n,i),u(n,s),u(n,r),u(n,o)},p(e,t){1&t&&i!==(i=e[3].likedSongs.collabsFound+"")&&$(r,i)},d(e){e&&(g(t),g(n))}}}function _s(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C=e[3].playlists.toScrub+"",_=e[3].playlists.tracksToRemove+"",L=e[3].playlists.featuringFound>0&&Ls(e);return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Playlists",a=y(),l=f("p"),c=h(C),d=h(" playlists affected\n                    "),p=f("br"),x=f("span"),v=h(_),b=h(" tracks to remove"),w=y(),L&&L.c(),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(x,"class","text-xs"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),u(l,p),u(l,x),u(x,v),u(x,b),u(l,w),L&&L.m(l,null)},p(e,t){1&t&&C!==(C=e[3].playlists.toScrub+"")&&$(c,C),1&t&&_!==(_=e[3].playlists.tracksToRemove+"")&&$(v,_),e[3].playlists.featuringFound>0?L?L.p(e,t):(L=Ls(e),L.c(),L.m(l,null)):L&&(L.d(1),L=null)},d(e){e&&g(t),L&&L.d()}}}function Ls(e){let t,n,s,r,o,i=e[3].playlists.featuringFound+"";return{c(){t=f("br"),n=f("span"),s=h("("),r=h(i),o=h(" featuring)"),k(n,"class","text-xs")},m(e,i){m(e,t,i),m(e,n,i),u(n,s),u(n,r),u(n,o)},p(e,t){1&t&&i!==(i=e[3].playlists.featuringFound+"")&&$(r,i)},d(e){e&&(g(t),g(n))}}}function Ms(e){let t,n,s,r,o,i,a,l,c,d,p=e[3].following.toUnfollow+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Following",a=y(),l=f("p"),c=h(p),d=h(" to unfollow"),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d)},p(e,t){1&t&&p!==(p=e[3].following.toUnfollow+"")&&$(c,p)},d(e){e&&g(t)}}}function Ss(e){let t,n,s,r,o,i,a,l,c,d,p=e[3].radioSeeds.toFilter+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-orange-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2M7 4h10"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Radio Seeds",a=y(),l=f("p"),c=h(p),d=h(" to filter"),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d)},p(e,t){1&t&&p!==(p=e[3].radioSeeds.toFilter+"")&&$(c,p)},d(e){e&&g(t)}}}function As(e){let t,n,s,r,o=Z(Object.entries(e[0].capabilities[e[2]])),i=[];for(let t=0;t<o.length;t+=1)i[t]=zs(vs(e,o,t));return{c(){t=f("div"),n=f("h5"),n.textContent="Platform Capabilities",s=y(),r=f("div");for(let e=0;e<i.length;e+=1)i[e].c();k(n,"class","text-sm font-medium text-gray-900 mb-2"),k(r,"class","flex flex-wrap gap-2"),k(t,"class","mt-4 pt-4 border-t border-gray-200")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(r,null)},p(e,t){if(1&t){let n;for(o=Z(Object.entries(e[0].capabilities[e[2]])),n=0;n<o.length;n+=1){const s=vs(e,o,n);i[n]?i[n].p(s,t):(i[n]=zs(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&g(t),p(i,e)}}}function zs(e){let t,n,s,r,o=e[6].replace(/_/g," ").toLowerCase()+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Ps(e[7]))},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){1&s&&o!==(o=e[6].replace(/_/g," ").toLowerCase()+"")&&$(n,o),1&s&&r!==(r="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Ps(e[7]))&&k(t,"class",r)},d(e){e&&g(t)}}}function js(e){let t,n,s,r,o,i,a,l,c,d,p,v,b,w,C,_,L,M,S,A,z,j,T=e[2]+"",B=e[2]+"",H=e[3].likedSongs&&Cs(e),P=e[3].playlists&&_s(e),E=e[3].following&&Ms(e),F=e[3].radioSeeds&&Ss(e),I=e[0].capabilities[e[2]]&&As(e);return{c(){t=f("div"),n=f("div"),s=f("div"),r=x("svg"),o=x("path"),a=y(),l=f("div"),c=f("h4"),d=h(T),p=y(),v=f("p"),b=h("Impact preview for your "),w=h(B),C=h(" library"),_=y(),L=f("div"),H&&H.c(),M=y(),P&&P.c(),S=y(),E&&E.c(),A=y(),F&&F.c(),z=y(),I&&I.c(),j=y(),k(o,"d",i=Hs(e[2])),k(r,"class","h-8 w-8 text-green-500"),k(r,"fill","currentColor"),k(r,"viewBox","0 0 24 24"),k(s,"class","flex-shrink-0"),k(c,"class","text-lg font-medium text-gray-900 capitalize"),k(v,"class","text-sm text-gray-500"),k(l,"class","ml-3"),k(n,"class","flex items-center mb-4"),k(L,"class","grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"),k(t,"class","border border-gray-200 rounded-lg p-6")},m(e,i){m(e,t,i),u(t,n),u(n,s),u(s,r),u(r,o),u(n,a),u(n,l),u(l,c),u(c,d),u(l,p),u(l,v),u(v,b),u(v,w),u(v,C),u(t,_),u(t,L),H&&H.m(L,null),u(L,M),P&&P.m(L,null),u(L,S),E&&E.m(L,null),u(L,A),F&&F.m(L,null),u(t,z),I&&I.m(t,null),u(t,j)},p(e,n){1&n&&i!==(i=Hs(e[2]))&&k(o,"d",i),1&n&&T!==(T=e[2]+"")&&$(d,T),1&n&&B!==(B=e[2]+"")&&$(w,B),e[3].likedSongs?H?H.p(e,n):(H=Cs(e),H.c(),H.m(L,M)):H&&(H.d(1),H=null),e[3].playlists?P?P.p(e,n):(P=_s(e),P.c(),P.m(L,S)):P&&(P.d(1),P=null),e[3].following?E?E.p(e,n):(E=Ms(e),E.c(),E.m(L,A)):E&&(E.d(1),E=null),e[3].radioSeeds?F?F.p(e,n):(F=Ss(e),F.c(),F.m(L,null)):F&&(F.d(1),F=null),e[0].capabilities[e[2]]?I?I.p(e,n):(I=As(e),I.c(),I.m(t,j)):I&&(I.d(1),I=null)},d(e){e&&g(t),H&&H.d(),P&&P.d(),E&&E.d(),F&&F.d(),I&&I.d()}}}function Ts(t){let n;function s(e,t){return e[0]?ws:bs}let r=s(t),o=r(t);return{c(){o.c(),n=v()},m(e,t){o.m(e,t),m(e,n,t)},p(e,[t]){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){e&&g(n),o.d(e)}}}function Bs(e){const t=parseInt(e.replace("s",""));if(t<60)return`${t} seconds`;return`${Math.floor(t/60)}m ${t%60}s`}function Hs(e){return"spotify"===e?"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"}function Ps(e){switch(e){case"SUPPORTED":return"text-green-600 bg-green-100";case"LIMITED":return"text-yellow-600 bg-yellow-100";case"UNSUPPORTED":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}function Es(e,t,n){let s,r;return d(e,cs,e=>n(1,r=e)),e.$$.update=()=>{2&e.$$.dirty&&n(0,s=r.currentPlan)},[s,r]}class Fs extends oe{constructor(e){super(),re(this,e,Es,Ts,o,{})}}function Is(e,t,n){const s=e.slice();return s[7]=t[n],s}function Ds(e){let t,n,s,r,o,i,a,l,c,d,p,h,v,w,C,$;function _(e,t){return e[0].isExecuting?Vs:Rs}let L=_(e),M=L(e);return{c(){t=f("div"),n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("h3"),i.textContent="Ready to Execute",a=y(),l=f("p"),l.textContent="Your enforcement plan is ready. Click execute to apply changes to your music library.",c=y(),d=f("div"),p=f("button"),M.c(),v=y(),w=f("div"),w.innerHTML="<p>⚠️ This action will modify your music library</p> <p>Some changes may not be reversible</p>",k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d","M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(s,"class","mx-auto h-12 w-12 text-indigo-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(i,"class","mt-2 text-lg font-medium text-gray-900"),k(l,"class","mt-1 text-sm text-gray-500"),p.disabled=h=e[0].isExecuting,k(p,"class","inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(d,"class","mt-6"),k(w,"class","mt-4 text-xs text-gray-500"),k(n,"class","text-center"),k(t,"class","bg-white shadow rounded-lg p-6")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(s,r),u(n,o),u(n,i),u(n,a),u(n,l),u(n,c),u(n,d),u(d,p),M.m(p,null),u(n,v),u(n,w),C||($=b(p,"click",e[4]),C=!0)},p(e,t){L!==(L=_(e))&&(M.d(1),M=L(e),M&&(M.c(),M.m(p,null))),1&t&&h!==(h=e[0].isExecuting)&&(p.disabled=h)},d(e){e&&g(t),M.d(),C=!1,$()}}}function Ns(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W=e[3].id.slice(0,8)+"",Z=e[3].status+"",K=e[3].summary.totalItems+"",X=e[3].summary.completedItems+"",ee=e[3].summary.failedItems+"",te=e[3].summary.skippedItems+"",ne=e[2]&&Us(e),se=e[3].items.length>0&&qs(e);return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("h3"),r.textContent="Enforcement Execution",o=y(),i=f("p"),a=h("Batch ID: "),l=f("span"),c=h(W),d=h("..."),p=y(),x=f("span"),v=h(Z),w=y(),ne&&ne.c(),C=y(),_=f("div"),L=f("div"),M=f("div"),S=h(K),A=y(),z=f("div"),z.textContent="Total Items",j=y(),T=f("div"),B=f("div"),H=h(X),P=y(),E=f("div"),E.textContent="Completed",F=y(),I=f("div"),D=f("div"),N=h(ee),O=y(),R=f("div"),R.textContent="Failed",V=y(),U=f("div"),q=f("div"),J=h(te),Y=y(),G=f("div"),G.textContent="Skipped",Q=y(),se&&se.c(),k(r,"class","text-lg font-medium text-gray-900"),k(l,"class","font-mono"),k(i,"class","text-sm text-gray-500"),k(x,"class",b="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Ws(e[3].status)),k(n,"class","flex items-center justify-between mb-4"),k(M,"class","text-lg font-semibold text-gray-900"),k(z,"class","text-xs text-gray-500"),k(L,"class","bg-gray-50 rounded-lg p-3 text-center"),k(B,"class","text-lg font-semibold text-green-600"),k(E,"class","text-xs text-gray-500"),k(T,"class","bg-green-50 rounded-lg p-3 text-center"),k(D,"class","text-lg font-semibold text-red-600"),k(R,"class","text-xs text-gray-500"),k(I,"class","bg-red-50 rounded-lg p-3 text-center"),k(q,"class","text-lg font-semibold text-yellow-600"),k(G,"class","text-xs text-gray-500"),k(U,"class","bg-yellow-50 rounded-lg p-3 text-center"),k(_,"class","grid grid-cols-1 gap-4 sm:grid-cols-4 mb-6"),k(t,"class","bg-white shadow rounded-lg p-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(s,o),u(s,i),u(i,a),u(i,l),u(l,c),u(l,d),u(n,p),u(n,x),u(x,v),u(t,w),ne&&ne.m(t,null),u(t,C),u(t,_),u(_,L),u(L,M),u(M,S),u(L,A),u(L,z),u(_,j),u(_,T),u(T,B),u(B,H),u(T,P),u(T,E),u(_,F),u(_,I),u(I,D),u(D,N),u(I,O),u(I,R),u(_,V),u(_,U),u(U,q),u(q,J),u(U,Y),u(U,G),u(t,Q),se&&se.m(t,null)},p(e,n){8&n&&W!==(W=e[3].id.slice(0,8)+"")&&$(c,W),8&n&&Z!==(Z=e[3].status+"")&&$(v,Z),8&n&&b!==(b="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Ws(e[3].status))&&k(x,"class",b),e[2]?ne?ne.p(e,n):(ne=Us(e),ne.c(),ne.m(t,C)):ne&&(ne.d(1),ne=null),8&n&&K!==(K=e[3].summary.totalItems+"")&&$(S,K),8&n&&X!==(X=e[3].summary.completedItems+"")&&$(H,X),8&n&&ee!==(ee=e[3].summary.failedItems+"")&&$(N,ee),8&n&&te!==(te=e[3].summary.skippedItems+"")&&$(J,te),e[3].items.length>0?se?se.p(e,n):(se=qs(e),se.c(),se.m(t,null)):se&&(se.d(1),se=null)},d(e){e&&g(t),ne&&ne.d(),se&&se.d()}}}function Os(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No enforcement plan available</h3> <p class="mt-1 text-sm text-gray-500">Create a plan first to execute enforcement.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Rs(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Execute Enforcement Plan"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(t,"class","-ml-1 mr-3 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Vs(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n              Starting Execution..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function Us(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,_,M,S,A,z,j,T,B,H,P,E,F=e[2].processed+"",I=e[2].total+"",D=e[2].percentage+"",N=e[2].completed+"",O=e[2].failed+"",R=e[2].skipped+"";return{c(){t=f("div"),n=f("div"),s=f("span"),s.textContent="Progress",r=y(),o=f("span"),i=h(F),a=h(" / "),l=h(I),c=h(" ("),d=h(D),p=h("%)"),x=y(),v=f("div"),b=f("div"),w=y(),C=f("div"),_=f("span"),M=h(N),S=h(" completed"),A=y(),z=f("span"),j=h(O),T=h(" failed"),B=y(),H=f("span"),P=h(R),E=h(" skipped"),k(n,"class","flex justify-between text-sm text-gray-600 mb-2"),k(b,"class","bg-indigo-600 h-2 rounded-full transition-all duration-300"),L(b,"width",e[2].percentage+"%"),k(v,"class","w-full bg-gray-200 rounded-full h-2"),k(C,"class","flex justify-between text-xs text-gray-500 mt-1"),k(t,"class","mb-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(o,c),u(o,d),u(o,p),u(t,x),u(t,v),u(v,b),u(t,w),u(t,C),u(C,_),u(_,M),u(_,S),u(C,A),u(C,z),u(z,j),u(z,T),u(C,B),u(C,H),u(H,P),u(H,E)},p(e,t){4&t&&F!==(F=e[2].processed+"")&&$(i,F),4&t&&I!==(I=e[2].total+"")&&$(l,I),4&t&&D!==(D=e[2].percentage+"")&&$(d,D),4&t&&L(b,"width",e[2].percentage+"%"),4&t&&N!==(N=e[2].completed+"")&&$(M,N),4&t&&O!==(O=e[2].failed+"")&&$(j,O),4&t&&R!==(R=e[2].skipped+"")&&$(P,R)},d(e){e&&g(t)}}}function qs(e){let t,n,s,r,o=Z(e[3].items.slice(0,10)),i=[];for(let t=0;t<o.length;t+=1)i[t]=Ys(Is(e,o,t));return{c(){t=f("div"),n=f("h4"),n.textContent="Recent Actions",s=y(),r=f("div");for(let e=0;e<i.length;e+=1)i[e].c();k(n,"class","text-sm font-medium text-gray-900 mb-3"),k(r,"class","space-y-2 max-h-64 overflow-y-auto")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(r,null)},p(e,t){if(8&t){let n;for(o=Z(e[3].items.slice(0,10)),n=0;n<o.length;n+=1){const s=Is(e,o,n);i[n]?i[n].p(s,t):(i[n]=Ys(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&g(t),p(i,e)}}}function Js(e){let t,n,s,r;return{c(){t=f("button"),n=x("svg"),s=x("path"),k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(n,"class","h-4 w-4"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(t,"title",r=e[7].errorMessage),k(t,"class","text-red-400 hover:text-red-600")},m(e,r){m(e,t,r),u(t,n),u(n,s)},p(e,n){8&n&&r!==(r=e[7].errorMessage)&&k(t,"title",r)},d(e){e&&g(t)}}}function Ys(e){let t,n,s,r,o,i,a,l,c,d,p,v,b,w,C,_,L,M,S,A,z,j,T=e[7].action.replace(/_/g," ")+"",B=e[7].entityType+"",H=e[7].entityId.slice(0,20)+"",P=e[7].status+"",E="failed"===e[7].status&&e[7].errorMessage&&Js(e);return{c(){t=f("div"),n=f("div"),s=x("svg"),r=x("path"),i=y(),a=f("div"),l=f("div"),c=h(T),d=y(),p=f("div"),v=h(B),b=h(": "),w=h(H),C=h("..."),_=y(),L=f("div"),M=f("span"),S=h(P),z=y(),E&&E.c(),j=y(),k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d",o=Zs(e[7].action)),k(s,"class","h-4 w-4 text-gray-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(l,"class","text-sm font-medium text-gray-900"),k(p,"class","text-xs text-gray-500"),k(n,"class","flex items-center space-x-3"),k(M,"class",A="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+Ws(e[7].status)),k(L,"class","flex items-center space-x-2"),k(t,"class","flex items-center justify-between py-2 px-3 bg-gray-50 rounded-md")},m(e,o){m(e,t,o),u(t,n),u(n,s),u(s,r),u(n,i),u(n,a),u(a,l),u(l,c),u(a,d),u(a,p),u(p,v),u(p,b),u(p,w),u(p,C),u(t,_),u(t,L),u(L,M),u(M,S),u(L,z),E&&E.m(L,null),u(t,j)},p(e,t){8&t&&o!==(o=Zs(e[7].action))&&k(r,"d",o),8&t&&T!==(T=e[7].action.replace(/_/g," ")+"")&&$(c,T),8&t&&B!==(B=e[7].entityType+"")&&$(v,B),8&t&&H!==(H=e[7].entityId.slice(0,20)+"")&&$(w,H),8&t&&P!==(P=e[7].status+"")&&$(S,P),8&t&&A!==(A="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+Ws(e[7].status))&&k(M,"class",A),"failed"===e[7].status&&e[7].errorMessage?E?E.p(e,t):(E=Js(e),E.c(),E.m(L,null)):E&&(E.d(1),E=null)},d(e){e&&g(t),E&&E.d()}}}function Gs(e){let t,n,s,r,o,i,a,l,c,d,p,x=e[0].error+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(x),l=y(),c=f("button"),c.textContent="Dismiss",k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(c,"class","mt-2 text-sm text-red-600 hover:text-red-500"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","bg-red-50 border border-red-200 rounded-md p-4")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a),u(o,l),u(o,c),d||(p=b(c,"click",e[6]),d=!0)},p(e,t){1&t&&x!==(x=e[0].error+"")&&$(a,x)},d(e){e&&g(t),d=!1,p()}}}function Qs(t){let n,s;function r(e,t){return e[1]?e[3]?Ns:Ds:Os}let o=r(t),i=o(t),a=t[0].error&&Gs(t);return{c(){n=f("div"),i.c(),s=y(),a&&a.c(),k(n,"class","space-y-6")},m(e,t){m(e,n,t),i.m(n,null),u(n,s),a&&a.m(n,null)},p(e,[t]){o===(o=r(e))&&i?i.p(e,t):(i.d(1),i=o(e),i&&(i.c(),i.m(n,s))),e[0].error?a?a.p(e,t):(a=Gs(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:e,o:e,d(e){e&&g(n),i.d(),a&&a.d()}}}function Ws(e){switch(e){case"pending":default:return"text-gray-600 bg-gray-100";case"running":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-yellow-600 bg-yellow-100"}}function Zs(e){switch(e){case"remove_liked_song":return"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z";case"remove_playlist_track":return"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3";case"unfollow_artist":return"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}function Ks(e,t,n){let s,r,o,i,a;d(e,us,e=>n(5,i=e)),d(e,cs,e=>n(0,a=e));return e.$$.update=()=>{1&e.$$.dirty&&n(1,s=a.currentPlan),1&e.$$.dirty&&n(3,r=a.currentBatch),32&e.$$.dirty&&n(2,o=i)},[a,s,o,r,async function(){if(!s)return;confirm("Are you sure you want to execute this enforcement plan? This will modify your music library and some changes may not be reversible.")&&await gs.executePlan(s.planId)},i,()=>gs.clearError()]}class Xs extends oe{constructor(e){super(),re(this,e,Ks,Qs,o,{})}}function er(e,t,n){const s=e.slice();return s[5]=t[n],s}function tr(e){let t;return{c(){t=f("div"),t.innerHTML='<svg class="inline h-4 w-4 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n        Rollback available',k(t,"class","text-sm text-gray-500")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function nr(e){let t,n,s=Z(e[0]),r=[];for(let t=0;t<s.length;t+=1)r[t]=cr(er(e,s,t));return{c(){t=f("div"),n=f("ul");for(let e=0;e<r.length;e+=1)r[e].c();k(n,"class","divide-y divide-gray-200"),k(t,"class","bg-white shadow overflow-hidden sm:rounded-md")},m(e,s){m(e,t,s),u(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null)},p(e,t){if(5&t){let o;for(s=Z(e[0]),o=0;o<s.length;o+=1){const i=er(e,s,o);r[o]?r[o].p(i,t):(r[o]=cr(i),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(e){e&&g(t),p(r,e)}}}function sr(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No enforcement history</h3> <p class="mt-1 text-sm text-gray-500">Your enforcement executions will appear here after you run them.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function rr(e){let t,n,s=mr(e[5].completedAt)+"";return{c(){t=h("• Completed "),n=h(s)},m(e,s){m(e,t,s),m(e,n,s)},p(e,t){1&t&&s!==(s=mr(e[5].completedAt)+"")&&$(n,s)},d(e){e&&(g(t),g(n))}}}function or(e){let t,n,s;function r(){return e[4](e[5])}return{c(){t=f("button"),t.innerHTML='<svg class="-ml-0.5 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>\n                      Rollback',k(t,"class","inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,t,o),n||(s=b(t,"click",r),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,s()}}}function ir(e){let t;return{c(){t=h(", block collaborations")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function ar(e){let t;return{c(){t=h(", block featuring")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function lr(e){let t;return{c(){t=h(", block songwriter credits")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function cr(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be,we,ke,Ce,$e,_e,Le,Me,Se,Ae,ze,je=e[5].provider+"",Te=e[5].status+"",Be=mr(e[5].createdAt)+"",He=e[5].id.slice(0,8)+"",Pe=gr(e[5])+"",Ee=e[5].summary.completedItems+"",Fe=e[5].summary.totalItems+"",Ie=e[5].summary.totalItems+"",De=e[5].summary.completedItems+"",Ne=e[5].summary.failedItems+"",Oe=e[5].summary.skippedItems+"",Re=e[5].options.aggressiveness+"",Ve=e[5].completedAt&&rr(e),Ue="completed"===e[5].status&&e[5].summary.completedItems>0&&or(e),qe=e[5].options.blockCollabs&&ir(),Je=e[5].options.blockFeaturing&&ar(),Ye=e[5].options.blockSongwriterOnly&&lr();return{c(){t=f("li"),n=f("div"),s=f("div"),r=f("div"),o=f("div"),o.innerHTML='<svg class="h-8 w-8 text-green-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"></path></svg>',i=y(),a=f("div"),l=f("div"),c=f("p"),d=h(je),p=h(" Enforcement"),x=y(),v=f("span"),b=h(Te),C=y(),_=f("div"),L=f("p"),M=h("Executed "),S=h(Be),A=y(),Ve&&Ve.c(),z=y(),j=f("div"),T=h("Batch ID: "),B=f("span"),H=h(He),P=h("..."),E=y(),F=f("div"),I=f("div"),D=f("div"),N=h(Pe),O=h("% success"),R=y(),V=f("div"),U=h(Ee),q=h(" / "),J=h(Fe),Y=h(" items"),G=y(),Ue&&Ue.c(),Q=y(),W=f("div"),Z=f("div"),K=f("div"),X=f("div"),ee=h(Ie),te=y(),ne=f("div"),ne.textContent="Total",se=y(),re=f("div"),oe=f("div"),ie=h(De),ae=y(),le=f("div"),le.textContent="Completed",ce=y(),de=f("div"),ue=f("div"),me=h(Ne),ge=y(),pe=f("div"),pe.textContent="Failed",fe=y(),xe=f("div"),he=f("div"),ye=h(Oe),ve=y(),be=f("div"),be.textContent="Skipped",we=y(),ke=f("div"),Ce=f("div"),$e=f("span"),$e.textContent="Options:",_e=y(),Le=h(Re),Me=h(" aggressiveness\n                  "),qe&&qe.c(),Se=y(),Je&&Je.c(),Ae=y(),Ye&&Ye.c(),ze=y(),k(o,"class","flex-shrink-0"),k(c,"class","text-sm font-medium text-gray-900 capitalize"),k(v,"class",w="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+ur(e[5].status)),k(l,"class","flex items-center"),k(_,"class","mt-1 flex items-center text-sm text-gray-500"),k(B,"class","font-mono"),k(j,"class","mt-1 text-xs text-gray-400"),k(a,"class","ml-4"),k(r,"class","flex items-center"),k(D,"class","text-sm font-medium text-gray-900"),k(V,"class","text-xs text-gray-500"),k(I,"class","text-right"),k(F,"class","flex items-center space-x-4"),k(s,"class","flex items-center justify-between"),k(X,"class","text-lg font-semibold text-gray-900"),k(ne,"class","text-xs text-gray-500"),k(K,"class","text-center"),k(oe,"class","text-lg font-semibold text-green-600"),k(le,"class","text-xs text-gray-500"),k(re,"class","text-center"),k(ue,"class","text-lg font-semibold text-red-600"),k(pe,"class","text-xs text-gray-500"),k(de,"class","text-center"),k(he,"class","text-lg font-semibold text-yellow-600"),k(be,"class","text-xs text-gray-500"),k(xe,"class","text-center"),k(Z,"class","grid grid-cols-2 gap-4 sm:grid-cols-4"),k(W,"class","mt-4"),k($e,"class","font-medium"),k(Ce,"class","text-xs text-gray-500"),k(ke,"class","mt-3 pt-3 border-t border-gray-200"),k(n,"class","px-4 py-4 sm:px-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(r,o),u(r,i),u(r,a),u(a,l),u(l,c),u(c,d),u(c,p),u(l,x),u(l,v),u(v,b),u(a,C),u(a,_),u(_,L),u(L,M),u(L,S),u(L,A),Ve&&Ve.m(L,null),u(a,z),u(a,j),u(j,T),u(j,B),u(B,H),u(B,P),u(s,E),u(s,F),u(F,I),u(I,D),u(D,N),u(D,O),u(I,R),u(I,V),u(V,U),u(V,q),u(V,J),u(V,Y),u(F,G),Ue&&Ue.m(F,null),u(n,Q),u(n,W),u(W,Z),u(Z,K),u(K,X),u(X,ee),u(K,te),u(K,ne),u(Z,se),u(Z,re),u(re,oe),u(oe,ie),u(re,ae),u(re,le),u(Z,ce),u(Z,de),u(de,ue),u(ue,me),u(de,ge),u(de,pe),u(Z,fe),u(Z,xe),u(xe,he),u(he,ye),u(xe,ve),u(xe,be),u(n,we),u(n,ke),u(ke,Ce),u(Ce,$e),u(Ce,_e),u(Ce,Le),u(Ce,Me),qe&&qe.m(Ce,null),u(Ce,Se),Je&&Je.m(Ce,null),u(Ce,Ae),Ye&&Ye.m(Ce,null),u(t,ze)},p(e,t){1&t&&je!==(je=e[5].provider+"")&&$(d,je),1&t&&Te!==(Te=e[5].status+"")&&$(b,Te),1&t&&w!==(w="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+ur(e[5].status))&&k(v,"class",w),1&t&&Be!==(Be=mr(e[5].createdAt)+"")&&$(S,Be),e[5].completedAt?Ve?Ve.p(e,t):(Ve=rr(e),Ve.c(),Ve.m(L,null)):Ve&&(Ve.d(1),Ve=null),1&t&&He!==(He=e[5].id.slice(0,8)+"")&&$(H,He),1&t&&Pe!==(Pe=gr(e[5])+"")&&$(N,Pe),1&t&&Ee!==(Ee=e[5].summary.completedItems+"")&&$(U,Ee),1&t&&Fe!==(Fe=e[5].summary.totalItems+"")&&$(J,Fe),"completed"===e[5].status&&e[5].summary.completedItems>0?Ue?Ue.p(e,t):(Ue=or(e),Ue.c(),Ue.m(F,null)):Ue&&(Ue.d(1),Ue=null),1&t&&Ie!==(Ie=e[5].summary.totalItems+"")&&$(ee,Ie),1&t&&De!==(De=e[5].summary.completedItems+"")&&$(ie,De),1&t&&Ne!==(Ne=e[5].summary.failedItems+"")&&$(me,Ne),1&t&&Oe!==(Oe=e[5].summary.skippedItems+"")&&$(ye,Oe),1&t&&Re!==(Re=e[5].options.aggressiveness+"")&&$(Le,Re),e[5].options.blockCollabs?qe||(qe=ir(),qe.c(),qe.m(Ce,Se)):qe&&(qe.d(1),qe=null),e[5].options.blockFeaturing?Je||(Je=ar(),Je.c(),Je.m(Ce,Ae)):Je&&(Je.d(1),Je=null),e[5].options.blockSongwriterOnly?Ye||(Ye=lr(),Ye.c(),Ye.m(Ce,null)):Ye&&(Ye.d(1),Ye=null)},d(e){e&&g(t),Ve&&Ve.d(),Ue&&Ue.d(),qe&&qe.d(),Je&&Je.d(),Ye&&Ye.d()}}}function dr(t){let n,s,r,o,i,a,l,c=t[1]&&tr();function d(e,t){return 0===e[0].length?sr:nr}let p=d(t),x=p(t);return{c(){n=f("div"),s=f("div"),r=f("div"),r.innerHTML='<h3 class="text-lg font-medium text-gray-900">Action History</h3> <p class="text-sm text-gray-500">View and manage your past enforcement executions.</p>',o=y(),c&&c.c(),i=y(),x.c(),a=y(),l=f("div"),l.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">About Rollbacks</h3> <div class="mt-2 text-sm text-blue-700"><p>Rollback attempts to undo changes made during enforcement. Success depends on platform capabilities:</p> <ul class="list-disc list-inside mt-1 space-y-1"><li>Re-adding liked songs and follows: Usually successful</li> <li>Re-adding playlist tracks: May not preserve original order</li> <li>Radio seed changes: May not be fully reversible</li></ul></div></div></div>',k(s,"class","flex justify-between items-center"),k(l,"class","bg-blue-50 border border-blue-200 rounded-md p-4"),k(n,"class","space-y-6")},m(e,t){m(e,n,t),u(n,s),u(s,r),u(s,o),c&&c.m(s,null),u(n,i),x.m(n,null),u(n,a),u(n,l)},p(e,[t]){e[1]?c||(c=tr(),c.c(),c.m(s,null)):c&&(c.d(1),c=null),p===(p=d(e))&&x?x.p(e,t):(x.d(1),x=p(e),x&&(x.c(),x.m(n,a)))},i:e,o:e,d(e){e&&g(n),c&&c.d(),x.d()}}}function ur(e){switch(e){case"pending":default:return"text-gray-600 bg-gray-100";case"running":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-yellow-600 bg-yellow-100"}}function mr(e){return new Date(e).toLocaleString()}function gr(e){const t=e.summary.totalItems,n=e.summary.completedItems;return t>0?Math.round(n/t*100):0}function pr(e,t,n){let s,r,o;async function i(e){if(confirm("Are you sure you want to rollback this batch? This will attempt to undo the changes made during this enforcement.")){const t=await gs.rollbackBatch(e);t.success||alert(`Rollback failed: ${t.message}`)}}d(e,cs,e=>n(3,r=e)),d(e,ms,e=>n(1,o=e));return e.$$.update=()=>{8&e.$$.dirty&&n(0,s=r.actionHistory)},[s,o,i,r,e=>i(e.id)]}class fr extends oe{constructor(e){super(),re(this,e,pr,dr,o,{})}}function xr(e){let t,n,s,r,o,i,a,l,c,d,p,x,h=!e[1]&&hr(),v=0===e[2]&&yr();return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("h3"),i.textContent="Setup Required",a=y(),l=f("div"),c=f("p"),c.textContent="Before you can plan enforcement, you need:",d=y(),p=f("ul"),h&&h.c(),x=y(),v&&v.c(),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-yellow-800"),k(p,"class","list-disc list-inside mt-1 space-y-1"),k(l,"class","mt-2 text-sm text-yellow-700"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","mb-6 bg-yellow-50 border border-yellow-200 rounded-md p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),u(l,p),h&&h.m(p,null),u(p,x),v&&v.m(p,null)},p(e,t){e[1]?h&&(h.d(1),h=null):h||(h=hr(),h.c(),h.m(p,x)),0===e[2]?v||(v=yr(),v.c(),v.m(p,null)):v&&(v.d(1),v=null)},d(e){e&&g(t),h&&h.d(),v&&v.d()}}}function hr(e){let t;return{c(){t=f("li"),t.textContent="Connect at least one streaming service (Spotify)"},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function yr(e){let t;return{c(){t=f("li"),t.textContent="Add artists to your Do-Not-Play list"},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function vr(t){let n,s;return n=new fr({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function br(t){let n,s;return n=new Xs({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function wr(e){let t,n,s,r,o,i,a,l,c,d;o=new hs({});const p=[Cr,kr],x=[];function h(e,t){return e[3]?0:1}a=h(e),l=x[a]=p[a](e);let v=e[4].error&&Lr(e);return{c(){t=f("div"),n=f("div"),s=f("h3"),s.textContent="Enforcement Options",r=y(),ee(o.$$.fragment),i=y(),l.c(),c=y(),v&&v.c(),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(n,"class","bg-white shadow rounded-lg p-6"),k(t,"class","space-y-6")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),te(o,n,null),u(t,i),x[a].m(t,null),u(t,c),v&&v.m(t,null),d=!0},p(e,n){let s=a;a=h(e),a===s?x[a].p(e,n):(Y(),W(x[s],1,1,()=>{x[s]=null}),G(),l=x[a],l?l.p(e,n):(l=x[a]=p[a](e),l.c()),Q(l,1),l.m(t,c)),e[4].error?v?v.p(e,n):(v=Lr(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(e){d||(Q(o.$$.fragment,e),Q(l),d=!0)},o(e){W(o.$$.fragment,e),W(l),d=!1},d(e){e&&g(t),ne(o),x[a].d(),v&&v.d()}}}function kr(t){let n,s,r,o,i,a,l,c,d;function p(e,t){return e[4].isPlanning?_r:$r}let x=p(t),h=x(t);return{c(){n=f("div"),s=f("h3"),s.textContent="Create Enforcement Plan",r=y(),o=f("p"),o.textContent="Generate a dry-run preview to see what changes will be made to your music library.",i=y(),a=f("button"),h.c(),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(o,"class","text-sm text-gray-600 mb-4"),a.disabled=l=t[4].isPlanning||!t[1]||0===t[2],k(a,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(n,"class","bg-white shadow rounded-lg p-6")},m(e,l){m(e,n,l),u(n,s),u(n,r),u(n,o),u(n,i),u(n,a),h.m(a,null),c||(d=b(a,"click",t[5]),c=!0)},p(e,t){x!==(x=p(e))&&(h.d(1),h=x(e),h&&(h.c(),h.m(a,null))),22&t&&l!==(l=e[4].isPlanning||!e[1]||0===e[2])&&(a.disabled=l)},i:e,o:e,d(e){e&&g(n),h.d(),c=!1,d()}}}function Cr(t){let n,s,r,o,i,a,l,c,d,p;return l=new Fs({}),{c(){n=f("div"),s=f("div"),r=f("h3"),r.textContent="Enforcement Preview",o=y(),i=f("button"),i.textContent="Clear Plan",a=y(),ee(l.$$.fragment),k(r,"class","text-lg font-medium text-gray-900"),k(i,"class","text-sm text-gray-500 hover:text-gray-700"),k(s,"class","flex justify-between items-center mb-4"),k(n,"class","bg-white shadow rounded-lg p-6")},m(e,g){m(e,n,g),u(n,s),u(s,r),u(s,o),u(s,i),u(n,a),te(l,n,null),c=!0,d||(p=b(i,"click",t[10]),d=!0)},p:e,i(e){c||(Q(l.$$.fragment,e),c=!0)},o(e){W(l.$$.fragment,e),c=!1},d(e){e&&g(n),ne(l),d=!1,p()}}}function $r(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Create Enforcement Plan"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),k(t,"class","-ml-1 mr-2 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function _r(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n              Creating Plan..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function Lr(e){let t,n,s,r,o,i,a,l,c,d,p,x=e[4].error+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(x),l=y(),c=f("button"),c.textContent="Dismiss",k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(c,"class","mt-2 text-sm text-red-600 hover:text-red-500"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","bg-red-50 border border-red-200 rounded-md p-4")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a),u(o,l),u(o,c),d||(p=b(c,"click",e[11]),d=!0)},p(e,t){16&t&&x!==(x=e[4].error+"")&&$(a,x)},d(e){e&&g(t),d=!1,p()}}}function Mr(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,$,_,L,M,S,A,z,j,T,B,H=(!e[1]||0===e[2])&&xr(e);const P=[wr,br,vr],E=[];function F(e,t){return"plan"===e[0]?0:"execute"===e[0]?1:"history"===e[0]?2:-1}return~(A=F(e))&&(z=E[A]=P[A](e)),{c(){t=f("div"),n=f("div"),n.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Enforcement Planning</h2> <p class="mt-1 text-sm text-gray-600">Plan and execute blocklist enforcement across your connected streaming services.</p>',r=y(),H&&H.c(),o=y(),i=f("div"),a=f("nav"),l=f("button"),c=h("Plan Enforcement"),p=y(),x=f("button"),v=h("Execute Plan"),$=y(),_=f("button"),L=h("Action History"),S=y(),z&&z.c(),k(n,"class","mb-6"),k(l,"class",d="py-4 px-1 border-b-2 font-medium text-sm "+("plan"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(x,"class",w="py-4 px-1 border-b-2 font-medium text-sm "+("execute"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),x.disabled=C=!e[3],k(_,"class",M="py-4 px-1 border-b-2 font-medium text-sm "+("history"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(a,"class","flex space-x-8 px-6"),k(a,"aria-label","Tabs"),k(i,"class","bg-white shadow-sm rounded-lg mb-6"),k(t,"class","px-4 py-6 sm:px-0")},m(s,d){m(s,t,d),u(t,n),u(t,r),H&&H.m(t,null),u(t,o),u(t,i),u(i,a),u(a,l),u(l,c),u(a,p),u(a,x),u(x,v),u(a,$),u(a,_),u(_,L),u(t,S),~A&&E[A].m(t,null),j=!0,T||(B=[b(l,"click",e[7]),b(x,"click",e[8]),b(_,"click",e[9])],T=!0)},p(e,[n]){e[1]&&0!==e[2]?H&&(H.d(1),H=null):H?H.p(e,n):(H=xr(e),H.c(),H.m(t,o)),(!j||1&n&&d!==(d="py-4 px-1 border-b-2 font-medium text-sm "+("plan"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(l,"class",d),(!j||1&n&&w!==(w="py-4 px-1 border-b-2 font-medium text-sm "+("execute"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(x,"class",w),(!j||8&n&&C!==(C=!e[3]))&&(x.disabled=C),(!j||1&n&&M!==(M="py-4 px-1 border-b-2 font-medium text-sm "+("history"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(_,"class",M);let s=A;A=F(e),A===s?~A&&E[A].p(e,n):(z&&(Y(),W(E[s],1,1,()=>{E[s]=null}),G()),~A?(z=E[A],z?z.p(e,n):(z=E[A]=P[A](e),z.c()),Q(z,1),z.m(t,null)):z=null)},i(e){j||(Q(z),j=!0)},o(e){W(z),j=!1},d(e){e&&g(t),H&&H.d(),~A&&E[A].d(),T=!1,s(B)}}}function Sr(e,t,n){let s,r,o,i;d(e,Mt,e=>n(1,s=e)),d(e,zt,e=>n(2,r=e)),d(e,ds,e=>n(3,o=e)),d(e,cs,e=>n(4,i=e));let a="plan";function l(e){n(0,a=e)}T(()=>{gs.fetchActionHistory()});return[a,s,r,o,i,async function(){const e=[];s&&e.push("spotify"),0!==e.length&&await gs.createPlan(e,!0)},l,()=>l("plan"),()=>l("execute"),()=>l("history"),()=>gs.clearPlan(),()=>gs.clearError()]}class Ar extends oe{constructor(e){super(),re(this,e,Sr,Mr,o,{})}}const zr=ae({lists:[],currentList:null,subscriptions:[],subscriptionImpact:null,isLoading:!1,isLoadingList:!1,isLoadingImpact:!1,searchQuery:"",sortBy:"updated_at",sortOrder:"desc",error:null}),jr=le(zr,e=>{let t=e.lists;if(e.searchQuery.trim()){const n=e.searchQuery.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.criteria.toLowerCase().includes(n))}return t.sort((t,n)=>{let s=t[e.sortBy],r=n[e.sortBy];"created_at"!==e.sortBy&&"updated_at"!==e.sortBy||(s=new Date(s).getTime(),r=new Date(r).getTime()),"string"==typeof s&&(s=s.toLowerCase(),r=r.toLowerCase());const o=s<r?-1:s>r?1:0;return"asc"===e.sortOrder?o:-o}),t}),Tr=le(zr,e=>new Set(e.subscriptions.map(e=>e.list_id)));le(Tr,e=>t=>e.has(t));const Br={fetchLists:async()=>{zr.update(e=>({...e,isLoading:!0,error:null}));try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/community/lists",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success?zr.update(e=>({...e,lists:n.data,isLoading:!1})):zr.update(e=>({...e,error:n.message,isLoading:!1}))}catch(e){zr.update(e=>({...e,error:"Failed to fetch community lists",isLoading:!1}))}},fetchListDetails:async e=>{zr.update(e=>({...e,isLoadingList:!0,error:null}));try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/artists`,{headers:{Authorization:`Bearer ${t}`}}),s=await n.json();s.success?zr.update(e=>({...e,currentList:s.data,isLoadingList:!1})):zr.update(e=>({...e,error:s.message,isLoadingList:!1}))}catch(e){zr.update(e=>({...e,error:"Failed to fetch list details",isLoadingList:!1}))}},fetchSubscriptions:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/community/subscriptions",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&zr.update(e=>({...e,subscriptions:n.data}))}catch(e){console.error("Failed to fetch subscriptions:",e)}},getSubscriptionImpact:async e=>{zr.update(e=>({...e,isLoadingImpact:!0,error:null}));try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/impact`,{headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?(zr.update(e=>({...e,subscriptionImpact:s.data,isLoadingImpact:!1})),{success:!0,data:s.data}):(zr.update(e=>({...e,error:s.message,isLoadingImpact:!1})),{success:!1,message:s.message})}catch(e){return zr.update(e=>({...e,error:"Failed to get subscription impact",isLoadingImpact:!1})),{success:!1,message:"Failed to get subscription impact"}}},subscribe:async(e,t,n=!0)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/subscribe`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({version_pinned:t,auto_update:n})}),o=await r.json();return o.success?(await Br.fetchSubscriptions(),{success:!0}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to subscribe to list"}}},unsubscribe:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/unsubscribe`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?(await Br.fetchSubscriptions(),{success:!0}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to unsubscribe from list"}}},updateSubscription:async(e,t,n)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/subscription`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({version_pinned:t,auto_update:n})}),o=await r.json();return o.success?(await Br.fetchSubscriptions(),{success:!0}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to update subscription"}}},createList:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch("http://localhost:3000/api/v1/community/lists",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await n.json();return s.success?(await Br.fetchLists(),{success:!0,data:s.data}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to create community list"}}},updateSearch:e=>{zr.update(t=>({...t,searchQuery:e}))},updateSort:(e,t)=>{zr.update(n=>({...n,sortBy:e,sortOrder:t}))},clearCurrentList:()=>{zr.update(e=>({...e,currentList:null}))},clearError:()=>{zr.update(e=>({...e,error:null}))}};function Hr(e){let t;return{c(){t=f("span"),t.textContent="Subscribed",k(t,"class","ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium text-green-800 bg-green-100")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Pr(e){let t,n,s,r;return{c(){t=h("• "),n=f("a"),s=h("Governance"),k(n,"href",r=e[0].governance_url),k(n,"target","_blank"),k(n,"class","text-indigo-600 hover:text-indigo-500")},m(e,r){m(e,t,r),m(e,n,r),u(n,s)},p(e,t){1&t&&r!==(r=e[0].governance_url)&&k(n,"href",r)},d(e){e&&(g(t),g(n))}}}function Er(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n          Subscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),k(t,"class","-ml-0.5 mr-2 h-4 w-4"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Fr(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n          Unsubscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M6 18L18 6M6 6l12 12"),k(t,"class","-ml-0.5 mr-2 h-4 w-4"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Ir(t){let n,r,o,i,a,l,c,d,p,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge=t[0].name+"",pe=t[0].update_cadence+"",fe=t[0].description+"",xe=t[0].criteria+"",he=(t[0].artist_count||0)+"",ye=(t[0].subscriber_count||0)+"",ve=t[0].version+"",be=Dr(t[0].updated_at)+"",we=t[1]&&Hr(),ke=t[0].governance_url&&Pr(t);function Ce(e,t){return e[1]?Fr:Er}let $e=Ce(t),_e=$e(t);return{c(){n=f("div"),r=f("div"),o=f("div"),i=f("div"),a=f("h3"),l=h(ge),c=y(),we&&we.c(),d=y(),p=f("span"),v=h(pe),C=y(),_=f("p"),L=h(fe),M=y(),S=f("div"),A=f("h4"),A.textContent="Criteria",z=y(),j=f("p"),T=h(xe),B=y(),H=f("div"),P=f("div"),E=f("span"),F=x("svg"),I=x("path"),D=y(),N=h(he),O=h(" artists"),R=y(),V=f("span"),U=x("svg"),q=x("path"),J=y(),Y=h(ye),G=h(" subscribers"),Q=y(),W=f("span"),Z=h("v"),K=h(ve),X=y(),ee=f("div"),te=h("Updated "),ne=h(be),se=y(),ke&&ke.c(),re=y(),oe=f("div"),ie=f("div"),ae=f("button"),ae.textContent="View Details",le=y(),ce=f("button"),_e.c(),k(a,"class","text-lg font-medium text-gray-900 truncate"),k(i,"class","flex items-center"),k(p,"class",w="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+Nr(t[0].update_cadence)),k(o,"class","flex items-center justify-between"),k(_,"class","mt-2 text-sm text-gray-600 line-clamp-2"),k(A,"class","text-xs font-medium text-gray-900 uppercase tracking-wide"),k(j,"class","mt-1 text-sm text-gray-600 line-clamp-2"),k(S,"class","mt-3"),k(I,"stroke-linecap","round"),k(I,"stroke-linejoin","round"),k(I,"stroke-width","2"),k(I,"d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"),k(F,"class","inline h-4 w-4 text-gray-400 mr-1"),k(F,"fill","none"),k(F,"viewBox","0 0 24 24"),k(F,"stroke","currentColor"),k(q,"stroke-linecap","round"),k(q,"stroke-linejoin","round"),k(q,"stroke-width","2"),k(q,"d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"),k(U,"class","inline h-4 w-4 text-gray-400 mr-1"),k(U,"fill","none"),k(U,"viewBox","0 0 24 24"),k(U,"stroke","currentColor"),k(P,"class","flex items-center space-x-4"),k(H,"class","mt-4 flex items-center justify-between text-sm text-gray-500"),k(ee,"class","mt-4 text-xs text-gray-400"),k(r,"class","p-6"),k(ae,"class","text-sm text-indigo-600 hover:text-indigo-500 font-medium"),k(ce,"class",de="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md "+(t[1]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2"),k(ie,"class","flex justify-between items-center"),k(oe,"class","bg-gray-50 px-6 py-3"),k(n,"class","bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(a,l),u(i,c),we&&we.m(i,null),u(o,d),u(o,p),u(p,v),u(r,C),u(r,_),u(_,L),u(r,M),u(r,S),u(S,A),u(S,z),u(S,j),u(j,T),u(r,B),u(r,H),u(H,P),u(P,E),u(E,F),u(F,I),u(E,D),u(E,N),u(E,O),u(P,R),u(P,V),u(V,U),u(U,q),u(V,J),u(V,Y),u(V,G),u(H,Q),u(H,W),u(W,Z),u(W,K),u(r,X),u(r,ee),u(ee,te),u(ee,ne),u(ee,se),ke&&ke.m(ee,null),u(n,re),u(n,oe),u(oe,ie),u(ie,ae),u(ie,le),u(ie,ce),_e.m(ce,null),ue||(me=[b(ae,"click",t[2]),b(ce,"click",t[3])],ue=!0)},p(e,[t]){1&t&&ge!==(ge=e[0].name+"")&&$(l,ge),e[1]?we||(we=Hr(),we.c(),we.m(i,null)):we&&(we.d(1),we=null),1&t&&pe!==(pe=e[0].update_cadence+"")&&$(v,pe),1&t&&w!==(w="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+Nr(e[0].update_cadence))&&k(p,"class",w),1&t&&fe!==(fe=e[0].description+"")&&$(L,fe),1&t&&xe!==(xe=e[0].criteria+"")&&$(T,xe),1&t&&he!==(he=(e[0].artist_count||0)+"")&&$(N,he),1&t&&ye!==(ye=(e[0].subscriber_count||0)+"")&&$(Y,ye),1&t&&ve!==(ve=e[0].version+"")&&$(K,ve),1&t&&be!==(be=Dr(e[0].updated_at)+"")&&$(ne,be),e[0].governance_url?ke?ke.p(e,t):(ke=Pr(e),ke.c(),ke.m(ee,null)):ke&&(ke.d(1),ke=null),$e!==($e=Ce(e))&&(_e.d(1),_e=$e(e),_e&&(_e.c(),_e.m(ce,null))),2&t&&de!==(de="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md "+(e[1]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2")&&k(ce,"class",de)},i:e,o:e,d(e){e&&g(n),we&&we.d(),ke&&ke.d(),_e.d(),ue=!1,s(me)}}}function Dr(e){return new Date(e).toLocaleDateString()}function Nr(e){switch(e.toLowerCase()){case"daily":return"text-red-600 bg-red-100";case"weekly":return"text-yellow-600 bg-yellow-100";case"monthly":return"text-green-600 bg-green-100";case"as-needed":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}}function Or(e,t,n){let s,r;d(e,Tr,e=>n(4,r=e));let{list:o}=t;return e.$$set=e=>{"list"in e&&n(0,o=e.list)},e.$$.update=()=>{17&e.$$.dirty&&n(1,s=r.has(o.id))},[o,s,async function(){await Br.fetchListDetails(o.id)},async function(){if(s){const e=await Br.unsubscribe(o.id);e.success||alert(`Failed to unsubscribe: ${e.message}`)}else{const e=await Br.getSubscriptionImpact(o.id);if(e.success){if(confirm(`This list will add ${e.data.artists_to_add} artists to your DNP list. Continue?`)){const e=await Br.subscribe(o.id);e.success||alert(`Failed to subscribe: ${e.message}`)}}}},r]}class Rr extends oe{constructor(e){super(),re(this,e,Or,Ir,o,{list:0})}}function Vr(e,t,n){const s=e.slice();return s[15]=t[n],s}function Ur(e,t,n){const s=e.slice();return s[18]=t[n],s}function qr(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No list selected</h3> <p class="mt-1 text-sm text-gray-500">Select a list to view its details.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Jr(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be,we,ke,Ce,$e,_e,Le,Me,Se,Ae,ze,je,Te=e[0].version+"",Be=e[0].name+"",He=e[0].description+"",Pe=(e[0].artists?.length||0)+"",Ee=(e[0].subscriber_count||0)+"",Fe=e[0].update_cadence+"",Ie=e[0].criteria+"",De=e[0].update_cadence+"",Ne=lo(e[0].updated_at)+"",Oe=(e[0].artists?.length||0)+"",Re=e[5]&&Yr();function Ve(e,t){return e[5]?Qr:Gr}let Ue=Ve(e),qe=Ue(e),Je=e[2]&&Wr(e),Ye=e[0].governance_url&&Zr(e);function Ge(e,t){return e[1].isLoadingList?eo:e[0].artists&&e[0].artists.length>0?Xr:Kr}let Qe=Ge(e),We=Qe(e);return{c(){t=f("div"),n=f("div"),r=f("div"),o=f("button"),o.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n          Back to lists',i=y(),a=f("div"),Re&&Re.c(),l=y(),c=f("span"),d=h("v"),p=h(Te),x=y(),v=f("div"),w=f("div"),C=f("h1"),_=h(Be),L=y(),M=f("p"),S=h(He),A=y(),z=f("div"),j=f("div"),T=f("div"),B=h(Pe),H=y(),P=f("div"),P.textContent="Artists",E=y(),F=f("div"),I=f("div"),D=h(Ee),N=y(),O=f("div"),O.textContent="Subscribers",R=y(),V=f("div"),U=f("div"),q=h(Fe),J=y(),Y=f("div"),Y.textContent="Updates",G=y(),Q=f("div"),W=f("button"),qe.c(),K=y(),Je&&Je.c(),X=y(),ee=f("div"),te=f("h3"),te.textContent="List Criteria & Governance",ne=y(),se=f("div"),re=f("div"),oe=f("h4"),oe.textContent="Inclusion Criteria",ie=y(),ae=f("p"),le=h(Ie),ce=y(),de=f("div"),ue=f("div"),me=f("h4"),me.textContent="Update Cadence",ge=y(),pe=f("p"),fe=h(De),xe=y(),he=f("div"),ye=f("h4"),ye.textContent="Last Updated",ve=y(),be=f("p"),we=h(Ne),ke=y(),Ye&&Ye.c(),Ce=y(),$e=f("div"),_e=f("h3"),Le=h("Artists ("),Me=h(Oe),Se=h(")"),Ae=y(),We.c(),k(o,"class","inline-flex items-center text-sm text-gray-500 hover:text-gray-700"),k(c,"class","text-sm text-gray-500"),k(a,"class","flex items-center space-x-2"),k(r,"class","flex items-center justify-between mb-4"),k(C,"class","text-2xl font-bold text-gray-900"),k(M,"class","mt-2 text-gray-600"),k(T,"class","text-lg font-semibold text-gray-900"),k(P,"class","text-sm text-gray-500"),k(j,"class","text-center p-3 bg-gray-50 rounded-lg"),k(I,"class","text-lg font-semibold text-gray-900"),k(O,"class","text-sm text-gray-500"),k(F,"class","text-center p-3 bg-gray-50 rounded-lg"),k(U,"class","text-lg font-semibold text-gray-900"),k(Y,"class","text-sm text-gray-500"),k(V,"class","text-center p-3 bg-gray-50 rounded-lg"),k(z,"class","mt-4 grid grid-cols-1 gap-4 sm:grid-cols-3"),k(w,"class","flex-1"),k(W,"class",Z="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm "+(e[5]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2"),k(Q,"class","ml-6"),k(v,"class","flex justify-between items-start"),k(n,"class","bg-white shadow rounded-lg p-6"),k(te,"class","text-lg font-medium text-gray-900 mb-4"),k(oe,"class","text-sm font-medium text-gray-900"),k(ae,"class","mt-1 text-sm text-gray-600"),k(me,"class","text-sm font-medium text-gray-900"),k(pe,"class","mt-1 text-sm text-gray-600 capitalize"),k(ye,"class","text-sm font-medium text-gray-900"),k(be,"class","mt-1 text-sm text-gray-600"),k(de,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),k(se,"class","space-y-4"),k(ee,"class","bg-white shadow rounded-lg p-6"),k(_e,"class","text-lg font-medium text-gray-900 mb-4"),k($e,"class","bg-white shadow rounded-lg p-6"),k(t,"class","space-y-6")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(r,i),u(r,a),Re&&Re.m(a,null),u(a,l),u(a,c),u(c,d),u(c,p),u(n,x),u(n,v),u(v,w),u(w,C),u(C,_),u(w,L),u(w,M),u(M,S),u(w,A),u(w,z),u(z,j),u(j,T),u(T,B),u(j,H),u(j,P),u(z,E),u(z,F),u(F,I),u(I,D),u(F,N),u(F,O),u(z,R),u(z,V),u(V,U),u(U,q),u(V,J),u(V,Y),u(v,G),u(v,Q),u(Q,W),qe.m(W,null),u(t,K),Je&&Je.m(t,null),u(t,X),u(t,ee),u(ee,te),u(ee,ne),u(ee,se),u(se,re),u(re,oe),u(re,ie),u(re,ae),u(ae,le),u(se,ce),u(se,de),u(de,ue),u(ue,me),u(ue,ge),u(ue,pe),u(pe,fe),u(de,xe),u(de,he),u(he,ye),u(he,ve),u(he,be),u(be,we),u(se,ke),Ye&&Ye.m(se,null),u(t,Ce),u(t,$e),u($e,_e),u(_e,Le),u(_e,Me),u(_e,Se),u($e,Ae),We.m($e,null),ze||(je=[b(o,"click",e[6]),b(W,"click",e[7])],ze=!0)},p(e,n){e[5]?Re||(Re=Yr(),Re.c(),Re.m(a,l)):Re&&(Re.d(1),Re=null),1&n&&Te!==(Te=e[0].version+"")&&$(p,Te),1&n&&Be!==(Be=e[0].name+"")&&$(_,Be),1&n&&He!==(He=e[0].description+"")&&$(S,He),1&n&&Pe!==(Pe=(e[0].artists?.length||0)+"")&&$(B,Pe),1&n&&Ee!==(Ee=(e[0].subscriber_count||0)+"")&&$(D,Ee),1&n&&Fe!==(Fe=e[0].update_cadence+"")&&$(q,Fe),Ue!==(Ue=Ve(e))&&(qe.d(1),qe=Ue(e),qe&&(qe.c(),qe.m(W,null))),32&n&&Z!==(Z="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm "+(e[5]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2")&&k(W,"class",Z),e[2]?Je?Je.p(e,n):(Je=Wr(e),Je.c(),Je.m(t,X)):Je&&(Je.d(1),Je=null),1&n&&Ie!==(Ie=e[0].criteria+"")&&$(le,Ie),1&n&&De!==(De=e[0].update_cadence+"")&&$(fe,De),1&n&&Ne!==(Ne=lo(e[0].updated_at)+"")&&$(we,Ne),e[0].governance_url?Ye?Ye.p(e,n):(Ye=Zr(e),Ye.c(),Ye.m(se,null)):Ye&&(Ye.d(1),Ye=null),1&n&&Oe!==(Oe=(e[0].artists?.length||0)+"")&&$(Me,Oe),Qe===(Qe=Ge(e))&&We?We.p(e,n):(We.d(1),We=Qe(e),We&&(We.c(),We.m($e,null)))},d(e){e&&g(t),Re&&Re.d(),qe.d(),Je&&Je.d(),Ye&&Ye.d(),We.d(),ze=!1,s(je)}}}function Yr(e){let t;return{c(){t=f("span"),t.textContent="Subscribed",k(t,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-green-800 bg-green-100")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Gr(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Subscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),k(t,"class","-ml-1 mr-2 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Qr(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Unsubscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M6 18L18 6M6 6l12 12"),k(t,"class","-ml-1 mr-2 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Wr(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G=!1,Q=e[0].version+"";return q=C(e[11][0]),{c(){t=f("div"),n=f("h3"),n.textContent="Subscription Options",r=y(),o=f("div"),i=f("div"),a=f("h4"),a.textContent="Version Pinning",l=y(),c=f("div"),d=f("div"),p=f("input"),x=y(),v=f("label"),v.textContent="Auto-update to latest version (recommended)",w=y(),L=f("div"),M=f("input"),A=y(),z=f("label"),j=h("Pin to current version (v"),T=h(Q),B=h(")"),H=y(),P=f("div"),E=f("div"),F=f("input"),I=y(),D=f("div"),D.innerHTML='<label for="auto-update-checkbox" class="font-medium text-gray-700">Enable automatic updates</label> <p class="text-gray-500">Receive notifications when the list is updated and apply changes automatically.</p>',N=y(),O=f("div"),R=f("button"),R.textContent="Cancel",V=y(),U=f("button"),U.textContent="Subscribe",k(n,"class","text-lg font-medium text-gray-900 mb-4"),k(a,"class","block text-sm font-medium text-gray-700"),k(p,"id","auto-update"),k(p,"type","radio"),p.__value=null,_(p,p.__value),k(p,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(v,"for","auto-update"),k(v,"class","ml-3 block text-sm text-gray-700"),k(d,"class","flex items-center"),k(M,"id","pin-version"),k(M,"type","radio"),M.__value=S=e[0].version,_(M,M.__value),k(M,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(z,"for","pin-version"),k(z,"class","ml-3 block text-sm text-gray-700"),k(L,"class","flex items-center"),k(c,"class","mt-2 space-y-2"),k(F,"id","auto-update-checkbox"),k(F,"type","checkbox"),k(F,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(E,"class","flex items-center h-5"),k(D,"class","ml-3 text-sm"),k(P,"class","flex items-start"),k(o,"class","space-y-4"),k(R,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(U,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(O,"class","mt-6 flex justify-end space-x-3"),k(t,"class","bg-white shadow rounded-lg p-6 border-2 border-indigo-200"),q.p(p,M)},m(s,g){m(s,t,g),u(t,n),u(t,r),u(t,o),u(o,i),u(i,a),u(i,l),u(i,c),u(c,d),u(d,p),p.checked=p.__value===e[3],u(d,x),u(d,v),u(c,w),u(c,L),u(L,M),M.checked=M.__value===e[3],u(L,A),u(L,z),u(z,j),u(z,T),u(z,B),u(o,H),u(o,P),u(P,E),u(E,F),F.checked=e[4],u(P,I),u(P,D),u(t,N),u(t,O),u(O,R),u(O,V),u(O,U),J||(Y=[b(p,"change",e[10]),b(M,"change",e[12]),b(F,"change",e[13]),b(R,"click",e[14]),b(U,"click",e[8])],J=!0)},p(e,t){8&t&&(p.checked=p.__value===e[3]),1&t&&S!==(S=e[0].version)&&(M.__value=S,_(M,M.__value),G=!0),(G||8&t)&&(M.checked=M.__value===e[3]),1&t&&Q!==(Q=e[0].version+"")&&$(T,Q),16&t&&(F.checked=e[4])},d(e){e&&g(t),q.r(),J=!1,s(Y)}}}function Zr(e){let t,n,s,r,o,i;return{c(){t=f("div"),n=f("h4"),n.textContent="Governance Process",s=y(),r=f("a"),o=h("View governance documentation →"),k(n,"class","text-sm font-medium text-gray-900"),k(r,"href",i=e[0].governance_url),k(r,"target","_blank"),k(r,"class","mt-1 text-sm text-indigo-600 hover:text-indigo-500")},m(e,i){m(e,t,i),u(t,n),u(t,s),u(t,r),u(r,o)},p(e,t){1&t&&i!==(i=e[0].governance_url)&&k(r,"href",i)},d(e){e&&g(t)}}}function Kr(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <p class="mt-2 text-sm text-gray-500">No artists in this list yet.</p>',k(n,"class","text-center py-6")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Xr(e){let t,n=Z(e[0].artists),s=[];for(let t=0;t<n.length;t+=1)s[t]=io(Vr(e,n,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","space-y-3 max-h-96 overflow-y-auto")},m(e,n){m(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,r){if(1&r){let o;for(n=Z(e[0].artists),o=0;o<n.length;o+=1){const i=Vr(e,n,o);s[o]?s[o].p(i,r):(s[o]=io(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&g(t),p(s,e)}}}function eo(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="animate-spin mx-auto h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-sm text-gray-500">Loading artists...</p>',k(n,"class","text-center py-6")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function to(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function no(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[15].artist.metadata.image)||k(t,"src",n),k(t,"alt",s=e[15].artist.canonical_name),k(t,"class","h-10 w-10 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){1&r&&!l(t.src,n=e[15].artist.metadata.image)&&k(t,"src",n),1&r&&s!==(s=e[15].artist.canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function so(e){let t,n,s=e[15].artist.metadata.genres.slice(0,2).join(", ")+"";return{c(){t=f("div"),n=h(s),k(t,"class","text-xs text-gray-500")},m(e,s){m(e,t,s),u(t,n)},p(e,t){1&t&&s!==(s=e[15].artist.metadata.genres.slice(0,2).join(", ")+"")&&$(n,s)},d(e){e&&g(t)}}}function ro(e){let t,n,s,r,o=e[18].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium "+e[18].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){1&s&&o!==(o=e[18].name+"")&&$(n,o),1&s&&r!==(r="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium "+e[18].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function oo(e){let t,n,s;return{c(){t=f("a"),n=h("View rationale"),k(t,"href",s=e[15].rationale_link),k(t,"target","_blank"),k(t,"class","text-xs text-indigo-600 hover:text-indigo-500")},m(e,s){m(e,t,s),u(t,n)},p(e,n){1&n&&s!==(s=e[15].rationale_link)&&k(t,"href",s)},d(e){e&&g(t)}}}function io(e){let t,n,s,r,o,i,a,l,c,d,x,v,b,w,C,_,L=e[15].artist.canonical_name+"",M=lo(e[15].added_at)+"";function S(e,t){return e[15].artist.metadata.image?no:to}let A=S(e),z=A(e),j=e[15].artist.metadata.genres&&e[15].artist.metadata.genres.length>0&&so(e),T=Z(co(e[15].artist)),B=[];for(let t=0;t<T.length;t+=1)B[t]=ro(Ur(e,T,t));let H=e[15].rationale_link&&oo(e);return{c(){t=f("div"),n=f("div"),z.c(),s=y(),r=f("div"),o=f("div"),i=h(L),a=y(),j&&j.c(),l=y(),c=f("div");for(let e=0;e<B.length;e+=1)B[e].c();d=y(),x=f("div"),v=f("div"),b=h("Added "),w=h(M),C=y(),H&&H.c(),_=y(),k(o,"class","text-sm font-medium text-gray-900"),k(c,"class","flex space-x-1 mt-1"),k(n,"class","flex items-center space-x-3"),k(v,"class","text-xs text-gray-500"),k(x,"class","text-right"),k(t,"class","flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg")},m(e,g){m(e,t,g),u(t,n),z.m(n,null),u(n,s),u(n,r),u(r,o),u(o,i),u(r,a),j&&j.m(r,null),u(r,l),u(r,c);for(let e=0;e<B.length;e+=1)B[e]&&B[e].m(c,null);u(t,d),u(t,x),u(x,v),u(v,b),u(v,w),u(x,C),H&&H.m(x,null),u(t,_)},p(e,t){if(A===(A=S(e))&&z?z.p(e,t):(z.d(1),z=A(e),z&&(z.c(),z.m(n,s))),1&t&&L!==(L=e[15].artist.canonical_name+"")&&$(i,L),e[15].artist.metadata.genres&&e[15].artist.metadata.genres.length>0?j?j.p(e,t):(j=so(e),j.c(),j.m(r,l)):j&&(j.d(1),j=null),1&t){let n;for(T=Z(co(e[15].artist)),n=0;n<T.length;n+=1){const s=Ur(e,T,n);B[n]?B[n].p(s,t):(B[n]=ro(s),B[n].c(),B[n].m(c,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=T.length}1&t&&M!==(M=lo(e[15].added_at)+"")&&$(w,M),e[15].rationale_link?H?H.p(e,t):(H=oo(e),H.c(),H.m(x,null)):H&&(H.d(1),H=null)},d(e){e&&g(t),z.d(),j&&j.d(),p(B,e),H&&H.d()}}}function ao(t){let n;function s(e,t){return e[0]?Jr:qr}let r=s(t),o=r(t);return{c(){o.c(),n=v()},m(e,t){o.m(e,t),m(e,n,t)},p(e,[t]){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){e&&g(n),o.d(e)}}}function lo(e){return new Date(e).toLocaleDateString()}function co(e){const t=[];return e.external_ids.spotify&&t.push({name:"Spotify",color:"bg-green-100 text-green-800"}),e.external_ids.apple&&t.push({name:"Apple",color:"bg-gray-100 text-gray-800"}),e.external_ids.musicbrainz&&t.push({name:"MusicBrainz",color:"bg-blue-100 text-blue-800"}),t}function uo(e,t,n){let s,r,o,i;d(e,Tr,e=>n(9,o=e)),d(e,zr,e=>n(1,i=e));let a=!1,l=null,c=!0;return e.$$.update=()=>{2&e.$$.dirty&&n(0,s=i.currentList),513&e.$$.dirty&&n(5,r=!!s&&o.has(s.id))},[s,i,a,l,c,r,function(){Br.clearCurrentList()},async function(){if(s)if(r){const e=await Br.unsubscribe(s.id);e.success||alert(`Failed to unsubscribe: ${e.message}`)}else n(2,a=!0)},async function(){if(!s)return;const e=await Br.getSubscriptionImpact(s.id);if(e.success){if(confirm(`This list will add ${e.data.artists_to_add} artists to your DNP list. Continue?`)){const e=await Br.subscribe(s.id,l||void 0,c);e.success?n(2,a=!1):alert(`Failed to subscribe: ${e.message}`)}}},o,function(){l=this.__value,n(3,l)},[[]],function(){l=this.__value,n(3,l)},function(){c=this.checked,n(4,c)},()=>n(2,a=!1)]}class mo extends oe{constructor(e){super(),re(this,e,uo,ao,o,{})}}function go(e){let t,n;return{c(){t=f("div"),n=h(e[7]),k(t,"class","text-red-600 text-sm")},m(e,s){m(e,t,s),u(t,n)},p(e,t){128&t&&$(n,e[7])},d(e){e&&g(t)}}}function po(e){let t;return{c(){t=h("Create List")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function fo(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n        Creating..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function xo(t){let n,r,o,i,a,l,c,d,p,x,h,v,$,L,S,A,z,j,T,B,H,P,E,F,I,D,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be=t[7]&&go(t);function we(e,t){return e[6]?fo:po}let ke=we(t),Ce=ke(t);return he=C(t[16][0]),{c(){n=f("form"),r=f("div"),o=f("label"),o.textContent="List Name *",i=y(),a=f("input"),l=y(),c=f("div"),d=f("label"),d.textContent="Description *",p=y(),x=f("textarea"),h=y(),v=f("div"),$=f("label"),$.textContent="Inclusion Criteria *",L=y(),S=f("textarea"),A=y(),z=f("p"),z.textContent="Criteria must be factual and neutral. Avoid subjective terms or personal opinions.",j=y(),T=f("div"),B=f("label"),B.textContent="Governance Documentation URL",H=y(),P=f("input"),E=y(),F=f("p"),F.textContent="Link to documentation explaining your list's governance process and appeals procedure.",I=y(),D=f("div"),O=f("label"),O.textContent="Update Cadence",R=y(),V=f("select"),U=f("option"),U.textContent="Daily",q=f("option"),q.textContent="Weekly",J=f("option"),J.textContent="Monthly",Y=f("option"),Y.textContent="As Needed",G=y(),Q=f("div"),W=f("h4"),W.textContent="Visibility",Z=y(),K=f("div"),X=f("div"),ee=f("input"),te=y(),ne=f("label"),ne.textContent="Public - Anyone can discover and subscribe",se=y(),re=f("div"),oe=f("input"),ie=y(),ae=f("label"),ae.textContent="Private - Only you can manage, others need direct link",le=y(),be&&be.c(),ce=y(),de=f("div"),ue=f("button"),ue.textContent="Cancel",me=y(),ge=f("button"),Ce.c(),fe=y(),xe=f("div"),xe.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-yellow-800">Community List Guidelines</h3> <div class="mt-2 text-sm text-yellow-700"><ul class="list-disc list-inside space-y-1"><li>Use neutral, factual language in criteria</li> <li>Provide clear governance and appeals processes</li> <li>Maintain transparency about list updates</li> <li>Respect platform terms of service</li> <li>Focus on user preferences, not personal judgments</li></ul></div></div></div>',k(o,"for","name"),k(o,"class","block text-sm font-medium text-gray-700"),k(a,"id","name"),k(a,"type","text"),k(a,"placeholder","e.g., Controversial Artists List"),k(a,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),a.required=!0,k(d,"for","description"),k(d,"class","block text-sm font-medium text-gray-700"),k(x,"id","description"),k(x,"rows","3"),k(x,"placeholder","Describe the purpose and scope of this list..."),k(x,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),x.required=!0,k($,"for","criteria"),k($,"class","block text-sm font-medium text-gray-700"),k(S,"id","criteria"),k(S,"rows","4"),k(S,"placeholder","Define clear, neutral criteria for including artists in this list. Avoid subjective language or personal opinions."),k(S,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),S.required=!0,k(z,"class","mt-1 text-xs text-gray-500"),k(B,"for","governance-url"),k(B,"class","block text-sm font-medium text-gray-700"),k(P,"id","governance-url"),k(P,"type","url"),k(P,"placeholder","https://example.com/governance-process"),k(P,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(F,"class","mt-1 text-xs text-gray-500"),k(O,"for","update-cadence"),k(O,"class","block text-sm font-medium text-gray-700"),U.__value="daily",_(U,U.__value),q.__value="weekly",_(q,q.__value),J.__value="monthly",_(J,J.__value),Y.__value="as-needed",_(Y,Y.__value),k(V,"id","update-cadence"),k(V,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),void 0===t[4]&&N(()=>t[14].call(V)),k(W,"class","block text-sm font-medium text-gray-700"),k(ee,"id","public"),k(ee,"type","radio"),ee.__value="public",_(ee,ee.__value),k(ee,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(ne,"for","public"),k(ne,"class","ml-3 block text-sm text-gray-700"),k(X,"class","flex items-center"),k(oe,"id","private"),k(oe,"type","radio"),oe.__value="private",_(oe,oe.__value),k(oe,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(ae,"for","private"),k(ae,"class","ml-3 block text-sm text-gray-700"),k(re,"class","flex items-center"),k(K,"class","mt-2 space-y-2"),k(ue,"type","button"),k(ue,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(ge,"type","submit"),ge.disabled=pe=t[6]||!t[0].trim()||!t[1].trim()||!t[2].trim(),k(ge,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(de,"class","flex justify-end space-x-3"),k(xe,"class","bg-yellow-50 border border-yellow-200 rounded-md p-4"),k(n,"class","space-y-6"),he.p(ee,oe)},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),_(a,t[0]),u(n,l),u(n,c),u(c,d),u(c,p),u(c,x),_(x,t[1]),u(n,h),u(n,v),u(v,$),u(v,L),u(v,S),_(S,t[2]),u(v,A),u(v,z),u(n,j),u(n,T),u(T,B),u(T,H),u(T,P),_(P,t[3]),u(T,E),u(T,F),u(n,I),u(n,D),u(D,O),u(D,R),u(D,V),u(V,U),u(V,q),u(V,J),u(V,Y),M(V,t[4],!0),u(n,G),u(n,Q),u(Q,W),u(Q,Z),u(Q,K),u(K,X),u(X,ee),ee.checked=ee.__value===t[5],u(X,te),u(X,ne),u(K,se),u(K,re),u(re,oe),oe.checked=oe.__value===t[5],u(re,ie),u(re,ae),u(n,le),be&&be.m(n,null),u(n,ce),u(n,de),u(de,ue),u(de,me),u(de,ge),Ce.m(ge,null),u(n,fe),u(n,xe),ye||(ve=[b(a,"input",t[10]),b(x,"input",t[11]),b(S,"input",t[12]),b(P,"input",t[13]),b(V,"change",t[14]),b(ee,"change",t[15]),b(oe,"change",t[17]),b(ue,"click",t[18]),b(n,"submit",w(t[9]))],ye=!0)},p(e,[t]){1&t&&a.value!==e[0]&&_(a,e[0]),2&t&&_(x,e[1]),4&t&&_(S,e[2]),8&t&&P.value!==e[3]&&_(P,e[3]),16&t&&M(V,e[4]),32&t&&(ee.checked=ee.__value===e[5]),32&t&&(oe.checked=oe.__value===e[5]),e[7]?be?be.p(e,t):(be=go(e),be.c(),be.m(n,ce)):be&&(be.d(1),be=null),ke!==(ke=we(e))&&(Ce.d(1),Ce=ke(e),Ce&&(Ce.c(),Ce.m(ge,null))),71&t&&pe!==(pe=e[6]||!e[0].trim()||!e[1].trim()||!e[2].trim())&&(ge.disabled=pe)},i:e,o:e,d(e){e&&g(n),be&&be.d(),Ce.d(),he.r(),ye=!1,s(ve)}}}function ho(e,t,n){const s=B();let r="",o="",i="",a="",l="monthly",c="public",d=!1,u="";return[r,o,i,a,l,c,d,u,s,async function(){if(!r.trim()||!o.trim()||!i.trim())return void n(7,u="Please fill in all required fields");n(6,d=!0),n(7,u="");const e=await Br.createList({name:r.trim(),description:o.trim(),criteria:i.trim(),governance_url:a.trim()||void 0,update_cadence:l,visibility:c});e.success?(n(0,r=""),n(1,o=""),n(2,i=""),n(3,a=""),n(4,l="monthly"),n(5,c="public"),s("listCreated")):n(7,u=e.message||"Failed to create community list"),n(6,d=!1)},function(){r=this.value,n(0,r)},function(){o=this.value,n(1,o)},function(){i=this.value,n(2,i)},function(){a=this.value,n(3,a)},function(){l=S(this),n(4,l)},function(){c=this.__value,n(5,c)},[[]],function(){c=this.__value,n(5,c)},()=>s("listCreated")]}class yo extends oe{constructor(e){super(),re(this,e,ho,xo,o,{})}}function vo(e,t,n){const s=e.slice();return s[11]=t[n],s}function bo(e){let t,n,s=Z(e[0]),r=[];for(let t=0;t<s.length;t+=1)r[t]=Co(vo(e,s,t));return{c(){t=f("div"),n=f("ul");for(let e=0;e<r.length;e+=1)r[e].c();k(n,"class","divide-y divide-gray-200"),k(t,"class","bg-white shadow overflow-hidden sm:rounded-md")},m(e,s){m(e,t,s),u(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null)},p(e,t){if(31&t){let o;for(s=Z(e[0]),o=0;o<s.length;o+=1){const i=vo(e,s,o);r[o]?r[o].p(i,t):(r[o]=Co(i),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(e){e&&g(t),p(r,e)}}}function wo(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No subscriptions yet</h3> <p class="mt-1 text-sm text-gray-500">Browse community lists to find ones that match your preferences.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function ko(e){let t,n,s,r=e[11].version_pinned+"";return{c(){t=h("(pinned to v"),n=h(r),s=h(")")},m(e,r){m(e,t,r),m(e,n,r),m(e,s,r)},p(e,t){1&t&&r!==(r=e[11].version_pinned+"")&&$(n,r)},d(e){e&&(g(t),g(n),g(s))}}}function Co(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be,we,ke,Ce,$e,_e,Le,Me,Se,Ae,ze,je=e[11].list.name+"",Te=e[11].list.update_cadence+"",Be=_o(e[11].created_at)+"",He=e[11].list.version+"",Pe=e[11].list.description+"",Ee=e[11].list.version+"",Fe=e[11].version_pinned&&ko(e);function Ie(){return e[6](e[11])}function De(){return e[7](e[11])}function Ne(){return e[8](e[11])}function Oe(){return e[9](e[11])}function Re(...t){return e[10](e[11],...t)}return{c(){t=f("li"),n=f("div"),r=f("div"),o=f("div"),i=f("div"),i.innerHTML='<div class="h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"><svg class="h-5 w-5 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div>',a=y(),l=f("div"),c=f("div"),d=f("p"),p=h(je),x=y(),v=f("span"),w=h(Te),_=y(),L=f("div"),M=f("p"),S=h("Subscribed "),A=h(Be),z=h("\n                        • v"),j=h(He),T=y(),Fe&&Fe.c(),B=y(),H=f("p"),P=h(Pe),E=y(),F=f("div"),I=f("button"),I.textContent="View Details",D=y(),N=f("button"),N.textContent="Unsubscribe",O=y(),R=f("div"),V=f("div"),U=f("div"),q=f("h5"),q.textContent="Version Preference",J=y(),Y=f("div"),G=f("div"),Q=f("input"),K=y(),X=f("label"),ee=h("Auto-update to latest"),ne=y(),se=f("div"),re=f("input"),ae=y(),le=f("label"),ce=h("Pin to v"),de=h(Ee),me=y(),ge=f("div"),pe=f("h5"),pe.textContent="Update Notifications",fe=y(),xe=f("div"),he=f("div"),ye=f("input"),we=y(),ke=f("div"),Ce=f("label"),$e=h("Enable automatic updates"),Le=y(),Me=f("p"),Me.textContent="Apply changes when the list is updated",Se=y(),k(i,"class","flex-shrink-0"),k(d,"class","text-sm font-medium text-gray-900"),k(v,"class",C="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+Lo(e[11].list.update_cadence)),k(c,"class","flex items-center"),k(L,"class","mt-1 flex items-center text-sm text-gray-500"),k(H,"class","mt-1 text-sm text-gray-600 line-clamp-1"),k(l,"class","ml-4"),k(o,"class","flex items-center"),k(I,"class","text-indigo-600 hover:text-indigo-900 text-sm font-medium"),k(N,"class","text-red-600 hover:text-red-900 text-sm font-medium"),k(F,"class","flex items-center space-x-2"),k(r,"class","flex items-center justify-between"),k(q,"class","block text-xs font-medium text-gray-700 mb-2"),k(Q,"id",W="auto-"+e[11].list_id),k(Q,"type","radio"),Q.checked=Z=!e[11].version_pinned,k(Q,"class","focus:ring-indigo-500 h-3 w-3 text-indigo-600 border-gray-300"),k(X,"for",te="auto-"+e[11].list_id),k(X,"class","ml-2 block text-xs text-gray-700"),k(G,"class","flex items-center"),k(re,"id",oe="pin-"+e[11].list_id),k(re,"type","radio"),re.checked=ie=!!e[11].version_pinned,k(re,"class","focus:ring-indigo-500 h-3 w-3 text-indigo-600 border-gray-300"),k(le,"for",ue="pin-"+e[11].list_id),k(le,"class","ml-2 block text-xs text-gray-700"),k(se,"class","flex items-center"),k(Y,"class","space-y-2"),k(pe,"class","block text-xs font-medium text-gray-700 mb-2"),k(ye,"id",ve="auto-update-"+e[11].list_id),k(ye,"type","checkbox"),ye.checked=be=e[11].auto_update,k(ye,"class","focus:ring-indigo-500 h-3 w-3 text-indigo-600 border-gray-300 rounded"),k(he,"class","flex items-center h-4"),k(Ce,"for",_e="auto-update-"+e[11].list_id),k(Ce,"class","font-medium text-gray-700"),k(Me,"class","text-gray-500"),k(ke,"class","ml-2 text-xs"),k(xe,"class","flex items-start"),k(V,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),k(R,"class","mt-4 pt-4 border-t border-gray-200"),k(n,"class","px-4 py-4 sm:px-6")},m(e,s){m(e,t,s),u(t,n),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(l,c),u(c,d),u(d,p),u(c,x),u(c,v),u(v,w),u(l,_),u(l,L),u(L,M),u(M,S),u(M,A),u(M,z),u(M,j),u(M,T),Fe&&Fe.m(M,null),u(l,B),u(l,H),u(H,P),u(r,E),u(r,F),u(F,I),u(F,D),u(F,N),u(n,O),u(n,R),u(R,V),u(V,U),u(U,q),u(U,J),u(U,Y),u(Y,G),u(G,Q),u(G,K),u(G,X),u(X,ee),u(Y,ne),u(Y,se),u(se,re),u(se,ae),u(se,le),u(le,ce),u(le,de),u(V,me),u(V,ge),u(ge,pe),u(ge,fe),u(ge,xe),u(xe,he),u(he,ye),u(xe,we),u(xe,ke),u(ke,Ce),u(Ce,$e),u(ke,Le),u(ke,Me),u(t,Se),Ae||(ze=[b(I,"click",Ie),b(N,"click",De),b(Q,"change",Ne),b(re,"change",Oe),b(ye,"change",Re)],Ae=!0)},p(t,n){e=t,1&n&&je!==(je=e[11].list.name+"")&&$(p,je),1&n&&Te!==(Te=e[11].list.update_cadence+"")&&$(w,Te),1&n&&C!==(C="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+Lo(e[11].list.update_cadence))&&k(v,"class",C),1&n&&Be!==(Be=_o(e[11].created_at)+"")&&$(A,Be),1&n&&He!==(He=e[11].list.version+"")&&$(j,He),e[11].version_pinned?Fe?Fe.p(e,n):(Fe=ko(e),Fe.c(),Fe.m(M,null)):Fe&&(Fe.d(1),Fe=null),1&n&&Pe!==(Pe=e[11].list.description+"")&&$(P,Pe),1&n&&W!==(W="auto-"+e[11].list_id)&&k(Q,"id",W),1&n&&Z!==(Z=!e[11].version_pinned)&&(Q.checked=Z),1&n&&te!==(te="auto-"+e[11].list_id)&&k(X,"for",te),1&n&&oe!==(oe="pin-"+e[11].list_id)&&k(re,"id",oe),1&n&&ie!==(ie=!!e[11].version_pinned)&&(re.checked=ie),1&n&&Ee!==(Ee=e[11].list.version+"")&&$(de,Ee),1&n&&ue!==(ue="pin-"+e[11].list_id)&&k(le,"for",ue),1&n&&ve!==(ve="auto-update-"+e[11].list_id)&&k(ye,"id",ve),1&n&&be!==(be=e[11].auto_update)&&(ye.checked=be),1&n&&_e!==(_e="auto-update-"+e[11].list_id)&&k(Ce,"for",_e)},d(e){e&&g(t),Fe&&Fe.d(),Ae=!1,s(ze)}}}function $o(t){let n,s,r,o,i;function a(e,t){return 0===e[0].length?wo:bo}let l=a(t),c=l(t);return{c(){n=f("div"),s=f("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900">My Subscriptions</h3> <p class="text-sm text-gray-500">Manage your community list subscriptions and update preferences.</p>',r=y(),c.c(),o=y(),i=f("div"),i.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Managing Your Subscriptions</h3> <div class="mt-2 text-sm text-blue-700"><ul class="list-disc list-inside space-y-1"><li><strong>Auto-update:</strong> Automatically apply changes when lists are updated</li> <li><strong>Version pinning:</strong> Stay on a specific version to avoid unexpected changes</li> <li><strong>Notifications:</strong> Get notified about list updates and changes</li> <li><strong>Impact preview:</strong> See what changes will be made before they&#39;re applied</li></ul></div></div></div>',k(i,"class","bg-blue-50 border border-blue-200 rounded-md p-4"),k(n,"class","space-y-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),c.m(n,null),u(n,o),u(n,i)},p(e,[t]){l===(l=a(e))&&c?c.p(e,t):(c.d(1),c=l(e),c&&(c.c(),c.m(n,o)))},i:e,o:e,d(e){e&&g(n),c.d()}}}function _o(e){return new Date(e).toLocaleDateString()}function Lo(e){switch(e.toLowerCase()){case"daily":return"text-red-600 bg-red-100";case"weekly":return"text-yellow-600 bg-yellow-100";case"monthly":return"text-green-600 bg-green-100";case"as-needed":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}}function Mo(e,t,n){let s,r;async function o(e,t,n){const s=await Br.updateSubscription(e,t,n);s.success||alert(`Failed to update subscription: ${s.message}`)}async function i(e,t){if(confirm(`Are you sure you want to unsubscribe from "${t}"?`)){const t=await Br.unsubscribe(e);t.success||alert(`Failed to unsubscribe: ${t.message}`)}}async function a(e){await Br.fetchListDetails(e)}function l(e,t,n){o(e,t,n.target.checked)}d(e,zr,e=>n(5,r=e));return e.$$.update=()=>{32&e.$$.dirty&&n(0,s=r.subscriptions)},[s,o,i,a,l,r,e=>a(e.list_id),e=>i(e.list_id,e.list.name),e=>o(e.list_id,void 0,e.auto_update),e=>o(e.list_id,e.list.version,e.auto_update),(e,t)=>l(e.list_id,e.version_pinned,t)]}class So extends oe{constructor(e){super(),re(this,e,Mo,$o,o,{})}}function Ao(e,t,n){const s=e.slice();return s[14]=t[n],s}function zo(t){let n,s,r,o,i;return o=new yo({}),o.$on("listCreated",t[9]),{c(){n=f("div"),s=f("h3"),s.textContent="Create Community List",r=y(),ee(o.$$.fragment),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(n,"class","mb-6 bg-white shadow rounded-lg p-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),te(o,n,null),i=!0},p:e,i(e){i||(Q(o.$$.fragment,e),i=!0)},o(e){W(o.$$.fragment,e),i=!1},d(e){e&&g(n),ne(o)}}}function jo(t){let n,s;return n=new So({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function To(e){let t,n,s,r;const o=[Ho,Bo],i=[];function a(e,t){return e[3].currentList?0:1}return t=a(e),n=i[t]=o[t](e),{c(){n.c(),s=v()},m(e,n){i[t].m(e,n),m(e,s,n),r=!0},p(e,r){let l=t;t=a(e),t===l?i[t].p(e,r):(Y(),W(i[l],1,1,()=>{i[l]=null}),G(),n=i[t],n?n.p(e,r):(n=i[t]=o[t](e),n.c()),Q(n,1),n.m(s.parentNode,s))},i(e){r||(Q(n),r=!0)},o(e){W(n),r=!1},d(e){e&&g(s),i[t].d(e)}}}function Bo(e){let t,n,r,o,i,a,l,c,d,p,x,h,v,w,C,$,L,M,S,A,z,j,T,B,H,P,E,F;const I=[Io,Fo,Eo,Po],D=[];function N(e,t){return e[3].isLoading?0:e[3].error?1:0===e[4].length?2:3}return B=N(e),H=D[B]=I[B](e),{c(){t=f("div"),n=f("div"),r=f("div"),o=f("div"),i=f("label"),i.textContent="Search lists",a=y(),l=f("div"),c=f("div"),c.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',d=y(),p=f("input"),h=y(),v=f("div"),w=f("label"),w.textContent="Sort by",C=y(),$=f("select"),L=f("option"),L.textContent="Recently Updated",M=f("option"),M.textContent="Newest First",S=f("option"),S.textContent="Name A-Z",A=f("option"),A.textContent="Name Z-A",z=f("option"),z.textContent="Most Artists",j=f("option"),j.textContent="Most Subscribers",T=y(),H.c(),k(i,"for","search"),k(i,"class","sr-only"),k(c,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),k(p,"id","search"),k(p,"type","text"),k(p,"placeholder","Search lists by name, description, or criteria..."),p.value=x=e[3].searchQuery,k(p,"class","block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(l,"class","relative"),k(o,"class","flex-1"),k(w,"for","sort"),k(w,"class","sr-only"),L.__value="updated_at:desc",_(L,L.__value),M.__value="created_at:desc",_(M,M.__value),S.__value="name:asc",_(S,S.__value),A.__value="name:desc",_(A,A.__value),z.__value="artist_count:desc",_(z,z.__value),j.__value="subscriber_count:desc",_(j,j.__value),k($,"id","sort"),k($,"class","block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"),k(v,"class","sm:w-48"),k(r,"class","flex flex-col sm:flex-row gap-4"),k(n,"class","bg-white shadow rounded-lg p-4"),k(t,"class","space-y-6")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),u(l,p),u(r,h),u(r,v),u(v,w),u(v,C),u(v,$),u($,L),u($,M),u($,S),u($,A),u($,z),u($,j),u(t,T),D[B].m(t,null),P=!0,E||(F=[b(p,"input",e[6]),b($,"change",e[7])],E=!0)},p(e,n){(!P||8&n&&x!==(x=e[3].searchQuery)&&p.value!==x)&&(p.value=x);let s=B;B=N(e),B===s?D[B].p(e,n):(Y(),W(D[s],1,1,()=>{D[s]=null}),G(),H=D[B],H?H.p(e,n):(H=D[B]=I[B](e),H.c()),Q(H,1),H.m(t,null))},i(e){P||(Q(H),P=!0)},o(e){W(H),P=!1},d(e){e&&g(t),D[B].d(),E=!1,s(F)}}}function Ho(t){let n,s;return n=new mo({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function Po(e){let t,n,s=[],r=new Map,o=Z(e[4]);const i=e=>e[14].id;for(let t=0;t<o.length;t+=1){let n=Ao(e,o,t),a=i(n);r.set(a,s[t]=Do(a,n))}return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3")},m(e,r){m(e,t,r);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);n=!0},p(e,n){16&n&&(o=Z(e[4]),Y(),s=X(s,n,i,0,e,o,r,t,K,Do,null,Ao),G())},i(e){if(!n){for(let e=0;e<o.length;e+=1)Q(s[e]);n=!0}},o(e){for(let e=0;e<s.length;e+=1)W(s[e]);n=!1},d(e){e&&g(t);for(let e=0;e<s.length;e+=1)s[e].d()}}}function Eo(t){let n;function s(e,t){return 0===e[3].lists.length?Oo:No}let r=s(t),o=r(t);return{c(){n=f("div"),o.c(),k(n,"class","text-center py-12")},m(e,t){m(e,n,t),o.m(n,null)},p(e,t){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n,null)))},i:e,o:e,d(e){e&&g(n),o.d()}}}function Fo(t){let n,s,r,o,i,a,l,c,d,p,v=t[3].error+"";return{c(){n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("p"),a=h(v),l=y(),c=f("button"),c.textContent="Try again",k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(s,"class","mx-auto h-8 w-8 text-red-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(i,"class","mt-2 text-sm text-red-600"),k(c,"class","mt-2 text-sm text-indigo-600 hover:text-indigo-500"),k(n,"class","text-center py-12")},m(e,g){m(e,n,g),u(n,s),u(s,r),u(n,o),u(n,i),u(i,a),u(n,l),u(n,c),d||(p=b(c,"click",t[12]),d=!0)},p(e,t){8&t&&v!==(v=e[3].error+"")&&$(a,v)},i:e,o:e,d(e){e&&g(n),d=!1,p()}}}function Io(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="animate-spin mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-sm text-gray-500">Loading community lists...</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}function Do(e,t){let n,s,r;return s=new Rr({props:{list:t[14]}}),{key:e,first:null,c(){n=v(),ee(s.$$.fragment),this.first=n},m(e,t){m(e,n,t),te(s,e,t),r=!0},p(e,n){t=e;const r={};16&n&&(r.list=t[14]),s.$set(r)},i(e){r||(Q(s.$$.fragment,e),r=!0)},o(e){W(s.$$.fragment,e),r=!1},d(e){e&&g(n),ne(s,e)}}}function No(t){let n,s,r,o,i,a;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No lists match your search",i=y(),a=f("p"),a.textContent="Try adjusting your search terms or filters.",k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500")},m(e,t){m(e,n,t),u(n,s),m(e,r,t),m(e,o,t),m(e,i,t),m(e,a,t)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a))}}}function Oo(t){let n,s,r,o,i,a,l,c,d,p,h;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No community lists yet",i=y(),a=f("p"),a.textContent="Be the first to create a community list.",l=y(),c=f("div"),d=f("button"),d.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n                  Create your first list',k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500"),k(d,"class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(c,"class","mt-6")},m(e,g){m(e,n,g),u(n,s),m(e,r,g),m(e,o,g),m(e,i,g),m(e,a,g),m(e,l,g),m(e,c,g),u(c,d),p||(h=b(d,"click",t[13]),p=!0)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a),g(l),g(c)),p=!1,h()}}}function Ro(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I=e[2].size+"",D=e[1]&&zo(e);const N=[To,jo],O=[];function R(e,t){return"browse"===e[0]?0:"subscriptions"===e[0]?1:-1}return~(j=R(e))&&(T=O[j]=N[j](e)),{c(){t=f("div"),n=f("div"),r=f("div"),o=f("div"),o.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Community Lists</h2> <p class="mt-1 text-sm text-gray-600">Discover and subscribe to community-curated blocklists.</p>',i=y(),a=f("button"),a.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n        Create List',l=y(),D&&D.c(),c=y(),d=f("div"),p=f("nav"),x=f("button"),v=h("Browse Lists"),C=y(),_=f("button"),L=h("My Subscriptions ("),M=h(I),S=h(")"),z=y(),T&&T.c(),B=y(),H=f("div"),H.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">About Community Lists</h3> <div class="mt-2 text-sm text-blue-700"><p>Community lists are curated blocklists created and maintained by other users. \n            Each list has clear criteria and governance processes to ensure quality and transparency.</p> <ul class="list-disc list-inside mt-2 space-y-1"><li>Subscribe to lists that match your preferences</li> <li>Pin specific versions or enable auto-updates</li> <li>Preview impact before subscribing</li> <li>Appeal decisions through structured processes</li></ul></div></div></div>',k(a,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(r,"class","flex justify-between items-center"),k(n,"class","mb-6"),k(x,"class",w="py-4 px-1 border-b-2 font-medium text-sm "+("browse"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(_,"class",A="py-4 px-1 border-b-2 font-medium text-sm "+("subscriptions"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(p,"class","flex space-x-8 px-6"),k(p,"aria-label","Tabs"),k(d,"class","bg-white shadow-sm rounded-lg mb-6"),k(H,"class","mt-8 bg-blue-50 border border-blue-200 rounded-md p-4"),k(t,"class","px-4 py-6 sm:px-0")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(r,i),u(r,a),u(t,l),D&&D.m(t,null),u(t,c),u(t,d),u(d,p),u(p,x),u(x,v),u(p,C),u(p,_),u(_,L),u(_,M),u(_,S),u(t,z),~j&&O[j].m(t,null),u(t,B),u(t,H),P=!0,E||(F=[b(a,"click",e[8]),b(x,"click",e[10]),b(_,"click",e[11])],E=!0)},p(e,[n]){e[1]?D?(D.p(e,n),2&n&&Q(D,1)):(D=zo(e),D.c(),Q(D,1),D.m(t,c)):D&&(Y(),W(D,1,1,()=>{D=null}),G()),(!P||1&n&&w!==(w="py-4 px-1 border-b-2 font-medium text-sm "+("browse"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(x,"class",w),(!P||4&n)&&I!==(I=e[2].size+"")&&$(M,I),(!P||1&n&&A!==(A="py-4 px-1 border-b-2 font-medium text-sm "+("subscriptions"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(_,"class",A);let s=j;j=R(e),j===s?~j&&O[j].p(e,n):(T&&(Y(),W(O[s],1,1,()=>{O[s]=null}),G()),~j?(T=O[j],T?T.p(e,n):(T=O[j]=N[j](e),T.c()),Q(T,1),T.m(t,B)):T=null)},i(e){P||(Q(D),Q(T),P=!0)},o(e){W(D),W(T),P=!1},d(e){e&&g(t),D&&D.d(),~j&&O[j].d(),E=!1,s(F)}}}function Vo(e,t,n){let s,r,o;d(e,Tr,e=>n(2,s=e)),d(e,zr,e=>n(3,r=e)),d(e,jr,e=>n(4,o=e));let i="browse",a=!1;function l(e){n(0,i=e),n(1,a=!1),Br.clearCurrentList()}T(async()=>{await Br.fetchLists(),await Br.fetchSubscriptions()});return[i,a,s,r,o,l,function(e){const t=e.target;Br.updateSearch(t.value)},function(e){const t=e.target,[n,s]=t.value.split(":");Br.updateSort(n,s)},()=>n(1,a=!a),()=>n(1,a=!1),()=>l("browse"),()=>l("subscriptions"),()=>Br.fetchLists(),()=>n(1,a=!0)]}class Uo extends oe{constructor(e){super(),re(this,e,Vo,Ro,o,{})}}function qo(e){let t,n,s,r,o,i,a,l;return{c(){t=f("div"),n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("div"),a=f("p"),l=h(e[2]),k(r,"fill-rule","evenodd"),k(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),k(r,"clip-rule","evenodd"),k(s,"class","h-5 w-5 text-red-400"),k(s,"viewBox","0 0 20 20"),k(s,"fill","currentColor"),k(a,"class","text-sm text-red-800"),k(i,"class","ml-3"),k(n,"class","flex"),k(t,"class","mb-6 bg-red-50 border border-red-200 rounded-md p-4")},m(e,c){m(e,t,c),u(t,n),u(n,s),u(s,r),u(n,o),u(n,i),u(i,a),u(a,l)},p(e,t){4&t[0]&&$(l,e[2])},d(e){e&&g(t)}}}function Jo(e){let t,n,s,r,o,i,a,l;return{c(){t=f("div"),n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("div"),a=f("p"),l=h(e[3]),k(r,"fill-rule","evenodd"),k(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),k(r,"clip-rule","evenodd"),k(s,"class","h-5 w-5 text-green-400"),k(s,"viewBox","0 0 20 20"),k(s,"fill","currentColor"),k(a,"class","text-sm text-green-800"),k(i,"class","ml-3"),k(n,"class","flex"),k(t,"class","mb-6 bg-green-50 border border-green-200 rounded-md p-4")},m(e,c){m(e,t,c),u(t,n),u(n,s),u(s,r),u(n,o),u(n,i),u(i,a),u(a,l)},p(e,t){8&t[0]&&$(l,e[3])},d(e){e&&g(t)}}}function Yo(e){let t,n,r,o,i,a,l,c,d,p,x,w,C,$,_,L,M,S,A,z,j,T,B,H,P="profile"===e[4]&&Qo(e),E="security"===e[4]&&ei(e),F="preferences"===e[4]&&si(e),I="data"===e[4]&&ri(e);return{c(){t=f("div"),n=f("nav"),r=f("button"),o=h("Profile"),a=y(),l=f("button"),c=h("Security"),p=y(),x=f("button"),w=h("Preferences"),$=y(),_=f("button"),L=h("Data & Privacy"),S=y(),P&&P.c(),A=y(),E&&E.c(),z=y(),F&&F.c(),j=y(),I&&I.c(),T=v(),k(r,"class",i="py-2 px-1 border-b-2 font-medium text-sm "+("profile"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(l,"class",d="py-2 px-1 border-b-2 font-medium text-sm "+("security"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(x,"class",C="py-2 px-1 border-b-2 font-medium text-sm "+("preferences"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(_,"class",M="py-2 px-1 border-b-2 font-medium text-sm "+("data"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(n,"class","-mb-px flex space-x-8"),k(t,"class","border-b border-gray-200 mb-6")},m(s,i){m(s,t,i),u(t,n),u(n,r),u(r,o),u(n,a),u(n,l),u(l,c),u(n,p),u(n,x),u(x,w),u(n,$),u(n,_),u(_,L),m(s,S,i),P&&P.m(s,i),m(s,A,i),E&&E.m(s,i),m(s,z,i),F&&F.m(s,i),m(s,j,i),I&&I.m(s,i),m(s,T,i),B||(H=[b(r,"click",e[22]),b(l,"click",e[23]),b(x,"click",e[24]),b(_,"click",e[25])],B=!0)},p(e,t){16&t[0]&&i!==(i="py-2 px-1 border-b-2 font-medium text-sm "+("profile"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(r,"class",i),16&t[0]&&d!==(d="py-2 px-1 border-b-2 font-medium text-sm "+("security"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(l,"class",d),16&t[0]&&C!==(C="py-2 px-1 border-b-2 font-medium text-sm "+("preferences"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(x,"class",C),16&t[0]&&M!==(M="py-2 px-1 border-b-2 font-medium text-sm "+("data"===e[4]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"))&&k(_,"class",M),"profile"===e[4]?P?P.p(e,t):(P=Qo(e),P.c(),P.m(A.parentNode,A)):P&&(P.d(1),P=null),"security"===e[4]?E?E.p(e,t):(E=ei(e),E.c(),E.m(z.parentNode,z)):E&&(E.d(1),E=null),"preferences"===e[4]?F?F.p(e,t):(F=si(e),F.c(),F.m(j.parentNode,j)):F&&(F.d(1),F=null),"data"===e[4]?I?I.p(e,t):(I=ri(e),I.c(),I.m(T.parentNode,T)):I&&(I.d(1),I=null)},d(e){e&&(g(t),g(S),g(A),g(z),g(j),g(T)),P&&P.d(e),E&&E.d(e),F&&F.d(e),I&&I.d(e),B=!1,s(H)}}}function Go(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"></div> <p class="mt-2 text-gray-600">Loading profile...</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Qo(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,_,L,M,S,A,z,j,T=di(e[0].created_at)+"",B=di(e[0].updated_at)+"";function H(e,t){return e[5]?Zo:Wo}let P=H(e),E=P(e),F=e[0].last_login&&Ko(e),I=e[5]&&Xo(e);return{c(){t=f("div"),n=f("div"),n.innerHTML='<h3 class="text-lg font-medium text-gray-900">Profile Information</h3> <p class="mt-1 text-sm text-gray-600">Update your account&#39;s profile information and email address.</p>',s=y(),r=f("div"),o=f("div"),i=f("div"),a=f("label"),a.textContent="Email",l=y(),E.c(),c=y(),d=f("div"),p=f("div"),x=f("span"),x.textContent="Account Created",v=y(),b=f("p"),w=h(T),C=y(),_=f("div"),L=f("span"),L.textContent="Last Updated",M=y(),S=f("p"),A=h(B),z=y(),F&&F.c(),j=y(),I&&I.c(),k(n,"class","px-6 py-4 border-b border-gray-200"),k(a,"for","email"),k(a,"class","block text-sm font-medium text-gray-700"),k(x,"class","block text-sm font-medium text-gray-700"),k(b,"class","mt-1 text-sm text-gray-900"),k(L,"class","block text-sm font-medium text-gray-700"),k(S,"class","mt-1 text-sm text-gray-900"),k(d,"class","grid grid-cols-1 gap-6 sm:grid-cols-2"),k(o,"class","space-y-6"),k(r,"class","px-6 py-4"),k(t,"class","bg-white shadow rounded-lg")},m(e,g){m(e,t,g),u(t,n),u(t,s),u(t,r),u(r,o),u(o,i),u(i,a),u(i,l),E.m(i,null),u(o,c),u(o,d),u(d,p),u(p,x),u(p,v),u(p,b),u(b,w),u(d,C),u(d,_),u(_,L),u(_,M),u(_,S),u(S,A),u(d,z),F&&F.m(d,null),u(o,j),I&&I.m(o,null)},p(e,t){P===(P=H(e))&&E?E.p(e,t):(E.d(1),E=P(e),E&&(E.c(),E.m(i,null))),1&t[0]&&T!==(T=di(e[0].created_at)+"")&&$(w,T),1&t[0]&&B!==(B=di(e[0].updated_at)+"")&&$(A,B),e[0].last_login?F?F.p(e,t):(F=Ko(e),F.c(),F.m(d,null)):F&&(F.d(1),F=null),e[5]?I?I.p(e,t):(I=Xo(e),I.c(),I.m(o,null)):I&&(I.d(1),I=null)},d(e){e&&g(t),E.d(),F&&F.d(),I&&I.d()}}}function Wo(e){let t,n,s,r,o,i,a,l=e[0].email+"";return{c(){t=f("div"),n=f("span"),s=h(l),r=y(),o=f("button"),o.textContent="Edit",k(n,"class","text-sm text-gray-900"),k(o,"class","text-sm text-indigo-600 hover:text-indigo-500"),k(t,"class","mt-1 flex items-center justify-between")},m(l,c){m(l,t,c),u(t,n),u(n,s),u(t,r),u(t,o),i||(a=b(o,"click",e[27]),i=!0)},p(e,t){1&t[0]&&l!==(l=e[0].email+"")&&$(s,l)},d(e){e&&g(t),i=!1,a()}}}function Zo(e){let t,n,s,r;return{c(){t=f("div"),n=f("input"),k(n,"type","email"),k(n,"id","email"),k(n,"class","flex-1 min-w-0 block w-full px-3 py-2 rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(n,"placeholder","Enter your email"),k(t,"class","mt-1 flex rounded-md shadow-sm")},m(o,i){m(o,t,i),u(t,n),_(n,e[6]),s||(r=b(n,"input",e[26]),s=!0)},p(e,t){64&t[0]&&n.value!==e[6]&&_(n,e[6])},d(e){e&&g(t),s=!1,r()}}}function Ko(e){let t,n,s,r,o,i=di(e[0].last_login)+"";return{c(){t=f("div"),n=f("span"),n.textContent="Last Login",s=y(),r=f("p"),o=h(i),k(n,"class","block text-sm font-medium text-gray-700"),k(r,"class","mt-1 text-sm text-gray-900")},m(e,i){m(e,t,i),u(t,n),u(t,s),u(t,r),u(r,o)},p(e,t){1&t[0]&&i!==(i=di(e[0].last_login)+"")&&$(o,i)},d(e){e&&g(t)}}}function Xo(e){let t,n,r,o,i,a,l,c=e[1]?"Saving...":"Save Changes";return{c(){t=f("div"),n=f("button"),n.textContent="Cancel",r=y(),o=f("button"),i=h(c),k(n,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"),o.disabled=e[1],k(o,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50"),k(t,"class","flex justify-end space-x-3")},m(s,c){m(s,t,c),u(t,n),u(t,r),u(t,o),u(o,i),a||(l=[b(n,"click",e[28]),b(o,"click",e[15])],a=!0)},p(e,t){2&t[0]&&c!==(c=e[1]?"Saving...":"Save Changes")&&$(i,c),2&t[0]&&(o.disabled=e[1])},d(e){e&&g(t),a=!1,s(l)}}}function ei(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C=e[0].totp_enabled?"Enabled":"Disabled",_=e[0].totp_enabled?"Your account is protected with 2FA":"Enable 2FA to secure your account";function L(e,t){return e[0].totp_enabled?ni:ti}let M=L(e),S=M(e);return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900">Two-Factor Authentication</h3> <p class="mt-1 text-sm text-gray-600">Add an extra layer of security to your account with 2FA.</p>',r=y(),o=f("div"),i=f("div"),a=f("div"),l=f("p"),c=h("Status: "),d=h(C),p=y(),x=f("p"),v=h(_),b=y(),w=f("div"),S.c(),k(s,"class","px-6 py-4 border-b border-gray-200"),k(l,"class","text-sm font-medium text-gray-900"),k(x,"class","text-sm text-gray-600"),k(i,"class","flex items-center justify-between"),k(o,"class","px-6 py-4"),k(n,"class","bg-white shadow rounded-lg"),k(t,"class","space-y-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a),u(a,l),u(l,c),u(l,d),u(a,p),u(a,x),u(x,v),u(i,b),u(i,w),S.m(w,null)},p(e,t){1&t[0]&&C!==(C=e[0].totp_enabled?"Enabled":"Disabled")&&$(d,C),1&t[0]&&_!==(_=e[0].totp_enabled?"Your account is protected with 2FA":"Enable 2FA to secure your account")&&$(v,_),M===(M=L(e))&&S?S.p(e,t):(S.d(1),S=M(e),S&&(S.c(),S.m(w,null)))},d(e){e&&g(t),S.d()}}}function ti(t){let n,s,r;return{c(){n=f("button"),n.textContent="Enable 2FA",k(n,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[30]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function ni(t){let n,s,r;return{c(){n=f("button"),n.textContent="Disable 2FA",k(n,"class","px-4 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 hover:bg-red-50")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[29]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function si(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F=e[1]?"Saving...":"Save Preferences";return{c(){t=f("div"),n=f("div"),n.innerHTML='<h3 class="text-lg font-medium text-gray-900">Preferences</h3> <p class="mt-1 text-sm text-gray-600">Customize your experience and notification settings.</p>',r=y(),o=f("div"),i=f("div"),a=f("div"),l=f("div"),l.innerHTML='<span class="text-sm font-medium text-gray-900">Email Notifications</span> <p class="text-sm text-gray-600">Receive email updates about your account activity</p>',c=y(),d=f("label"),p=f("input"),x=y(),v=f("div"),w=y(),C=f("div"),_=f("div"),_.innerHTML='<span class="text-sm font-medium text-gray-900">Privacy Mode</span> <p class="text-sm text-gray-600">Hide your activity from other users</p>',L=y(),M=f("label"),S=f("input"),A=y(),z=f("div"),j=y(),T=f("div"),B=f("button"),H=h(F),k(n,"class","px-6 py-4 border-b border-gray-200"),k(p,"type","checkbox"),k(p,"class","sr-only peer"),k(v,"class","w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"),k(d,"class","relative inline-flex items-center cursor-pointer"),k(a,"class","flex items-center justify-between"),k(S,"type","checkbox"),k(S,"class","sr-only peer"),k(z,"class","w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"),k(M,"class","relative inline-flex items-center cursor-pointer"),k(C,"class","flex items-center justify-between"),B.disabled=e[1],k(B,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50"),k(T,"class","flex justify-end"),k(i,"class","space-y-6"),k(o,"class","px-6 py-4"),k(t,"class","bg-white shadow rounded-lg")},m(s,g){m(s,t,g),u(t,n),u(t,r),u(t,o),u(o,i),u(i,a),u(a,l),u(a,c),u(a,d),u(d,p),p.checked=e[7].email_notifications,u(d,x),u(d,v),u(i,w),u(i,C),u(C,_),u(C,L),u(C,M),u(M,S),S.checked=e[7].privacy_mode,u(M,A),u(M,z),u(i,j),u(i,T),u(T,B),u(B,H),P||(E=[b(p,"change",e[31]),b(S,"change",e[32]),b(B,"click",e[16])],P=!0)},p(e,t){128&t[0]&&(p.checked=e[7].email_notifications),128&t[0]&&(S.checked=e[7].privacy_mode),2&t[0]&&F!==(F=e[1]?"Saving...":"Save Preferences")&&$(H,F),2&t[0]&&(B.disabled=e[1])},d(e){e&&g(t),P=!1,s(E)}}}function ri(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,w,C=e[10]?"Exporting...":"Export My Data";function _(e,t){return e[11]?oi:ii}let L=_(e),M=L(e);return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900">Data Export</h3> <p class="mt-1 text-sm text-gray-600">Download a copy of all your data for your records.</p>',r=y(),o=f("div"),i=f("button"),a=h(C),l=y(),c=f("div"),d=f("div"),d.innerHTML='<h3 class="text-lg font-medium text-red-900">Delete Account</h3> <p class="mt-1 text-sm text-red-600">Permanently delete your account and all associated data.</p>',p=y(),x=f("div"),M.c(),k(s,"class","px-6 py-4 border-b border-gray-200"),i.disabled=e[10],k(i,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50"),k(o,"class","px-6 py-4"),k(n,"class","bg-white shadow rounded-lg"),k(d,"class","px-6 py-4 border-b border-red-200"),k(x,"class","px-6 py-4"),k(c,"class","bg-white shadow rounded-lg border-red-200"),k(t,"class","space-y-6")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a),u(t,l),u(t,c),u(c,d),u(c,p),u(c,x),M.m(x,null),v||(w=b(i,"click",e[17]),v=!0)},p(e,t){1024&t[0]&&C!==(C=e[10]?"Exporting...":"Export My Data")&&$(a,C),1024&t[0]&&(i.disabled=e[10]),L===(L=_(e))&&M?M.p(e,t):(M.d(1),M=L(e),M&&(M.c(),M.m(x,null)))},d(e){e&&g(t),M.d(),v=!1,w()}}}function oi(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,L,M,S,A,z,j,T,B,H=e[14]?"Deleting...":"Delete Account";return{c(){t=f("div"),n=f("div"),n.innerHTML='<div class="flex"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div class="ml-3"><h3 class="text-sm font-medium text-red-800">This action cannot be undone</h3> <p class="mt-2 text-sm text-red-700">This will permanently delete your account, DNP lists, and all associated data.</p></div></div>',r=y(),o=f("div"),i=f("label"),i.textContent="Confirm your email address",a=y(),l=f("input"),d=y(),p=f("div"),x=f("label"),x.textContent="Reason for deletion (optional)",v=y(),w=f("textarea"),C=y(),L=f("div"),M=f("button"),M.textContent="Cancel",S=y(),A=f("button"),z=h(H),k(n,"class","bg-red-50 border border-red-200 rounded-md p-4"),k(i,"for","confirm-email"),k(i,"class","block text-sm font-medium text-gray-700"),k(l,"type","email"),k(l,"id","confirm-email"),k(l,"placeholder",c=e[0].email),k(l,"class","mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm"),k(x,"for","delete-reason"),k(x,"class","block text-sm font-medium text-gray-700"),k(w,"id","delete-reason"),k(w,"rows","3"),k(w,"class","mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm"),k(w,"placeholder","Help us improve by telling us why you're leaving..."),k(M,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"),A.disabled=j=e[14]||e[12]!==e[0].email,k(A,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50"),k(L,"class","flex justify-end space-x-3"),k(t,"class","space-y-4")},m(s,c){m(s,t,c),u(t,n),u(t,r),u(t,o),u(o,i),u(o,a),u(o,l),_(l,e[12]),u(t,d),u(t,p),u(p,x),u(p,v),u(p,w),_(w,e[13]),u(t,C),u(t,L),u(L,M),u(L,S),u(L,A),u(A,z),T||(B=[b(l,"input",e[34]),b(w,"input",e[35]),b(M,"click",e[36]),b(A,"click",e[18])],T=!0)},p(e,t){1&t[0]&&c!==(c=e[0].email)&&k(l,"placeholder",c),4096&t[0]&&l.value!==e[12]&&_(l,e[12]),8192&t[0]&&_(w,e[13]),16384&t[0]&&H!==(H=e[14]?"Deleting...":"Delete Account")&&$(z,H),20481&t[0]&&j!==(j=e[14]||e[12]!==e[0].email)&&(A.disabled=j)},d(e){e&&g(t),T=!1,s(B)}}}function ii(t){let n,s,r;return{c(){n=f("button"),n.textContent="Delete Account",k(n,"class","px-4 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 hover:bg-red-50")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[33]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function ai(t){let n,s;return n=new lt({}),n.$on("complete",t[19]),n.$on("cancel",t[20]),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function li(t){let n,r,o,i,a,l,c,d,p,x,h,v,w,C;return{c(){n=f("div"),r=f("div"),o=f("div"),i=f("h3"),i.textContent="Disable Two-Factor Authentication",a=y(),l=f("p"),l.textContent="Enter your 2FA code to disable two-factor authentication",c=y(),d=f("div"),p=f("input"),x=y(),h=f("div"),v=f("button"),v.textContent="Cancel",k(i,"class","text-lg font-medium text-gray-900 mb-4"),k(l,"class","text-sm text-gray-600 mb-6"),k(p,"type","text"),k(p,"placeholder","Enter 6-digit code"),k(p,"maxlength","6"),k(p,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-center text-lg tracking-widest"),k(d,"class","mb-4"),k(v,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"),k(h,"class","flex justify-center space-x-3"),k(o,"class","mt-3 text-center"),k(r,"class","relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"),k(n,"class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(o,c),u(o,d),u(d,p),u(o,x),u(o,h),u(h,v),w||(C=[b(p,"input",t[21]),b(v,"click",t[37])],w=!0)},p:e,d(e){e&&g(n),w=!1,s(C)}}}function ci(e){let t,n,s,r,o,i,a,l,c,d=e[2]&&qo(e),p=e[3]&&Jo(e);function x(e,t){return e[1]&&!e[0]?Go:e[0]?Yo:void 0}let h=x(e),b=h&&h(e),w=e[8]&&ai(e),C=e[9]&&li(e);return{c(){t=f("div"),n=f("div"),n.innerHTML='<h1 class="text-2xl font-bold text-gray-900">Account Settings</h1> <p class="mt-1 text-sm text-gray-600">Manage your account information, security settings, and preferences.</p>',s=y(),d&&d.c(),r=y(),p&&p.c(),o=y(),b&&b.c(),i=y(),w&&w.c(),a=y(),C&&C.c(),l=v(),k(n,"class","mb-8"),k(t,"class","max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8")},m(e,g){m(e,t,g),u(t,n),u(t,s),d&&d.m(t,null),u(t,r),p&&p.m(t,null),u(t,o),b&&b.m(t,null),m(e,i,g),w&&w.m(e,g),m(e,a,g),C&&C.m(e,g),m(e,l,g),c=!0},p(e,n){e[2]?d?d.p(e,n):(d=qo(e),d.c(),d.m(t,r)):d&&(d.d(1),d=null),e[3]?p?p.p(e,n):(p=Jo(e),p.c(),p.m(t,o)):p&&(p.d(1),p=null),h===(h=x(e))&&b?b.p(e,n):(b&&b.d(1),b=h&&h(e),b&&(b.c(),b.m(t,null))),e[8]?w?(w.p(e,n),256&n[0]&&Q(w,1)):(w=ai(e),w.c(),Q(w,1),w.m(a.parentNode,a)):w&&(Y(),W(w,1,1,()=>{w=null}),G()),e[9]?C?C.p(e,n):(C=li(e),C.c(),C.m(l.parentNode,l)):C&&(C.d(1),C=null)},i(e){c||(Q(w),c=!0)},o(e){W(w),c=!1},d(e){e&&(g(t),g(i),g(a),g(l)),d&&d.d(),p&&p.d(),b&&b.d(),w&&w.d(e),C&&C.d(e)}}}function di(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ui(e,t,n){let s=null,r=!1,o="",i="",a="profile",l=!1,c="",d={two_factor_enabled:!1,email_notifications:!0,privacy_mode:!1},u=!1,m=!1,g=!1,p=!1,f="",x="",h=!1;async function y(){n(1,r=!0),n(2,o="");try{const e=await me("/users/profile");e.success?(n(0,s=e.data),n(6,c=s?.email||""),n(7,d={two_factor_enabled:s?.settings?.two_factor_enabled||!1,email_notifications:s?.settings?.email_notifications||!0,privacy_mode:s?.settings?.privacy_mode||!1})):n(2,o=e.message||"Failed to load profile")}catch(e){n(2,o=e.message||"Failed to load profile")}finally{n(1,r=!1)}}T(async()=>{await y()});return[s,r,o,i,a,l,c,d,u,m,g,p,f,x,h,async function(){if(s){n(1,r=!0),n(2,o=""),n(3,i="");try{const e=await pe("/users/profile",{email:c!==s.email?c:void 0});e.success?(n(0,s=e.data),n(5,l=!1),n(3,i="Profile updated successfully"),await ve.fetchProfile()):n(2,o=e.message||"Failed to update profile")}catch(e){n(2,o=e.message||"Failed to update profile")}finally{n(1,r=!1)}}},async function(){if(s){n(1,r=!0),n(2,o=""),n(3,i="");try{const e=await pe("/users/profile",{settings:d});e.success?(n(0,s=e.data),n(3,i="Settings updated successfully")):n(2,o=e.message||"Failed to update settings")}catch(e){n(2,o=e.message||"Failed to update settings")}finally{n(1,r=!1)}}},async function(){n(10,g=!0),n(2,o="");try{const e=await me("/users/export");if(e.success){const t=new Blob([JSON.stringify(e.data,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`no-drake-data-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),n(3,i="Data exported successfully")}else n(2,o=e.message||"Failed to export data")}catch(e){n(2,o=e.message||"Failed to export data")}finally{n(10,g=!1)}},async function(){if(s&&f===s.email){n(14,h=!0),n(2,o="");try{const e=await fe("/users/account",{confirmation_email:f,reason:x||void 0});e.success?await ve.logout():n(2,o=e.message||"Failed to delete account")}catch(e){n(2,o=e.message||"Failed to delete account")}finally{n(14,h=!1)}}else n(2,o="Email confirmation does not match")},function(){n(8,u=!1),y(),n(3,i="2FA enabled successfully")},function(){n(8,u=!1)},function(e){const t=e.target.value;6===t.length&&/^\d{6}$/.test(t)&&async function(e){try{const t=await ve.disable2FA(e);t.success?(n(9,m=!1),await y(),n(3,i="2FA disabled successfully")):n(2,o=t.message||"Failed to disable 2FA")}catch(e){n(2,o=e.message||"Failed to disable 2FA")}}(t)},()=>n(4,a="profile"),()=>n(4,a="security"),()=>n(4,a="preferences"),()=>n(4,a="data"),function(){c=this.value,n(6,c)},()=>n(5,l=!0),()=>{n(5,l=!1),n(6,c=s?.email||"")},()=>n(9,m=!0),()=>n(8,u=!0),function(){d.email_notifications=this.checked,n(7,d)},function(){d.privacy_mode=this.checked,n(7,d)},()=>n(11,p=!0),function(){f=this.value,n(12,f)},function(){x=this.value,n(13,x)},()=>{n(11,p=!1),n(12,f=""),n(13,x="")},()=>n(9,m=!1)]}class mi extends oe{constructor(e){super(),re(this,e,ui,ci,o,{},null,[-1,-1])}}function gi(t){let n,s;return n=new mi({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function pi(t){let n,s;return n=new Uo({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function fi(t){let n,s;return n=new Ar({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function xi(t){let n,s;return n=new as({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function hi(t){let n,s;return n=new Wt({}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){W(n.$$.fragment,e),s=!1},d(e){ne(n,e)}}}function yi(t){let n,r,o,i,a,l,c,d,p,v,w,C,_,L,M,S,A,z,j,T,B,H,P,E,F,I,D,N,O,R,V,U,q,J,Y,G,Q,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe=t[1].length+"",he=t[3]?"Active":"Setup Required";function ye(e,t){return e[3]?vi:bi}let ve=ye(t),be=ve(t);function we(e,t){return e[3]&&e[2]>0?ki:wi}let ke=we(t),Ce=ke(t);return{c(){n=f("div"),r=f("div"),o=f("div"),i=f("div"),a=f("div"),l=f("div"),l.innerHTML='<svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>',c=y(),d=f("div"),p=f("dl"),v=f("dt"),v.textContent="Connected Services\n                    ",w=f("dd"),C=h(xe),_=y(),L=f("div"),M=f("div"),S=f("button"),S.textContent="Manage connections",A=y(),z=f("div"),j=f("div"),T=f("div"),B=f("div"),B.innerHTML='<svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"></path></svg>',H=y(),P=f("div"),E=f("dl"),F=f("dt"),F.textContent="Blocked Artists\n                    ",I=f("dd"),D=h(t[2]),N=y(),O=f("div"),R=f("div"),V=f("button"),V.textContent="Manage DNP list",U=y(),q=f("div"),J=f("div"),Y=f("div"),G=f("div"),Q=x("svg"),W=x("path"),K=y(),X=f("div"),ee=f("dl"),te=f("dt"),te.textContent="System Status\n                    ",ne=f("dd"),se=h(he),re=y(),oe=f("div"),ie=f("div"),be.c(),ae=y(),le=f("div"),ce=f("h3"),ce.textContent="Quick Actions",de=y(),ue=f("div"),me=f("button"),me.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> <span class="mt-2 block text-sm font-medium text-gray-900">Add Artist to DNP List</span>',ge=y(),Ce.c(),k(l,"class","flex-shrink-0"),k(v,"class","text-sm font-medium text-gray-500 truncate"),k(w,"class","text-lg font-medium text-gray-900"),k(d,"class","ml-5 w-0 flex-1"),k(a,"class","flex items-center"),k(i,"class","p-5"),k(S,"class","font-medium text-indigo-700 hover:text-indigo-900"),k(M,"class","text-sm"),k(L,"class","bg-gray-50 px-5 py-3"),k(o,"class","bg-white overflow-hidden shadow rounded-lg"),k(B,"class","flex-shrink-0"),k(F,"class","text-sm font-medium text-gray-500 truncate"),k(I,"class","text-lg font-medium text-gray-900"),k(P,"class","ml-5 w-0 flex-1"),k(T,"class","flex items-center"),k(j,"class","p-5"),k(V,"class","font-medium text-indigo-700 hover:text-indigo-900"),k(R,"class","text-sm"),k(O,"class","bg-gray-50 px-5 py-3"),k(z,"class","bg-white overflow-hidden shadow rounded-lg"),k(W,"stroke-linecap","round"),k(W,"stroke-linejoin","round"),k(W,"stroke-width","2"),k(W,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),k(Q,"class",Z="h-6 w-6 "+(t[3]?"text-green-400":"text-gray-400")),k(Q,"fill","none"),k(Q,"viewBox","0 0 24 24"),k(Q,"stroke","currentColor"),k(G,"class","flex-shrink-0"),k(te,"class","text-sm font-medium text-gray-500 truncate"),k(ne,"class","text-lg font-medium text-gray-900"),k(X,"class","ml-5 w-0 flex-1"),k(Y,"class","flex items-center"),k(J,"class","p-5"),k(ie,"class","text-sm"),k(oe,"class","bg-gray-50 px-5 py-3"),k(q,"class","bg-white overflow-hidden shadow rounded-lg"),k(r,"class","grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"),k(ce,"class","text-lg leading-6 font-medium text-gray-900 mb-4"),k(me,"class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(ue,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),k(le,"class","mt-8"),k(n,"class","px-4 py-6 sm:px-0")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(a,l),u(a,c),u(a,d),u(d,p),u(p,v),u(p,w),u(w,C),u(o,_),u(o,L),u(L,M),u(M,S),u(r,A),u(r,z),u(z,j),u(j,T),u(T,B),u(T,H),u(T,P),u(P,E),u(E,F),u(E,I),u(I,D),u(z,N),u(z,O),u(O,R),u(R,V),u(r,U),u(r,q),u(q,J),u(J,Y),u(Y,G),u(G,Q),u(Q,W),u(Y,K),u(Y,X),u(X,ee),u(ee,te),u(ee,ne),u(ne,se),u(q,re),u(q,oe),u(oe,ie),be.m(ie,null),u(n,ae),u(n,le),u(le,ce),u(le,de),u(le,ue),u(ue,me),u(ue,ge),Ce.m(ue,null),pe||(fe=[b(S,"click",t[5]),b(V,"click",t[6]),b(me,"click",t[8])],pe=!0)},p(e,t){2&t&&xe!==(xe=e[1].length+"")&&$(C,xe),4&t&&$(D,e[2]),8&t&&Z!==(Z="h-6 w-6 "+(e[3]?"text-green-400":"text-gray-400"))&&k(Q,"class",Z),8&t&&he!==(he=e[3]?"Active":"Setup Required")&&$(se,he),ve===(ve=ye(e))&&be?be.p(e,t):(be.d(1),be=ve(e),be&&(be.c(),be.m(ie,null))),ke===(ke=we(e))&&Ce?Ce.p(e,t):(Ce.d(1),Ce=ke(e),Ce&&(Ce.c(),Ce.m(ue,null)))},i:e,o:e,d(e){e&&g(n),be.d(),Ce.d(),pe=!1,s(fe)}}}function vi(t){let n;return{c(){n=f("span"),n.textContent="Ready to use",k(n,"class","text-green-700")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function bi(t){let n,s,r;return{c(){n=f("button"),n.textContent="Connect Spotify",k(n,"class","font-medium text-indigo-700 hover:text-indigo-900")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[7]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function wi(t){let n,s,r;return{c(){n=f("button"),n.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg> <span class="mt-2 block text-sm font-medium text-gray-900">Connect Spotify</span>',k(n,"class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[10]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function ki(t){let n,s,r;return{c(){n=f("button"),n.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="mt-2 block text-sm font-medium text-gray-900">Plan Enforcement</span>',k(n,"class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[9]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function Ci(e){let t,n,s,r,o,i,a;n=new Pt({});const l=[yi,hi,xi,fi,pi,gi],c=[];function d(e,t){return"overview"===e[0]?0:"connections"===e[0]?1:"dnp"===e[0]?2:"enforcement"===e[0]?3:"community"===e[0]?4:"profile"===e[0]?5:-1}return~(o=d(e))&&(i=c[o]=l[o](e)),{c(){t=f("div"),ee(n.$$.fragment),s=y(),r=f("main"),i&&i.c(),k(r,"class","max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"),k(t,"class","min-h-screen bg-gray-50")},m(e,i){m(e,t,i),te(n,t,null),u(t,s),u(t,r),~o&&c[o].m(r,null),a=!0},p(e,[t]){let n=o;o=d(e),o===n?~o&&c[o].p(e,t):(i&&(Y(),W(c[n],1,1,()=>{c[n]=null}),G()),~o?(i=c[o],i?i.p(e,t):(i=c[o]=l[o](e),i.c()),Q(i,1),i.m(r,null)):i=null)},i(e){a||(Q(n.$$.fragment,e),Q(i),a=!0)},o(e){W(n.$$.fragment,e),W(i),a=!1},d(e){e&&g(t),ne(n),~o&&c[o].d()}}}function $i(e,t,n){let s,r,o,i;function a(e){ke(e)}d(e,be,e=>n(0,s=e)),d(e,_t,e=>n(1,r=e)),d(e,zt,e=>n(2,o=e)),d(e,Mt,e=>n(3,i=e)),T(async()=>{await St.fetchConnections(),await Tt.fetchDnpList()});return[s,r,o,i,a,()=>a("connections"),()=>a("dnp"),()=>a("connections"),()=>a("dnp"),()=>a("enforcement"),()=>a("connections")]}class _i extends oe{constructor(e){super(),re(this,e,$i,Ci,o,{})}}function Li(e){let t,n;return t=new Ct({}),{c(){ee(t.$$.fragment)},m(e,s){te(t,e,s),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function Mi(e){let t,n;return t=new _i({}),{c(){ee(t.$$.fragment)},m(e,s){te(t,e,s),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function Si(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading...</p></div>',k(n,"class","min-h-screen flex items-center justify-center bg-gray-50")},m(e,t){m(e,n,t)},i:e,o:e,d(e){e&&g(n)}}}function Ai(e){let t,n,s,r;const o=[Si,Mi,Li],i=[];function a(e,t){return e[0]?e[1]?1:2:0}return t=a(e),n=i[t]=o[t](e),{c(){n.c(),s=v()},m(e,n){i[t].m(e,n),m(e,s,n),r=!0},p(e,[r]){let l=t;t=a(e),t!==l&&(Y(),W(i[l],1,1,()=>{i[l]=null}),G(),n=i[t],n||(n=i[t]=o[t](e),n.c()),Q(n,1),n.m(s.parentNode,s))},i(e){r||(Q(n),r=!0)},o(e){W(n),r=!1},d(e){e&&g(s),i[t].d(e)}}}function zi(e,t,n){let s;d(e,he,e=>n(1,s=e));let r=!1;return T(async()=>{console.log("App mounting...");try{Ce(),console.log("Router initialized"),await ve.fetchProfile(),console.log("Auth profile fetched")}catch(e){console.error("Error during app initialization:",e)}finally{n(0,r=!0),console.log("App initialized, isAuthenticated:",s)}}),[r,s]}return new class extends oe{constructor(e){super(),re(this,e,zi,Ai,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
