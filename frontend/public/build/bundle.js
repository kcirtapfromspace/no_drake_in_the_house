var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i,a;function l(e,t){return e===t||(i||(i=document.createElement("a")),i.href=t,e===i.href)}function c(t,...n){if(null==t){for(const e of n)e(void 0);return e}const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function x(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function h(e){return document.createTextNode(e)}function y(){return h(" ")}function v(){return h("")}function b(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function k(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e){let t;return{p(...n){t=n,t.forEach(t=>e.push(t))},r(){t.forEach(t=>e.splice(e.indexOf(t),1))}}}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function M(e,t,n,s){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function S(e,t,n){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function L(e){const t=e.querySelector(":checked");return t&&t.__value}function z(e){a=e}function j(){if(!a)throw new Error("Function called outside component initialization");return a}function A(e){j().$$.on_mount.push(e)}function B(){const e=j();return(t,n,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}(t,n,{cancelable:s});return r.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const T=[],H=[];let P=[];const I=[],E=Promise.resolve();let D=!1;function F(e){P.push(e)}const N=new Set;let O=0;function R(){if(0!==O)return;const e=a;do{try{for(;O<T.length;){const e=T[O];O++,z(e),V(e.$$)}}catch(e){throw T.length=0,O=0,e}for(z(null),T.length=0,O=0;H.length;)H.pop()();for(let e=0;e<P.length;e+=1){const t=P[e];N.has(t)||(N.add(t),t())}P.length=0}while(T.length);for(;I.length;)I.pop()();D=!1,N.clear(),z(e)}function V(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}const U=new Set;let q;function J(){q={r:0,c:[],p:q}}function G(){q.r||s(q.c),q=q.p}function Q(e,t){e&&e.i&&(U.delete(e),e.i(t))}function Y(e,t,n,s){if(e&&e.o){if(U.has(e))return;U.add(e),q.c.push(()=>{U.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function W(e){return void 0!==e?.length?e:Array.from(e)}function Z(e,t){Y(e,1,1,()=>{t.delete(e.key)})}function K(e,t,n,r,o,i,a,l,c,d,u,m){let g=e.length,p=i.length,f=g;const x={};for(;f--;)x[e[f].key]=f;const h=[],y=new Map,v=new Map,b=[];for(f=p;f--;){const e=m(o,i,f),s=n(e);let r=a.get(s);r?b.push(()=>r.p(e,t)):(r=d(s,e),r.c()),y.set(s,h[f]=r),s in x&&v.set(s,Math.abs(f-x[s]))}const w=new Set,k=new Set;function C(e){Q(e,1),e.m(l,u),a.set(e.key,e),u=e.first,p--}for(;g&&p;){const t=h[p-1],n=e[g-1],s=t.key,r=n.key;t===n?(u=t.first,g--,p--):y.has(r)?!a.has(s)||w.has(s)?C(t):k.has(r)?g--:v.get(s)>v.get(r)?(k.add(s),C(t)):(w.add(r),g--):(c(n,a),g--)}for(;g--;){const t=e[g];y.has(t.key)||c(t,a)}for(;p;)C(h[p-1]);return s(b),h}function X(e){e&&e.c()}function ee(e,n,o){const{fragment:i,after_update:a}=e.$$;i&&i.m(n,o),F(()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):s(n),e.$$.on_mount=[]}),a.forEach(F)}function te(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];P.forEach(s=>-1===e.indexOf(s)?t.push(s):n.push(s)),n.forEach(e=>e()),P=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t){-1===e.$$.dirty[0]&&(T.push(e),D||(D=!0,E.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(t,r,o,i,l,c,d=null,u=[-1]){const m=a;z(t);const p=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(m?m.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||m.$$.root};d&&d(p.root);let f=!1;if(p.ctx=o?o(t,r.props||{},(e,n,...s)=>{const r=s.length?s[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),f&&ne(t,e)),n}):[],p.update(),f=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(g)}else p.fragment&&p.fragment.c();r.intro&&Q(t.$$.fragment),ee(t,r.target,r.anchor),R()}z(m)}class re{$$=void 0;$$set=void 0;$destroy(){te(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const e=s.indexOf(n);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const oe=[];function ie(t,n=e){let s;const r=new Set;function i(e){if(o(t,e)&&(t=e,s)){const e=!oe.length;for(const e of r)e[1](),oe.push(e,t);if(e){for(let e=0;e<oe.length;e+=2)oe[e][0](oe[e+1]);oe.length=0}}}function a(e){i(e(t))}return{set:i,update:a,subscribe:function(o,l=e){const c=[o,l];return r.add(c),1===r.size&&(s=n(i,a)||e),o(t),()=>{r.delete(c),0===r.size&&s&&(s(),s=null)}}}}function ae(t,n,o){const i=!Array.isArray(t),a=i?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return d=(t,o)=>{let d=!1;const u=[];let m=0,g=e;const p=()=>{if(m)return;g();const s=n(i?u[0]:u,t,o);l?t(s):g=r(s)?s:e},f=a.map((e,t)=>c(e,e=>{u[t]=e,m&=~(1<<t),d&&p()},()=>{m|=1<<t}));return d=!0,p(),function(){s(f),g(),d=!1}},{subscribe:ie(o,d).subscribe};var d}const le=ie({user:null,token:localStorage.getItem("auth_token"),refreshToken:localStorage.getItem("refresh_token"),isAuthenticated:!1,isLoading:!1}),ce=ae(le,e=>e.isAuthenticated&&null!==e.token),de=ae(le,e=>e.user),ue={login:async(e,t,n)=>{le.update(e=>({...e,isLoading:!0}));try{const s=await fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,totp_code:n})}),r=await s.json();if(r.success){const{access_token:e,refresh_token:t}=r.data;return localStorage.setItem("auth_token",e),localStorage.setItem("refresh_token",t),le.update(n=>({...n,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1})),await ue.fetchProfile(),{success:!0}}return le.update(e=>({...e,isLoading:!1})),{success:!1,message:r.message}}catch(e){return le.update(e=>({...e,isLoading:!1})),{success:!1,message:"Network error occurred"}}},register:async(e,t)=>{le.update(e=>({...e,isLoading:!0}));try{const n=await fetch("http://localhost:3000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),s=await n.json();return le.update(e=>({...e,isLoading:!1})),{success:s.success,message:s.message}}catch(e){return le.update(e=>({...e,isLoading:!1})),{success:!1,message:"Network error occurred"}}},fetchProfile:async()=>{const e=localStorage.getItem("auth_token");if(e)try{const t=await fetch("http://localhost:3000/auth/profile",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&le.update(e=>({...e,user:n.data,isAuthenticated:!0}))}catch(e){console.error("Failed to fetch profile:",e)}},logout:async()=>{const e=localStorage.getItem("auth_token");if(e)try{await fetch("http://localhost:3000/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Logout request failed:",e)}localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),le.set({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1})},refreshToken:async()=>{const e=localStorage.getItem("refresh_token");if(!e)return!1;try{const t=await fetch("http://localhost:3000/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})}),n=await t.json();if(n.success){const{access_token:e,refresh_token:t}=n.data;return localStorage.setItem("auth_token",e),localStorage.setItem("refresh_token",t),le.update(n=>({...n,token:e,refreshToken:t,isAuthenticated:!0})),!0}}catch(e){console.error("Token refresh failed:",e)}return!1}};if("undefined"!=typeof window){const e=localStorage.getItem("auth_token");e&&(le.update(t=>({...t,token:e,isAuthenticated:!0})),ue.fetchProfile())}function me(e){let t,n,s,r,o,i;return{c(){t=f("div"),n=f("label"),n.textContent="2FA Code",s=y(),r=f("input"),k(n,"for","totp"),k(n,"class","sr-only"),k(r,"id","totp"),k(r,"name","totp"),k(r,"type","text"),k(r,"autocomplete","one-time-code"),k(r,"class","appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"),k(r,"placeholder","2FA Code")},m(a,l){m(a,t,l),u(t,n),u(t,s),u(t,r),$(r,e[2]),o||(i=b(r,"input",e[11]),o=!0)},p(e,t){4&t&&r.value!==e[2]&&$(r,e[2])},d(e){e&&g(t),o=!1,i()}}}function ge(e){let t,n;return{c(){t=f("div"),n=h(e[5]),k(t,"class","text-red-600 text-sm text-center")},m(e,s){m(e,t,s),u(t,n)},p(e,t){32&t&&_(n,e[5])},d(e){e&&g(t)}}}function pe(e){let t,n=e[3]?"Sign in":"Create account";return{c(){t=h(n)},m(e,n){m(e,t,n)},p(e,s){8&s&&n!==(n=e[3]?"Sign in":"Create account")&&_(t,n)},d(e){e&&g(t)}}}function fe(e){let t,n,s,r,o,i=e[3]?"Signing in...":"Creating account...";return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=y(),o=h(i),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,i){m(e,t,i),u(t,n),u(t,s),m(e,r,i),m(e,o,i)},p(e,t){8&t&&i!==(i=e[3]?"Signing in...":"Creating account...")&&_(o,i)},d(e){e&&(g(t),g(r),g(o))}}}function xe(t){let n,r,o,i,a,l,c,d,p,x,v,C,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J=t[3]?"Sign in to your account":"Create your account",G=t[3]?"Don't have an account? Sign up":"Already have an account? Sign in",Q=t[6]&&me(t),Y=t[5]&&ge(t);function W(e,t){return e[4]?fe:pe}let Z=W(t),K=Z(t);return{c(){n=f("div"),r=f("div"),o=f("div"),i=f("h2"),a=h(J),l=y(),c=f("p"),c.textContent="Music Streaming Blocklist Manager",d=y(),p=f("form"),x=f("div"),v=f("div"),C=f("label"),C.textContent="Email address",M=y(),S=f("input"),L=y(),z=f("div"),j=f("label"),j.textContent="Password",A=y(),B=f("input"),P=y(),Q&&Q.c(),I=y(),Y&&Y.c(),E=y(),D=f("div"),F=f("button"),K.c(),N=y(),O=f("div"),R=f("button"),V=h(G),k(i,"class","mt-6 text-center text-3xl font-extrabold text-gray-900"),k(c,"class","mt-2 text-center text-sm text-gray-600"),k(C,"for","email"),k(C,"class","sr-only"),k(S,"id","email"),k(S,"name","email"),k(S,"type","email"),k(S,"autocomplete","email"),S.required=!0,k(S,"class","appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"),k(S,"placeholder","Email address"),k(j,"for","password"),k(j,"class","sr-only"),k(B,"id","password"),k(B,"name","password"),k(B,"type","password"),k(B,"autocomplete",T=t[3]?"current-password":"new-password"),B.required=!0,k(B,"class",H="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 "+(t[6]?"":"rounded-b-md")+" focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"),k(B,"placeholder","Password"),k(x,"class","rounded-md shadow-sm -space-y-px"),k(F,"type","submit"),F.disabled=t[4],k(F,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(R,"type","button"),k(R,"class","text-indigo-600 hover:text-indigo-500 text-sm"),k(O,"class","text-center"),k(p,"class","mt-8 space-y-6"),k(r,"class","max-w-md w-full space-y-8"),k(n,"class","min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(o,l),u(o,c),u(r,d),u(r,p),u(p,x),u(x,v),u(v,C),u(v,M),u(v,S),$(S,t[0]),u(x,L),u(x,z),u(z,j),u(z,A),u(z,B),$(B,t[1]),u(x,P),Q&&Q.m(x,null),u(p,I),Y&&Y.m(p,null),u(p,E),u(p,D),u(D,F),K.m(F,null),u(p,N),u(p,O),u(O,R),u(R,V),U||(q=[b(S,"input",t[9]),b(B,"input",t[10]),b(R,"click",t[8]),b(p,"submit",w(t[7]))],U=!0)},p(e,[t]){8&t&&J!==(J=e[3]?"Sign in to your account":"Create your account")&&_(a,J),1&t&&S.value!==e[0]&&$(S,e[0]),8&t&&T!==(T=e[3]?"current-password":"new-password")&&k(B,"autocomplete",T),64&t&&H!==(H="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 "+(e[6]?"":"rounded-b-md")+" focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm")&&k(B,"class",H),2&t&&B.value!==e[1]&&$(B,e[1]),e[6]?Q?Q.p(e,t):(Q=me(e),Q.c(),Q.m(x,null)):Q&&(Q.d(1),Q=null),e[5]?Y?Y.p(e,t):(Y=ge(e),Y.c(),Y.m(p,E)):Y&&(Y.d(1),Y=null),Z===(Z=W(e))&&K?K.p(e,t):(K.d(1),K=Z(e),K&&(K.c(),K.m(F,null))),16&t&&(F.disabled=e[4]),8&t&&G!==(G=e[3]?"Don't have an account? Sign up":"Already have an account? Sign in")&&_(V,G)},i:e,o:e,d(e){e&&g(n),Q&&Q.d(),Y&&Y.d(),K.d(),U=!1,s(q)}}}function he(e,t,n){let s="",r="",o="",i=!0,a=!1,l="",c=!1;return[s,r,o,i,a,l,c,async function(){if(s&&r){n(4,a=!0),n(5,l="");try{if(i){const e=await ue.login(s,r,o||void 0);e.success||(e.message?.includes("TOTP")?(n(6,c=!0),n(5,l="Please enter your 2FA code")):n(5,l=e.message||"Login failed"))}else{const e=await ue.register(s,r);e.success?(n(3,i=!0),n(5,l=""),n(0,s=""),n(1,r="")):n(5,l=e.message||"Registration failed")}}catch(e){n(5,l="An unexpected error occurred")}finally{n(4,a=!1)}}else n(5,l="Please fill in all required fields")},function(){n(3,i=!i),n(5,l=""),n(6,c=!1),n(2,o="")},function(){s=this.value,n(0,s)},function(){r=this.value,n(1,r)},function(){o=this.value,n(2,o)}]}class ye extends re{constructor(e){super(),se(this,e,he,xe,o,{})}}const ve=ie({connections:[],isLoading:!1,error:null}),be=ae(ve,e=>e.connections.filter(e=>"active"===e.status)),we=ae(ve,e=>e.connections.find(e=>"spotify"===e.provider)),ke=ae(we,e=>"active"===e?.status),Ce={fetchConnections:async()=>{ve.update(e=>({...e,isLoading:!0,error:null}));try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/connections",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success?ve.update(e=>({...e,connections:n.data,isLoading:!1})):ve.update(e=>({...e,error:n.message,isLoading:!1}))}catch(e){ve.update(e=>({...e,error:"Failed to fetch connections",isLoading:!1}))}},initiateSpotifyAuth:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/auth",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();if(!n.success)throw new Error(n.message);window.location.href=n.data.auth_url}catch(e){ve.update(t=>({...t,error:`Failed to initiate Spotify auth: ${e instanceof Error?e.message:"Unknown error"}`}))}},handleSpotifyCallback:async(e,t)=>{try{const n=localStorage.getItem("auth_token"),s=await fetch("http://localhost:3000/api/v1/spotify/callback",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({code:e,state:t})}),r=await s.json();return r.success?(await Ce.fetchConnections(),{success:!0}):{success:!1,message:r.message}}catch(e){return{success:!1,message:"Failed to complete Spotify connection"}}},disconnectSpotify:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/connection",{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),n=await t.json();return n.success?(await Ce.fetchConnections(),{success:!0}):{success:!1,message:n.message}}catch(e){return{success:!1,message:"Failed to disconnect Spotify"}}},checkSpotifyHealth:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/health",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();if(n.success)return await Ce.fetchConnections(),n.data}catch(e){console.error("Spotify health check failed:",e)}}},_e=ie({entries:[],isLoading:!1,error:null,searchResults:[],isSearching:!1});ae(_e,e=>e.entries.map(e=>e.artist));const $e=ae(_e,e=>e.entries.length),Me=ae(_e,e=>{const t=e.entries.flatMap(e=>e.tags);return[...new Set(t)].sort()}),Se={fetchDnpList:async()=>{_e.update(e=>({...e,isLoading:!0,error:null}));try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/dnp/list",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success?_e.update(e=>({...e,entries:n.data,isLoading:!1})):_e.update(e=>({...e,error:n.message,isLoading:!1}))}catch(e){_e.update(e=>({...e,error:"Failed to fetch DNP list",isLoading:!1}))}},searchArtists:async(e,t=10)=>{if(e.trim()){_e.update(e=>({...e,isSearching:!0}));try{const n=localStorage.getItem("auth_token"),s=await fetch(`http://localhost:3000/api/v1/dnp/search?q=${encodeURIComponent(e)}&limit=${t}`,{headers:{Authorization:`Bearer ${n}`}}),r=await s.json();r.success?_e.update(e=>({...e,searchResults:r.data,isSearching:!1})):_e.update(e=>({...e,error:r.message,isSearching:!1}))}catch(e){_e.update(e=>({...e,error:"Artist search failed",isSearching:!1}))}}else _e.update(e=>({...e,searchResults:[]}))},addArtist:async(e,t=[],n)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch("http://localhost:3000/api/v1/dnp/artists",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({query:e,tags:t,note:n})}),o=await r.json();return o.success?(await Se.fetchDnpList(),{success:!0,data:o.data}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to add artist to DNP list"}}},removeArtist:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/dnp/artists/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?(await Se.fetchDnpList(),{success:!0}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to remove artist from DNP list"}}},updateEntry:async(e,t,n)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch(`http://localhost:3000/api/v1/dnp/artists/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({tags:t,note:n})}),o=await r.json();return o.success?(await Se.fetchDnpList(),{success:!0,data:o.data}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to update DNP entry"}}},bulkImport:async(e,t)=>{try{const n=localStorage.getItem("auth_token"),s=await fetch("http://localhost:3000/api/v1/dnp/import",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({data:e,format:t})}),r=await s.json();return r.success?(await Se.fetchDnpList(),{success:!0,data:r.data}):{success:!1,message:r.message}}catch(e){return{success:!1,message:"Bulk import failed"}}},exportList:async(e="json")=>{try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/dnp/export?format=${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?{success:!0,data:s.data}:{success:!1,message:s.message}}catch(e){return{success:!1,message:"Export failed"}}},clearSearch:()=>{_e.update(e=>({...e,searchResults:[]}))}};function Le(e){let t,n,s,r,o,i,a;return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(e[1]),k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","mb-6 bg-red-50 border border-red-200 rounded-md p-4")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a)},p(e,t){2&t&&_(a,e[1])},d(e){e&&g(t)}}}function ze(e){let t,n,s,r=e[2].status+"";return{c(){t=f("span"),n=h(r),k(t,"class",s="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Fe(e[2].status))},m(e,s){m(e,t,s),u(t,n)},p(e,o){4&o&&r!==(r=e[2].status+"")&&_(n,r),4&o&&s!==(s="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Fe(e[2].status))&&k(t,"class",s)},d(e){e&&g(t)}}}function je(t){let n;return{c(){n=f("p"),n.textContent="Connect your Spotify account to manage your music library",k(n,"class","text-sm text-gray-500")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Ae(e){let t,n,s,r,o,i,a=Ne(e[2].created_at)+"",l=e[2].provider_user_id&&Be(e),c=e[2].scopes.length>0&&Te(e);return{c(){t=f("p"),n=h("Connected "),s=h(a),r=y(),l&&l.c(),o=y(),c&&c.c(),i=v(),k(t,"class","text-sm text-gray-500")},m(e,a){m(e,t,a),u(t,n),u(t,s),u(t,r),l&&l.m(t,null),m(e,o,a),c&&c.m(e,a),m(e,i,a)},p(e,n){4&n&&a!==(a=Ne(e[2].created_at)+"")&&_(s,a),e[2].provider_user_id?l?l.p(e,n):(l=Be(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),e[2].scopes.length>0?c?c.p(e,n):(c=Te(e),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(e){e&&(g(t),g(o),g(i)),l&&l.d(),c&&c.d(e)}}}function Be(e){let t,n,s=e[2].provider_user_id+"";return{c(){t=h("• User ID: "),n=h(s)},m(e,s){m(e,t,s),m(e,n,s)},p(e,t){4&t&&s!==(s=e[2].provider_user_id+"")&&_(n,s)},d(e){e&&(g(t),g(n))}}}function Te(e){let t,n,s,r=e[2].scopes.join(", ")+"";return{c(){t=f("p"),n=h("Permissions: "),s=h(r),k(t,"class","text-xs text-gray-400 mt-1")},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,t){4&t&&r!==(r=e[2].scopes.join(", ")+"")&&_(s,r)},d(e){e&&g(t)}}}function He(e){let t,n,s;function r(e,t){return e[0]?Ee:Ie}let o=r(e),i=o(e);return{c(){t=f("button"),i.c(),t.disabled=e[0],k(t,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed")},m(r,o){m(r,t,o),i.m(t,null),n||(s=b(t,"click",e[3]),n=!0)},p(e,n){o!==(o=r(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t,null))),1&n&&(t.disabled=e[0])},d(e){e&&g(t),i.d(),n=!1,s()}}}function Pe(t){let n,r,o,i,a;return{c(){n=f("button"),n.textContent="Check Health",r=y(),o=f("button"),o.textContent="Disconnect",k(n,"class","inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(o,"class","inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500")},m(e,s){m(e,n,s),m(e,r,s),m(e,o,s),i||(a=[b(n,"click",t[5]),b(o,"click",t[4])],i=!0)},p:e,d(e){e&&(g(n),g(r),g(o)),i=!1,s(a)}}}function Ie(e){let t;return{c(){t=h("Connect")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Ee(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n                  Connecting..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function De(t){let n,s,r,o,i,a,l,c,d,p,x,h,v,b,w,C,_,$,M,S,L,z,j,A,B,T=t[1]&&Le(t),H=t[2]&&ze(t);function P(e,t){return e[2]?Ae:je}let I=P(t),E=I(t);function D(e,t){return e[2]?Pe:He}let F=D(t),N=F(t);return{c(){n=f("div"),s=f("div"),s.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Service Connections</h2> <p class="mt-1 text-sm text-gray-600">Connect your streaming service accounts to manage your blocklist across platforms.</p>',r=y(),T&&T.c(),o=y(),i=f("div"),a=f("ul"),l=f("li"),c=f("div"),d=f("div"),p=f("div"),p.innerHTML='<div class="h-10 w-10 rounded-full bg-green-500 flex items-center justify-center"><svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"></path></svg></div>',x=y(),h=f("div"),v=f("div"),b=f("p"),b.textContent="Spotify",w=y(),H&&H.c(),C=y(),_=f("div"),E.c(),$=y(),M=f("div"),N.c(),S=y(),L=f("li"),L.innerHTML='<div class="px-4 py-4 flex items-center justify-between opacity-50"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-gray-400 flex items-center justify-center"><svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M23.997 6.124c0-.738-.065-1.47-.24-2.19-.317-1.31-1.062-2.31-2.18-3.043C21.003.517 20.373.285 19.7.164c-.517-.093-1.038-.135-1.564-.15-.04-.001-.08-.004-.12-.004H5.986c-.04 0-.08.003-.12.004-.526.015-1.047.057-1.564.15-.673.121-1.303.353-1.877.727C1.307 1.624.562 2.624.245 3.934.07 4.654.005 5.386.005 6.124v11.748c0 .738.065 1.47.24 2.19.317 1.31 1.062 2.31 2.18 3.043.574.374 1.204.606 1.877.727.517.093 1.038.135 1.564.15.04.001.08.004.12.004h12.014c.04 0 .08-.003.12-.004.526-.015 1.047-.057 1.564-.15.673-.121 1.303-.353 1.877-.727 1.118-.733 1.863-1.733 2.18-3.043.175-.72.24-1.452.24-2.19V6.124zM12.001 4.009c2.47 0 4.471 2.001 4.471 4.471s-2.001 4.471-4.471 4.471-4.471-2.001-4.471-4.471 2.001-4.471 4.471-4.471zm0 7.542c1.693 0 3.071-1.378 3.071-3.071s-1.378-3.071-3.071-3.071-3.071 1.378-3.071 3.071 1.378 3.071 3.071 3.071z"></path></svg></div></div> <div class="ml-4"><div class="flex items-center"><p class="text-sm font-medium text-gray-900">Apple Music</p> <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-gray-600 bg-gray-100">Coming Soon</span></div> <p class="text-sm text-gray-500 mt-1">Apple Music integration will be available in a future update</p></div></div> <button disabled="" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed">Coming Soon</button></div>',z=y(),j=f("li"),j.innerHTML='<div class="px-4 py-4 flex items-center justify-between opacity-50"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-red-500 flex items-center justify-center"><svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></div></div> <div class="ml-4"><div class="flex items-center"><p class="text-sm font-medium text-gray-900">YouTube Music</p> <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-gray-600 bg-gray-100">Coming Soon</span></div> <p class="text-sm text-gray-500 mt-1">YouTube Music integration will be available in a future update</p></div></div> <button disabled="" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed">Coming Soon</button></div>',A=y(),B=f("div"),B.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">About Service Connections</h3> <div class="mt-2 text-sm text-blue-700"><p>Service connections allow you to apply your Do-Not-Play list across different streaming platforms. \n            Each connection is secured with OAuth 2.0 and only requests the minimum permissions needed to manage your blocklist.</p> <ul class="list-disc list-inside mt-2 space-y-1"><li>Spotify: Full library management and playlist modification</li> <li>Apple Music: Limited library access (coming soon)</li> <li>YouTube Music: Browser extension support only (coming soon)</li></ul></div></div></div>',k(s,"class","mb-6"),k(p,"class","flex-shrink-0 h-10 w-10"),k(b,"class","text-sm font-medium text-gray-900"),k(v,"class","flex items-center"),k(_,"class","mt-1"),k(h,"class","ml-4"),k(d,"class","flex items-center"),k(M,"class","flex items-center space-x-2"),k(c,"class","px-4 py-4 flex items-center justify-between"),k(a,"class","divide-y divide-gray-200"),k(i,"class","bg-white shadow overflow-hidden sm:rounded-md"),k(B,"class","mt-6 bg-blue-50 border border-blue-200 rounded-md p-4"),k(n,"class","px-4 py-6 sm:px-0")},m(e,t){m(e,n,t),u(n,s),u(n,r),T&&T.m(n,null),u(n,o),u(n,i),u(i,a),u(a,l),u(l,c),u(c,d),u(d,p),u(d,x),u(d,h),u(h,v),u(v,b),u(v,w),H&&H.m(v,null),u(h,C),u(h,_),E.m(_,null),u(c,$),u(c,M),N.m(M,null),u(a,S),u(a,L),u(a,z),u(a,j),u(n,A),u(n,B)},p(e,[t]){e[1]?T?T.p(e,t):(T=Le(e),T.c(),T.m(n,o)):T&&(T.d(1),T=null),e[2]?H?H.p(e,t):(H=ze(e),H.c(),H.m(v,null)):H&&(H.d(1),H=null),I===(I=P(e))&&E?E.p(e,t):(E.d(1),E=I(e),E&&(E.c(),E.m(_,null))),F===(F=D(e))&&N?N.p(e,t):(N.d(1),N=F(e),N&&(N.c(),N.m(M,null)))},i:e,o:e,d(e){e&&g(n),T&&T.d(),H&&H.d(),E.d(),N.d()}}}function Fe(e){switch(e){case"active":return"text-green-600 bg-green-100";case"expired":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}function Ne(e){return new Date(e).toLocaleDateString()}function Oe(e,t,n){let s;d(e,we,e=>n(2,s=e));let r=!1,o="";return A(()=>{const e=new URLSearchParams(window.location.search),t=e.get("code"),s=e.get("state");t&&s&&(!async function(e,t){n(0,r=!0),n(1,o="");const s=await Ce.handleSpotifyCallback(e,t);s.success||n(1,o=s.message||"Failed to connect Spotify");n(0,r=!1)}(t,s),window.history.replaceState({},document.title,window.location.pathname))}),[r,o,s,async function(){n(0,r=!0),n(1,o="");try{await Ce.initiateSpotifyAuth()}catch(e){n(1,o="Failed to initiate Spotify connection"),n(0,r=!1)}},async function(){const e=await Ce.disconnectSpotify();e.success||n(1,o=e.message||"Failed to disconnect Spotify")},async function(){await Ce.checkSpotifyHealth()}]}class Re extends re{constructor(e){super(),se(this,e,Oe,De,o,{})}}function Ve(e,t,n){const s=e.slice();return s[17]=t[n],s}function Ue(e,t,n){const s=e.slice();return s[20]=t[n],s}function qe(e,t,n){const s=e.slice();return s[17]=t[n],s}function Je(t){let n,s,r;return{c(){n=f("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',k(n,"type","button"),k(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[9]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function Ge(e){let t,n=W(e[6].searchResults),s=[];for(let t=0;t<n.length;t+=1)s[t]=Ke(Ue(e,n,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm")},m(e,n){m(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,r){if(320&r){let o;for(n=W(e[6].searchResults),o=0;o<n.length;o+=1){const i=Ue(e,n,o);s[o]?s[o].p(i,r):(s[o]=Ke(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&g(t),p(s,e)}}}function Qe(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Ye(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[20].metadata.image)||k(t,"src",n),k(t,"alt",s=e[20].canonical_name),k(t,"class","h-8 w-8 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){64&r&&!l(t.src,n=e[20].metadata.image)&&k(t,"src",n),64&r&&s!==(s=e[20].canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function We(e){let t,n,s=e[20].metadata.genres.slice(0,2).join(", ")+"";return{c(){t=f("div"),n=h(s),k(t,"class","text-xs text-gray-500")},m(e,s){m(e,t,s),u(t,n)},p(e,t){64&t&&s!==(s=e[20].metadata.genres.slice(0,2).join(", ")+"")&&_(n,s)},d(e){e&&g(t)}}}function Ze(e){let t,n,s,r,o=e[17].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){64&s&&o!==(o=e[17].name+"")&&_(n,o),64&s&&r!==(r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function Ke(e){let t,n,s,r,o,i,a,l,c,d,x,v,w,C=e[20].canonical_name+"";function $(e,t){return e[20].metadata.image?Ye:Qe}let M=$(e),S=M(e),L=e[20].metadata.genres&&e[20].metadata.genres.length>0&&We(e),z=W(ct(e[20])),j=[];for(let t=0;t<z.length;t+=1)j[t]=Ze(qe(e,z,t));function A(){return e[13](e[20])}return{c(){t=f("button"),n=f("div"),s=f("div"),S.c(),r=y(),o=f("div"),i=f("div"),a=h(C),l=y(),L&&L.c(),c=y(),d=f("div");for(let e=0;e<j.length;e+=1)j[e].c();x=y(),k(i,"class","text-sm font-medium text-gray-900"),k(s,"class","flex items-center space-x-3"),k(d,"class","flex space-x-1"),k(n,"class","flex items-center justify-between"),k(t,"type","button"),k(t,"class","w-full text-left px-4 py-2 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none")},m(e,g){m(e,t,g),u(t,n),u(n,s),S.m(s,null),u(s,r),u(s,o),u(o,i),u(i,a),u(o,l),L&&L.m(o,null),u(n,c),u(n,d);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(d,null);u(t,x),v||(w=b(t,"click",A),v=!0)},p(t,n){if(M===(M=$(e=t))&&S?S.p(e,n):(S.d(1),S=M(e),S&&(S.c(),S.m(s,r))),64&n&&C!==(C=e[20].canonical_name+"")&&_(a,C),e[20].metadata.genres&&e[20].metadata.genres.length>0?L?L.p(e,n):(L=We(e),L.c(),L.m(o,null)):L&&(L.d(1),L=null),64&n){let t;for(z=W(ct(e[20])),t=0;t<z.length;t+=1){const s=qe(e,z,t);j[t]?j[t].p(s,n):(j[t]=Ze(s),j[t].c(),j[t].m(d,null))}for(;t<j.length;t+=1)j[t].d(1);j.length=z.length}},d(e){e&&g(t),S.d(),L&&L.d(),p(j,e),v=!1,w()}}}function Xe(e){let t;return{c(){t=f("div"),t.innerHTML='<svg class="animate-spin mx-auto h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-gray-500 mt-1">Searching...</p>',k(t,"class","absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md py-2 text-center")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function et(e){let t,n,s,r,o,i,a,l,c,d,x,v=e[1].canonical_name+"";function b(e,t){return e[1].metadata.image?nt:tt}let w=b(e),C=w(e),$=e[1].metadata.genres&&e[1].metadata.genres.length>0&&st(e),M=W(ct(e[1])),S=[];for(let t=0;t<M.length;t+=1)S[t]=rt(Ve(e,M,t));return{c(){t=f("div"),n=f("h4"),n.textContent="Selected Artist",s=y(),r=f("div"),C.c(),o=y(),i=f("div"),a=f("div"),l=h(v),c=y(),$&&$.c(),d=y(),x=f("div");for(let e=0;e<S.length;e+=1)S[e].c();k(n,"class","text-sm font-medium text-gray-900 mb-2"),k(a,"class","text-sm font-medium text-gray-900"),k(x,"class","flex space-x-1 mt-1"),k(i,"class","flex-1"),k(r,"class","flex items-center space-x-3"),k(t,"class","bg-gray-50 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(t,s),u(t,r),C.m(r,null),u(r,o),u(r,i),u(i,a),u(a,l),u(i,c),$&&$.m(i,null),u(i,d),u(i,x);for(let e=0;e<S.length;e+=1)S[e]&&S[e].m(x,null)},p(e,t){if(w===(w=b(e))&&C?C.p(e,t):(C.d(1),C=w(e),C&&(C.c(),C.m(r,o))),2&t&&v!==(v=e[1].canonical_name+"")&&_(l,v),e[1].metadata.genres&&e[1].metadata.genres.length>0?$?$.p(e,t):($=st(e),$.c(),$.m(i,d)):$&&($.d(1),$=null),2&t){let n;for(M=W(ct(e[1])),n=0;n<M.length;n+=1){const s=Ve(e,M,n);S[n]?S[n].p(s,t):(S[n]=rt(s),S[n].c(),S[n].m(x,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}},d(e){e&&g(t),C.d(),$&&$.d(),p(S,e)}}}function tt(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function nt(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[1].metadata.image)||k(t,"src",n),k(t,"alt",s=e[1].canonical_name),k(t,"class","h-12 w-12 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){2&r&&!l(t.src,n=e[1].metadata.image)&&k(t,"src",n),2&r&&s!==(s=e[1].canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function st(e){let t,n,s=e[1].metadata.genres.join(", ")+"";return{c(){t=f("div"),n=h(s),k(t,"class","text-xs text-gray-500")},m(e,s){m(e,t,s),u(t,n)},p(e,t){2&t&&s!==(s=e[1].metadata.genres.join(", ")+"")&&_(n,s)},d(e){e&&g(t)}}}function rt(e){let t,n,s,r,o=e[17].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){2&s&&o!==(o=e[17].name+"")&&_(n,o),2&s&&r!==(r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[17].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function ot(e){let t,n;return{c(){t=f("div"),n=h(e[5]),k(t,"class","text-red-600 text-sm")},m(e,s){m(e,t,s),u(t,n)},p(e,t){32&t&&_(n,e[5])},d(e){e&&g(t)}}}function it(e){let t;return{c(){t=h("Add to DNP List")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function at(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n        Adding..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function lt(t){let n,r,o,i,a,l,c,d,p,x,h,v,C,_,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V=t[1]&&Je(t),U=t[6].searchResults.length>0&&!t[1]&&Ge(t),q=t[6].isSearching&&Xe(),J=t[1]&&et(t),G=t[5]&&ot(t);function Q(e,t){return e[4]?at:it}let Y=Q(t),W=Y(t);return{c(){n=f("form"),r=f("div"),o=f("label"),o.textContent="Artist Name",i=y(),a=f("div"),l=f("input"),c=y(),V&&V.c(),d=y(),U&&U.c(),p=y(),q&&q.c(),x=y(),J&&J.c(),h=y(),v=f("div"),C=f("label"),C.textContent="Tags (optional)",_=y(),M=f("input"),S=y(),L=f("p"),L.textContent="Use tags to organize your DNP list. Separate multiple tags with commas.",z=y(),j=f("div"),A=f("label"),A.textContent="Note (optional)",B=y(),T=f("textarea"),H=y(),G&&G.c(),P=y(),I=f("div"),E=f("button"),E.textContent="Cancel",D=y(),F=f("button"),W.c(),k(o,"for","artist-search"),k(o,"class","block text-sm font-medium text-gray-700"),k(l,"id","artist-search"),k(l,"type","text"),k(l,"placeholder","Search for an artist..."),k(l,"class","block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(a,"class","mt-1 relative"),k(r,"class","relative"),k(C,"for","tags"),k(C,"class","block text-sm font-medium text-gray-700"),k(M,"id","tags"),k(M,"type","text"),k(M,"placeholder","e.g., controversial, personal, explicit (comma-separated)"),k(M,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(L,"class","mt-1 text-xs text-gray-500"),k(A,"for","note"),k(A,"class","block text-sm font-medium text-gray-700"),k(T,"id","note"),k(T,"rows","2"),k(T,"placeholder","Add a personal note about why you're blocking this artist..."),k(T,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(E,"type","button"),k(E,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(F,"type","submit"),F.disabled=N=t[4]||!t[0].trim(),k(F,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(I,"class","flex justify-end space-x-3"),k(n,"class","space-y-4")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),u(a,l),$(l,t[0]),u(a,c),V&&V.m(a,null),u(r,d),U&&U.m(r,null),u(r,p),q&&q.m(r,null),u(n,x),J&&J.m(n,null),u(n,h),u(n,v),u(v,C),u(v,_),u(v,M),$(M,t[2]),u(v,S),u(v,L),u(n,z),u(n,j),u(j,A),u(j,B),u(j,T),$(T,t[3]),u(n,H),G&&G.m(n,null),u(n,P),u(n,I),u(I,E),u(I,D),u(I,F),W.m(F,null),O||(R=[b(l,"input",t[12]),b(M,"input",t[14]),b(T,"input",t[15]),b(E,"click",t[16]),b(n,"submit",w(t[10]))],O=!0)},p(e,[t]){1&t&&l.value!==e[0]&&$(l,e[0]),e[1]?V?V.p(e,t):(V=Je(e),V.c(),V.m(a,null)):V&&(V.d(1),V=null),e[6].searchResults.length>0&&!e[1]?U?U.p(e,t):(U=Ge(e),U.c(),U.m(r,p)):U&&(U.d(1),U=null),e[6].isSearching?q||(q=Xe(),q.c(),q.m(r,null)):q&&(q.d(1),q=null),e[1]?J?J.p(e,t):(J=et(e),J.c(),J.m(n,h)):J&&(J.d(1),J=null),4&t&&M.value!==e[2]&&$(M,e[2]),8&t&&$(T,e[3]),e[5]?G?G.p(e,t):(G=ot(e),G.c(),G.m(n,P)):G&&(G.d(1),G=null),Y!==(Y=Q(e))&&(W.d(1),W=Y(e),W&&(W.c(),W.m(F,null))),17&t&&N!==(N=e[4]||!e[0].trim())&&(F.disabled=N)},i:e,o:e,d(e){e&&g(n),V&&V.d(),U&&U.d(),q&&q.d(),J&&J.d(),G&&G.d(),W.d(),O=!1,s(R)}}}function ct(e){const t=[];return e.external_ids.spotify&&t.push({name:"Spotify",color:"bg-green-100 text-green-800"}),e.external_ids.apple&&t.push({name:"Apple",color:"bg-gray-100 text-gray-800"}),e.external_ids.musicbrainz&&t.push({name:"MusicBrainz",color:"bg-blue-100 text-blue-800"}),t}function dt(e,t,n){let s;d(e,_e,e=>n(6,s=e));const r=B();let o,i="",a=null,l="",c="",u=!1,m="";function g(e){n(1,a=e),n(0,i=e.canonical_name),Se.clearSearch()}return e.$$.update=()=>{2049&e.$$.dirty&&(o&&clearTimeout(o),n(11,o=setTimeout(()=>{i.trim()?Se.searchArtists(i):Se.clearSearch()},300)))},[i,a,l,c,u,m,s,r,g,function(){n(1,a=null),n(0,i=""),Se.clearSearch()},async function(){if(!i.trim())return void n(5,m="Please enter an artist name");n(4,u=!0),n(5,m="");const e=l.split(",").map(e=>e.trim()).filter(e=>e),t=await Se.addArtist(i,e,c.trim()||void 0);t.success?(n(0,i=""),n(1,a=null),n(2,l=""),n(3,c=""),r("artistAdded")):n(5,m=t.message||"Failed to add artist"),n(4,u=!1)},o,function(){i=this.value,n(0,i)},e=>g(e),function(){l=this.value,n(2,l)},function(){c=this.value,n(3,c)},()=>r("artistAdded")]}class ut extends re{constructor(e){super(),se(this,e,dt,lt,o,{})}}function mt(e,t,n){const s=e.slice();return s[16]=t[n],s}function gt(e,t,n){const s=e.slice();return s[19]=t[n],s}function pt(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-12 w-12 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function ft(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[0].artist.metadata.image)||k(t,"src",n),k(t,"alt",s=e[0].artist.canonical_name),k(t,"class","h-12 w-12 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){1&r&&!l(t.src,n=e[0].artist.metadata.image)&&k(t,"src",n),1&r&&s!==(s=e[0].artist.canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function xt(e){let t,n,s=e[0].artist.metadata.genres.slice(0,2).join(", ")+"";return{c(){t=f("p"),n=h(s),k(t,"class","text-xs text-gray-500 truncate")},m(e,s){m(e,t,s),u(t,n)},p(e,t){1&t&&s!==(s=e[0].artist.metadata.genres.slice(0,2).join(", ")+"")&&_(n,s)},d(e){e&&g(t)}}}function ht(e){let t,n,s,r,o=e[19].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[19].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){1&s&&o!==(o=e[19].name+"")&&_(n,o),1&s&&r!==(r="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+e[19].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function yt(e){let t,n,r,o,i,a,l=e[6]?"Removing...":"Remove";return{c(){t=f("button"),t.textContent="Edit",n=y(),r=f("button"),o=h(l),k(t,"class","text-indigo-600 hover:text-indigo-900 text-sm"),r.disabled=e[6],k(r,"class","text-red-600 hover:text-red-900 text-sm disabled:opacity-50")},m(s,l){m(s,t,l),m(s,n,l),m(s,r,l),u(r,o),i||(a=[b(t,"click",e[9]),b(r,"click",e[12])],i=!0)},p(e,t){64&t&&l!==(l=e[6]?"Removing...":"Remove")&&_(o,l),64&t&&(r.disabled=e[6])},d(e){e&&(g(t),g(n),g(r)),i=!1,s(a)}}}function vt(e){let t,n,s=e[0].tags.length>0&&bt(e),r=e[0].note&&kt(e);return{c(){t=f("div"),s&&s.c(),n=y(),r&&r.c(),k(t,"class","mt-2")},m(e,o){m(e,t,o),s&&s.m(t,null),u(t,n),r&&r.m(t,null)},p(e,o){e[0].tags.length>0?s?s.p(e,o):(s=bt(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),e[0].note?r?r.p(e,o):(r=kt(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&g(t),s&&s.d(),r&&r.d()}}}function bt(e){let t,n=W(e[0].tags),s=[];for(let t=0;t<n.length;t+=1)s[t]=wt(mt(e,n,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","flex flex-wrap gap-1 mb-2")},m(e,n){m(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,r){if(1&r){let o;for(n=W(e[0].tags),o=0;o<n.length;o+=1){const i=mt(e,n,o);s[o]?s[o].p(i,r):(s[o]=wt(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&g(t),p(s,e)}}}function wt(e){let t,n,s,r=e[16]+"";return{c(){t=f("span"),n=h(r),s=y(),k(t,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800")},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,t){1&t&&r!==(r=e[16]+"")&&_(n,r)},d(e){e&&g(t)}}}function kt(e){let t,n,s,r,o=e[0].note+"";return{c(){t=f("p"),n=h('"'),s=h(o),r=h('"'),k(t,"class","text-sm text-gray-600 italic")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(t,r)},p(e,t){1&t&&o!==(o=e[0].note+"")&&_(s,o)},d(e){e&&g(t)}}}function Ct(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,M,S,L,z,j,A,B,T,H,P,I,E=e[5]?"Saving...":"Save",D=e[7]&&_t(e);return{c(){t=f("div"),n=f("div"),r=f("label"),o=h("Tags"),a=y(),l=f("input"),d=y(),p=f("div"),x=f("label"),v=h("Note"),C=y(),M=f("textarea"),L=y(),D&&D.c(),z=y(),j=f("div"),A=f("button"),A.textContent="Cancel",B=y(),T=f("button"),H=h(E),k(r,"for",i="edit-tags-"+e[0].artist.id),k(r,"class","block text-xs font-medium text-gray-700"),k(l,"id",c="edit-tags-"+e[0].artist.id),k(l,"type","text"),k(l,"placeholder","comma-separated tags"),k(l,"class","mt-1 block w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),k(x,"for",w="edit-note-"+e[0].artist.id),k(x,"class","block text-xs font-medium text-gray-700"),k(M,"id",S="edit-note-"+e[0].artist.id),k(M,"rows","2"),k(M,"placeholder","Personal note..."),k(M,"class","mt-1 block w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"),k(A,"type","button"),k(A,"class","px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50"),k(T,"type","button"),T.disabled=e[5],k(T,"class","px-3 py-1 border border-transparent rounded-md text-xs font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50"),k(j,"class","flex justify-end space-x-2"),k(t,"class","mt-3 space-y-3")},m(s,i){m(s,t,i),u(t,n),u(n,r),u(r,o),u(n,a),u(n,l),$(l,e[3]),u(t,d),u(t,p),u(p,x),u(x,v),u(p,C),u(p,M),$(M,e[4]),u(t,L),D&&D.m(t,null),u(t,z),u(t,j),u(j,A),u(j,B),u(j,T),u(T,H),P||(I=[b(l,"input",e[13]),b(M,"input",e[14]),b(A,"click",e[10]),b(T,"click",e[11])],P=!0)},p(e,n){1&n&&i!==(i="edit-tags-"+e[0].artist.id)&&k(r,"for",i),1&n&&c!==(c="edit-tags-"+e[0].artist.id)&&k(l,"id",c),8&n&&l.value!==e[3]&&$(l,e[3]),1&n&&w!==(w="edit-note-"+e[0].artist.id)&&k(x,"for",w),1&n&&S!==(S="edit-note-"+e[0].artist.id)&&k(M,"id",S),16&n&&$(M,e[4]),e[7]?D?D.p(e,n):(D=_t(e),D.c(),D.m(t,z)):D&&(D.d(1),D=null),32&n&&E!==(E=e[5]?"Saving...":"Save")&&_(H,E),32&n&&(T.disabled=e[5])},d(e){e&&g(t),D&&D.d(),P=!1,s(I)}}}function _t(e){let t,n;return{c(){t=f("p"),n=h(e[7]),k(t,"class","text-xs text-red-600")},m(e,s){m(e,t,s),u(t,n)},p(e,t){128&t&&_(n,e[7])},d(e){e&&g(t)}}}function $t(t){let n,s,r,o,i,a,l,c,d,x,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D=t[0].artist.canonical_name+"",F=St(t[0].created_at)+"";function N(e,t){return e[0].artist.metadata.image?ft:pt}let O=N(t),R=O(t),V=t[0].artist.metadata.genres&&t[0].artist.metadata.genres.length>0&&xt(t),U=W(Mt(t[0].artist)),q=[];for(let e=0;e<U.length;e+=1)q[e]=ht(gt(t,U,e));let J=!t[2]&&yt(t),G=!t[2]&&vt(t),Q=t[2]&&Ct(t);return{c(){n=f("li"),s=f("div"),r=f("input"),o=y(),i=f("div"),R.c(),a=y(),l=f("div"),c=f("div"),d=f("div"),x=f("p"),v=h(D),w=y(),V&&V.c(),C=y(),$=f("div"),M=f("div");for(let e=0;e<q.length;e+=1)q[e].c();S=y(),L=f("span"),z=h("Added "),j=h(F),A=y(),B=f("div"),J&&J.c(),T=y(),G&&G.c(),H=y(),Q&&Q.c(),k(r,"type","checkbox"),r.checked=t[1],k(r,"class","h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"),k(i,"class","flex-shrink-0"),k(x,"class","text-sm font-medium text-gray-900 truncate"),k(M,"class","flex space-x-1"),k(L,"class","text-xs text-gray-400"),k($,"class","flex items-center space-x-2 mt-1"),k(d,"class","flex-1"),k(B,"class","flex items-center space-x-2"),k(c,"class","flex items-center justify-between"),k(l,"class","flex-1 min-w-0"),k(s,"class","flex items-center space-x-4"),k(n,"class",P="px-4 py-4 "+(t[1]?"bg-indigo-50":"hover:bg-gray-50"))},m(e,g){m(e,n,g),u(n,s),u(s,r),u(s,o),u(s,i),R.m(i,null),u(s,a),u(s,l),u(l,c),u(c,d),u(d,x),u(x,v),u(d,w),V&&V.m(d,null),u(d,C),u(d,$),u($,M);for(let e=0;e<q.length;e+=1)q[e]&&q[e].m(M,null);u($,S),u($,L),u(L,z),u(L,j),u(c,A),u(c,B),J&&J.m(B,null),u(l,T),G&&G.m(l,null),u(l,H),Q&&Q.m(l,null),I||(E=b(r,"change",t[8]),I=!0)},p(e,[t]){if(2&t&&(r.checked=e[1]),O===(O=N(e))&&R?R.p(e,t):(R.d(1),R=O(e),R&&(R.c(),R.m(i,null))),1&t&&D!==(D=e[0].artist.canonical_name+"")&&_(v,D),e[0].artist.metadata.genres&&e[0].artist.metadata.genres.length>0?V?V.p(e,t):(V=xt(e),V.c(),V.m(d,C)):V&&(V.d(1),V=null),1&t){let n;for(U=W(Mt(e[0].artist)),n=0;n<U.length;n+=1){const s=gt(e,U,n);q[n]?q[n].p(s,t):(q[n]=ht(s),q[n].c(),q[n].m(M,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=U.length}1&t&&F!==(F=St(e[0].created_at)+"")&&_(j,F),e[2]?J&&(J.d(1),J=null):J?J.p(e,t):(J=yt(e),J.c(),J.m(B,null)),e[2]?G&&(G.d(1),G=null):G?G.p(e,t):(G=vt(e),G.c(),G.m(l,H)),e[2]?Q?Q.p(e,t):(Q=Ct(e),Q.c(),Q.m(l,null)):Q&&(Q.d(1),Q=null),2&t&&P!==(P="px-4 py-4 "+(e[1]?"bg-indigo-50":"hover:bg-gray-50"))&&k(n,"class",P)},i:e,o:e,d(e){e&&g(n),R.d(),V&&V.d(),p(q,e),J&&J.d(),G&&G.d(),Q&&Q.d(),I=!1,E()}}}function Mt(e){const t=[];return e.external_ids.spotify&&t.push({name:"Spotify",color:"bg-green-100 text-green-800"}),e.external_ids.apple&&t.push({name:"Apple",color:"bg-gray-100 text-gray-800"}),e.external_ids.musicbrainz&&t.push({name:"MusicBrainz",color:"bg-blue-100 text-blue-800"}),t}function St(e){return new Date(e).toLocaleDateString()}function Lt(e,t,n){const s=B();let{entry:r}=t,{selected:o=!1}=t,i=!1,a=r.tags.join(", "),l=r.note||"",c=!1,d=!1,u="";return e.$$set=e=>{"entry"in e&&n(0,r=e.entry),"selected"in e&&n(1,o=e.selected)},[r,o,i,a,l,c,d,u,function(){s("toggleSelect")},function(){n(2,i=!0),n(3,a=r.tags.join(", ")),n(4,l=r.note||""),n(7,u="")},function(){n(2,i=!1),n(3,a=r.tags.join(", ")),n(4,l=r.note||""),n(7,u="")},async function(){n(5,c=!0),n(7,u="");const e=a.split(",").map(e=>e.trim()).filter(e=>e),t=await Se.updateEntry(r.artist.id,e,l.trim()||void 0);t.success?n(2,i=!1):n(7,u=t.message||"Failed to update entry"),n(5,c=!1)},async function(){if(!confirm(`Are you sure you want to remove "${r.artist.canonical_name}" from your DNP list?`))return;n(6,d=!0);const e=await Se.removeArtist(r.artist.id);e.success||n(7,u=e.message||"Failed to remove artist"),n(6,d=!1)},function(){a=this.value,n(3,a)},function(){l=this.value,n(4,l)}]}class zt extends re{constructor(e){super(),se(this,e,Lt,$t,o,{entry:0,selected:1})}}function jt(t){let n,r,o,i,a,l,c,d,p,v,w,C,$,M,S,L,z,j,A,B=1===t[0]?"artist":"artists";return{c(){n=f("div"),r=f("div"),o=f("div"),i=x("svg"),a=x("path"),l=y(),c=f("p"),d=f("span"),p=h(t[0]),v=y(),w=h(B),C=h(" selected"),$=y(),M=f("div"),S=f("button"),S.textContent="Clear selection",L=y(),z=f("button"),z.innerHTML='<svg class="-ml-0.5 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>\n        Remove selected',k(a,"stroke-linecap","round"),k(a,"stroke-linejoin","round"),k(a,"stroke-width","2"),k(a,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),k(i,"class","h-5 w-5 text-indigo-400"),k(i,"fill","none"),k(i,"viewBox","0 0 24 24"),k(i,"stroke","currentColor"),k(d,"class","font-medium"),k(c,"class","ml-3 text-sm text-indigo-800"),k(o,"class","flex items-center"),k(S,"class","text-sm text-indigo-600 hover:text-indigo-500"),k(z,"class","inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),k(M,"class","flex items-center space-x-3"),k(r,"class","flex items-center justify-between"),k(n,"class","bg-indigo-50 border border-indigo-200 rounded-md p-4")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(o,l),u(o,c),u(c,d),u(d,p),u(c,v),u(c,w),u(c,C),u(r,$),u(r,M),u(M,S),u(M,L),u(M,z),j||(A=[b(S,"click",t[2]),b(z,"click",t[1])],j=!0)},p(e,[t]){1&t&&_(p,e[0]),1&t&&B!==(B=1===e[0]?"artist":"artists")&&_(w,B)},i:e,o:e,d(e){e&&g(n),j=!1,s(A)}}}function At(e,t,n){const s=B();let{selectedCount:r=0}=t;return e.$$set=e=>{"selectedCount"in e&&n(0,r=e.selectedCount)},[r,function(){s("bulkDelete")},function(){s("clearSelection")}]}class Bt extends re{constructor(e){super(),se(this,e,At,jt,o,{selectedCount:0})}}function Tt(e,t,n){const s=e.slice();return s[19]=t[n],s}function Ht(e,t,n){const s=e.slice();return s[22]=t[n],s}function Pt(t){let n,s,r,o,i;return o=new ut({}),o.$on("artistAdded",t[11]),{c(){n=f("div"),s=f("h3"),s.textContent="Add Artist to DNP List",r=y(),X(o.$$.fragment),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(n,"class","mb-6 bg-white shadow rounded-lg p-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),ee(o,n,null),i=!0},p:e,i(e){i||(Q(o.$$.fragment,e),i=!0)},o(e){Y(o.$$.fragment,e),i=!1},d(e){e&&g(n),te(o)}}}function It(e){let t,n,s,r=e[22]+"";return{c(){t=f("option"),n=h(r),t.__value=s=e[22],$(t,t.__value)},m(e,s){m(e,t,s),u(t,n)},p(e,o){64&o&&r!==(r=e[22]+"")&&_(n,r),64&o&&s!==(s=e[22])&&(t.__value=s,$(t,t.__value))},d(e){e&&g(t)}}}function Et(e){let t,n,s;return n=new Bt({props:{selectedCount:e[4].size}}),n.$on("bulkDelete",e[10]),n.$on("clearSelection",e[9]),{c(){t=f("div"),X(n.$$.fragment),k(t,"class","mb-4")},m(e,r){m(e,t,r),ee(n,t,null),s=!0},p(e,t){const s={};16&t&&(s.selectedCount=e[4].size),n.$set(s)},i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){e&&g(t),te(n)}}}function Dt(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,w,C,$,M,S=e[5].length+"",L=1!==e[5].length?"s":"",z=[],j=new Map,A=e[4].size>0&&Rt(e),B=(e[0]||e[1])&&Vt(e),T=W(e[5]);const H=e=>e[19].artist.id;for(let t=0;t<T.length;t+=1){let n=Tt(e,T,t),s=H(n);j.set(s,z[t]=Ut(s,n))}return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("input"),i=y(),a=f("label"),l=h(S),c=h(" artist"),d=h(L),p=y(),A&&A.c(),x=y(),B&&B.c(),v=y(),w=f("ul");for(let e=0;e<z.length;e+=1)z[e].c();k(r,"id","select-all"),k(r,"type","checkbox"),r.checked=o=e[4].size===e[5].length&&e[5].length>0,k(r,"class","h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"),k(a,"for","select-all"),k(a,"class","ml-3 text-sm text-gray-900"),k(s,"class","flex items-center"),k(n,"class","flex items-center justify-between"),k(t,"class","px-4 py-3 bg-gray-50 border-b border-gray-200 sm:px-6"),k(w,"class","divide-y divide-gray-200")},m(o,g){m(o,t,g),u(t,n),u(n,s),u(s,r),u(s,i),u(s,a),u(a,l),u(a,c),u(a,d),u(a,p),A&&A.m(a,null),u(n,x),B&&B.m(n,null),m(o,v,g),m(o,w,g);for(let e=0;e<z.length;e+=1)z[e]&&z[e].m(w,null);C=!0,$||(M=b(r,"change",e[7]),$=!0)},p(e,t){(!C||48&t&&o!==(o=e[4].size===e[5].length&&e[5].length>0))&&(r.checked=o),(!C||32&t)&&S!==(S=e[5].length+"")&&_(l,S),(!C||32&t)&&L!==(L=1!==e[5].length?"s":"")&&_(d,L),e[4].size>0?A?A.p(e,t):(A=Rt(e),A.c(),A.m(a,null)):A&&(A.d(1),A=null),e[0]||e[1]?B?B.p(e,t):(B=Vt(e),B.c(),B.m(n,null)):B&&(B.d(1),B=null),304&t&&(T=W(e[5]),J(),z=K(z,t,H,0,e,T,j,w,Z,Ut,null,Tt),G())},i(e){if(!C){for(let e=0;e<T.length;e+=1)Q(z[e]);C=!0}},o(e){for(let e=0;e<z.length;e+=1)Y(z[e]);C=!1},d(e){e&&(g(t),g(v),g(w)),A&&A.d(),B&&B.d();for(let e=0;e<z.length;e+=1)z[e].d();$=!1,M()}}}function Ft(t){let n;function s(e,t){return 0===e[2].entries.length?Jt:qt}let r=s(t),o=r(t);return{c(){n=f("div"),o.c(),k(n,"class","p-6 text-center")},m(e,t){m(e,n,t),o.m(n,null)},p(e,t){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n,null)))},i:e,o:e,d(e){e&&g(n),o.d()}}}function Nt(t){let n,s,r,o,i,a,l,c,d,p,v=t[2].error+"";return{c(){n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("p"),a=h(v),l=y(),c=f("button"),c.textContent="Try again",k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(s,"class","mx-auto h-8 w-8 text-red-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(i,"class","mt-2 text-sm text-red-600"),k(c,"class","mt-2 text-sm text-indigo-600 hover:text-indigo-500"),k(n,"class","p-6 text-center")},m(e,g){m(e,n,g),u(n,s),u(s,r),u(n,o),u(n,i),u(i,a),u(n,l),u(n,c),d||(p=b(c,"click",t[15]),d=!0)},p(e,t){4&t&&v!==(v=e[2].error+"")&&_(a,v)},i:e,o:e,d(e){e&&g(n),d=!1,p()}}}function Ot(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="animate-spin mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-sm text-gray-500">Loading DNP list...</p>',k(n,"class","p-6 text-center")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}function Rt(e){let t,n,s,r=e[4].size+"";return{c(){t=h("("),n=h(r),s=h(" selected)")},m(e,r){m(e,t,r),m(e,n,r),m(e,s,r)},p(e,t){16&t&&r!==(r=e[4].size+"")&&_(n,r)},d(e){e&&(g(t),g(n),g(s))}}}function Vt(t){let n,s,r;return{c(){n=f("button"),n.textContent="Clear filters",k(n,"class","text-sm text-indigo-600 hover:text-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[17]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function Ut(e,t){let n,s,r;return s=new zt({props:{entry:t[19],selected:t[4].has(t[19].artist.id)}}),s.$on("toggleSelect",function(){return t[18](t[19])}),{key:e,first:null,c(){n=v(),X(s.$$.fragment),this.first=n},m(e,t){m(e,n,t),ee(s,e,t),r=!0},p(e,n){t=e;const r={};32&n&&(r.entry=t[19]),48&n&&(r.selected=t[4].has(t[19].artist.id)),s.$set(r)},i(e){r||(Q(s.$$.fragment,e),r=!0)},o(e){Y(s.$$.fragment,e),r=!1},d(e){e&&g(n),te(s,e)}}}function qt(t){let n,s,r,o,i,a;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No artists match your search",i=y(),a=f("p"),a.textContent="Try adjusting your search terms or filters.",k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500")},m(e,t){m(e,n,t),u(n,s),m(e,r,t),m(e,o,t),m(e,i,t),m(e,a,t)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a))}}}function Jt(t){let n,s,r,o,i,a,l,c,d,p,h;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No artists in your DNP list",i=y(),a=f("p"),a.textContent="Get started by adding artists you want to avoid.",l=y(),c=f("div"),d=f("button"),d.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n              Add your first artist',k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500"),k(d,"class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(c,"class","mt-6")},m(e,g){m(e,n,g),u(n,s),m(e,r,g),m(e,o,g),m(e,i,g),m(e,a,g),m(e,l,g),m(e,c,g),u(c,d),p||(h=b(d,"click",t[16]),p=!0)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a),g(l),g(c)),p=!1,h()}}}function Gt(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,$,M,S,L=e[2].entries.length+"",z=e[6].length+"",j=e[2].entries.filter(Yt).length+"";return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("div"),o=h(L),i=y(),a=f("div"),a.textContent="Total Artists",l=y(),c=f("div"),d=f("div"),p=h(z),x=y(),v=f("div"),v.textContent="Unique Tags",b=y(),w=f("div"),C=f("div"),$=h(j),M=y(),S=f("div"),S.textContent="With Notes",k(r,"class","text-2xl font-bold text-gray-900"),k(a,"class","text-sm text-gray-500"),k(s,"class","text-center"),k(d,"class","text-2xl font-bold text-gray-900"),k(v,"class","text-sm text-gray-500"),k(c,"class","text-center"),k(C,"class","text-2xl font-bold text-gray-900"),k(S,"class","text-sm text-gray-500"),k(w,"class","text-center"),k(n,"class","grid grid-cols-1 gap-4 sm:grid-cols-3"),k(t,"class","mt-6 bg-gray-50 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(r,o),u(s,i),u(s,a),u(n,l),u(n,c),u(c,d),u(d,p),u(c,x),u(c,v),u(n,b),u(n,w),u(w,C),u(C,$),u(w,M),u(w,S)},p(e,t){4&t&&L!==(L=e[2].entries.length+"")&&_(o,L),64&t&&z!==(z=e[6].length+"")&&_(p,z),4&t&&j!==(j=e[2].entries.filter(Yt).length+"")&&_($,j)},d(e){e&&g(t)}}}function Qt(e){let t,n,r,o,i,a,l,c,d,x,h,v,w,C,_,M,L,z,j,A,B,T,H,P,I,E,D,N,O,R,V,U,q=e[3]&&Pt(e),Z=W(e[6]),K=[];for(let t=0;t<Z.length;t+=1)K[t]=It(Ht(e,Z,t));let X=e[4].size>0&&Et(e);const ee=[Ot,Nt,Ft,Dt],te=[];function ne(e,t){return e[2].isLoading?0:e[2].error?1:0===e[5].length?2:3}D=ne(e),N=te[D]=ee[D](e);let se=e[2].entries.length>0&&Gt(e);return{c(){t=f("div"),n=f("div"),r=f("div"),o=f("div"),o.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Do-Not-Play List</h2> <p class="mt-1 text-sm text-gray-600">Manage artists you want to avoid across your streaming services.</p>',i=y(),a=f("button"),a.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n        Add Artist',l=y(),q&&q.c(),c=y(),d=f("div"),x=f("div"),h=f("div"),v=f("label"),v.textContent="Search artists",w=y(),C=f("div"),_=f("div"),_.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',M=y(),L=f("input"),z=y(),j=f("div"),A=f("label"),A.textContent="Filter by tag",B=y(),T=f("select"),H=f("option"),H.textContent="All tags";for(let e=0;e<K.length;e+=1)K[e].c();P=y(),X&&X.c(),I=y(),E=f("div"),N.c(),O=y(),se&&se.c(),k(a,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(r,"class","flex justify-between items-center"),k(n,"class","mb-6"),k(v,"for","search"),k(v,"class","sr-only"),k(_,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),k(L,"id","search"),k(L,"type","text"),k(L,"placeholder","Search artists, tags, or notes..."),k(L,"class","block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(C,"class","relative"),k(h,"class","flex-1"),k(A,"for","tag-filter"),k(A,"class","sr-only"),H.__value="",$(H,H.__value),k(T,"id","tag-filter"),k(T,"class","block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"),void 0===e[1]&&F(()=>e[14].call(T)),k(j,"class","sm:w-48"),k(x,"class","flex flex-col sm:flex-row gap-4"),k(d,"class","mb-6 bg-white shadow rounded-lg p-4"),k(E,"class","bg-white shadow overflow-hidden sm:rounded-md"),k(t,"class","px-4 py-6 sm:px-0")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(r,i),u(r,a),u(t,l),q&&q.m(t,null),u(t,c),u(t,d),u(d,x),u(x,h),u(h,v),u(h,w),u(h,C),u(C,_),u(C,M),u(C,L),$(L,e[0]),u(x,z),u(x,j),u(j,A),u(j,B),u(j,T),u(T,H);for(let e=0;e<K.length;e+=1)K[e]&&K[e].m(T,null);S(T,e[1],!0),u(t,P),X&&X.m(t,null),u(t,I),u(t,E),te[D].m(E,null),u(t,O),se&&se.m(t,null),R=!0,V||(U=[b(a,"click",e[12]),b(L,"input",e[13]),b(T,"change",e[14])],V=!0)},p(e,[n]){if(e[3]?q?(q.p(e,n),8&n&&Q(q,1)):(q=Pt(e),q.c(),Q(q,1),q.m(t,c)):q&&(J(),Y(q,1,1,()=>{q=null}),G()),1&n&&L.value!==e[0]&&$(L,e[0]),64&n){let t;for(Z=W(e[6]),t=0;t<Z.length;t+=1){const s=Ht(e,Z,t);K[t]?K[t].p(s,n):(K[t]=It(s),K[t].c(),K[t].m(T,null))}for(;t<K.length;t+=1)K[t].d(1);K.length=Z.length}66&n&&S(T,e[1]),e[4].size>0?X?(X.p(e,n),16&n&&Q(X,1)):(X=Et(e),X.c(),Q(X,1),X.m(t,I)):X&&(J(),Y(X,1,1,()=>{X=null}),G());let s=D;D=ne(e),D===s?te[D].p(e,n):(J(),Y(te[s],1,1,()=>{te[s]=null}),G(),N=te[D],N?N.p(e,n):(N=te[D]=ee[D](e),N.c()),Q(N,1),N.m(E,null)),e[2].entries.length>0?se?se.p(e,n):(se=Gt(e),se.c(),se.m(t,null)):se&&(se.d(1),se=null)},i(e){R||(Q(q),Q(X),Q(N),R=!0)},o(e){Y(q),Y(X),Y(N),R=!1},d(e){e&&g(t),q&&q.d(),p(K,e),X&&X.d(),te[D].d(),se&&se.d(),V=!1,s(U)}}}const Yt=e=>e.note;function Wt(e,t,n){let s,r,o;d(e,_e,e=>n(2,r=e)),d(e,Me,e=>n(6,o=e));let i="",a="",l=!1,c=new Set;function u(e){c.has(e)?c.delete(e):c.add(e),n(4,c)}function m(){c.clear(),n(4,c)}return e.$$.update=()=>{7&e.$$.dirty&&n(5,s=r.entries.filter(e=>{const t=!i||e.artist.canonical_name.toLowerCase().includes(i.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(i.toLowerCase()))||e.note&&e.note.toLowerCase().includes(i.toLowerCase()),n=!a||e.tags.includes(a);return t&&n}))},[i,a,r,l,c,s,o,function(){c.size===s.length?c.clear():n(4,c=new Set(s.map(e=>e.artist.id))),n(4,c)},u,m,async function(){if(0!==c.size&&confirm(`Are you sure you want to remove ${c.size} artist(s) from your DNP list?`)){const e=Array.from(c).map(e=>Se.removeArtist(e));await Promise.all(e),m()}},function(){n(3,l=!1)},()=>n(3,l=!l),function(){i=this.value,n(0,i)},function(){a=L(this),n(1,a)},()=>Se.fetchDnpList(),()=>n(3,l=!0),()=>{n(0,i=""),n(1,a="")},e=>u(e.artist.id)]}class Zt extends re{constructor(e){super(),se(this,e,Wt,Qt,o,{})}}const Kt={aggressiveness:"moderate",blockCollabs:!0,blockFeaturing:!0,blockSongwriterOnly:!1},Xt=ie({currentPlan:null,isPlanning:!1,isExecuting:!1,currentBatch:null,actionHistory:[],options:Kt,error:null}),en=ae(Xt,e=>null!==e.currentPlan),tn=ae(Xt,e=>{if(!e.currentBatch)return null;const{totalItems:t,completedItems:n,failedItems:s,skippedItems:r}=e.currentBatch.summary,o=n+s+r;return{total:t,processed:o,completed:n,failed:s,skipped:r,percentage:t>0?Math.round(o/t*100):0}}),nn=ae(Xt,e=>e.actionHistory.some(e=>"completed"===e.status&&e.items.some(e=>"completed"===e.status))),sn={updateOptions:e=>{Xt.update(t=>({...t,options:{...t.options,...e}}))},createPlan:async(e,t=!0)=>{let n=Kt;Xt.update(e=>(n=e.options,{...e,isPlanning:!0,error:null}));try{const s=localStorage.getItem("auth_token"),r=await fetch("http://localhost:3000/api/v1/spotify/library/plan",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({providers:e,options:n,dryRun:t})}),o=await r.json();return o.success?(Xt.update(e=>({...e,currentPlan:o.data,isPlanning:!1})),{success:!0,data:o.data}):(Xt.update(e=>({...e,error:o.message,isPlanning:!1})),{success:!1,message:o.message})}catch(e){return Xt.update(e=>({...e,error:"Failed to create enforcement plan",isPlanning:!1})),{success:!1,message:"Failed to create enforcement plan"}}},executePlan:async e=>{Xt.update(e=>({...e,isExecuting:!0,error:null}));try{const t=localStorage.getItem("auth_token"),n=await fetch("http://localhost:3000/api/v1/spotify/enforcement/execute",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({planId:e,dryRun:!1})}),s=await n.json();if(s.success){const e=s.data;return Xt.update(t=>({...t,currentBatch:e,isExecuting:!1})),sn.pollProgress(e.id),{success:!0,data:e}}return Xt.update(e=>({...e,error:s.message,isExecuting:!1})),{success:!1,message:s.message}}catch(e){return Xt.update(e=>({...e,error:"Failed to execute enforcement plan",isExecuting:!1})),{success:!1,message:"Failed to execute enforcement plan"}}},pollProgress:async e=>{const t=setInterval(async()=>{try{const n=localStorage.getItem("auth_token"),s=await fetch(`http://localhost:3000/api/v1/spotify/enforcement/progress/${e}`,{headers:{Authorization:`Bearer ${n}`}}),r=await s.json();if(r.success){const e=r.data;Xt.update(t=>({...t,currentBatch:e})),"completed"!==e.status&&"failed"!==e.status&&"cancelled"!==e.status||(clearInterval(t),Xt.update(t=>({...t,actionHistory:[e,...t.actionHistory],currentBatch:null,currentPlan:null})))}}catch(e){console.error("Failed to poll progress:",e)}},2e3)},rollbackBatch:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch("http://localhost:3000/api/v1/spotify/enforcement/rollback",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({batchId:e})}),s=await n.json();return s.success?(await sn.fetchActionHistory(),{success:!0}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to rollback actions"}}},fetchActionHistory:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/spotify/enforcement/history",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&Xt.update(e=>({...e,actionHistory:n.data}))}catch(e){console.error("Failed to fetch action history:",e)}},clearPlan:()=>{Xt.update(e=>({...e,currentPlan:null,error:null}))},clearError:()=>{Xt.update(e=>({...e,error:null}))}};function rn(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-yellow-800">Aggressive Settings Warning</h3> <div class="mt-2 text-sm text-yellow-700"><p>These settings may remove a significant amount of content from your library. \n              We recommend reviewing the enforcement preview carefully before executing.</p></div></div></div>',k(t,"class","bg-yellow-50 border border-yellow-200 rounded-md p-4")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function on(t){let n,r,o,i,a,l,c,d,p,x,h,v,w,C,_,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve=("aggressive"===t[0].aggressiveness||t[0].blockSongwriterOnly)&&rn();return{c(){n=f("div"),r=f("div"),o=f("h4"),o.textContent="Enforcement Aggressiveness",i=y(),a=f("p"),a.textContent="Choose how thoroughly to apply your blocklist across your music library.",l=y(),c=f("fieldset"),d=f("legend"),d.textContent="Aggressiveness level",p=y(),x=f("div"),h=f("div"),v=f("input"),C=y(),_=f("label"),_.textContent="Conservative",$=y(),M=f("div"),M.textContent="Only remove explicitly saved/liked content. Preserves playlists and recommendations.",S=y(),L=f("div"),z=f("input"),A=y(),B=f("label"),B.textContent="Moderate (Recommended)",T=y(),H=f("div"),H.textContent="Remove from saved content and playlists. Filters recommendations where possible.",P=y(),I=f("div"),E=f("input"),F=y(),N=f("label"),N.textContent="Aggressive",O=y(),R=f("div"),R.textContent="Maximum removal including radio seeds, recommendations, and related content.",V=y(),U=f("div"),q=f("h4"),q.textContent="Collaboration Handling",J=y(),G=f("p"),G.textContent="Configure how to handle songs where blocked artists appear as collaborators or featured artists.",Q=y(),Y=f("div"),W=f("div"),Z=f("div"),K=f("input"),ee=y(),te=f("div"),te.innerHTML='<label for="block-collabs" class="font-medium text-gray-700">Block collaborations</label> <p class="text-gray-500">Remove songs where blocked artists are listed as collaborators or co-writers.</p>',ne=y(),se=f("div"),re=f("div"),oe=f("input"),ae=y(),le=f("div"),le.innerHTML='<label for="block-featuring" class="font-medium text-gray-700">Block featuring</label> <p class="text-gray-500">Remove songs where blocked artists are featured (e.g., &quot;Song Title (feat. Blocked Artist)&quot;).</p>',ce=y(),de=f("div"),ue=f("div"),me=f("input"),pe=y(),fe=f("div"),fe.innerHTML='<label for="block-songwriter-only" class="font-medium text-gray-700">Block songwriter credits only</label> <p class="text-gray-500">Remove songs where blocked artists are credited only as songwriters (most restrictive).</p>',xe=y(),ve&&ve.c(),k(o,"class","text-base font-medium text-gray-900"),k(a,"class","text-sm leading-5 text-gray-500"),k(d,"class","sr-only"),k(v,"id","conservative"),k(v,"name","aggressiveness"),k(v,"type","radio"),v.checked=w="conservative"===t[0].aggressiveness,k(v,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(_,"for","conservative"),k(_,"class","ml-3 block text-sm font-medium text-gray-700"),k(h,"class","flex items-center"),k(M,"class","ml-7 text-sm text-gray-500"),k(z,"id","moderate"),k(z,"name","aggressiveness"),k(z,"type","radio"),z.checked=j="moderate"===t[0].aggressiveness,k(z,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(B,"for","moderate"),k(B,"class","ml-3 block text-sm font-medium text-gray-700"),k(L,"class","flex items-center"),k(H,"class","ml-7 text-sm text-gray-500"),k(E,"id","aggressive"),k(E,"name","aggressiveness"),k(E,"type","radio"),E.checked=D="aggressive"===t[0].aggressiveness,k(E,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(N,"for","aggressive"),k(N,"class","ml-3 block text-sm font-medium text-gray-700"),k(I,"class","flex items-center"),k(R,"class","ml-7 text-sm text-gray-500"),k(x,"class","space-y-4"),k(c,"class","mt-4"),k(q,"class","text-base font-medium text-gray-900"),k(G,"class","text-sm leading-5 text-gray-500"),k(K,"id","block-collabs"),k(K,"type","checkbox"),K.checked=X=t[0].blockCollabs,k(K,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(Z,"class","flex items-center h-5"),k(te,"class","ml-3 text-sm"),k(W,"class","flex items-start"),k(oe,"id","block-featuring"),k(oe,"type","checkbox"),oe.checked=ie=t[0].blockFeaturing,k(oe,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(re,"class","flex items-center h-5"),k(le,"class","ml-3 text-sm"),k(se,"class","flex items-start"),k(me,"id","block-songwriter-only"),k(me,"type","checkbox"),me.checked=ge=t[0].blockSongwriterOnly,k(me,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(ue,"class","flex items-center h-5"),k(fe,"class","ml-3 text-sm"),k(de,"class","flex items-start"),k(Y,"class","mt-4 space-y-4"),k(n,"class","space-y-6")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),u(r,l),u(r,c),u(c,d),u(c,p),u(c,x),u(x,h),u(h,v),u(h,C),u(h,_),u(x,$),u(x,M),u(x,S),u(x,L),u(L,z),u(L,A),u(L,B),u(x,T),u(x,H),u(x,P),u(x,I),u(I,E),u(I,F),u(I,N),u(x,O),u(x,R),u(n,V),u(n,U),u(U,q),u(U,J),u(U,G),u(U,Q),u(U,Y),u(Y,W),u(W,Z),u(Z,K),u(W,ee),u(W,te),u(Y,ne),u(Y,se),u(se,re),u(re,oe),u(se,ae),u(se,le),u(Y,ce),u(Y,de),u(de,ue),u(ue,me),u(de,pe),u(de,fe),u(n,xe),ve&&ve.m(n,null),he||(ye=[b(v,"change",t[4]),b(z,"change",t[5]),b(E,"change",t[6]),b(K,"change",t[7]),b(oe,"change",t[8]),b(me,"change",t[9])],he=!0)},p(e,[t]){1&t&&w!==(w="conservative"===e[0].aggressiveness)&&(v.checked=w),1&t&&j!==(j="moderate"===e[0].aggressiveness)&&(z.checked=j),1&t&&D!==(D="aggressive"===e[0].aggressiveness)&&(E.checked=D),1&t&&X!==(X=e[0].blockCollabs)&&(K.checked=X),1&t&&ie!==(ie=e[0].blockFeaturing)&&(oe.checked=ie),1&t&&ge!==(ge=e[0].blockSongwriterOnly)&&(me.checked=ge),"aggressive"===e[0].aggressiveness||e[0].blockSongwriterOnly?ve||(ve=rn(),ve.c(),ve.m(n,null)):ve&&(ve.d(1),ve=null)},i:e,o:e,d(e){e&&g(n),ve&&ve.d(),he=!1,s(ye)}}}function an(e,t,n){let s,r;function o(e){sn.updateOptions({aggressiveness:e})}function i(e){sn.updateOptions({[e]:!s[e]})}d(e,Xt,e=>n(3,r=e));return e.$$.update=()=>{8&e.$$.dirty&&n(0,s=r.options)},[s,o,i,r,()=>o("conservative"),()=>o("moderate"),()=>o("aggressive"),()=>i("blockCollabs"),()=>i("blockFeaturing"),()=>i("blockSongwriterOnly")]}class ln extends re{constructor(e){super(),se(this,e,an,on,o,{})}}function cn(e,t,n){const s=e.slice();return s[2]=t[n][0],s[3]=t[n][1],s}function dn(e,t,n){const s=e.slice();return s[6]=t[n][0],s[7]=t[n][1],s}function un(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No enforcement plan</h3> <p class="mt-1 text-sm text-gray-500">Create a plan to see the preview.</p>',k(n,"class","text-center py-6")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function mn(e){let t,n,s,r,o,i,a,l,c,d,x,v,b,w,C,$,M,S,L,z,j=_n(e[0].estimatedDuration)+"",A=e[0].planId.slice(0,8)+"",B=e[0].resumable&&gn(),T=W(Object.entries(e[0].impact)),H=[];for(let t=0;t<T.length;t+=1)H[t]=kn(cn(e,T,t));return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("div"),o=f("h4"),o.textContent="Plan Summary",i=y(),a=f("p"),l=h("Estimated duration: "),c=h(j),d=y(),B&&B.c(),x=y(),v=f("div"),b=f("div"),b.textContent="Plan ID",w=y(),C=f("div"),$=h(A),M=h("..."),S=y();for(let e=0;e<H.length;e+=1)H[e].c();L=y(),z=f("div"),z.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Before You Execute</h3> <div class="mt-2 text-sm text-blue-700"><ul class="list-disc list-inside space-y-1"><li>This is a preview - no changes have been made yet</li> <li>Execution will modify your actual music library</li> <li>Some actions may not be reversible depending on platform limitations</li> <li>The process can be interrupted and resumed if needed</li></ul></div></div></div>',k(o,"class","text-sm font-medium text-gray-900"),k(a,"class","text-sm text-gray-500"),k(b,"class","text-sm font-medium text-gray-900"),k(C,"class","text-xs text-gray-500 font-mono"),k(v,"class","text-right"),k(s,"class","flex items-center justify-between"),k(n,"class","bg-gray-50 rounded-lg p-4"),k(z,"class","bg-blue-50 border border-blue-200 rounded-md p-4"),k(t,"class","space-y-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(r,o),u(r,i),u(r,a),u(a,l),u(a,c),u(a,d),B&&B.m(a,null),u(s,x),u(s,v),u(v,b),u(v,w),u(v,C),u(C,$),u(C,M),u(t,S);for(let e=0;e<H.length;e+=1)H[e]&&H[e].m(t,null);u(t,L),u(t,z)},p(e,n){if(1&n&&j!==(j=_n(e[0].estimatedDuration)+"")&&_(c,j),e[0].resumable?B||(B=gn(),B.c(),B.m(a,null)):B&&(B.d(1),B=null),1&n&&A!==(A=e[0].planId.slice(0,8)+"")&&_($,A),1&n){let s;for(T=W(Object.entries(e[0].impact)),s=0;s<T.length;s+=1){const r=cn(e,T,s);H[s]?H[s].p(r,n):(H[s]=kn(r),H[s].c(),H[s].m(t,L))}for(;s<H.length;s+=1)H[s].d(1);H.length=T.length}},d(e){e&&g(t),B&&B.d(),p(H,e)}}}function gn(e){let t;return{c(){t=h("• Resumable if interrupted")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function pn(e){let t,n,s,r,o,i,a,l,c,d,p=e[3].likedSongs.toRemove+"",x=e[3].likedSongs.collabsFound>0&&fn(e);return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Liked Songs",a=y(),l=f("p"),c=h(p),d=h(" to remove\n                    "),x&&x.c(),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),x&&x.m(l,null)},p(e,t){1&t&&p!==(p=e[3].likedSongs.toRemove+"")&&_(c,p),e[3].likedSongs.collabsFound>0?x?x.p(e,t):(x=fn(e),x.c(),x.m(l,null)):x&&(x.d(1),x=null)},d(e){e&&g(t),x&&x.d()}}}function fn(e){let t,n,s,r,o,i=e[3].likedSongs.collabsFound+"";return{c(){t=f("br"),n=f("span"),s=h("("),r=h(i),o=h(" collaborations)"),k(n,"class","text-xs")},m(e,i){m(e,t,i),m(e,n,i),u(n,s),u(n,r),u(n,o)},p(e,t){1&t&&i!==(i=e[3].likedSongs.collabsFound+"")&&_(r,i)},d(e){e&&(g(t),g(n))}}}function xn(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C=e[3].playlists.toScrub+"",$=e[3].playlists.tracksToRemove+"",M=e[3].playlists.featuringFound>0&&hn(e);return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Playlists",a=y(),l=f("p"),c=h(C),d=h(" playlists affected\n                    "),p=f("br"),x=f("span"),v=h($),b=h(" tracks to remove"),w=y(),M&&M.c(),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(x,"class","text-xs"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),u(l,p),u(l,x),u(x,v),u(x,b),u(l,w),M&&M.m(l,null)},p(e,t){1&t&&C!==(C=e[3].playlists.toScrub+"")&&_(c,C),1&t&&$!==($=e[3].playlists.tracksToRemove+"")&&_(v,$),e[3].playlists.featuringFound>0?M?M.p(e,t):(M=hn(e),M.c(),M.m(l,null)):M&&(M.d(1),M=null)},d(e){e&&g(t),M&&M.d()}}}function hn(e){let t,n,s,r,o,i=e[3].playlists.featuringFound+"";return{c(){t=f("br"),n=f("span"),s=h("("),r=h(i),o=h(" featuring)"),k(n,"class","text-xs")},m(e,i){m(e,t,i),m(e,n,i),u(n,s),u(n,r),u(n,o)},p(e,t){1&t&&i!==(i=e[3].playlists.featuringFound+"")&&_(r,i)},d(e){e&&(g(t),g(n))}}}function yn(e){let t,n,s,r,o,i,a,l,c,d,p=e[3].following.toUnfollow+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Following",a=y(),l=f("p"),c=h(p),d=h(" to unfollow"),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d)},p(e,t){1&t&&p!==(p=e[3].following.toUnfollow+"")&&_(c,p)},d(e){e&&g(t)}}}function vn(e){let t,n,s,r,o,i,a,l,c,d,p=e[3].radioSeeds.toFilter+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-6 w-6 text-orange-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2M7 4h10"></path></svg>',r=y(),o=f("div"),i=f("p"),i.textContent="Radio Seeds",a=y(),l=f("p"),c=h(p),d=h(" to filter"),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-gray-900"),k(l,"class","text-sm text-gray-500"),k(o,"class","ml-3"),k(n,"class","flex items-center"),k(t,"class","bg-white border border-gray-200 rounded-lg p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d)},p(e,t){1&t&&p!==(p=e[3].radioSeeds.toFilter+"")&&_(c,p)},d(e){e&&g(t)}}}function bn(e){let t,n,s,r,o=W(Object.entries(e[0].capabilities[e[2]])),i=[];for(let t=0;t<o.length;t+=1)i[t]=wn(dn(e,o,t));return{c(){t=f("div"),n=f("h5"),n.textContent="Platform Capabilities",s=y(),r=f("div");for(let e=0;e<i.length;e+=1)i[e].c();k(n,"class","text-sm font-medium text-gray-900 mb-2"),k(r,"class","flex flex-wrap gap-2"),k(t,"class","mt-4 pt-4 border-t border-gray-200")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(r,null)},p(e,t){if(1&t){let n;for(o=W(Object.entries(e[0].capabilities[e[2]])),n=0;n<o.length;n+=1){const s=dn(e,o,n);i[n]?i[n].p(s,t):(i[n]=wn(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&g(t),p(i,e)}}}function wn(e){let t,n,s,r,o=e[6].replace(/_/g," ").toLowerCase()+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Mn(e[7]))},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){1&s&&o!==(o=e[6].replace(/_/g," ").toLowerCase()+"")&&_(n,o),1&s&&r!==(r="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Mn(e[7]))&&k(t,"class",r)},d(e){e&&g(t)}}}function kn(e){let t,n,s,r,o,i,a,l,c,d,p,v,b,w,C,$,M,S,L,z,j,A,B=e[2]+"",T=e[2]+"",H=e[3].likedSongs&&pn(e),P=e[3].playlists&&xn(e),I=e[3].following&&yn(e),E=e[3].radioSeeds&&vn(e),D=e[0].capabilities[e[2]]&&bn(e);return{c(){t=f("div"),n=f("div"),s=f("div"),r=x("svg"),o=x("path"),a=y(),l=f("div"),c=f("h4"),d=h(B),p=y(),v=f("p"),b=h("Impact preview for your "),w=h(T),C=h(" library"),$=y(),M=f("div"),H&&H.c(),S=y(),P&&P.c(),L=y(),I&&I.c(),z=y(),E&&E.c(),j=y(),D&&D.c(),A=y(),k(o,"d",i=$n(e[2])),k(r,"class","h-8 w-8 text-green-500"),k(r,"fill","currentColor"),k(r,"viewBox","0 0 24 24"),k(s,"class","flex-shrink-0"),k(c,"class","text-lg font-medium text-gray-900 capitalize"),k(v,"class","text-sm text-gray-500"),k(l,"class","ml-3"),k(n,"class","flex items-center mb-4"),k(M,"class","grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"),k(t,"class","border border-gray-200 rounded-lg p-6")},m(e,i){m(e,t,i),u(t,n),u(n,s),u(s,r),u(r,o),u(n,a),u(n,l),u(l,c),u(c,d),u(l,p),u(l,v),u(v,b),u(v,w),u(v,C),u(t,$),u(t,M),H&&H.m(M,null),u(M,S),P&&P.m(M,null),u(M,L),I&&I.m(M,null),u(M,z),E&&E.m(M,null),u(t,j),D&&D.m(t,null),u(t,A)},p(e,n){1&n&&i!==(i=$n(e[2]))&&k(o,"d",i),1&n&&B!==(B=e[2]+"")&&_(d,B),1&n&&T!==(T=e[2]+"")&&_(w,T),e[3].likedSongs?H?H.p(e,n):(H=pn(e),H.c(),H.m(M,S)):H&&(H.d(1),H=null),e[3].playlists?P?P.p(e,n):(P=xn(e),P.c(),P.m(M,L)):P&&(P.d(1),P=null),e[3].following?I?I.p(e,n):(I=yn(e),I.c(),I.m(M,z)):I&&(I.d(1),I=null),e[3].radioSeeds?E?E.p(e,n):(E=vn(e),E.c(),E.m(M,null)):E&&(E.d(1),E=null),e[0].capabilities[e[2]]?D?D.p(e,n):(D=bn(e),D.c(),D.m(t,A)):D&&(D.d(1),D=null)},d(e){e&&g(t),H&&H.d(),P&&P.d(),I&&I.d(),E&&E.d(),D&&D.d()}}}function Cn(t){let n;function s(e,t){return e[0]?mn:un}let r=s(t),o=r(t);return{c(){o.c(),n=v()},m(e,t){o.m(e,t),m(e,n,t)},p(e,[t]){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){e&&g(n),o.d(e)}}}function _n(e){const t=parseInt(e.replace("s",""));if(t<60)return`${t} seconds`;return`${Math.floor(t/60)}m ${t%60}s`}function $n(e){return"spotify"===e?"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"}function Mn(e){switch(e){case"SUPPORTED":return"text-green-600 bg-green-100";case"LIMITED":return"text-yellow-600 bg-yellow-100";case"UNSUPPORTED":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}function Sn(e,t,n){let s,r;return d(e,Xt,e=>n(1,r=e)),e.$$.update=()=>{2&e.$$.dirty&&n(0,s=r.currentPlan)},[s,r]}class Ln extends re{constructor(e){super(),se(this,e,Sn,Cn,o,{})}}function zn(e,t,n){const s=e.slice();return s[7]=t[n],s}function jn(e){let t,n,s,r,o,i,a,l,c,d,p,h,v,w,C,_;function $(e,t){return e[0].isExecuting?Hn:Tn}let M=$(e),S=M(e);return{c(){t=f("div"),n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("h3"),i.textContent="Ready to Execute",a=y(),l=f("p"),l.textContent="Your enforcement plan is ready. Click execute to apply changes to your music library.",c=y(),d=f("div"),p=f("button"),S.c(),v=y(),w=f("div"),w.innerHTML="<p>⚠️ This action will modify your music library</p> <p>Some changes may not be reversible</p>",k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d","M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(s,"class","mx-auto h-12 w-12 text-indigo-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(i,"class","mt-2 text-lg font-medium text-gray-900"),k(l,"class","mt-1 text-sm text-gray-500"),p.disabled=h=e[0].isExecuting,k(p,"class","inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(d,"class","mt-6"),k(w,"class","mt-4 text-xs text-gray-500"),k(n,"class","text-center"),k(t,"class","bg-white shadow rounded-lg p-6")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(s,r),u(n,o),u(n,i),u(n,a),u(n,l),u(n,c),u(n,d),u(d,p),S.m(p,null),u(n,v),u(n,w),C||(_=b(p,"click",e[4]),C=!0)},p(e,t){M!==(M=$(e))&&(S.d(1),S=M(e),S&&(S.c(),S.m(p,null))),1&t&&h!==(h=e[0].isExecuting)&&(p.disabled=h)},d(e){e&&g(t),S.d(),C=!1,_()}}}function An(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W=e[3].id.slice(0,8)+"",Z=e[3].status+"",K=e[3].summary.totalItems+"",X=e[3].summary.completedItems+"",ee=e[3].summary.failedItems+"",te=e[3].summary.skippedItems+"",ne=e[2]&&Pn(e),se=e[3].items.length>0&&In(e);return{c(){t=f("div"),n=f("div"),s=f("div"),r=f("h3"),r.textContent="Enforcement Execution",o=y(),i=f("p"),a=h("Batch ID: "),l=f("span"),c=h(W),d=h("..."),p=y(),x=f("span"),v=h(Z),w=y(),ne&&ne.c(),C=y(),$=f("div"),M=f("div"),S=f("div"),L=h(K),z=y(),j=f("div"),j.textContent="Total Items",A=y(),B=f("div"),T=f("div"),H=h(X),P=y(),I=f("div"),I.textContent="Completed",E=y(),D=f("div"),F=f("div"),N=h(ee),O=y(),R=f("div"),R.textContent="Failed",V=y(),U=f("div"),q=f("div"),J=h(te),G=y(),Q=f("div"),Q.textContent="Skipped",Y=y(),se&&se.c(),k(r,"class","text-lg font-medium text-gray-900"),k(l,"class","font-mono"),k(i,"class","text-sm text-gray-500"),k(x,"class",b="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+On(e[3].status)),k(n,"class","flex items-center justify-between mb-4"),k(S,"class","text-lg font-semibold text-gray-900"),k(j,"class","text-xs text-gray-500"),k(M,"class","bg-gray-50 rounded-lg p-3 text-center"),k(T,"class","text-lg font-semibold text-green-600"),k(I,"class","text-xs text-gray-500"),k(B,"class","bg-green-50 rounded-lg p-3 text-center"),k(F,"class","text-lg font-semibold text-red-600"),k(R,"class","text-xs text-gray-500"),k(D,"class","bg-red-50 rounded-lg p-3 text-center"),k(q,"class","text-lg font-semibold text-yellow-600"),k(Q,"class","text-xs text-gray-500"),k(U,"class","bg-yellow-50 rounded-lg p-3 text-center"),k($,"class","grid grid-cols-1 gap-4 sm:grid-cols-4 mb-6"),k(t,"class","bg-white shadow rounded-lg p-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(s,o),u(s,i),u(i,a),u(i,l),u(l,c),u(l,d),u(n,p),u(n,x),u(x,v),u(t,w),ne&&ne.m(t,null),u(t,C),u(t,$),u($,M),u(M,S),u(S,L),u(M,z),u(M,j),u($,A),u($,B),u(B,T),u(T,H),u(B,P),u(B,I),u($,E),u($,D),u(D,F),u(F,N),u(D,O),u(D,R),u($,V),u($,U),u(U,q),u(q,J),u(U,G),u(U,Q),u(t,Y),se&&se.m(t,null)},p(e,n){8&n&&W!==(W=e[3].id.slice(0,8)+"")&&_(c,W),8&n&&Z!==(Z=e[3].status+"")&&_(v,Z),8&n&&b!==(b="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+On(e[3].status))&&k(x,"class",b),e[2]?ne?ne.p(e,n):(ne=Pn(e),ne.c(),ne.m(t,C)):ne&&(ne.d(1),ne=null),8&n&&K!==(K=e[3].summary.totalItems+"")&&_(L,K),8&n&&X!==(X=e[3].summary.completedItems+"")&&_(H,X),8&n&&ee!==(ee=e[3].summary.failedItems+"")&&_(N,ee),8&n&&te!==(te=e[3].summary.skippedItems+"")&&_(J,te),e[3].items.length>0?se?se.p(e,n):(se=In(e),se.c(),se.m(t,null)):se&&(se.d(1),se=null)},d(e){e&&g(t),ne&&ne.d(),se&&se.d()}}}function Bn(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No enforcement plan available</h3> <p class="mt-1 text-sm text-gray-500">Create a plan first to execute enforcement.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Tn(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Execute Enforcement Plan"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(t,"class","-ml-1 mr-3 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Hn(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n              Starting Execution..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function Pn(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,$,S,L,z,j,A,B,T,H,P,I,E=e[2].processed+"",D=e[2].total+"",F=e[2].percentage+"",N=e[2].completed+"",O=e[2].failed+"",R=e[2].skipped+"";return{c(){t=f("div"),n=f("div"),s=f("span"),s.textContent="Progress",r=y(),o=f("span"),i=h(E),a=h(" / "),l=h(D),c=h(" ("),d=h(F),p=h("%)"),x=y(),v=f("div"),b=f("div"),w=y(),C=f("div"),$=f("span"),S=h(N),L=h(" completed"),z=y(),j=f("span"),A=h(O),B=h(" failed"),T=y(),H=f("span"),P=h(R),I=h(" skipped"),k(n,"class","flex justify-between text-sm text-gray-600 mb-2"),k(b,"class","bg-indigo-600 h-2 rounded-full transition-all duration-300"),M(b,"width",e[2].percentage+"%"),k(v,"class","w-full bg-gray-200 rounded-full h-2"),k(C,"class","flex justify-between text-xs text-gray-500 mt-1"),k(t,"class","mb-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(o,c),u(o,d),u(o,p),u(t,x),u(t,v),u(v,b),u(t,w),u(t,C),u(C,$),u($,S),u($,L),u(C,z),u(C,j),u(j,A),u(j,B),u(C,T),u(C,H),u(H,P),u(H,I)},p(e,t){4&t&&E!==(E=e[2].processed+"")&&_(i,E),4&t&&D!==(D=e[2].total+"")&&_(l,D),4&t&&F!==(F=e[2].percentage+"")&&_(d,F),4&t&&M(b,"width",e[2].percentage+"%"),4&t&&N!==(N=e[2].completed+"")&&_(S,N),4&t&&O!==(O=e[2].failed+"")&&_(A,O),4&t&&R!==(R=e[2].skipped+"")&&_(P,R)},d(e){e&&g(t)}}}function In(e){let t,n,s,r,o=W(e[3].items.slice(0,10)),i=[];for(let t=0;t<o.length;t+=1)i[t]=Dn(zn(e,o,t));return{c(){t=f("div"),n=f("h4"),n.textContent="Recent Actions",s=y(),r=f("div");for(let e=0;e<i.length;e+=1)i[e].c();k(n,"class","text-sm font-medium text-gray-900 mb-3"),k(r,"class","space-y-2 max-h-64 overflow-y-auto")},m(e,o){m(e,t,o),u(t,n),u(t,s),u(t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(r,null)},p(e,t){if(8&t){let n;for(o=W(e[3].items.slice(0,10)),n=0;n<o.length;n+=1){const s=zn(e,o,n);i[n]?i[n].p(s,t):(i[n]=Dn(s),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&g(t),p(i,e)}}}function En(e){let t,n,s,r;return{c(){t=f("button"),n=x("svg"),s=x("path"),k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(n,"class","h-4 w-4"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(t,"title",r=e[7].errorMessage),k(t,"class","text-red-400 hover:text-red-600")},m(e,r){m(e,t,r),u(t,n),u(n,s)},p(e,n){8&n&&r!==(r=e[7].errorMessage)&&k(t,"title",r)},d(e){e&&g(t)}}}function Dn(e){let t,n,s,r,o,i,a,l,c,d,p,v,b,w,C,$,M,S,L,z,j,A,B=e[7].action.replace(/_/g," ")+"",T=e[7].entityType+"",H=e[7].entityId.slice(0,20)+"",P=e[7].status+"",I="failed"===e[7].status&&e[7].errorMessage&&En(e);return{c(){t=f("div"),n=f("div"),s=x("svg"),r=x("path"),i=y(),a=f("div"),l=f("div"),c=h(B),d=y(),p=f("div"),v=h(T),b=h(": "),w=h(H),C=h("..."),$=y(),M=f("div"),S=f("span"),L=h(P),j=y(),I&&I.c(),A=y(),k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d",o=Rn(e[7].action)),k(s,"class","h-4 w-4 text-gray-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(l,"class","text-sm font-medium text-gray-900"),k(p,"class","text-xs text-gray-500"),k(n,"class","flex items-center space-x-3"),k(S,"class",z="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+On(e[7].status)),k(M,"class","flex items-center space-x-2"),k(t,"class","flex items-center justify-between py-2 px-3 bg-gray-50 rounded-md")},m(e,o){m(e,t,o),u(t,n),u(n,s),u(s,r),u(n,i),u(n,a),u(a,l),u(l,c),u(a,d),u(a,p),u(p,v),u(p,b),u(p,w),u(p,C),u(t,$),u(t,M),u(M,S),u(S,L),u(M,j),I&&I.m(M,null),u(t,A)},p(e,t){8&t&&o!==(o=Rn(e[7].action))&&k(r,"d",o),8&t&&B!==(B=e[7].action.replace(/_/g," ")+"")&&_(c,B),8&t&&T!==(T=e[7].entityType+"")&&_(v,T),8&t&&H!==(H=e[7].entityId.slice(0,20)+"")&&_(w,H),8&t&&P!==(P=e[7].status+"")&&_(L,P),8&t&&z!==(z="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+On(e[7].status))&&k(S,"class",z),"failed"===e[7].status&&e[7].errorMessage?I?I.p(e,t):(I=En(e),I.c(),I.m(M,null)):I&&(I.d(1),I=null)},d(e){e&&g(t),I&&I.d()}}}function Fn(e){let t,n,s,r,o,i,a,l,c,d,p,x=e[0].error+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(x),l=y(),c=f("button"),c.textContent="Dismiss",k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(c,"class","mt-2 text-sm text-red-600 hover:text-red-500"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","bg-red-50 border border-red-200 rounded-md p-4")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a),u(o,l),u(o,c),d||(p=b(c,"click",e[6]),d=!0)},p(e,t){1&t&&x!==(x=e[0].error+"")&&_(a,x)},d(e){e&&g(t),d=!1,p()}}}function Nn(t){let n,s;function r(e,t){return e[1]?e[3]?An:jn:Bn}let o=r(t),i=o(t),a=t[0].error&&Fn(t);return{c(){n=f("div"),i.c(),s=y(),a&&a.c(),k(n,"class","space-y-6")},m(e,t){m(e,n,t),i.m(n,null),u(n,s),a&&a.m(n,null)},p(e,[t]){o===(o=r(e))&&i?i.p(e,t):(i.d(1),i=o(e),i&&(i.c(),i.m(n,s))),e[0].error?a?a.p(e,t):(a=Fn(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:e,o:e,d(e){e&&g(n),i.d(),a&&a.d()}}}function On(e){switch(e){case"pending":default:return"text-gray-600 bg-gray-100";case"running":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-yellow-600 bg-yellow-100"}}function Rn(e){switch(e){case"remove_liked_song":return"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z";case"remove_playlist_track":return"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3";case"unfollow_artist":return"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}function Vn(e,t,n){let s,r,o,i,a;d(e,tn,e=>n(5,i=e)),d(e,Xt,e=>n(0,a=e));return e.$$.update=()=>{1&e.$$.dirty&&n(1,s=a.currentPlan),1&e.$$.dirty&&n(3,r=a.currentBatch),32&e.$$.dirty&&n(2,o=i)},[a,s,o,r,async function(){if(!s)return;confirm("Are you sure you want to execute this enforcement plan? This will modify your music library and some changes may not be reversible.")&&await sn.executePlan(s.planId)},i,()=>sn.clearError()]}class Un extends re{constructor(e){super(),se(this,e,Vn,Nn,o,{})}}function qn(e,t,n){const s=e.slice();return s[5]=t[n],s}function Jn(e){let t;return{c(){t=f("div"),t.innerHTML='<svg class="inline h-4 w-4 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n        Rollback available',k(t,"class","text-sm text-gray-500")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Gn(e){let t,n,s=W(e[0]),r=[];for(let t=0;t<s.length;t+=1)r[t]=es(qn(e,s,t));return{c(){t=f("div"),n=f("ul");for(let e=0;e<r.length;e+=1)r[e].c();k(n,"class","divide-y divide-gray-200"),k(t,"class","bg-white shadow overflow-hidden sm:rounded-md")},m(e,s){m(e,t,s),u(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null)},p(e,t){if(5&t){let o;for(s=W(e[0]),o=0;o<s.length;o+=1){const i=qn(e,s,o);r[o]?r[o].p(i,t):(r[o]=es(i),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(e){e&&g(t),p(r,e)}}}function Qn(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No enforcement history</h3> <p class="mt-1 text-sm text-gray-500">Your enforcement executions will appear here after you run them.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Yn(e){let t,n,s=ss(e[5].completedAt)+"";return{c(){t=h("• Completed "),n=h(s)},m(e,s){m(e,t,s),m(e,n,s)},p(e,t){1&t&&s!==(s=ss(e[5].completedAt)+"")&&_(n,s)},d(e){e&&(g(t),g(n))}}}function Wn(e){let t,n,s;function r(){return e[4](e[5])}return{c(){t=f("button"),t.innerHTML='<svg class="-ml-0.5 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>\n                      Rollback',k(t,"class","inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,t,o),n||(s=b(t,"click",r),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,s()}}}function Zn(e){let t;return{c(){t=h(", block collaborations")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Kn(e){let t;return{c(){t=h(", block featuring")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Xn(e){let t;return{c(){t=h(", block songwriter credits")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function es(e){let t,n,s,r,o,i,a,l,c,d,p,x,v,b,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be,we,ke,Ce,_e,$e,Me,Se,Le,ze,je,Ae=e[5].provider+"",Be=e[5].status+"",Te=ss(e[5].createdAt)+"",He=e[5].id.slice(0,8)+"",Pe=rs(e[5])+"",Ie=e[5].summary.completedItems+"",Ee=e[5].summary.totalItems+"",De=e[5].summary.totalItems+"",Fe=e[5].summary.completedItems+"",Ne=e[5].summary.failedItems+"",Oe=e[5].summary.skippedItems+"",Re=e[5].options.aggressiveness+"",Ve=e[5].completedAt&&Yn(e),Ue="completed"===e[5].status&&e[5].summary.completedItems>0&&Wn(e),qe=e[5].options.blockCollabs&&Zn(),Je=e[5].options.blockFeaturing&&Kn(),Ge=e[5].options.blockSongwriterOnly&&Xn();return{c(){t=f("li"),n=f("div"),s=f("div"),r=f("div"),o=f("div"),o.innerHTML='<svg class="h-8 w-8 text-green-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"></path></svg>',i=y(),a=f("div"),l=f("div"),c=f("p"),d=h(Ae),p=h(" Enforcement"),x=y(),v=f("span"),b=h(Be),C=y(),$=f("div"),M=f("p"),S=h("Executed "),L=h(Te),z=y(),Ve&&Ve.c(),j=y(),A=f("div"),B=h("Batch ID: "),T=f("span"),H=h(He),P=h("..."),I=y(),E=f("div"),D=f("div"),F=f("div"),N=h(Pe),O=h("% success"),R=y(),V=f("div"),U=h(Ie),q=h(" / "),J=h(Ee),G=h(" items"),Q=y(),Ue&&Ue.c(),Y=y(),W=f("div"),Z=f("div"),K=f("div"),X=f("div"),ee=h(De),te=y(),ne=f("div"),ne.textContent="Total",se=y(),re=f("div"),oe=f("div"),ie=h(Fe),ae=y(),le=f("div"),le.textContent="Completed",ce=y(),de=f("div"),ue=f("div"),me=h(Ne),ge=y(),pe=f("div"),pe.textContent="Failed",fe=y(),xe=f("div"),he=f("div"),ye=h(Oe),ve=y(),be=f("div"),be.textContent="Skipped",we=y(),ke=f("div"),Ce=f("div"),_e=f("span"),_e.textContent="Options:",$e=y(),Me=h(Re),Se=h(" aggressiveness\n                  "),qe&&qe.c(),Le=y(),Je&&Je.c(),ze=y(),Ge&&Ge.c(),je=y(),k(o,"class","flex-shrink-0"),k(c,"class","text-sm font-medium text-gray-900 capitalize"),k(v,"class",w="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+ns(e[5].status)),k(l,"class","flex items-center"),k($,"class","mt-1 flex items-center text-sm text-gray-500"),k(T,"class","font-mono"),k(A,"class","mt-1 text-xs text-gray-400"),k(a,"class","ml-4"),k(r,"class","flex items-center"),k(F,"class","text-sm font-medium text-gray-900"),k(V,"class","text-xs text-gray-500"),k(D,"class","text-right"),k(E,"class","flex items-center space-x-4"),k(s,"class","flex items-center justify-between"),k(X,"class","text-lg font-semibold text-gray-900"),k(ne,"class","text-xs text-gray-500"),k(K,"class","text-center"),k(oe,"class","text-lg font-semibold text-green-600"),k(le,"class","text-xs text-gray-500"),k(re,"class","text-center"),k(ue,"class","text-lg font-semibold text-red-600"),k(pe,"class","text-xs text-gray-500"),k(de,"class","text-center"),k(he,"class","text-lg font-semibold text-yellow-600"),k(be,"class","text-xs text-gray-500"),k(xe,"class","text-center"),k(Z,"class","grid grid-cols-2 gap-4 sm:grid-cols-4"),k(W,"class","mt-4"),k(_e,"class","font-medium"),k(Ce,"class","text-xs text-gray-500"),k(ke,"class","mt-3 pt-3 border-t border-gray-200"),k(n,"class","px-4 py-4 sm:px-6")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(s,r),u(r,o),u(r,i),u(r,a),u(a,l),u(l,c),u(c,d),u(c,p),u(l,x),u(l,v),u(v,b),u(a,C),u(a,$),u($,M),u(M,S),u(M,L),u(M,z),Ve&&Ve.m(M,null),u(a,j),u(a,A),u(A,B),u(A,T),u(T,H),u(T,P),u(s,I),u(s,E),u(E,D),u(D,F),u(F,N),u(F,O),u(D,R),u(D,V),u(V,U),u(V,q),u(V,J),u(V,G),u(E,Q),Ue&&Ue.m(E,null),u(n,Y),u(n,W),u(W,Z),u(Z,K),u(K,X),u(X,ee),u(K,te),u(K,ne),u(Z,se),u(Z,re),u(re,oe),u(oe,ie),u(re,ae),u(re,le),u(Z,ce),u(Z,de),u(de,ue),u(ue,me),u(de,ge),u(de,pe),u(Z,fe),u(Z,xe),u(xe,he),u(he,ye),u(xe,ve),u(xe,be),u(n,we),u(n,ke),u(ke,Ce),u(Ce,_e),u(Ce,$e),u(Ce,Me),u(Ce,Se),qe&&qe.m(Ce,null),u(Ce,Le),Je&&Je.m(Ce,null),u(Ce,ze),Ge&&Ge.m(Ce,null),u(t,je)},p(e,t){1&t&&Ae!==(Ae=e[5].provider+"")&&_(d,Ae),1&t&&Be!==(Be=e[5].status+"")&&_(b,Be),1&t&&w!==(w="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+ns(e[5].status))&&k(v,"class",w),1&t&&Te!==(Te=ss(e[5].createdAt)+"")&&_(L,Te),e[5].completedAt?Ve?Ve.p(e,t):(Ve=Yn(e),Ve.c(),Ve.m(M,null)):Ve&&(Ve.d(1),Ve=null),1&t&&He!==(He=e[5].id.slice(0,8)+"")&&_(H,He),1&t&&Pe!==(Pe=rs(e[5])+"")&&_(N,Pe),1&t&&Ie!==(Ie=e[5].summary.completedItems+"")&&_(U,Ie),1&t&&Ee!==(Ee=e[5].summary.totalItems+"")&&_(J,Ee),"completed"===e[5].status&&e[5].summary.completedItems>0?Ue?Ue.p(e,t):(Ue=Wn(e),Ue.c(),Ue.m(E,null)):Ue&&(Ue.d(1),Ue=null),1&t&&De!==(De=e[5].summary.totalItems+"")&&_(ee,De),1&t&&Fe!==(Fe=e[5].summary.completedItems+"")&&_(ie,Fe),1&t&&Ne!==(Ne=e[5].summary.failedItems+"")&&_(me,Ne),1&t&&Oe!==(Oe=e[5].summary.skippedItems+"")&&_(ye,Oe),1&t&&Re!==(Re=e[5].options.aggressiveness+"")&&_(Me,Re),e[5].options.blockCollabs?qe||(qe=Zn(),qe.c(),qe.m(Ce,Le)):qe&&(qe.d(1),qe=null),e[5].options.blockFeaturing?Je||(Je=Kn(),Je.c(),Je.m(Ce,ze)):Je&&(Je.d(1),Je=null),e[5].options.blockSongwriterOnly?Ge||(Ge=Xn(),Ge.c(),Ge.m(Ce,null)):Ge&&(Ge.d(1),Ge=null)},d(e){e&&g(t),Ve&&Ve.d(),Ue&&Ue.d(),qe&&qe.d(),Je&&Je.d(),Ge&&Ge.d()}}}function ts(t){let n,s,r,o,i,a,l,c=t[1]&&Jn();function d(e,t){return 0===e[0].length?Qn:Gn}let p=d(t),x=p(t);return{c(){n=f("div"),s=f("div"),r=f("div"),r.innerHTML='<h3 class="text-lg font-medium text-gray-900">Action History</h3> <p class="text-sm text-gray-500">View and manage your past enforcement executions.</p>',o=y(),c&&c.c(),i=y(),x.c(),a=y(),l=f("div"),l.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">About Rollbacks</h3> <div class="mt-2 text-sm text-blue-700"><p>Rollback attempts to undo changes made during enforcement. Success depends on platform capabilities:</p> <ul class="list-disc list-inside mt-1 space-y-1"><li>Re-adding liked songs and follows: Usually successful</li> <li>Re-adding playlist tracks: May not preserve original order</li> <li>Radio seed changes: May not be fully reversible</li></ul></div></div></div>',k(s,"class","flex justify-between items-center"),k(l,"class","bg-blue-50 border border-blue-200 rounded-md p-4"),k(n,"class","space-y-6")},m(e,t){m(e,n,t),u(n,s),u(s,r),u(s,o),c&&c.m(s,null),u(n,i),x.m(n,null),u(n,a),u(n,l)},p(e,[t]){e[1]?c||(c=Jn(),c.c(),c.m(s,null)):c&&(c.d(1),c=null),p===(p=d(e))&&x?x.p(e,t):(x.d(1),x=p(e),x&&(x.c(),x.m(n,a)))},i:e,o:e,d(e){e&&g(n),c&&c.d(),x.d()}}}function ns(e){switch(e){case"pending":default:return"text-gray-600 bg-gray-100";case"running":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"cancelled":return"text-yellow-600 bg-yellow-100"}}function ss(e){return new Date(e).toLocaleString()}function rs(e){const t=e.summary.totalItems,n=e.summary.completedItems;return t>0?Math.round(n/t*100):0}function os(e,t,n){let s,r,o;async function i(e){if(confirm("Are you sure you want to rollback this batch? This will attempt to undo the changes made during this enforcement.")){const t=await sn.rollbackBatch(e);t.success||alert(`Rollback failed: ${t.message}`)}}d(e,Xt,e=>n(3,r=e)),d(e,nn,e=>n(1,o=e));return e.$$.update=()=>{8&e.$$.dirty&&n(0,s=r.actionHistory)},[s,o,i,r,e=>i(e.id)]}class is extends re{constructor(e){super(),se(this,e,os,ts,o,{})}}function as(e){let t,n,s,r,o,i,a,l,c,d,p,x,h=!e[1]&&ls(),v=0===e[2]&&cs();return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("h3"),i.textContent="Setup Required",a=y(),l=f("div"),c=f("p"),c.textContent="Before you can plan enforcement, you need:",d=y(),p=f("ul"),h&&h.c(),x=y(),v&&v.c(),k(s,"class","flex-shrink-0"),k(i,"class","text-sm font-medium text-yellow-800"),k(p,"class","list-disc list-inside mt-1 space-y-1"),k(l,"class","mt-2 text-sm text-yellow-700"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","mb-6 bg-yellow-50 border border-yellow-200 rounded-md p-4")},m(e,g){m(e,t,g),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),u(l,p),h&&h.m(p,null),u(p,x),v&&v.m(p,null)},p(e,t){e[1]?h&&(h.d(1),h=null):h||(h=ls(),h.c(),h.m(p,x)),0===e[2]?v||(v=cs(),v.c(),v.m(p,null)):v&&(v.d(1),v=null)},d(e){e&&g(t),h&&h.d(),v&&v.d()}}}function ls(e){let t;return{c(){t=f("li"),t.textContent="Connect at least one streaming service (Spotify)"},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function cs(e){let t;return{c(){t=f("li"),t.textContent="Add artists to your Do-Not-Play list"},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function ds(t){let n,s;return n=new is({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function us(t){let n,s;return n=new Un({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function ms(e){let t,n,s,r,o,i,a,l,c,d;o=new ln({});const p=[ps,gs],x=[];function h(e,t){return e[3]?0:1}a=h(e),l=x[a]=p[a](e);let v=e[4].error&&hs(e);return{c(){t=f("div"),n=f("div"),s=f("h3"),s.textContent="Enforcement Options",r=y(),X(o.$$.fragment),i=y(),l.c(),c=y(),v&&v.c(),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(n,"class","bg-white shadow rounded-lg p-6"),k(t,"class","space-y-6")},m(e,l){m(e,t,l),u(t,n),u(n,s),u(n,r),ee(o,n,null),u(t,i),x[a].m(t,null),u(t,c),v&&v.m(t,null),d=!0},p(e,n){let s=a;a=h(e),a===s?x[a].p(e,n):(J(),Y(x[s],1,1,()=>{x[s]=null}),G(),l=x[a],l?l.p(e,n):(l=x[a]=p[a](e),l.c()),Q(l,1),l.m(t,c)),e[4].error?v?v.p(e,n):(v=hs(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(e){d||(Q(o.$$.fragment,e),Q(l),d=!0)},o(e){Y(o.$$.fragment,e),Y(l),d=!1},d(e){e&&g(t),te(o),x[a].d(),v&&v.d()}}}function gs(t){let n,s,r,o,i,a,l,c,d;function p(e,t){return e[4].isPlanning?xs:fs}let x=p(t),h=x(t);return{c(){n=f("div"),s=f("h3"),s.textContent="Create Enforcement Plan",r=y(),o=f("p"),o.textContent="Generate a dry-run preview to see what changes will be made to your music library.",i=y(),a=f("button"),h.c(),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(o,"class","text-sm text-gray-600 mb-4"),a.disabled=l=t[4].isPlanning||!t[1]||0===t[2],k(a,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(n,"class","bg-white shadow rounded-lg p-6")},m(e,l){m(e,n,l),u(n,s),u(n,r),u(n,o),u(n,i),u(n,a),h.m(a,null),c||(d=b(a,"click",t[5]),c=!0)},p(e,t){x!==(x=p(e))&&(h.d(1),h=x(e),h&&(h.c(),h.m(a,null))),22&t&&l!==(l=e[4].isPlanning||!e[1]||0===e[2])&&(a.disabled=l)},i:e,o:e,d(e){e&&g(n),h.d(),c=!1,d()}}}function ps(t){let n,s,r,o,i,a,l,c,d,p;return l=new Ln({}),{c(){n=f("div"),s=f("div"),r=f("h3"),r.textContent="Enforcement Preview",o=y(),i=f("button"),i.textContent="Clear Plan",a=y(),X(l.$$.fragment),k(r,"class","text-lg font-medium text-gray-900"),k(i,"class","text-sm text-gray-500 hover:text-gray-700"),k(s,"class","flex justify-between items-center mb-4"),k(n,"class","bg-white shadow rounded-lg p-6")},m(e,g){m(e,n,g),u(n,s),u(s,r),u(s,o),u(s,i),u(n,a),ee(l,n,null),c=!0,d||(p=b(i,"click",t[10]),d=!0)},p:e,i(e){c||(Q(l.$$.fragment,e),c=!0)},o(e){Y(l.$$.fragment,e),c=!1},d(e){e&&g(n),te(l),d=!1,p()}}}function fs(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Create Enforcement Plan"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),k(t,"class","-ml-1 mr-2 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function xs(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n              Creating Plan..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function hs(e){let t,n,s,r,o,i,a,l,c,d,p,x=e[4].error+"";return{c(){t=f("div"),n=f("div"),s=f("div"),s.innerHTML='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',r=y(),o=f("div"),i=f("p"),a=h(x),l=y(),c=f("button"),c.textContent="Dismiss",k(s,"class","flex-shrink-0"),k(i,"class","text-sm text-red-800"),k(c,"class","mt-2 text-sm text-red-600 hover:text-red-500"),k(o,"class","ml-3"),k(n,"class","flex"),k(t,"class","bg-red-50 border border-red-200 rounded-md p-4")},m(g,f){m(g,t,f),u(t,n),u(n,s),u(n,r),u(n,o),u(o,i),u(i,a),u(o,l),u(o,c),d||(p=b(c,"click",e[11]),d=!0)},p(e,t){16&t&&x!==(x=e[4].error+"")&&_(a,x)},d(e){e&&g(t),d=!1,p()}}}function ys(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,_,$,M,S,L,z,j,A,B,T,H=(!e[1]||0===e[2])&&as(e);const P=[ms,us,ds],I=[];function E(e,t){return"plan"===e[0]?0:"execute"===e[0]?1:"history"===e[0]?2:-1}return~(z=E(e))&&(j=I[z]=P[z](e)),{c(){t=f("div"),n=f("div"),n.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Enforcement Planning</h2> <p class="mt-1 text-sm text-gray-600">Plan and execute blocklist enforcement across your connected streaming services.</p>',r=y(),H&&H.c(),o=y(),i=f("div"),a=f("nav"),l=f("button"),c=h("Plan Enforcement"),p=y(),x=f("button"),v=h("Execute Plan"),_=y(),$=f("button"),M=h("Action History"),L=y(),j&&j.c(),k(n,"class","mb-6"),k(l,"class",d="py-4 px-1 border-b-2 font-medium text-sm "+("plan"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(x,"class",w="py-4 px-1 border-b-2 font-medium text-sm "+("execute"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),x.disabled=C=!e[3],k($,"class",S="py-4 px-1 border-b-2 font-medium text-sm "+("history"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(a,"class","flex space-x-8 px-6"),k(a,"aria-label","Tabs"),k(i,"class","bg-white shadow-sm rounded-lg mb-6"),k(t,"class","px-4 py-6 sm:px-0")},m(s,d){m(s,t,d),u(t,n),u(t,r),H&&H.m(t,null),u(t,o),u(t,i),u(i,a),u(a,l),u(l,c),u(a,p),u(a,x),u(x,v),u(a,_),u(a,$),u($,M),u(t,L),~z&&I[z].m(t,null),A=!0,B||(T=[b(l,"click",e[7]),b(x,"click",e[8]),b($,"click",e[9])],B=!0)},p(e,[n]){e[1]&&0!==e[2]?H&&(H.d(1),H=null):H?H.p(e,n):(H=as(e),H.c(),H.m(t,o)),(!A||1&n&&d!==(d="py-4 px-1 border-b-2 font-medium text-sm "+("plan"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(l,"class",d),(!A||1&n&&w!==(w="py-4 px-1 border-b-2 font-medium text-sm "+("execute"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(x,"class",w),(!A||8&n&&C!==(C=!e[3]))&&(x.disabled=C),(!A||1&n&&S!==(S="py-4 px-1 border-b-2 font-medium text-sm "+("history"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k($,"class",S);let s=z;z=E(e),z===s?~z&&I[z].p(e,n):(j&&(J(),Y(I[s],1,1,()=>{I[s]=null}),G()),~z?(j=I[z],j?j.p(e,n):(j=I[z]=P[z](e),j.c()),Q(j,1),j.m(t,null)):j=null)},i(e){A||(Q(j),A=!0)},o(e){Y(j),A=!1},d(e){e&&g(t),H&&H.d(),~z&&I[z].d(),B=!1,s(T)}}}function vs(e,t,n){let s,r,o,i;d(e,ke,e=>n(1,s=e)),d(e,$e,e=>n(2,r=e)),d(e,en,e=>n(3,o=e)),d(e,Xt,e=>n(4,i=e));let a="plan";function l(e){n(0,a=e)}A(()=>{sn.fetchActionHistory()});return[a,s,r,o,i,async function(){const e=[];s&&e.push("spotify"),0!==e.length&&await sn.createPlan(e,!0)},l,()=>l("plan"),()=>l("execute"),()=>l("history"),()=>sn.clearPlan(),()=>sn.clearError()]}class bs extends re{constructor(e){super(),se(this,e,vs,ys,o,{})}}const ws=ie({lists:[],currentList:null,subscriptions:[],subscriptionImpact:null,isLoading:!1,isLoadingList:!1,isLoadingImpact:!1,searchQuery:"",sortBy:"updated_at",sortOrder:"desc",error:null}),ks=ae(ws,e=>{let t=e.lists;if(e.searchQuery.trim()){const n=e.searchQuery.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.criteria.toLowerCase().includes(n))}return t.sort((t,n)=>{let s=t[e.sortBy],r=n[e.sortBy];"created_at"!==e.sortBy&&"updated_at"!==e.sortBy||(s=new Date(s).getTime(),r=new Date(r).getTime()),"string"==typeof s&&(s=s.toLowerCase(),r=r.toLowerCase());const o=s<r?-1:s>r?1:0;return"asc"===e.sortOrder?o:-o}),t}),Cs=ae(ws,e=>new Set(e.subscriptions.map(e=>e.list_id)));ae([ws,Cs],([e,t])=>e=>t.has(e));const _s={fetchLists:async()=>{ws.update(e=>({...e,isLoading:!0,error:null}));try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/community/lists",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success?ws.update(e=>({...e,lists:n.data,isLoading:!1})):ws.update(e=>({...e,error:n.message,isLoading:!1}))}catch(e){ws.update(e=>({...e,error:"Failed to fetch community lists",isLoading:!1}))}},fetchListDetails:async e=>{ws.update(e=>({...e,isLoadingList:!0,error:null}));try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/artists`,{headers:{Authorization:`Bearer ${t}`}}),s=await n.json();s.success?ws.update(e=>({...e,currentList:s.data,isLoadingList:!1})):ws.update(e=>({...e,error:s.message,isLoadingList:!1}))}catch(e){ws.update(e=>({...e,error:"Failed to fetch list details",isLoadingList:!1}))}},fetchSubscriptions:async()=>{try{const e=localStorage.getItem("auth_token"),t=await fetch("http://localhost:3000/api/v1/community/subscriptions",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();n.success&&ws.update(e=>({...e,subscriptions:n.data}))}catch(e){console.error("Failed to fetch subscriptions:",e)}},getSubscriptionImpact:async e=>{ws.update(e=>({...e,isLoadingImpact:!0,error:null}));try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/impact`,{headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?(ws.update(e=>({...e,subscriptionImpact:s.data,isLoadingImpact:!1})),{success:!0,data:s.data}):(ws.update(e=>({...e,error:s.message,isLoadingImpact:!1})),{success:!1,message:s.message})}catch(e){return ws.update(e=>({...e,error:"Failed to get subscription impact",isLoadingImpact:!1})),{success:!1,message:"Failed to get subscription impact"}}},subscribe:async(e,t,n=!0)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/subscribe`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({version_pinned:t,auto_update:n})}),o=await r.json();return o.success?(await _s.fetchSubscriptions(),{success:!0}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to subscribe to list"}}},unsubscribe:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/unsubscribe`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),s=await n.json();return s.success?(await _s.fetchSubscriptions(),{success:!0}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to unsubscribe from list"}}},updateSubscription:async(e,t,n)=>{try{const s=localStorage.getItem("auth_token"),r=await fetch(`http://localhost:3000/api/v1/community/lists/${e}/subscription`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({version_pinned:t,auto_update:n})}),o=await r.json();return o.success?(await _s.fetchSubscriptions(),{success:!0}):{success:!1,message:o.message}}catch(e){return{success:!1,message:"Failed to update subscription"}}},createList:async e=>{try{const t=localStorage.getItem("auth_token"),n=await fetch("http://localhost:3000/api/v1/community/lists",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await n.json();return s.success?(await _s.fetchLists(),{success:!0,data:s.data}):{success:!1,message:s.message}}catch(e){return{success:!1,message:"Failed to create community list"}}},updateSearch:e=>{ws.update(t=>({...t,searchQuery:e}))},updateSort:(e,t)=>{ws.update(n=>({...n,sortBy:e,sortOrder:t}))},clearCurrentList:()=>{ws.update(e=>({...e,currentList:null}))},clearError:()=>{ws.update(e=>({...e,error:null}))}};function $s(e){let t;return{c(){t=f("span"),t.textContent="Subscribed",k(t,"class","ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium text-green-800 bg-green-100")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Ms(e){let t,n,s,r;return{c(){t=h("• "),n=f("a"),s=h("Governance"),k(n,"href",r=e[0].governance_url),k(n,"target","_blank"),k(n,"class","text-indigo-600 hover:text-indigo-500")},m(e,r){m(e,t,r),m(e,n,r),u(n,s)},p(e,t){1&t&&r!==(r=e[0].governance_url)&&k(n,"href",r)},d(e){e&&(g(t),g(n))}}}function Ss(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n          Subscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),k(t,"class","-ml-0.5 mr-2 h-4 w-4"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Ls(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n          Unsubscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M6 18L18 6M6 6l12 12"),k(t,"class","-ml-0.5 mr-2 h-4 w-4"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function zs(t){let n,r,o,i,a,l,c,d,p,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge=t[0].name+"",pe=t[0].update_cadence+"",fe=t[0].description+"",xe=t[0].criteria+"",he=(t[0].artist_count||0)+"",ye=(t[0].subscriber_count||0)+"",ve=t[0].version+"",be=js(t[0].updated_at)+"",we=t[1]&&$s(),ke=t[0].governance_url&&Ms(t);function Ce(e,t){return e[1]?Ls:Ss}let _e=Ce(t),$e=_e(t);return{c(){n=f("div"),r=f("div"),o=f("div"),i=f("div"),a=f("h3"),l=h(ge),c=y(),we&&we.c(),d=y(),p=f("span"),v=h(pe),C=y(),$=f("p"),M=h(fe),S=y(),L=f("div"),z=f("h4"),z.textContent="Criteria",j=y(),A=f("p"),B=h(xe),T=y(),H=f("div"),P=f("div"),I=f("span"),E=x("svg"),D=x("path"),F=y(),N=h(he),O=h(" artists"),R=y(),V=f("span"),U=x("svg"),q=x("path"),J=y(),G=h(ye),Q=h(" subscribers"),Y=y(),W=f("span"),Z=h("v"),K=h(ve),X=y(),ee=f("div"),te=h("Updated "),ne=h(be),se=y(),ke&&ke.c(),re=y(),oe=f("div"),ie=f("div"),ae=f("button"),ae.textContent="View Details",le=y(),ce=f("button"),$e.c(),k(a,"class","text-lg font-medium text-gray-900 truncate"),k(i,"class","flex items-center"),k(p,"class",w="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+As(t[0].update_cadence)),k(o,"class","flex items-center justify-between"),k($,"class","mt-2 text-sm text-gray-600 line-clamp-2"),k(z,"class","text-xs font-medium text-gray-900 uppercase tracking-wide"),k(A,"class","mt-1 text-sm text-gray-600 line-clamp-2"),k(L,"class","mt-3"),k(D,"stroke-linecap","round"),k(D,"stroke-linejoin","round"),k(D,"stroke-width","2"),k(D,"d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"),k(E,"class","inline h-4 w-4 text-gray-400 mr-1"),k(E,"fill","none"),k(E,"viewBox","0 0 24 24"),k(E,"stroke","currentColor"),k(q,"stroke-linecap","round"),k(q,"stroke-linejoin","round"),k(q,"stroke-width","2"),k(q,"d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"),k(U,"class","inline h-4 w-4 text-gray-400 mr-1"),k(U,"fill","none"),k(U,"viewBox","0 0 24 24"),k(U,"stroke","currentColor"),k(P,"class","flex items-center space-x-4"),k(H,"class","mt-4 flex items-center justify-between text-sm text-gray-500"),k(ee,"class","mt-4 text-xs text-gray-400"),k(r,"class","p-6"),k(ae,"class","text-sm text-indigo-600 hover:text-indigo-500 font-medium"),k(ce,"class",de="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md "+(t[1]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2"),k(ie,"class","flex justify-between items-center"),k(oe,"class","bg-gray-50 px-6 py-3"),k(n,"class","bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(a,l),u(i,c),we&&we.m(i,null),u(o,d),u(o,p),u(p,v),u(r,C),u(r,$),u($,M),u(r,S),u(r,L),u(L,z),u(L,j),u(L,A),u(A,B),u(r,T),u(r,H),u(H,P),u(P,I),u(I,E),u(E,D),u(I,F),u(I,N),u(I,O),u(P,R),u(P,V),u(V,U),u(U,q),u(V,J),u(V,G),u(V,Q),u(H,Y),u(H,W),u(W,Z),u(W,K),u(r,X),u(r,ee),u(ee,te),u(ee,ne),u(ee,se),ke&&ke.m(ee,null),u(n,re),u(n,oe),u(oe,ie),u(ie,ae),u(ie,le),u(ie,ce),$e.m(ce,null),ue||(me=[b(ae,"click",t[2]),b(ce,"click",t[3])],ue=!0)},p(e,[t]){1&t&&ge!==(ge=e[0].name+"")&&_(l,ge),e[1]?we||(we=$s(),we.c(),we.m(i,null)):we&&(we.d(1),we=null),1&t&&pe!==(pe=e[0].update_cadence+"")&&_(v,pe),1&t&&w!==(w="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+As(e[0].update_cadence))&&k(p,"class",w),1&t&&fe!==(fe=e[0].description+"")&&_(M,fe),1&t&&xe!==(xe=e[0].criteria+"")&&_(B,xe),1&t&&he!==(he=(e[0].artist_count||0)+"")&&_(N,he),1&t&&ye!==(ye=(e[0].subscriber_count||0)+"")&&_(G,ye),1&t&&ve!==(ve=e[0].version+"")&&_(K,ve),1&t&&be!==(be=js(e[0].updated_at)+"")&&_(ne,be),e[0].governance_url?ke?ke.p(e,t):(ke=Ms(e),ke.c(),ke.m(ee,null)):ke&&(ke.d(1),ke=null),_e!==(_e=Ce(e))&&($e.d(1),$e=_e(e),$e&&($e.c(),$e.m(ce,null))),2&t&&de!==(de="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md "+(e[1]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2")&&k(ce,"class",de)},i:e,o:e,d(e){e&&g(n),we&&we.d(),ke&&ke.d(),$e.d(),ue=!1,s(me)}}}function js(e){return new Date(e).toLocaleDateString()}function As(e){switch(e.toLowerCase()){case"daily":return"text-red-600 bg-red-100";case"weekly":return"text-yellow-600 bg-yellow-100";case"monthly":return"text-green-600 bg-green-100";case"as-needed":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}}function Bs(e,t,n){let s,r;d(e,Cs,e=>n(4,r=e));let{list:o}=t;return e.$$set=e=>{"list"in e&&n(0,o=e.list)},e.$$.update=()=>{17&e.$$.dirty&&n(1,s=r.has(o.id))},[o,s,async function(){await _s.fetchListDetails(o.id)},async function(){if(s){const e=await _s.unsubscribe(o.id);e.success||alert(`Failed to unsubscribe: ${e.message}`)}else{const e=await _s.getSubscriptionImpact(o.id);if(e.success){if(confirm(`This list will add ${e.data.artists_to_add} artists to your DNP list. Continue?`)){const e=await _s.subscribe(o.id);e.success||alert(`Failed to subscribe: ${e.message}`)}}}},r]}class Ts extends re{constructor(e){super(),se(this,e,Bs,zs,o,{list:0})}}function Hs(e,t,n){const s=e.slice();return s[15]=t[n],s}function Ps(e,t,n){const s=e.slice();return s[18]=t[n],s}function Is(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No list selected</h3> <p class="mt-1 text-sm text-gray-500">Select a list to view its details.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Es(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be,we,ke,Ce,_e,$e,Me,Se,Le,ze,je,Ae,Be=e[0].version+"",Te=e[0].name+"",He=e[0].description+"",Pe=(e[0].artists?.length||0)+"",Ie=(e[0].subscriber_count||0)+"",Ee=e[0].update_cadence+"",De=e[0].criteria+"",Fe=e[0].update_cadence+"",Ne=Xs(e[0].updated_at)+"",Oe=(e[0].artists?.length||0)+"",Re=e[5]&&Ds();function Ve(e,t){return e[5]?Ns:Fs}let Ue=Ve(e),qe=Ue(e),Je=e[2]&&Os(e),Ge=e[0].governance_url&&Rs(e);function Qe(e,t){return e[1].isLoadingList?qs:e[0].artists&&e[0].artists.length>0?Us:Vs}let Ye=Qe(e),We=Ye(e);return{c(){t=f("div"),n=f("div"),r=f("div"),o=f("button"),o.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n          Back to lists',i=y(),a=f("div"),Re&&Re.c(),l=y(),c=f("span"),d=h("v"),p=h(Be),x=y(),v=f("div"),w=f("div"),C=f("h1"),$=h(Te),M=y(),S=f("p"),L=h(He),z=y(),j=f("div"),A=f("div"),B=f("div"),T=h(Pe),H=y(),P=f("div"),P.textContent="Artists",I=y(),E=f("div"),D=f("div"),F=h(Ie),N=y(),O=f("div"),O.textContent="Subscribers",R=y(),V=f("div"),U=f("div"),q=h(Ee),J=y(),G=f("div"),G.textContent="Updates",Q=y(),Y=f("div"),W=f("button"),qe.c(),K=y(),Je&&Je.c(),X=y(),ee=f("div"),te=f("h3"),te.textContent="List Criteria & Governance",ne=y(),se=f("div"),re=f("div"),oe=f("h4"),oe.textContent="Inclusion Criteria",ie=y(),ae=f("p"),le=h(De),ce=y(),de=f("div"),ue=f("div"),me=f("h4"),me.textContent="Update Cadence",ge=y(),pe=f("p"),fe=h(Fe),xe=y(),he=f("div"),ye=f("h4"),ye.textContent="Last Updated",ve=y(),be=f("p"),we=h(Ne),ke=y(),Ge&&Ge.c(),Ce=y(),_e=f("div"),$e=f("h3"),Me=h("Artists ("),Se=h(Oe),Le=h(")"),ze=y(),We.c(),k(o,"class","inline-flex items-center text-sm text-gray-500 hover:text-gray-700"),k(c,"class","text-sm text-gray-500"),k(a,"class","flex items-center space-x-2"),k(r,"class","flex items-center justify-between mb-4"),k(C,"class","text-2xl font-bold text-gray-900"),k(S,"class","mt-2 text-gray-600"),k(B,"class","text-lg font-semibold text-gray-900"),k(P,"class","text-sm text-gray-500"),k(A,"class","text-center p-3 bg-gray-50 rounded-lg"),k(D,"class","text-lg font-semibold text-gray-900"),k(O,"class","text-sm text-gray-500"),k(E,"class","text-center p-3 bg-gray-50 rounded-lg"),k(U,"class","text-lg font-semibold text-gray-900"),k(G,"class","text-sm text-gray-500"),k(V,"class","text-center p-3 bg-gray-50 rounded-lg"),k(j,"class","mt-4 grid grid-cols-1 gap-4 sm:grid-cols-3"),k(w,"class","flex-1"),k(W,"class",Z="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm "+(e[5]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2"),k(Y,"class","ml-6"),k(v,"class","flex justify-between items-start"),k(n,"class","bg-white shadow rounded-lg p-6"),k(te,"class","text-lg font-medium text-gray-900 mb-4"),k(oe,"class","text-sm font-medium text-gray-900"),k(ae,"class","mt-1 text-sm text-gray-600"),k(me,"class","text-sm font-medium text-gray-900"),k(pe,"class","mt-1 text-sm text-gray-600 capitalize"),k(ye,"class","text-sm font-medium text-gray-900"),k(be,"class","mt-1 text-sm text-gray-600"),k(de,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),k(se,"class","space-y-4"),k(ee,"class","bg-white shadow rounded-lg p-6"),k($e,"class","text-lg font-medium text-gray-900 mb-4"),k(_e,"class","bg-white shadow rounded-lg p-6"),k(t,"class","space-y-6")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(r,i),u(r,a),Re&&Re.m(a,null),u(a,l),u(a,c),u(c,d),u(c,p),u(n,x),u(n,v),u(v,w),u(w,C),u(C,$),u(w,M),u(w,S),u(S,L),u(w,z),u(w,j),u(j,A),u(A,B),u(B,T),u(A,H),u(A,P),u(j,I),u(j,E),u(E,D),u(D,F),u(E,N),u(E,O),u(j,R),u(j,V),u(V,U),u(U,q),u(V,J),u(V,G),u(v,Q),u(v,Y),u(Y,W),qe.m(W,null),u(t,K),Je&&Je.m(t,null),u(t,X),u(t,ee),u(ee,te),u(ee,ne),u(ee,se),u(se,re),u(re,oe),u(re,ie),u(re,ae),u(ae,le),u(se,ce),u(se,de),u(de,ue),u(ue,me),u(ue,ge),u(ue,pe),u(pe,fe),u(de,xe),u(de,he),u(he,ye),u(he,ve),u(he,be),u(be,we),u(se,ke),Ge&&Ge.m(se,null),u(t,Ce),u(t,_e),u(_e,$e),u($e,Me),u($e,Se),u($e,Le),u(_e,ze),We.m(_e,null),je||(Ae=[b(o,"click",e[6]),b(W,"click",e[7])],je=!0)},p(e,n){e[5]?Re||(Re=Ds(),Re.c(),Re.m(a,l)):Re&&(Re.d(1),Re=null),1&n&&Be!==(Be=e[0].version+"")&&_(p,Be),1&n&&Te!==(Te=e[0].name+"")&&_($,Te),1&n&&He!==(He=e[0].description+"")&&_(L,He),1&n&&Pe!==(Pe=(e[0].artists?.length||0)+"")&&_(T,Pe),1&n&&Ie!==(Ie=(e[0].subscriber_count||0)+"")&&_(F,Ie),1&n&&Ee!==(Ee=e[0].update_cadence+"")&&_(q,Ee),Ue!==(Ue=Ve(e))&&(qe.d(1),qe=Ue(e),qe&&(qe.c(),qe.m(W,null))),32&n&&Z!==(Z="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm "+(e[5]?"text-red-700 bg-red-100 hover:bg-red-200 focus:ring-red-500":"text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500")+" focus:outline-none focus:ring-2 focus:ring-offset-2")&&k(W,"class",Z),e[2]?Je?Je.p(e,n):(Je=Os(e),Je.c(),Je.m(t,X)):Je&&(Je.d(1),Je=null),1&n&&De!==(De=e[0].criteria+"")&&_(le,De),1&n&&Fe!==(Fe=e[0].update_cadence+"")&&_(fe,Fe),1&n&&Ne!==(Ne=Xs(e[0].updated_at)+"")&&_(we,Ne),e[0].governance_url?Ge?Ge.p(e,n):(Ge=Rs(e),Ge.c(),Ge.m(se,null)):Ge&&(Ge.d(1),Ge=null),1&n&&Oe!==(Oe=(e[0].artists?.length||0)+"")&&_(Se,Oe),Ye===(Ye=Qe(e))&&We?We.p(e,n):(We.d(1),We=Ye(e),We&&(We.c(),We.m(_e,null)))},d(e){e&&g(t),Re&&Re.d(),qe.d(),Je&&Je.d(),Ge&&Ge.d(),We.d(),je=!1,s(Ae)}}}function Ds(e){let t;return{c(){t=f("span"),t.textContent="Subscribed",k(t,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-green-800 bg-green-100")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Fs(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Subscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),k(t,"class","-ml-1 mr-2 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Ns(e){let t,n,s;return{c(){t=x("svg"),n=x("path"),s=h("\n              Unsubscribe"),k(n,"stroke-linecap","round"),k(n,"stroke-linejoin","round"),k(n,"stroke-width","2"),k(n,"d","M6 18L18 6M6 6l12 12"),k(t,"class","-ml-1 mr-2 h-5 w-5"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(t,"stroke","currentColor")},m(e,r){m(e,t,r),u(t,n),m(e,s,r)},d(e){e&&(g(t),g(s))}}}function Os(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q=!1,Y=e[0].version+"";return q=C(e[11][0]),{c(){t=f("div"),n=f("h3"),n.textContent="Subscription Options",r=y(),o=f("div"),i=f("div"),a=f("label"),a.textContent="Version Pinning",l=y(),c=f("div"),d=f("div"),p=f("input"),x=y(),v=f("label"),v.textContent="Auto-update to latest version (recommended)",w=y(),M=f("div"),S=f("input"),z=y(),j=f("label"),A=h("Pin to current version (v"),B=h(Y),T=h(")"),H=y(),P=f("div"),I=f("div"),E=f("input"),D=y(),F=f("div"),F.innerHTML='<label for="auto-update-checkbox" class="font-medium text-gray-700">Enable automatic updates</label> <p class="text-gray-500">Receive notifications when the list is updated and apply changes automatically.</p>',N=y(),O=f("div"),R=f("button"),R.textContent="Cancel",V=y(),U=f("button"),U.textContent="Subscribe",k(n,"class","text-lg font-medium text-gray-900 mb-4"),k(a,"class","block text-sm font-medium text-gray-700"),k(p,"id","auto-update"),k(p,"type","radio"),p.__value=null,$(p,p.__value),k(p,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(v,"for","auto-update"),k(v,"class","ml-3 block text-sm text-gray-700"),k(d,"class","flex items-center"),k(S,"id","pin-version"),k(S,"type","radio"),S.__value=L=e[0].version,$(S,S.__value),k(S,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(j,"for","pin-version"),k(j,"class","ml-3 block text-sm text-gray-700"),k(M,"class","flex items-center"),k(c,"class","mt-2 space-y-2"),k(E,"id","auto-update-checkbox"),k(E,"type","checkbox"),k(E,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"),k(I,"class","flex items-center h-5"),k(F,"class","ml-3 text-sm"),k(P,"class","flex items-start"),k(o,"class","space-y-4"),k(R,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(U,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(O,"class","mt-6 flex justify-end space-x-3"),k(t,"class","bg-white shadow rounded-lg p-6 border-2 border-indigo-200"),q.p(p,S)},m(s,g){m(s,t,g),u(t,n),u(t,r),u(t,o),u(o,i),u(i,a),u(i,l),u(i,c),u(c,d),u(d,p),p.checked=p.__value===e[3],u(d,x),u(d,v),u(c,w),u(c,M),u(M,S),S.checked=S.__value===e[3],u(M,z),u(M,j),u(j,A),u(j,B),u(j,T),u(o,H),u(o,P),u(P,I),u(I,E),E.checked=e[4],u(P,D),u(P,F),u(t,N),u(t,O),u(O,R),u(O,V),u(O,U),J||(G=[b(p,"change",e[10]),b(S,"change",e[12]),b(E,"change",e[13]),b(R,"click",e[14]),b(U,"click",e[8])],J=!0)},p(e,t){8&t&&(p.checked=p.__value===e[3]),1&t&&L!==(L=e[0].version)&&(S.__value=L,$(S,S.__value),Q=!0),(Q||8&t)&&(S.checked=S.__value===e[3]),1&t&&Y!==(Y=e[0].version+"")&&_(B,Y),16&t&&(E.checked=e[4])},d(e){e&&g(t),q.r(),J=!1,s(G)}}}function Rs(e){let t,n,s,r,o,i;return{c(){t=f("div"),n=f("h4"),n.textContent="Governance Process",s=y(),r=f("a"),o=h("View governance documentation →"),k(n,"class","text-sm font-medium text-gray-900"),k(r,"href",i=e[0].governance_url),k(r,"target","_blank"),k(r,"class","mt-1 text-sm text-indigo-600 hover:text-indigo-500")},m(e,i){m(e,t,i),u(t,n),u(t,s),u(t,r),u(r,o)},p(e,t){1&t&&i!==(i=e[0].governance_url)&&k(r,"href",i)},d(e){e&&g(t)}}}function Vs(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <p class="mt-2 text-sm text-gray-500">No artists in this list yet.</p>',k(n,"class","text-center py-6")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Us(e){let t,n=W(e[0].artists),s=[];for(let t=0;t<n.length;t+=1)s[t]=Zs(Hs(e,n,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","space-y-3 max-h-96 overflow-y-auto")},m(e,n){m(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,r){if(1&r){let o;for(n=W(e[0].artists),o=0;o<n.length;o+=1){const i=Hs(e,n,o);s[o]?s[o].p(i,r):(s[o]=Zs(i),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&g(t),p(s,e)}}}function qs(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="animate-spin mx-auto h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-sm text-gray-500">Loading artists...</p>',k(n,"class","text-center py-6")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Js(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',k(n,"class","h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Gs(e){let t,n,s;return{c(){t=f("img"),l(t.src,n=e[15].artist.metadata.image)||k(t,"src",n),k(t,"alt",s=e[15].artist.canonical_name),k(t,"class","h-10 w-10 rounded-full object-cover")},m(e,n){m(e,t,n)},p(e,r){1&r&&!l(t.src,n=e[15].artist.metadata.image)&&k(t,"src",n),1&r&&s!==(s=e[15].artist.canonical_name)&&k(t,"alt",s)},d(e){e&&g(t)}}}function Qs(e){let t,n,s=e[15].artist.metadata.genres.slice(0,2).join(", ")+"";return{c(){t=f("div"),n=h(s),k(t,"class","text-xs text-gray-500")},m(e,s){m(e,t,s),u(t,n)},p(e,t){1&t&&s!==(s=e[15].artist.metadata.genres.slice(0,2).join(", ")+"")&&_(n,s)},d(e){e&&g(t)}}}function Ys(e){let t,n,s,r,o=e[18].name+"";return{c(){t=f("span"),n=h(o),s=y(),k(t,"class",r="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium "+e[18].color)},m(e,r){m(e,t,r),u(t,n),u(t,s)},p(e,s){1&s&&o!==(o=e[18].name+"")&&_(n,o),1&s&&r!==(r="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium "+e[18].color)&&k(t,"class",r)},d(e){e&&g(t)}}}function Ws(e){let t,n,s;return{c(){t=f("a"),n=h("View rationale"),k(t,"href",s=e[15].rationale_link),k(t,"target","_blank"),k(t,"class","text-xs text-indigo-600 hover:text-indigo-500")},m(e,s){m(e,t,s),u(t,n)},p(e,n){1&n&&s!==(s=e[15].rationale_link)&&k(t,"href",s)},d(e){e&&g(t)}}}function Zs(e){let t,n,s,r,o,i,a,l,c,d,x,v,b,w,C,$,M=e[15].artist.canonical_name+"",S=Xs(e[15].added_at)+"";function L(e,t){return e[15].artist.metadata.image?Gs:Js}let z=L(e),j=z(e),A=e[15].artist.metadata.genres&&e[15].artist.metadata.genres.length>0&&Qs(e),B=W(er(e[15].artist)),T=[];for(let t=0;t<B.length;t+=1)T[t]=Ys(Ps(e,B,t));let H=e[15].rationale_link&&Ws(e);return{c(){t=f("div"),n=f("div"),j.c(),s=y(),r=f("div"),o=f("div"),i=h(M),a=y(),A&&A.c(),l=y(),c=f("div");for(let e=0;e<T.length;e+=1)T[e].c();d=y(),x=f("div"),v=f("div"),b=h("Added "),w=h(S),C=y(),H&&H.c(),$=y(),k(o,"class","text-sm font-medium text-gray-900"),k(c,"class","flex space-x-1 mt-1"),k(n,"class","flex items-center space-x-3"),k(v,"class","text-xs text-gray-500"),k(x,"class","text-right"),k(t,"class","flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg")},m(e,g){m(e,t,g),u(t,n),j.m(n,null),u(n,s),u(n,r),u(r,o),u(o,i),u(r,a),A&&A.m(r,null),u(r,l),u(r,c);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(c,null);u(t,d),u(t,x),u(x,v),u(v,b),u(v,w),u(x,C),H&&H.m(x,null),u(t,$)},p(e,t){if(z===(z=L(e))&&j?j.p(e,t):(j.d(1),j=z(e),j&&(j.c(),j.m(n,s))),1&t&&M!==(M=e[15].artist.canonical_name+"")&&_(i,M),e[15].artist.metadata.genres&&e[15].artist.metadata.genres.length>0?A?A.p(e,t):(A=Qs(e),A.c(),A.m(r,l)):A&&(A.d(1),A=null),1&t){let n;for(B=W(er(e[15].artist)),n=0;n<B.length;n+=1){const s=Ps(e,B,n);T[n]?T[n].p(s,t):(T[n]=Ys(s),T[n].c(),T[n].m(c,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=B.length}1&t&&S!==(S=Xs(e[15].added_at)+"")&&_(w,S),e[15].rationale_link?H?H.p(e,t):(H=Ws(e),H.c(),H.m(x,null)):H&&(H.d(1),H=null)},d(e){e&&g(t),j.d(),A&&A.d(),p(T,e),H&&H.d()}}}function Ks(t){let n;function s(e,t){return e[0]?Es:Is}let r=s(t),o=r(t);return{c(){o.c(),n=v()},m(e,t){o.m(e,t),m(e,n,t)},p(e,[t]){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){e&&g(n),o.d(e)}}}function Xs(e){return new Date(e).toLocaleDateString()}function er(e){const t=[];return e.external_ids.spotify&&t.push({name:"Spotify",color:"bg-green-100 text-green-800"}),e.external_ids.apple&&t.push({name:"Apple",color:"bg-gray-100 text-gray-800"}),e.external_ids.musicbrainz&&t.push({name:"MusicBrainz",color:"bg-blue-100 text-blue-800"}),t}function tr(e,t,n){let s,r,o,i;d(e,Cs,e=>n(9,o=e)),d(e,ws,e=>n(1,i=e));let a=!1,l=null,c=!0;return e.$$.update=()=>{2&e.$$.dirty&&n(0,s=i.currentList),513&e.$$.dirty&&n(5,r=!!s&&o.has(s.id))},[s,i,a,l,c,r,function(){_s.clearCurrentList()},async function(){if(s)if(r){const e=await _s.unsubscribe(s.id);e.success||alert(`Failed to unsubscribe: ${e.message}`)}else n(2,a=!0)},async function(){if(!s)return;const e=await _s.getSubscriptionImpact(s.id);if(e.success){if(confirm(`This list will add ${e.data.artists_to_add} artists to your DNP list. Continue?`)){const e=await _s.subscribe(s.id,l||void 0,c);e.success?n(2,a=!1):alert(`Failed to subscribe: ${e.message}`)}}},o,function(){l=this.__value,n(3,l)},[[]],function(){l=this.__value,n(3,l)},function(){c=this.checked,n(4,c)},()=>n(2,a=!1)]}class nr extends re{constructor(e){super(),se(this,e,tr,Ks,o,{})}}function sr(e){let t,n;return{c(){t=f("div"),n=h(e[7]),k(t,"class","text-red-600 text-sm")},m(e,s){m(e,t,s),u(t,n)},p(e,t){128&t&&_(n,e[7])},d(e){e&&g(t)}}}function rr(e){let t;return{c(){t=h("Create List")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function or(e){let t,n,s,r;return{c(){t=x("svg"),n=x("circle"),s=x("path"),r=h("\n        Creating..."),k(n,"class","opacity-25"),k(n,"cx","12"),k(n,"cy","12"),k(n,"r","10"),k(n,"stroke","currentColor"),k(n,"stroke-width","4"),k(s,"class","opacity-75"),k(s,"fill","currentColor"),k(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),k(t,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"fill","none"),k(t,"viewBox","0 0 24 24")},m(e,o){m(e,t,o),u(t,n),u(t,s),m(e,r,o)},d(e){e&&(g(t),g(r))}}}function ir(t){let n,r,o,i,a,l,c,d,p,x,h,v,_,M,L,z,j,A,B,T,H,P,I,E,D,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be=t[7]&&sr(t);function we(e,t){return e[6]?or:rr}let ke=we(t),Ce=ke(t);return he=C(t[16][0]),{c(){n=f("form"),r=f("div"),o=f("label"),o.textContent="List Name *",i=y(),a=f("input"),l=y(),c=f("div"),d=f("label"),d.textContent="Description *",p=y(),x=f("textarea"),h=y(),v=f("div"),_=f("label"),_.textContent="Inclusion Criteria *",M=y(),L=f("textarea"),z=y(),j=f("p"),j.textContent="Criteria must be factual and neutral. Avoid subjective terms or personal opinions.",A=y(),B=f("div"),T=f("label"),T.textContent="Governance Documentation URL",H=y(),P=f("input"),I=y(),E=f("p"),E.textContent="Link to documentation explaining your list's governance process and appeals procedure.",D=y(),N=f("div"),O=f("label"),O.textContent="Update Cadence",R=y(),V=f("select"),U=f("option"),U.textContent="Daily",q=f("option"),q.textContent="Weekly",J=f("option"),J.textContent="Monthly",G=f("option"),G.textContent="As Needed",Q=y(),Y=f("div"),W=f("label"),W.textContent="Visibility",Z=y(),K=f("div"),X=f("div"),ee=f("input"),te=y(),ne=f("label"),ne.textContent="Public - Anyone can discover and subscribe",se=y(),re=f("div"),oe=f("input"),ie=y(),ae=f("label"),ae.textContent="Private - Only you can manage, others need direct link",le=y(),be&&be.c(),ce=y(),de=f("div"),ue=f("button"),ue.textContent="Cancel",me=y(),ge=f("button"),Ce.c(),fe=y(),xe=f("div"),xe.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-yellow-800">Community List Guidelines</h3> <div class="mt-2 text-sm text-yellow-700"><ul class="list-disc list-inside space-y-1"><li>Use neutral, factual language in criteria</li> <li>Provide clear governance and appeals processes</li> <li>Maintain transparency about list updates</li> <li>Respect platform terms of service</li> <li>Focus on user preferences, not personal judgments</li></ul></div></div></div>',k(o,"for","name"),k(o,"class","block text-sm font-medium text-gray-700"),k(a,"id","name"),k(a,"type","text"),k(a,"placeholder","e.g., Controversial Artists List"),k(a,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),a.required=!0,k(d,"for","description"),k(d,"class","block text-sm font-medium text-gray-700"),k(x,"id","description"),k(x,"rows","3"),k(x,"placeholder","Describe the purpose and scope of this list..."),k(x,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),x.required=!0,k(_,"for","criteria"),k(_,"class","block text-sm font-medium text-gray-700"),k(L,"id","criteria"),k(L,"rows","4"),k(L,"placeholder","Define clear, neutral criteria for including artists in this list. Avoid subjective language or personal opinions."),k(L,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),L.required=!0,k(j,"class","mt-1 text-xs text-gray-500"),k(T,"for","governance-url"),k(T,"class","block text-sm font-medium text-gray-700"),k(P,"id","governance-url"),k(P,"type","url"),k(P,"placeholder","https://example.com/governance-process"),k(P,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(E,"class","mt-1 text-xs text-gray-500"),k(O,"for","update-cadence"),k(O,"class","block text-sm font-medium text-gray-700"),U.__value="daily",$(U,U.__value),q.__value="weekly",$(q,q.__value),J.__value="monthly",$(J,J.__value),G.__value="as-needed",$(G,G.__value),k(V,"id","update-cadence"),k(V,"class","mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),void 0===t[4]&&F(()=>t[14].call(V)),k(W,"class","block text-sm font-medium text-gray-700"),k(ee,"id","public"),k(ee,"type","radio"),ee.__value="public",$(ee,ee.__value),k(ee,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(ne,"for","public"),k(ne,"class","ml-3 block text-sm text-gray-700"),k(X,"class","flex items-center"),k(oe,"id","private"),k(oe,"type","radio"),oe.__value="private",$(oe,oe.__value),k(oe,"class","focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"),k(ae,"for","private"),k(ae,"class","ml-3 block text-sm text-gray-700"),k(re,"class","flex items-center"),k(K,"class","mt-2 space-y-2"),k(ue,"type","button"),k(ue,"class","px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(ge,"type","submit"),ge.disabled=pe=t[6]||!t[0].trim()||!t[1].trim()||!t[2].trim(),k(ge,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"),k(de,"class","flex justify-end space-x-3"),k(xe,"class","bg-yellow-50 border border-yellow-200 rounded-md p-4"),k(n,"class","space-y-6"),he.p(ee,oe)},m(e,s){m(e,n,s),u(n,r),u(r,o),u(r,i),u(r,a),$(a,t[0]),u(n,l),u(n,c),u(c,d),u(c,p),u(c,x),$(x,t[1]),u(n,h),u(n,v),u(v,_),u(v,M),u(v,L),$(L,t[2]),u(v,z),u(v,j),u(n,A),u(n,B),u(B,T),u(B,H),u(B,P),$(P,t[3]),u(B,I),u(B,E),u(n,D),u(n,N),u(N,O),u(N,R),u(N,V),u(V,U),u(V,q),u(V,J),u(V,G),S(V,t[4],!0),u(n,Q),u(n,Y),u(Y,W),u(Y,Z),u(Y,K),u(K,X),u(X,ee),ee.checked=ee.__value===t[5],u(X,te),u(X,ne),u(K,se),u(K,re),u(re,oe),oe.checked=oe.__value===t[5],u(re,ie),u(re,ae),u(n,le),be&&be.m(n,null),u(n,ce),u(n,de),u(de,ue),u(de,me),u(de,ge),Ce.m(ge,null),u(n,fe),u(n,xe),ye||(ve=[b(a,"input",t[10]),b(x,"input",t[11]),b(L,"input",t[12]),b(P,"input",t[13]),b(V,"change",t[14]),b(ee,"change",t[15]),b(oe,"change",t[17]),b(ue,"click",t[18]),b(n,"submit",w(t[9]))],ye=!0)},p(e,[t]){1&t&&a.value!==e[0]&&$(a,e[0]),2&t&&$(x,e[1]),4&t&&$(L,e[2]),8&t&&P.value!==e[3]&&$(P,e[3]),16&t&&S(V,e[4]),32&t&&(ee.checked=ee.__value===e[5]),32&t&&(oe.checked=oe.__value===e[5]),e[7]?be?be.p(e,t):(be=sr(e),be.c(),be.m(n,ce)):be&&(be.d(1),be=null),ke!==(ke=we(e))&&(Ce.d(1),Ce=ke(e),Ce&&(Ce.c(),Ce.m(ge,null))),71&t&&pe!==(pe=e[6]||!e[0].trim()||!e[1].trim()||!e[2].trim())&&(ge.disabled=pe)},i:e,o:e,d(e){e&&g(n),be&&be.d(),Ce.d(),he.r(),ye=!1,s(ve)}}}function ar(e,t,n){const s=B();let r="",o="",i="",a="",l="monthly",c="public",d=!1,u="";return[r,o,i,a,l,c,d,u,s,async function(){if(!r.trim()||!o.trim()||!i.trim())return void n(7,u="Please fill in all required fields");n(6,d=!0),n(7,u="");const e=await _s.createList({name:r.trim(),description:o.trim(),criteria:i.trim(),governance_url:a.trim()||void 0,update_cadence:l,visibility:c});e.success?(n(0,r=""),n(1,o=""),n(2,i=""),n(3,a=""),n(4,l="monthly"),n(5,c="public"),s("listCreated")):n(7,u=e.message||"Failed to create community list"),n(6,d=!1)},function(){r=this.value,n(0,r)},function(){o=this.value,n(1,o)},function(){i=this.value,n(2,i)},function(){a=this.value,n(3,a)},function(){l=L(this),n(4,l)},function(){c=this.__value,n(5,c)},[[]],function(){c=this.__value,n(5,c)},()=>s("listCreated")]}class lr extends re{constructor(e){super(),se(this,e,ar,ir,o,{})}}function cr(e,t,n){const s=e.slice();return s[10]=t[n],s}function dr(e){let t,n,s=W(e[0]),r=[];for(let t=0;t<s.length;t+=1)r[t]=gr(cr(e,s,t));return{c(){t=f("div"),n=f("ul");for(let e=0;e<r.length;e+=1)r[e].c();k(n,"class","divide-y divide-gray-200"),k(t,"class","bg-white shadow overflow-hidden sm:rounded-md")},m(e,s){m(e,t,s),u(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null)},p(e,t){if(15&t){let o;for(s=W(e[0]),o=0;o<s.length;o+=1){const i=cr(e,s,o);r[o]?r[o].p(i,t):(r[o]=gr(i),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(e){e&&g(t),p(r,e)}}}function ur(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No subscriptions yet</h3> <p class="mt-1 text-sm text-gray-500">Browse community lists to find ones that match your preferences.</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function mr(e){let t,n,s,r=e[10].version_pinned+"";return{c(){t=h("(pinned to v"),n=h(r),s=h(")")},m(e,r){m(e,t,r),m(e,n,r),m(e,s,r)},p(e,t){1&t&&r!==(r=e[10].version_pinned+"")&&_(n,r)},d(e){e&&(g(t),g(n),g(s))}}}function gr(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe,he,ye,ve,be,we,ke,Ce,_e,$e,Me,Se,Le,ze,je,Ae=e[10].list.name+"",Be=e[10].list.update_cadence+"",Te=fr(e[10].created_at)+"",He=e[10].list.version+"",Pe=e[10].list.description+"",Ie=e[10].list.version+"",Ee=e[10].version_pinned&&mr(e);function De(){return e[5](e[10])}function Fe(){return e[6](e[10])}function Ne(){return e[7](e[10])}function Oe(){return e[8](e[10])}function Re(...t){return e[9](e[10],...t)}return{c(){t=f("li"),n=f("div"),r=f("div"),o=f("div"),i=f("div"),i.innerHTML='<div class="h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"><svg class="h-5 w-5 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div>',a=y(),l=f("div"),c=f("div"),d=f("p"),p=h(Ae),x=y(),v=f("span"),w=h(Be),$=y(),M=f("div"),S=f("p"),L=h("Subscribed "),z=h(Te),j=h("\n                        • v"),A=h(He),B=y(),Ee&&Ee.c(),T=y(),H=f("p"),P=h(Pe),I=y(),E=f("div"),D=f("button"),D.textContent="View Details",F=y(),N=f("button"),N.textContent="Unsubscribe",O=y(),R=f("div"),V=f("div"),U=f("div"),q=f("label"),q.textContent="Version Preference",J=y(),G=f("div"),Q=f("div"),Y=f("input"),K=y(),X=f("label"),ee=h("Auto-update to latest"),ne=y(),se=f("div"),re=f("input"),ae=y(),le=f("label"),ce=h("Pin to v"),de=h(Ie),me=y(),ge=f("div"),pe=f("label"),pe.textContent="Update Notifications",fe=y(),xe=f("div"),he=f("div"),ye=f("input"),we=y(),ke=f("div"),Ce=f("label"),_e=h("Enable automatic updates"),Me=y(),Se=f("p"),Se.textContent="Apply changes when the list is updated",Le=y(),k(i,"class","flex-shrink-0"),k(d,"class","text-sm font-medium text-gray-900"),k(v,"class",C="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+xr(e[10].list.update_cadence)),k(c,"class","flex items-center"),k(M,"class","mt-1 flex items-center text-sm text-gray-500"),k(H,"class","mt-1 text-sm text-gray-600 line-clamp-1"),k(l,"class","ml-4"),k(o,"class","flex items-center"),k(D,"class","text-indigo-600 hover:text-indigo-900 text-sm font-medium"),k(N,"class","text-red-600 hover:text-red-900 text-sm font-medium"),k(E,"class","flex items-center space-x-2"),k(r,"class","flex items-center justify-between"),k(q,"class","block text-xs font-medium text-gray-700 mb-2"),k(Y,"id",W="auto-"+e[10].list_id),k(Y,"type","radio"),Y.checked=Z=!e[10].version_pinned,k(Y,"class","focus:ring-indigo-500 h-3 w-3 text-indigo-600 border-gray-300"),k(X,"for",te="auto-"+e[10].list_id),k(X,"class","ml-2 block text-xs text-gray-700"),k(Q,"class","flex items-center"),k(re,"id",oe="pin-"+e[10].list_id),k(re,"type","radio"),re.checked=ie=!!e[10].version_pinned,k(re,"class","focus:ring-indigo-500 h-3 w-3 text-indigo-600 border-gray-300"),k(le,"for",ue="pin-"+e[10].list_id),k(le,"class","ml-2 block text-xs text-gray-700"),k(se,"class","flex items-center"),k(G,"class","space-y-2"),k(pe,"class","block text-xs font-medium text-gray-700 mb-2"),k(ye,"id",ve="auto-update-"+e[10].list_id),k(ye,"type","checkbox"),ye.checked=be=e[10].auto_update,k(ye,"class","focus:ring-indigo-500 h-3 w-3 text-indigo-600 border-gray-300 rounded"),k(he,"class","flex items-center h-4"),k(Ce,"for",$e="auto-update-"+e[10].list_id),k(Ce,"class","font-medium text-gray-700"),k(Se,"class","text-gray-500"),k(ke,"class","ml-2 text-xs"),k(xe,"class","flex items-start"),k(V,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),k(R,"class","mt-4 pt-4 border-t border-gray-200"),k(n,"class","px-4 py-4 sm:px-6")},m(e,s){m(e,t,s),u(t,n),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(l,c),u(c,d),u(d,p),u(c,x),u(c,v),u(v,w),u(l,$),u(l,M),u(M,S),u(S,L),u(S,z),u(S,j),u(S,A),u(S,B),Ee&&Ee.m(S,null),u(l,T),u(l,H),u(H,P),u(r,I),u(r,E),u(E,D),u(E,F),u(E,N),u(n,O),u(n,R),u(R,V),u(V,U),u(U,q),u(U,J),u(U,G),u(G,Q),u(Q,Y),u(Q,K),u(Q,X),u(X,ee),u(G,ne),u(G,se),u(se,re),u(se,ae),u(se,le),u(le,ce),u(le,de),u(V,me),u(V,ge),u(ge,pe),u(ge,fe),u(ge,xe),u(xe,he),u(he,ye),u(xe,we),u(xe,ke),u(ke,Ce),u(Ce,_e),u(ke,Me),u(ke,Se),u(t,Le),ze||(je=[b(D,"click",De),b(N,"click",Fe),b(Y,"change",Ne),b(re,"change",Oe),b(ye,"change",Re)],ze=!0)},p(t,n){e=t,1&n&&Ae!==(Ae=e[10].list.name+"")&&_(p,Ae),1&n&&Be!==(Be=e[10].list.update_cadence+"")&&_(w,Be),1&n&&C!==(C="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+xr(e[10].list.update_cadence))&&k(v,"class",C),1&n&&Te!==(Te=fr(e[10].created_at)+"")&&_(z,Te),1&n&&He!==(He=e[10].list.version+"")&&_(A,He),e[10].version_pinned?Ee?Ee.p(e,n):(Ee=mr(e),Ee.c(),Ee.m(S,null)):Ee&&(Ee.d(1),Ee=null),1&n&&Pe!==(Pe=e[10].list.description+"")&&_(P,Pe),1&n&&W!==(W="auto-"+e[10].list_id)&&k(Y,"id",W),1&n&&Z!==(Z=!e[10].version_pinned)&&(Y.checked=Z),1&n&&te!==(te="auto-"+e[10].list_id)&&k(X,"for",te),1&n&&oe!==(oe="pin-"+e[10].list_id)&&k(re,"id",oe),1&n&&ie!==(ie=!!e[10].version_pinned)&&(re.checked=ie),1&n&&Ie!==(Ie=e[10].list.version+"")&&_(de,Ie),1&n&&ue!==(ue="pin-"+e[10].list_id)&&k(le,"for",ue),1&n&&ve!==(ve="auto-update-"+e[10].list_id)&&k(ye,"id",ve),1&n&&be!==(be=e[10].auto_update)&&(ye.checked=be),1&n&&$e!==($e="auto-update-"+e[10].list_id)&&k(Ce,"for",$e)},d(e){e&&g(t),Ee&&Ee.d(),ze=!1,s(je)}}}function pr(t){let n,s,r,o,i;function a(e,t){return 0===e[0].length?ur:dr}let l=a(t),c=l(t);return{c(){n=f("div"),s=f("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900">My Subscriptions</h3> <p class="text-sm text-gray-500">Manage your community list subscriptions and update preferences.</p>',r=y(),c.c(),o=y(),i=f("div"),i.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Managing Your Subscriptions</h3> <div class="mt-2 text-sm text-blue-700"><ul class="list-disc list-inside space-y-1"><li><strong>Auto-update:</strong> Automatically apply changes when lists are updated</li> <li><strong>Version pinning:</strong> Stay on a specific version to avoid unexpected changes</li> <li><strong>Notifications:</strong> Get notified about list updates and changes</li> <li><strong>Impact preview:</strong> See what changes will be made before they&#39;re applied</li></ul></div></div></div>',k(i,"class","bg-blue-50 border border-blue-200 rounded-md p-4"),k(n,"class","space-y-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),c.m(n,null),u(n,o),u(n,i)},p(e,[t]){l===(l=a(e))&&c?c.p(e,t):(c.d(1),c=l(e),c&&(c.c(),c.m(n,o)))},i:e,o:e,d(e){e&&g(n),c.d()}}}function fr(e){return new Date(e).toLocaleDateString()}function xr(e){switch(e.toLowerCase()){case"daily":return"text-red-600 bg-red-100";case"weekly":return"text-yellow-600 bg-yellow-100";case"monthly":return"text-green-600 bg-green-100";case"as-needed":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}}function hr(e,t,n){let s,r;async function o(e,t,n){const s=await _s.updateSubscription(e,t,n);s.success||alert(`Failed to update subscription: ${s.message}`)}async function i(e,t){if(confirm(`Are you sure you want to unsubscribe from "${t}"?`)){const t=await _s.unsubscribe(e);t.success||alert(`Failed to unsubscribe: ${t.message}`)}}async function a(e){await _s.fetchListDetails(e)}d(e,ws,e=>n(4,r=e));return e.$$.update=()=>{16&e.$$.dirty&&n(0,s=r.subscriptions)},[s,o,i,a,r,e=>a(e.list_id),e=>i(e.list_id,e.list.name),e=>o(e.list_id,void 0,e.auto_update),e=>o(e.list_id,e.list.version,e.auto_update),(e,t)=>o(e.list_id,e.version_pinned,t.target.checked)]}class yr extends re{constructor(e){super(),se(this,e,hr,pr,o,{})}}function vr(e,t,n){const s=e.slice();return s[14]=t[n],s}function br(t){let n,s,r,o,i;return o=new lr({}),o.$on("listCreated",t[9]),{c(){n=f("div"),s=f("h3"),s.textContent="Create Community List",r=y(),X(o.$$.fragment),k(s,"class","text-lg font-medium text-gray-900 mb-4"),k(n,"class","mb-6 bg-white shadow rounded-lg p-6")},m(e,t){m(e,n,t),u(n,s),u(n,r),ee(o,n,null),i=!0},p:e,i(e){i||(Q(o.$$.fragment,e),i=!0)},o(e){Y(o.$$.fragment,e),i=!1},d(e){e&&g(n),te(o)}}}function wr(t){let n,s;return n=new yr({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function kr(e){let t,n,s,r;const o=[_r,Cr],i=[];function a(e,t){return e[3].currentList?0:1}return t=a(e),n=i[t]=o[t](e),{c(){n.c(),s=v()},m(e,n){i[t].m(e,n),m(e,s,n),r=!0},p(e,r){let l=t;t=a(e),t===l?i[t].p(e,r):(J(),Y(i[l],1,1,()=>{i[l]=null}),G(),n=i[t],n?n.p(e,r):(n=i[t]=o[t](e),n.c()),Q(n,1),n.m(s.parentNode,s))},i(e){r||(Q(n),r=!0)},o(e){Y(n),r=!1},d(e){e&&g(s),i[t].d(e)}}}function Cr(e){let t,n,r,o,i,a,l,c,d,p,x,h,v,w,C,_,M,S,L,z,j,A,B,T,H,P,I,E;const D=[Lr,Sr,Mr,$r],F=[];function N(e,t){return e[3].isLoading?0:e[3].error?1:0===e[4].length?2:3}return T=N(e),H=F[T]=D[T](e),{c(){t=f("div"),n=f("div"),r=f("div"),o=f("div"),i=f("label"),i.textContent="Search lists",a=y(),l=f("div"),c=f("div"),c.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',d=y(),p=f("input"),h=y(),v=f("div"),w=f("label"),w.textContent="Sort by",C=y(),_=f("select"),M=f("option"),M.textContent="Recently Updated",S=f("option"),S.textContent="Newest First",L=f("option"),L.textContent="Name A-Z",z=f("option"),z.textContent="Name Z-A",j=f("option"),j.textContent="Most Artists",A=f("option"),A.textContent="Most Subscribers",B=y(),H.c(),k(i,"for","search"),k(i,"class","sr-only"),k(c,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),k(p,"id","search"),k(p,"type","text"),k(p,"placeholder","Search lists by name, description, or criteria..."),p.value=x=e[3].searchQuery,k(p,"class","block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),k(l,"class","relative"),k(o,"class","flex-1"),k(w,"for","sort"),k(w,"class","sr-only"),M.__value="updated_at:desc",$(M,M.__value),S.__value="created_at:desc",$(S,S.__value),L.__value="name:asc",$(L,L.__value),z.__value="name:desc",$(z,z.__value),j.__value="artist_count:desc",$(j,j.__value),A.__value="subscriber_count:desc",$(A,A.__value),k(_,"id","sort"),k(_,"class","block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"),k(v,"class","sm:w-48"),k(r,"class","flex flex-col sm:flex-row gap-4"),k(n,"class","bg-white shadow rounded-lg p-4"),k(t,"class","space-y-6")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(l,c),u(l,d),u(l,p),u(r,h),u(r,v),u(v,w),u(v,C),u(v,_),u(_,M),u(_,S),u(_,L),u(_,z),u(_,j),u(_,A),u(t,B),F[T].m(t,null),P=!0,I||(E=[b(p,"input",e[6]),b(_,"change",e[7])],I=!0)},p(e,n){(!P||8&n&&x!==(x=e[3].searchQuery)&&p.value!==x)&&(p.value=x);let s=T;T=N(e),T===s?F[T].p(e,n):(J(),Y(F[s],1,1,()=>{F[s]=null}),G(),H=F[T],H?H.p(e,n):(H=F[T]=D[T](e),H.c()),Q(H,1),H.m(t,null))},i(e){P||(Q(H),P=!0)},o(e){Y(H),P=!1},d(e){e&&g(t),F[T].d(),I=!1,s(E)}}}function _r(t){let n,s;return n=new nr({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function $r(e){let t,n,s=[],r=new Map,o=W(e[4]);const i=e=>e[14].id;for(let t=0;t<o.length;t+=1){let n=vr(e,o,t),a=i(n);r.set(a,s[t]=zr(a,n))}return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();k(t,"class","grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3")},m(e,r){m(e,t,r);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);n=!0},p(e,n){16&n&&(o=W(e[4]),J(),s=K(s,n,i,0,e,o,r,t,Z,zr,null,vr),G())},i(e){if(!n){for(let e=0;e<o.length;e+=1)Q(s[e]);n=!0}},o(e){for(let e=0;e<s.length;e+=1)Y(s[e]);n=!1},d(e){e&&g(t);for(let e=0;e<s.length;e+=1)s[e].d()}}}function Mr(t){let n;function s(e,t){return 0===e[3].lists.length?Ar:jr}let r=s(t),o=r(t);return{c(){n=f("div"),o.c(),k(n,"class","text-center py-12")},m(e,t){m(e,n,t),o.m(n,null)},p(e,t){r===(r=s(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n,null)))},i:e,o:e,d(e){e&&g(n),o.d()}}}function Sr(t){let n,s,r,o,i,a,l,c,d,p,v=t[3].error+"";return{c(){n=f("div"),s=x("svg"),r=x("path"),o=y(),i=f("p"),a=h(v),l=y(),c=f("button"),c.textContent="Try again",k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","2"),k(r,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),k(s,"class","mx-auto h-8 w-8 text-red-400"),k(s,"fill","none"),k(s,"viewBox","0 0 24 24"),k(s,"stroke","currentColor"),k(i,"class","mt-2 text-sm text-red-600"),k(c,"class","mt-2 text-sm text-indigo-600 hover:text-indigo-500"),k(n,"class","text-center py-12")},m(e,g){m(e,n,g),u(n,s),u(s,r),u(n,o),u(n,i),u(i,a),u(n,l),u(n,c),d||(p=b(c,"click",t[12]),d=!0)},p(e,t){8&t&&v!==(v=e[3].error+"")&&_(a,v)},i:e,o:e,d(e){e&&g(n),d=!1,p()}}}function Lr(t){let n;return{c(){n=f("div"),n.innerHTML='<svg class="animate-spin mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-sm text-gray-500">Loading community lists...</p>',k(n,"class","text-center py-12")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}function zr(e,t){let n,s,r;return s=new Ts({props:{list:t[14]}}),{key:e,first:null,c(){n=v(),X(s.$$.fragment),this.first=n},m(e,t){m(e,n,t),ee(s,e,t),r=!0},p(e,n){t=e;const r={};16&n&&(r.list=t[14]),s.$set(r)},i(e){r||(Q(s.$$.fragment,e),r=!0)},o(e){Y(s.$$.fragment,e),r=!1},d(e){e&&g(n),te(s,e)}}}function jr(t){let n,s,r,o,i,a;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No lists match your search",i=y(),a=f("p"),a.textContent="Try adjusting your search terms or filters.",k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500")},m(e,t){m(e,n,t),u(n,s),m(e,r,t),m(e,o,t),m(e,i,t),m(e,a,t)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a))}}}function Ar(t){let n,s,r,o,i,a,l,c,d,p,h;return{c(){n=x("svg"),s=x("path"),r=y(),o=f("h3"),o.textContent="No community lists yet",i=y(),a=f("p"),a.textContent="Be the first to create a community list.",l=y(),c=f("div"),d=f("button"),d.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n                  Create your first list',k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width","2"),k(s,"d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"),k(n,"class","mx-auto h-12 w-12 text-gray-400"),k(n,"fill","none"),k(n,"viewBox","0 0 24 24"),k(n,"stroke","currentColor"),k(o,"class","mt-2 text-sm font-medium text-gray-900"),k(a,"class","mt-1 text-sm text-gray-500"),k(d,"class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(c,"class","mt-6")},m(e,g){m(e,n,g),u(n,s),m(e,r,g),m(e,o,g),m(e,i,g),m(e,a,g),m(e,l,g),m(e,c,g),u(c,d),p||(h=b(d,"click",t[13]),p=!0)},p:e,d(e){e&&(g(n),g(r),g(o),g(i),g(a),g(l),g(c)),p=!1,h()}}}function Br(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D=e[2].size+"",F=e[1]&&br(e);const N=[kr,wr],O=[];function R(e,t){return"browse"===e[0]?0:"subscriptions"===e[0]?1:-1}return~(A=R(e))&&(B=O[A]=N[A](e)),{c(){t=f("div"),n=f("div"),r=f("div"),o=f("div"),o.innerHTML='<h2 class="text-2xl font-bold text-gray-900">Community Lists</h2> <p class="mt-1 text-sm text-gray-600">Discover and subscribe to community-curated blocklists.</p>',i=y(),a=f("button"),a.innerHTML='<svg class="-ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\n        Create List',l=y(),F&&F.c(),c=y(),d=f("div"),p=f("nav"),x=f("button"),v=h("Browse Lists"),C=y(),$=f("button"),M=h("My Subscriptions ("),S=h(D),L=h(")"),j=y(),B&&B.c(),T=y(),H=f("div"),H.innerHTML='<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">About Community Lists</h3> <div class="mt-2 text-sm text-blue-700"><p>Community lists are curated blocklists created and maintained by other users. \n            Each list has clear criteria and governance processes to ensure quality and transparency.</p> <ul class="list-disc list-inside mt-2 space-y-1"><li>Subscribe to lists that match your preferences</li> <li>Pin specific versions or enable auto-updates</li> <li>Preview impact before subscribing</li> <li>Appeal decisions through structured processes</li></ul></div></div></div>',k(a,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(r,"class","flex justify-between items-center"),k(n,"class","mb-6"),k(x,"class",w="py-4 px-1 border-b-2 font-medium text-sm "+("browse"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k($,"class",z="py-4 px-1 border-b-2 font-medium text-sm "+("subscriptions"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(p,"class","flex space-x-8 px-6"),k(p,"aria-label","Tabs"),k(d,"class","bg-white shadow-sm rounded-lg mb-6"),k(H,"class","mt-8 bg-blue-50 border border-blue-200 rounded-md p-4"),k(t,"class","px-4 py-6 sm:px-0")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(r,i),u(r,a),u(t,l),F&&F.m(t,null),u(t,c),u(t,d),u(d,p),u(p,x),u(x,v),u(p,C),u(p,$),u($,M),u($,S),u($,L),u(t,j),~A&&O[A].m(t,null),u(t,T),u(t,H),P=!0,I||(E=[b(a,"click",e[8]),b(x,"click",e[10]),b($,"click",e[11])],I=!0)},p(e,[n]){e[1]?F?(F.p(e,n),2&n&&Q(F,1)):(F=br(e),F.c(),Q(F,1),F.m(t,c)):F&&(J(),Y(F,1,1,()=>{F=null}),G()),(!P||1&n&&w!==(w="py-4 px-1 border-b-2 font-medium text-sm "+("browse"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(x,"class",w),(!P||4&n)&&D!==(D=e[2].size+"")&&_(S,D),(!P||1&n&&z!==(z="py-4 px-1 border-b-2 font-medium text-sm "+("subscriptions"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k($,"class",z);let s=A;A=R(e),A===s?~A&&O[A].p(e,n):(B&&(J(),Y(O[s],1,1,()=>{O[s]=null}),G()),~A?(B=O[A],B?B.p(e,n):(B=O[A]=N[A](e),B.c()),Q(B,1),B.m(t,T)):B=null)},i(e){P||(Q(F),Q(B),P=!0)},o(e){Y(F),Y(B),P=!1},d(e){e&&g(t),F&&F.d(),~A&&O[A].d(),I=!1,s(E)}}}function Tr(e,t,n){let s,r,o;d(e,Cs,e=>n(2,s=e)),d(e,ws,e=>n(3,r=e)),d(e,ks,e=>n(4,o=e));let i="browse",a=!1;function l(e){n(0,i=e),n(1,a=!1),_s.clearCurrentList()}A(async()=>{await _s.fetchLists(),await _s.fetchSubscriptions()});return[i,a,s,r,o,l,function(e){const t=e.target;_s.updateSearch(t.value)},function(e){const t=e.target,[n,s]=t.value.split(":");_s.updateSort(n,s)},()=>n(1,a=!a),()=>n(1,a=!1),()=>l("browse"),()=>l("subscriptions"),()=>_s.fetchLists(),()=>n(1,a=!0)]}class Hr extends re{constructor(e){super(),se(this,e,Tr,Br,o,{})}}function Pr(t){let n,s;return n=new Hr({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function Ir(t){let n,s;return n=new bs({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function Er(t){let n,s;return n=new Zt({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function Dr(t){let n,s;return n=new Re({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),s=!0},p:e,i(e){s||(Q(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){te(n,e)}}}function Fr(t){let n,r,o,i,a,l,c,d,p,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,J,G,Q,Y,W,Z,K,X,ee,te,ne,se,re,oe,ie,ae,le,ce,de,ue,me,ge,pe,fe,xe=t[3].length+"",he=t[4]?"Active":"Setup Required";function ye(e,t){return e[4]?Nr:Or}let ve=ye(t),be=ve(t);function we(e,t){return e[4]&&e[2]>0?Vr:Rr}let ke=we(t),Ce=ke(t);return{c(){n=f("div"),r=f("div"),o=f("div"),i=f("div"),a=f("div"),l=f("div"),l.innerHTML='<svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>',c=y(),d=f("div"),p=f("dl"),v=f("dt"),v.textContent="Connected Services\n                    ",w=f("dd"),C=h(xe),$=y(),M=f("div"),S=f("div"),L=f("button"),L.textContent="Manage connections",z=y(),j=f("div"),A=f("div"),B=f("div"),T=f("div"),T.innerHTML='<svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"></path></svg>',H=y(),P=f("div"),I=f("dl"),E=f("dt"),E.textContent="Blocked Artists\n                    ",D=f("dd"),F=h(t[2]),N=y(),O=f("div"),R=f("div"),V=f("button"),V.textContent="Manage DNP list",U=y(),q=f("div"),J=f("div"),G=f("div"),Q=f("div"),Y=x("svg"),W=x("path"),K=y(),X=f("div"),ee=f("dl"),te=f("dt"),te.textContent="System Status\n                    ",ne=f("dd"),se=h(he),re=y(),oe=f("div"),ie=f("div"),be.c(),ae=y(),le=f("div"),ce=f("h3"),ce.textContent="Quick Actions",de=y(),ue=f("div"),me=f("button"),me.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> <span class="mt-2 block text-sm font-medium text-gray-900">Add Artist to DNP List</span>',ge=y(),Ce.c(),k(l,"class","flex-shrink-0"),k(v,"class","text-sm font-medium text-gray-500 truncate"),k(w,"class","text-lg font-medium text-gray-900"),k(d,"class","ml-5 w-0 flex-1"),k(a,"class","flex items-center"),k(i,"class","p-5"),k(L,"class","font-medium text-indigo-700 hover:text-indigo-900"),k(S,"class","text-sm"),k(M,"class","bg-gray-50 px-5 py-3"),k(o,"class","bg-white overflow-hidden shadow rounded-lg"),k(T,"class","flex-shrink-0"),k(E,"class","text-sm font-medium text-gray-500 truncate"),k(D,"class","text-lg font-medium text-gray-900"),k(P,"class","ml-5 w-0 flex-1"),k(B,"class","flex items-center"),k(A,"class","p-5"),k(V,"class","font-medium text-indigo-700 hover:text-indigo-900"),k(R,"class","text-sm"),k(O,"class","bg-gray-50 px-5 py-3"),k(j,"class","bg-white overflow-hidden shadow rounded-lg"),k(W,"stroke-linecap","round"),k(W,"stroke-linejoin","round"),k(W,"stroke-width","2"),k(W,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),k(Y,"class",Z="h-6 w-6 "+(t[4]?"text-green-400":"text-gray-400")),k(Y,"fill","none"),k(Y,"viewBox","0 0 24 24"),k(Y,"stroke","currentColor"),k(Q,"class","flex-shrink-0"),k(te,"class","text-sm font-medium text-gray-500 truncate"),k(ne,"class","text-lg font-medium text-gray-900"),k(X,"class","ml-5 w-0 flex-1"),k(G,"class","flex items-center"),k(J,"class","p-5"),k(ie,"class","text-sm"),k(oe,"class","bg-gray-50 px-5 py-3"),k(q,"class","bg-white overflow-hidden shadow rounded-lg"),k(r,"class","grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"),k(ce,"class","text-lg leading-6 font-medium text-gray-900 mb-4"),k(me,"class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),k(ue,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),k(le,"class","mt-8"),k(n,"class","px-4 py-6 sm:px-0")},m(e,s){m(e,n,s),u(n,r),u(r,o),u(o,i),u(i,a),u(a,l),u(a,c),u(a,d),u(d,p),u(p,v),u(p,w),u(w,C),u(o,$),u(o,M),u(M,S),u(S,L),u(r,z),u(r,j),u(j,A),u(A,B),u(B,T),u(B,H),u(B,P),u(P,I),u(I,E),u(I,D),u(D,F),u(j,N),u(j,O),u(O,R),u(R,V),u(r,U),u(r,q),u(q,J),u(J,G),u(G,Q),u(Q,Y),u(Y,W),u(G,K),u(G,X),u(X,ee),u(ee,te),u(ee,ne),u(ne,se),u(q,re),u(q,oe),u(oe,ie),be.m(ie,null),u(n,ae),u(n,le),u(le,ce),u(le,de),u(le,ue),u(ue,me),u(ue,ge),Ce.m(ue,null),pe||(fe=[b(L,"click",t[12]),b(V,"click",t[13]),b(me,"click",t[15])],pe=!0)},p(e,t){8&t&&xe!==(xe=e[3].length+"")&&_(C,xe),4&t&&_(F,e[2]),16&t&&Z!==(Z="h-6 w-6 "+(e[4]?"text-green-400":"text-gray-400"))&&k(Y,"class",Z),16&t&&he!==(he=e[4]?"Active":"Setup Required")&&_(se,he),ve===(ve=ye(e))&&be?be.p(e,t):(be.d(1),be=ve(e),be&&(be.c(),be.m(ie,null))),ke===(ke=we(e))&&Ce?Ce.p(e,t):(Ce.d(1),Ce=ke(e),Ce&&(Ce.c(),Ce.m(ue,null)))},i:e,o:e,d(e){e&&g(n),be.d(),Ce.d(),pe=!1,s(fe)}}}function Nr(t){let n;return{c(){n=f("span"),n.textContent="Ready to use",k(n,"class","text-green-700")},m(e,t){m(e,n,t)},p:e,d(e){e&&g(n)}}}function Or(t){let n,s,r;return{c(){n=f("button"),n.textContent="Connect Spotify",k(n,"class","font-medium text-indigo-700 hover:text-indigo-900")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[14]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function Rr(t){let n,s,r;return{c(){n=f("button"),n.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg> <span class="mt-2 block text-sm font-medium text-gray-900">Connect Spotify</span>',k(n,"class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[17]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function Vr(t){let n,s,r;return{c(){n=f("button"),n.innerHTML='<svg class="mx-auto h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="mt-2 block text-sm font-medium text-gray-900">Plan Enforcement</span>',k(n,"class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(e,o){m(e,n,o),s||(r=b(n,"click",t[16]),s=!0)},p:e,d(e){e&&g(n),s=!1,r()}}}function Ur(e){let t,n,r,o,i,a,l,c,d,p,x,v,w,C,$,M,S,L,z,j,A,B,T,H,P,I,E,D,F,N,O,R,V,U,q,W,Z,K,X,ee,te,ne,se,re=e[1]?.email+"";const oe=[Fr,Dr,Er,Ir,Pr],ie=[];function ae(e,t){return"overview"===e[0]?0:"connections"===e[0]?1:"dnp"===e[0]?2:"enforcement"===e[0]?3:"community"===e[0]?4:-1}return~(X=ae(e))&&(ee=ie[X]=oe[X](e)),{c(){t=f("div"),n=f("nav"),r=f("div"),o=f("div"),i=f("div"),i.innerHTML='<h1 class="text-xl font-semibold text-gray-900">Music Streaming Blocklist Manager</h1>',a=y(),l=f("div"),c=f("span"),d=h(re),p=y(),x=f("button"),x.textContent="Sign out",v=y(),w=f("div"),C=f("div"),$=f("nav"),M=f("button"),S=h("Overview"),z=y(),j=f("button"),A=h("Connections"),T=y(),H=f("button"),P=h("DNP List ("),I=h(e[2]),E=h(")"),F=y(),N=f("button"),O=h("Enforcement"),V=y(),U=f("button"),q=h("Community Lists"),Z=y(),K=f("main"),ee&&ee.c(),k(i,"class","flex items-center"),k(c,"class","text-sm text-gray-700"),k(x,"class","text-sm text-gray-500 hover:text-gray-700"),k(l,"class","flex items-center space-x-4"),k(o,"class","flex justify-between h-16"),k(r,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),k(n,"class","bg-white shadow-sm border-b border-gray-200"),k(M,"class",L="py-4 px-1 border-b-2 font-medium text-sm "+("overview"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(j,"class",B="py-4 px-1 border-b-2 font-medium text-sm "+("connections"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(H,"class",D="py-4 px-1 border-b-2 font-medium text-sm "+("dnp"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(N,"class",R="py-4 px-1 border-b-2 font-medium text-sm "+("enforcement"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k(U,"class",W="py-4 px-1 border-b-2 font-medium text-sm "+("community"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),k($,"class","flex space-x-8"),k($,"aria-label","Tabs"),k(C,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),k(w,"class","bg-white shadow-sm"),k(K,"class","max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"),k(t,"class","min-h-screen bg-gray-50")},m(s,g){m(s,t,g),u(t,n),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),u(l,c),u(c,d),u(l,p),u(l,x),u(t,v),u(t,w),u(w,C),u(C,$),u($,M),u(M,S),u($,z),u($,j),u(j,A),u($,T),u($,H),u(H,P),u(H,I),u(H,E),u($,F),u($,N),u(N,O),u($,V),u($,U),u(U,q),u(t,Z),u(t,K),~X&&ie[X].m(K,null),te=!0,ne||(se=[b(x,"click",e[5]),b(M,"click",e[7]),b(j,"click",e[8]),b(H,"click",e[9]),b(N,"click",e[10]),b(U,"click",e[11])],ne=!0)},p(e,[t]){(!te||2&t)&&re!==(re=e[1]?.email+"")&&_(d,re),(!te||1&t&&L!==(L="py-4 px-1 border-b-2 font-medium text-sm "+("overview"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(M,"class",L),(!te||1&t&&B!==(B="py-4 px-1 border-b-2 font-medium text-sm "+("connections"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(j,"class",B),(!te||4&t)&&_(I,e[2]),(!te||1&t&&D!==(D="py-4 px-1 border-b-2 font-medium text-sm "+("dnp"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(H,"class",D),(!te||1&t&&R!==(R="py-4 px-1 border-b-2 font-medium text-sm "+("enforcement"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(N,"class",R),(!te||1&t&&W!==(W="py-4 px-1 border-b-2 font-medium text-sm "+("community"===e[0]?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")))&&k(U,"class",W);let n=X;X=ae(e),X===n?~X&&ie[X].p(e,t):(ee&&(J(),Y(ie[n],1,1,()=>{ie[n]=null}),G()),~X?(ee=ie[X],ee?ee.p(e,t):(ee=ie[X]=oe[X](e),ee.c()),Q(ee,1),ee.m(K,null)):ee=null)},i(e){te||(Q(ee),te=!0)},o(e){Y(ee),te=!1},d(e){e&&g(t),~X&&ie[X].d(),ne=!1,s(se)}}}function qr(e,t,n){let s,r,o,i;d(e,de,e=>n(1,s=e)),d(e,$e,e=>n(2,r=e)),d(e,be,e=>n(3,o=e)),d(e,ke,e=>n(4,i=e));let a="overview";function l(e){n(0,a=e)}A(async()=>{await Ce.fetchConnections(),await Se.fetchDnpList()});return[a,s,r,o,i,function(){ue.logout()},l,()=>l("overview"),()=>l("connections"),()=>l("dnp"),()=>l("enforcement"),()=>l("community"),()=>l("connections"),()=>l("dnp"),()=>l("connections"),()=>l("dnp"),()=>l("enforcement"),()=>l("connections")]}class Jr extends re{constructor(e){super(),se(this,e,qr,Ur,o,{})}}function Gr(e){let t,n;return t=new ye({}),{c(){X(t.$$.fragment)},m(e,s){ee(t,e,s),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function Qr(e){let t,n;return t=new Jr({}),{c(){X(t.$$.fragment)},m(e,s){ee(t,e,s),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function Yr(e){let t,n,s,r;const o=[Qr,Gr],i=[];function a(e,t){return e[0]?0:1}return t=a(e),n=i[t]=o[t](e),{c(){n.c(),s=v()},m(e,n){i[t].m(e,n),m(e,s,n),r=!0},p(e,[r]){let l=t;t=a(e),t!==l&&(J(),Y(i[l],1,1,()=>{i[l]=null}),G(),n=i[t],n||(n=i[t]=o[t](e),n.c()),Q(n,1),n.m(s.parentNode,s))},i(e){r||(Q(n),r=!0)},o(e){Y(n),r=!1},d(e){e&&g(s),i[t].d(e)}}}function Wr(e,t,n){let s;return d(e,ce,e=>n(0,s=e)),A(()=>{ue.fetchProfile()}),[s]}return new class extends re{constructor(e){super(),se(this,e,Wr,Yr,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
