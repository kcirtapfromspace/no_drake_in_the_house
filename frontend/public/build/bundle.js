var app=function(){"use strict";function e(){}function t(e){return e()}function s(){return Object.create(null)}function n(e){e.forEach(t)}function r(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,...s){if(null==t){for(const e of s)e(void 0);return e}const n=t.subscribe(...s);return n.unsubscribe?()=>n.unsubscribe():n}function l(e,t,s){e.$$.on_destroy.push(o(t,s))}function i(e,t){e.appendChild(t)}function c(e,t,s){e.insertBefore(t,s||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,t){for(let s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}function g(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function f(){return m(" ")}function h(){return m("")}function x(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function b(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function y(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function v(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function k(e,t,s,n){null==s?e.style.removeProperty(t):e.style.setProperty(t,s,"")}function _(e,t,s){for(let s=0;s<e.options.length;s+=1){const n=e.options[s];if(n.__value===t)return void(n.selected=!0)}s&&void 0===t||(e.selectedIndex=-1)}function C(e){const t=e.querySelector(":checked");return t&&t.__value}let $;function T(e){$=e}function L(){if(!$)throw new Error("Function called outside component initialization");return $}function S(e){L().$$.on_mount.push(e)}function A(e,t){const s=e.$$.callbacks[t.type];s&&s.slice().forEach(e=>e.call(this,t))}const R=[],j=[];let F=[];const M=[],E=Promise.resolve();let H=!1;function P(e){F.push(e)}const D=new Set;let B=0;function N(){if(0!==B)return;const e=$;do{try{for(;B<R.length;){const e=R[B];B++,T(e),I(e.$$)}}catch(e){throw R.length=0,B=0,e}for(T(null),R.length=0,B=0;j.length;)j.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];D.has(t)||(D.add(t),t())}F.length=0}while(R.length);for(;M.length;)M.pop()();H=!1,D.clear(),T(e)}function I(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const z=new Set;let q;function G(){q={r:0,c:[],p:q}}function O(){q.r||n(q.c),q=q.p}function U(e,t){e&&e.i&&(z.delete(e),e.i(t))}function Y(e,t,s,n){if(e&&e.o){if(z.has(e))return;z.add(e),q.c.push(()=>{z.delete(e),n&&(s&&e.d(1),n())}),e.o(t)}else n&&n()}function V(e){return void 0!==e?.length?e:Array.from(e)}function J(e){e&&e.c()}function K(e,s,a){const{fragment:o,after_update:l}=e.$$;o&&o.m(s,a),P(()=>{const s=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...s):n(s),e.$$.on_mount=[]}),l.forEach(P)}function W(e,t){const s=e.$$;null!==s.fragment&&(!function(e){const t=[],s=[];F.forEach(n=>-1===e.indexOf(n)?t.push(n):s.push(n)),s.forEach(e=>e()),F=t}(s.after_update),n(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(R.push(e),H||(H=!0,E.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(t,r,a,o,l,i,c=null,u=[-1]){const g=$;T(t);const p=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(g?g.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:r.target||g.$$.root};c&&c(p.root);let m=!1;if(p.ctx=a?a(t,r.props||{},(e,s,...n)=>{const r=n.length?n[0]:s;return p.ctx&&l(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),m&&Q(t,e)),s}):[],p.update(),m=!0,n(p.before_update),p.fragment=!!o&&o(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(d)}else p.fragment&&p.fragment.c();r.intro&&U(t.$$.fragment),K(t,r.target,r.anchor),N()}T(g)}class Z{$$=void 0;$$set=void 0;$destroy(){W(this,1),this.$destroy=e}$on(t,s){if(!r(s))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(s),()=>{const e=n.indexOf(s);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ee=[];function te(t,s=e){let n;const r=new Set;function o(e){if(a(t,e)&&(t=e,n)){const e=!ee.length;for(const e of r)e[1](),ee.push(e,t);if(e){for(let e=0;e<ee.length;e+=2)ee[e][0](ee[e+1]);ee.length=0}}}function l(e){o(e(t))}return{set:o,update:l,subscribe:function(a,i=e){const c=[a,i];return r.add(c),1===r.size&&(n=s(o,l)||e),a(t),()=>{r.delete(c),0===r.size&&n&&(n(),n=null)}}}}function se(t,s,a){const l=!Array.isArray(t),i=l?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=s.length<2;return d=(t,a)=>{let d=!1;const u=[];let g=0,p=e;const m=()=>{if(g)return;p();const n=s(l?u[0]:u,t,a);c?t(n):p=r(n)?n:e},f=i.map((e,t)=>o(e,e=>{u[t]=e,g&=~(1<<t),d&&m()},()=>{g|=1<<t}));return d=!0,m(),function(){n(f),p(),d=!1}},{subscribe:te(a,d).subscribe};var d}const ne=new class{constructor(e="http://localhost:3000"){Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"retryDelay",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),this.baseUrl=e}getAuthToken(){return localStorage.getItem("auth_token")}setAuthToken(e){localStorage.setItem("auth_token",e)}clearAuthToken(){localStorage.removeItem("auth_token")}createHeaders(e=!0){const t={"Content-Type":"application/json"};if(e){const e=this.getAuthToken();e&&(t.Authorization=`Bearer ${e}`)}return t}async handleResponse(e){const t=e.headers.get("content-type");let s;return s=t&&t.includes("application/json")?await e.json():{message:await e.text()},"object"==typeof s&&null!==s&&"success"in s?s:e.ok?{success:!0,data:s,timestamp:(new Date).toISOString()}:{success:!1,message:s.message||`HTTP ${e.status}: ${e.statusText}`,error_code:`HTTP_${e.status}`,timestamp:(new Date).toISOString()}}async withRetry(e,t=this.maxRetries){let s=null;for(let n=0;n<=t;n++)try{const s=await e();if(401===s.status||403===s.status||s.status>=400&&s.status<500)return this.handleResponse(s);if(s.ok)return this.handleResponse(s);if(n<t){const e=this.retryDelay*Math.pow(2,n);await new Promise(t=>setTimeout(t,e));continue}return this.handleResponse(s)}catch(e){if(s=e,n<t){const e=this.retryDelay*Math.pow(2,n);await new Promise(t=>setTimeout(t,e));continue}}return{success:!1,message:s?.message||"Network request failed after retries",error_code:"NETWORK_ERROR",timestamp:(new Date).toISOString()}}async get(e,t=!0){const s=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(s,{method:"GET",headers:this.createHeaders(t)}))}async post(e,t,s=!0){const n=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(n,{method:"POST",headers:this.createHeaders(s),body:t?JSON.stringify(t):void 0}))}async put(e,t,s=!0){const n=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(n,{method:"PUT",headers:this.createHeaders(s),body:t?JSON.stringify(t):void 0}))}async delete(e,t=!0){const s=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(s,{method:"DELETE",headers:this.createHeaders(t)}))}async handleAuthError(){try{const e=localStorage.getItem("refresh_token");if(!e)return!1;const t=await this.post("/api/v1/auth/refresh",{refresh_token:e},!1);return!(!t.success||!t.data)&&(this.setAuthToken(t.data.access_token),localStorage.setItem("refresh_token",t.data.refresh_token),!0)}catch(e){return console.error("Token refresh failed:",e),!1}}async authenticatedRequest(e,t,s){let n;switch(e){case"GET":n=await this.get(t);break;case"POST":n=await this.post(t,s);break;case"PUT":n=await this.put(t,s);break;case"DELETE":n=await this.delete(t)}if(!n.success&&"HTTP_401"===n.error_code){if(await this.handleAuthError())switch(e){case"GET":n=await this.get(t);break;case"POST":n=await this.post(t,s);break;case"PUT":n=await this.put(t,s);break;case"DELETE":n=await this.delete(t)}else this.clearAuthToken(),localStorage.removeItem("refresh_token"),window.dispatchEvent(new CustomEvent("auth:logout",{detail:{reason:"token_refresh_failed"}}))}return n}},re=te({user:null,token:localStorage.getItem("auth_token"),refreshToken:localStorage.getItem("refresh_token"),isAuthenticated:!1,isLoading:!1,justRegistered:!1,oauthFlow:{provider:null,state:null,isInProgress:!1}}),ae=se(re,e=>e.isAuthenticated&&null!==e.token),oe=se(re,e=>e.user);se(re,e=>e.justRegistered);const le={login:async(e,t,s)=>{re.update(e=>({...e,isLoading:!0}));const n=await ne.post("/api/v1/auth/login",{email:e,password:t,totp_code:s},!1);if(n.success&&n.data){const{access_token:e,refresh_token:t}=n.data;return ne.setAuthToken(e),localStorage.setItem("refresh_token",t),re.update(s=>({...s,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1,justRegistered:!1})),await le.fetchProfile(),{success:!0}}return re.update(e=>({...e,isLoading:!1})),{success:!1,message:n.message||"Login failed"}},register:async(e,t,s,n)=>{re.update(e=>({...e,isLoading:!0}));const r=await ne.post("/api/v1/auth/register",{email:e,password:t,confirm_password:s,terms_accepted:n},!1);if(r.success){if(r.data?.access_token&&r.data?.refresh_token){const{access_token:e,refresh_token:t}=r.data;return ne.setAuthToken(e),localStorage.setItem("refresh_token",t),re.update(s=>({...s,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1,justRegistered:!0})),await le.fetchProfile(),{success:!0,autoLogin:!0}}return re.update(e=>({...e,isLoading:!1})),{success:!0,autoLogin:!1,message:r.message}}return re.update(e=>({...e,isLoading:!1})),{success:!1,message:r.message||"Registration failed",errors:r.data?.errors||null}},fetchProfile:async()=>{if(!ne.getAuthToken())return;const e=await ne.authenticatedRequest("GET","/api/v1/users/profile");e.success&&e.data?re.update(t=>({...t,user:e.data,isAuthenticated:!0})):console.error("Failed to fetch profile:",e.message)},logout:async()=>{if(ne.getAuthToken())try{await ne.authenticatedRequest("POST","/api/v1/auth/logout")}catch(e){console.error("Logout request failed:",e)}ne.clearAuthToken(),localStorage.removeItem("refresh_token"),re.set({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,justRegistered:!1,oauthFlow:{provider:null,state:null,isInProgress:!1}})},refreshToken:async()=>{const e=localStorage.getItem("refresh_token");if(!e)return!1;const t=await ne.post("/api/v1/auth/refresh",{refresh_token:e},!1);if(t.success&&t.data){const{access_token:e,refresh_token:s}=t.data;return ne.setAuthToken(e),localStorage.setItem("refresh_token",s),re.update(t=>({...t,token:e,refreshToken:s,isAuthenticated:!0})),!0}return console.error("Token refresh failed:",t.message),!1},setup2FA:async()=>{try{const e=await ne.authenticatedRequest("POST","/api/v1/auth/2fa/setup");return e.success&&e.data?{success:!0,qrCodeUrl:e.data.qr_code_url,secret:e.data.secret}:{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message||"Failed to setup 2FA"}}},verify2FA:async e=>{try{const t=await ne.authenticatedRequest("POST","/api/v1/auth/2fa/verify",{totp_code:e});return t.success?(await le.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Failed to verify 2FA code"}}},disable2FA:async e=>{try{const t=await ne.authenticatedRequest("POST","/api/v1/auth/2fa/disable",{totp_code:e});return t.success?(await le.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Failed to disable 2FA"}}},clearJustRegistered:()=>{re.update(e=>({...e,justRegistered:!1}))},initiateOAuthFlow:async e=>{re.update(t=>({...t,oauthFlow:{provider:e,state:null,isInProgress:!0}}));try{const t=await ne.post(`/api/v1/auth/oauth/${e}/initiate`,void 0,!1);if(t.success&&t.data){const{authorization_url:s,state:n}=t.data;return sessionStorage.setItem(`oauth_state_${e}`,n),re.update(e=>({...e,oauthFlow:{...e.oauthFlow,state:n}})),window.location.href=s,{success:!0}}return re.update(e=>({...e,oauthFlow:{provider:null,state:null,isInProgress:!1}})),{success:!1,message:t.message}}catch(e){return re.update(e=>({...e,oauthFlow:{provider:null,state:null,isInProgress:!1}})),{success:!1,message:e.message||"Network error occurred"}}},completeOAuthFlow:async(e,t,s)=>{try{const n=sessionStorage.getItem(`oauth_state_${e}`);if(!n||n!==s)throw new Error("Invalid state parameter - possible CSRF attack");const r=await ne.post(`/api/v1/auth/oauth/${e}/callback`,{code:t,state:s,redirect_uri:window.location.origin+window.location.pathname},!1);if(r.success&&r.data){const{access_token:t,refresh_token:s}=r.data;return localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",s),re.update(e=>({...e,token:t,refreshToken:s,isAuthenticated:!0,oauthFlow:{provider:null,state:null,isInProgress:!1}})),sessionStorage.removeItem(`oauth_state_${e}`),await le.fetchProfile(),{success:!0}}throw new Error(r.message||"OAuth authentication failed")}catch(t){return sessionStorage.removeItem(`oauth_state_${e}`),re.update(e=>({...e,oauthFlow:{provider:null,state:null,isInProgress:!1}})),{success:!1,message:t.message||"Authentication failed"}}},linkOAuthAccount:async e=>{try{const t=await ne.authenticatedRequest("POST",`/api/v1/auth/oauth/${e}/link`);if(t.success&&t.data){const{authorization_url:s,state:n}=t.data;return sessionStorage.setItem(`oauth_link_state_${e}`,n),{success:!0,authorization_url:s,state:n}}return{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Network error occurred"}}},unlinkOAuthAccount:async e=>{try{const t=await ne.authenticatedRequest("DELETE",`/api/v1/auth/oauth/${e}/unlink`);return t.success?(await le.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Network error occurred"}}},getLinkedAccounts:async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/auth/oauth/accounts");return e.success?{success:!0,data:e.data}:{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message||"Network error occurred"}}}};if("undefined"!=typeof window){const e=localStorage.getItem("auth_token");e&&(ne.setAuthToken(e),re.update(t=>({...t,token:e,isAuthenticated:!0,justRegistered:!1})),le.fetchProfile()),window.addEventListener("auth:logout",()=>{le.logout()})}const ie={"/":"home","/home":"home","/dashboard":"dashboard","/settings":"settings","/profile":"profile","/blocklist":"blocklist","/library-scan":"library-scan","/offense-database":"offense-database","/connections":"connections","/community":"community","/sync":"sync","/analytics":"analytics","/revenue-impact":"revenue-impact","/graph":"graph","/overview":"overview","/dnp":"dnp","/enforcement":"enforcement"},ce={home:"/",dashboard:"/dashboard",settings:"/settings",profile:"/profile",blocklist:"/blocklist","library-scan":"/library-scan","offense-database":"/offense-database",connections:"/connections",community:"/community",sync:"/sync",analytics:"/analytics","revenue-impact":"/revenue-impact",graph:"/graph","oauth-callback":"/auth/callback","oauth-error":"/auth/error",overview:"/overview",dnp:"/dnp",enforcement:"/enforcement"},de={home:{title:"Home",description:"Your music blocklist dashboard"},dashboard:{title:"Dashboard",description:"Your music blocklist dashboard"},settings:{title:"Settings",description:"Account and connection settings"},profile:{title:"Profile",description:"Your profile settings"},blocklist:{title:"Blocklist",description:"Manage your blocked artists"},"library-scan":{title:"Scan Library",description:"Scan your music library"},"offense-database":{title:"Database",description:"Browse offense database"},connections:{title:"Connections",description:"Manage streaming connections"},community:{title:"Community",description:"Community lists"},sync:{title:"Catalog Sync",description:"Synchronize artist catalogs across platforms"},analytics:{title:"Analytics",description:"View system metrics and trends"},"revenue-impact":{title:"Revenue Impact",description:"See where your streaming revenue goes"},graph:{title:"Graph Explorer",description:"Explore artist collaboration networks"},"oauth-callback":{title:"Connecting...",description:"Processing authentication"},"oauth-error":{title:"Connection Error",description:"There was a problem connecting"},overview:{title:"Overview",description:"Dashboard overview"},dnp:{title:"DNP List",description:"Your Do Not Play list"},enforcement:{title:"Enforcement",description:"Blocklist enforcement status"}},ue=te("home");function ge(e){if(ue.set(e),"undefined"!=typeof window){const t=ce[e]||"/",s=de[e];window.history.pushState({route:e},s.title,t),document.title=`${s.title} - No Drake`}}function pe(e){return e.startsWith("/auth/callback")?"oauth-callback":e.startsWith("/auth/error")?"oauth-error":ie[e]||"home"}function me(e){let t,s;return{c(){t=g("div"),s=m(e[2]),y(t,"class","bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg text-sm")},m(e,n){c(e,t,n),i(t,s)},p(e,t){4&t&&v(s,e[2])},d(e){e&&d(t)}}}function fe(e){let t,s;return{c(){t=g("div"),s=m(e[3]),y(t,"class","bg-green-900/50 border border-green-700 text-green-200 px-4 py-3 rounded-lg text-sm")},m(e,n){c(e,t,n),i(t,s)},p(e,t){8&t&&v(s,e[3])},d(e){e&&d(t)}}}function he(e){let t,s,n,r;return{c(){t=g("div"),s=g("input"),y(s,"type","password"),y(s,"placeholder","Confirm password"),s.required=!0,y(s,"minlength","8"),y(s,"class","w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent")},m(a,o){c(a,t,o),i(t,s),w(s,e[6]),n||(r=x(s,"input",e[11]),n=!0)},p(e,t){64&t&&s.value!==e[6]&&w(s,e[6])},d(e){e&&d(t),n=!1,r()}}}function xe(e){let t;return{c(){t=g("div"),y(t,"class","w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function be(t){let s,r,a,o,l,u,p,h,b,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B="login"===t[0]?"Sign in":"Create account",N="login"===t[0]?"Don't have an account? Sign up":"Already have an account? Sign in",I=t[2]&&me(t),z=t[3]&&fe(t),q="register"===t[0]&&he(t),G=t[1]&&xe();return{c(){s=g("div"),r=g("div"),a=g("div"),a.innerHTML='<span class="text-6xl">ðŸš«</span> <h1 class="text-3xl font-bold text-white mt-4">No Drake</h1> <p class="text-gray-400 mt-2">Block problematic artists from your music</p>',o=f(),l=g("form"),I&&I.c(),u=f(),z&&z.c(),p=f(),h=g("div"),b=g("input"),k=f(),_=g("div"),C=g("input"),$=f(),q&&q.c(),T=f(),L=g("button"),G&&G.c(),S=f(),A=m(B),R=f(),j=g("div"),F=g("button"),M=m(N),E=f(),H=g("div"),H.innerHTML='<div class="flex items-center space-x-3 text-gray-500"><svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span class="text-sm">AI-curated blocklists by category</span></div> <div class="flex items-center space-x-3 text-gray-500"><svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span class="text-sm">Block artists on Spotify &amp; Apple Music</span></div> <div class="flex items-center space-x-3 text-gray-500"><svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span class="text-sm">Blocks features &amp; collaborations too</span></div>',y(a,"class","text-center mb-8"),y(b,"type","email"),y(b,"placeholder","Email"),b.required=!0,y(b,"class","w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"),y(C,"type","password"),y(C,"placeholder","Password"),C.required=!0,y(C,"minlength","8"),y(C,"class","w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"),y(L,"type","submit"),L.disabled=t[1],y(L,"class","w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"),y(l,"class","space-y-4"),y(F,"type","button"),y(F,"class","text-gray-400 hover:text-white transition-colors"),y(j,"class","mt-6 text-center"),y(H,"class","mt-12 space-y-3"),y(r,"class","w-full max-w-sm"),y(s,"class","min-h-screen flex flex-col items-center justify-center bg-gray-900 px-4")},m(e,n){var d;c(e,s,n),i(s,r),i(r,a),i(r,o),i(r,l),I&&I.m(l,null),i(l,u),z&&z.m(l,null),i(l,p),i(l,h),i(h,b),w(b,t[4]),i(l,k),i(l,_),i(_,C),w(C,t[5]),i(l,$),q&&q.m(l,null),i(l,T),i(l,L),G&&G.m(L,null),i(L,S),i(L,A),i(r,R),i(r,j),i(j,F),i(F,M),i(r,E),i(r,H),P||(D=[x(b,"input",t[9]),x(C,"input",t[10]),x(l,"submit",(d=t[7],function(e){return e.preventDefault(),d.call(this,e)})),x(F,"click",t[8])],P=!0)},p(e,[t]){e[2]?I?I.p(e,t):(I=me(e),I.c(),I.m(l,u)):I&&(I.d(1),I=null),e[3]?z?z.p(e,t):(z=fe(e),z.c(),z.m(l,p)):z&&(z.d(1),z=null),16&t&&b.value!==e[4]&&w(b,e[4]),32&t&&C.value!==e[5]&&w(C,e[5]),"register"===e[0]?q?q.p(e,t):(q=he(e),q.c(),q.m(l,T)):q&&(q.d(1),q=null),e[1]?G||(G=xe(),G.c(),G.m(L,S)):G&&(G.d(1),G=null),1&t&&B!==(B="login"===e[0]?"Sign in":"Create account")&&v(A,B),2&t&&(L.disabled=e[1]),1&t&&N!==(N="login"===e[0]?"Don't have an account? Sign up":"Already have an account? Sign in")&&v(M,N)},i:e,o:e,d(e){e&&d(s),I&&I.d(),z&&z.d(),q&&q.d(),G&&G.d(),P=!1,n(D)}}}function ye(e,t,s){let n="login",r=!1,a="",o="",l="",i="",c="";return[n,r,a,o,l,i,c,async function(){s(2,a=""),s(3,o=""),s(1,r=!0);try{if("login"===n){const e=await le.login(l,i);e.success||s(2,a=e.message||"Login failed")}else{if(i!==c)return s(2,a="Passwords do not match"),void s(1,r=!1);const e=await le.register(l,i,c,!0);e.success?s(3,o="Account created!"):s(2,a=e.message||"Registration failed")}}catch(e){s(2,a="Something went wrong. Please try again.")}finally{s(1,r=!1)}},function(){s(0,n="login"===n?"register":"login"),s(2,a=""),s(3,o=""),s(5,i=""),s(6,c="")},function(){l=this.value,s(4,l)},function(){i=this.value,s(5,i)},function(){c=this.value,s(6,c)}]}se(ue,e=>de[e]);class ve extends Z{constructor(e){super(),X(this,e,ye,be,a,{})}}function we(e,t,s){const n=e.slice();n[50]=t[s];const r=gt(n[50].severity);return n[40]=r,n}function ke(e,t,s){const n=e.slice();return n[53]=t[s],n}function _e(e,t,s){const n=e.slice();return n[56]=t[s],n}function Ce(e,t,s){const n=e.slice();n[39]=t[s];const r=gt(n[39].severity);return n[40]=r,n}function $e(e,t,s){const n=e.slice();return n[43]=t[s],n}function Te(e,t,s){const n=e.slice();n[39]=t[s];const r=gt(n[39].severity);return n[40]=r,n}function Le(e,t,s){const n=e.slice();return n[39]=t[s],n[49]=s,n}function Se(e){let t,s,n,r,a,o,l;function u(e,t){return e[12]?je:e[11]?Re:void 0}let p=u(e),m=p&&p(e);return{c(){t=g("header"),s=g("div"),n=g("button"),n.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n          Back',r=f(),a=g("main"),m&&m.c(),y(n,"type","button"),y(n,"class","flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors"),y(s,"class","max-w-3xl mx-auto px-4 py-4"),y(t,"class","sticky top-0 z-50 bg-white border-b border-gray-200"),y(a,"class","max-w-3xl mx-auto px-4 py-6")},m(d,u){c(d,t,u),i(t,s),i(s,n),c(d,r,u),c(d,a,u),m&&m.m(a,null),o||(l=x(n,"click",e[20]),o=!0)},p(e,t){p===(p=u(e))&&m?m.p(e,t):(m&&m.d(1),m=p&&p(e),m&&(m.c(),m.m(a,null)))},d(e){e&&(d(t),d(r),d(a)),m&&m.d(),o=!1,l()}}}function Ae(e){let t,s,r,a,o,l,u,p,h,b,v,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I,z,q;function G(e,t){return e[3]?Ye:Ue}let O=G(e),U=O(e);function Y(e,t){return e[2].length>0?Je:e[1].length>1&&!e[3]?Ve:void 0}let V=Y(e),J=V&&V(e);function K(e,t){return e[5]?Xe:Qe}let W=K(e),Q=W(e),X=e[9].length>0&&at(e);function Z(e,t){return e[10]?it:0===e[9].length?lt:ot}let ee=Z(e),te=ee(e);return{c(){t=g("header"),s=g("div"),r=g("div"),r.innerHTML='<h1 class="text-xl font-semibold text-gray-900">No Drake in the House</h1> <p class="text-sm" style="color: #666;">Curate your streaming</p>',a=f(),o=g("div"),l=g("button"),l.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>',u=f(),p=g("button"),p.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>',h=f(),b=g("button"),b.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>',v=f(),_=g("button"),_.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',C=f(),$=g("main"),T=g("section"),L=g("div"),S=g("input"),A=f(),R=g("div"),U.c(),j=f(),J&&J.c(),F=f(),M=g("section"),E=g("h2"),E.textContent="Block by Category",H=f(),Q.c(),P=f(),D=g("section"),B=g("h2"),N=m("Your Blocked Artists\n          "),X&&X.c(),I=f(),te.c(),y(l,"class","p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors"),y(l,"title","Catalog Sync"),y(p,"class","p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors"),y(p,"title","Analytics"),y(b,"class","p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors"),y(b,"title","Graph Explorer"),y(_,"class","p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors"),y(_,"title","Settings"),y(o,"class","flex items-center gap-2"),y(s,"class","max-w-3xl mx-auto px-4 py-4 flex justify-between items-center"),y(t,"class","sticky top-0 z-50 bg-white border-b border-gray-200"),y(S,"type","text"),y(S,"placeholder","Search artists..."),y(S,"class","w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-transparent transition-all"),k(S,"focus","ring: 2px solid "+e[15].blue.primary),y(R,"class","absolute right-3 top-1/2 -translate-y-1/2"),y(L,"class","relative"),y(E,"class","text-lg font-semibold text-gray-900 mb-4"),y(B,"class","text-lg font-semibold text-gray-900 mb-4"),y($,"class","max-w-3xl mx-auto px-4 py-6 space-y-8")},m(n,d){c(n,t,d),i(t,s),i(s,r),i(s,a),i(s,o),i(o,l),i(o,u),i(o,p),i(o,h),i(o,b),i(o,v),i(o,_),c(n,C,d),c(n,$,d),i($,T),i(T,L),i(L,S),w(S,e[1]),i(L,A),i(L,R),U.m(R,null),i(T,j),J&&J.m(T,null),i($,F),i($,M),i(M,E),i(M,H),Q.m(M,null),i($,P),i($,D),i(D,B),i(B,N),X&&X.m(B,null),i(D,I),te.m(D,null),z||(q=[x(l,"click",e[23]),x(p,"click",e[24]),x(b,"click",e[25]),x(_,"click",e[26]),x(S,"input",e[27]),x(S,"input",e[16])],z=!0)},p(e,t){2&t[0]&&S.value!==e[1]&&w(S,e[1]),O===(O=G(e))&&U?U.p(e,t):(U.d(1),U=O(e),U&&(U.c(),U.m(R,null))),V===(V=Y(e))&&J?J.p(e,t):(J&&J.d(1),J=V&&V(e),J&&(J.c(),J.m(T,null))),W===(W=K(e))&&Q?Q.p(e,t):(Q.d(1),Q=W(e),Q&&(Q.c(),Q.m(M,null))),e[9].length>0?X?X.p(e,t):(X=at(e),X.c(),X.m(B,null)):X&&(X.d(1),X=null),ee===(ee=Z(e))&&te?te.p(e,t):(te.d(1),te=ee(e),te&&(te.c(),te.m(D,null)))},d(e){e&&(d(t),d(C),d($)),U.d(),J&&J.d(),Q.d(),X&&X.d(),te.d(),z=!1,n(q)}}}function Re(e){let t,s,n,r,a,o,l,u,p,b,w,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I=e[11].canonical_name.charAt(0)+"",z=e[11].canonical_name+"",q=e[14].has(e[11].id)?"Blocked":"Not Blocked",G=e[11].genres&&e[11].genres.length>0&&Fe(e);function O(e,t){return 18432&t[0]&&(j=null),e[13]===e[11]?.id?He:(null==j&&(j=!!e[14].has(e[11].id)),j?Ee:Me)}let U=O(e,[-1,-1]),Y=U(e);function V(e,t){return e[11].offenses&&e[11].offenses.length>0?De:Pe}let J=V(e),K=J(e);return{c(){t=g("div"),s=g("div"),n=g("div"),r=g("div"),a=m(I),o=f(),l=g("div"),u=g("h1"),p=m(z),b=f(),G&&G.c(),w=f(),_=g("div"),C=g("div"),$=g("p"),$.textContent="Status",T=f(),L=g("p"),S=m(q),A=f(),R=g("button"),Y.c(),E=f(),H=g("h2"),H.textContent="Documented Incidents",P=f(),K.c(),D=h(),y(r,"class","w-16 h-16 rounded-xl flex items-center justify-center text-2xl font-bold text-white"),k(r,"background","linear-gradient(135deg, "+e[15].blue.primary+", "+e[15].blue.light+")"),y(u,"class","text-2xl font-bold text-gray-900"),y(n,"class","flex items-center gap-4"),y(s,"class","p-6"),k(s,"background","linear-gradient(135deg, "+e[15].blue.primary+"08, "+e[15].blue.light+"05)"),y($,"class","text-sm text-gray-500"),y(L,"class","font-medium"),k(L,"color",e[14].has(e[11].id)?e[15].pink.primary:e[15].green.primary),y(R,"type","button"),R.disabled=F=e[13]===e[11]?.id,y(R,"class","px-5 py-2.5 rounded-lg font-medium transition-all disabled:opacity-50"),y(R,"style",M=e[14].has(e[11].id)?"background: #f3f4f6; color: #374151;":`background: ${e[15].pink.primary}; color: white;`),y(_,"class","px-6 py-4 border-t border-gray-100 flex items-center justify-between"),y(t,"class","bg-white border border-gray-200 rounded-lg overflow-hidden mb-6"),y(H,"class","text-lg font-semibold text-gray-900 mb-4")},m(d,g){c(d,t,g),i(t,s),i(s,n),i(n,r),i(r,a),i(n,o),i(n,l),i(l,u),i(u,p),i(l,b),G&&G.m(l,null),i(t,w),i(t,_),i(_,C),i(C,$),i(C,T),i(C,L),i(L,S),i(_,A),i(_,R),Y.m(R,null),c(d,E,g),c(d,H,g),c(d,P,g),K.m(d,g),c(d,D,g),B||(N=x(R,"click",e[33]),B=!0)},p(e,t){2048&t[0]&&I!==(I=e[11].canonical_name.charAt(0)+"")&&v(a,I),2048&t[0]&&z!==(z=e[11].canonical_name+"")&&v(p,z),e[11].genres&&e[11].genres.length>0?G?G.p(e,t):(G=Fe(e),G.c(),G.m(l,null)):G&&(G.d(1),G=null),18432&t[0]&&q!==(q=e[14].has(e[11].id)?"Blocked":"Not Blocked")&&v(S,q),18432&t[0]&&k(L,"color",e[14].has(e[11].id)?e[15].pink.primary:e[15].green.primary),U!==(U=O(e,t))&&(Y.d(1),Y=U(e),Y&&(Y.c(),Y.m(R,null))),10240&t[0]&&F!==(F=e[13]===e[11]?.id)&&(R.disabled=F),18432&t[0]&&M!==(M=e[14].has(e[11].id)?"background: #f3f4f6; color: #374151;":`background: ${e[15].pink.primary}; color: white;`)&&y(R,"style",M),J===(J=V(e))&&K?K.p(e,t):(K.d(1),K=J(e),K&&(K.c(),K.m(D.parentNode,D)))},d(e){e&&(d(t),d(E),d(H),d(P),d(D)),G&&G.d(),Y.d(),K.d(e),B=!1,N()}}}function je(t){let s,n;return{c(){s=g("div"),n=g("div"),y(n,"class","w-8 h-8 border-2 rounded-full animate-spin"),k(n,"border-color",t[15].blue.primary),k(n,"border-top-color","transparent"),y(s,"class","flex justify-center py-20")},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function Fe(e){let t,s,n=e[11].genres.join(", ")+"";return{c(){t=g("p"),s=m(n),y(t,"class","text-gray-500 mt-1")},m(e,n){c(e,t,n),i(t,s)},p(e,t){2048&t[0]&&n!==(n=e[11].genres.join(", ")+"")&&v(s,n)},d(e){e&&d(t)}}}function Me(e){let t;return{c(){t=m("Block Artist")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function Ee(e){let t;return{c(){t=m("Unblock")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function He(e){let t;return{c(){t=g("span"),y(t,"class","inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function Pe(t){let s;return{c(){s=g("div"),s.innerHTML='<p class="text-gray-600">No documented incidents</p> <p class="text-sm text-gray-500 mt-1">No offense records found for this artist</p>',y(s,"class","bg-gray-50 border border-gray-200 rounded-lg p-10 text-center")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function De(e){let t,s=V(e[11].offenses),n=[];for(let t=0;t<s.length;t+=1)n[t]=Oe(we(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","space-y-4")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(34816&r[0]){let a;for(s=V(e[11].offenses),a=0;a<s.length;a+=1){const o=we(e,s,a);n[a]?n[a].p(o,r):(n[a]=Oe(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function Be(e){let t,s,n=new Date(e[50].incident_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"";return{c(){t=g("p"),s=m(n),y(t,"class","text-sm text-gray-500 mt-4")},m(e,n){c(e,t,n),i(t,s)},p(e,t){2048&t[0]&&n!==(n=new Date(e[50].incident_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"")&&v(s,n)},d(e){e&&d(t)}}}function Ne(e){let t,s,n,r,a,o,l,p=e[50].evidence.length+"",h=V(e[50].evidence),x=[];for(let t=0;t<h.length;t+=1)x[t]=Ge(ke(e,h,t));return{c(){t=g("div"),s=g("p"),n=m("Sources ("),r=m(p),a=m(")"),o=f(),l=g("div");for(let e=0;e<x.length;e+=1)x[e].c();y(s,"class","text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"),y(l,"class","space-y-2"),y(t,"class","mt-5 pt-5 border-t border-gray-100")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(t,o),i(t,l);for(let e=0;e<x.length;e+=1)x[e]&&x[e].m(l,null)},p(e,t){if(2048&t[0]&&p!==(p=e[50].evidence.length+"")&&v(r,p),34816&t[0]){let s;for(h=V(e[50].evidence),s=0;s<h.length;s+=1){const n=ke(e,h,s);x[s]?x[s].p(n,t):(x[s]=Ge(n),x[s].c(),x[s].m(l,null))}for(;s<x.length;s+=1)x[s].d(1);x.length=h.length}},d(e){e&&d(t),u(x,e)}}}function Ie(e){let t,s,n=e[53].source_name+"";return{c(){t=g("p"),s=m(n),y(t,"class","text-xs text-gray-500")},m(e,n){c(e,t,n),i(t,s)},p(e,t){2048&t[0]&&n!==(n=e[53].source_name+"")&&v(s,n)},d(e){e&&d(t)}}}function ze(e){let t,s=V(Array(e[53].credibility_score)),n=[];for(let t=0;t<s.length;t+=1)n[t]=qe(_e(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","flex gap-0.5"),k(t,"color",e[15].green.light)},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(2048&r[0]){let a;for(s=V(Array(e[53].credibility_score)),a=0;a<s.length;a+=1){const o=_e(e,s,a);n[a]?n[a].p(o,r):(n[a]=qe(),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function qe(t){let s;return{c(){s=g("span"),s.textContent="â˜…",y(s,"class","text-xs")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Ge(e){let t,s,n,r,a,o,l,u,h,x,b,w=(e[53].title||e[53].source_name||"View Source")+"",_=e[53].source_name&&e[53].title&&Ie(e),C=e[53].credibility_score&&ze(e);return{c(){t=g("a"),s=p("svg"),n=p("path"),r=f(),a=g("div"),o=g("p"),l=m(w),u=f(),_&&_.c(),h=f(),C&&C.c(),x=f(),y(n,"stroke-linecap","round"),y(n,"stroke-linejoin","round"),y(n,"stroke-width","2"),y(n,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),y(s,"class","w-4 h-4 flex-shrink-0"),k(s,"color",e[15].blue.primary),y(s,"fill","none"),y(s,"stroke","currentColor"),y(s,"viewBox","0 0 24 24"),y(o,"class","text-sm font-medium text-gray-900 truncate"),y(a,"class","flex-1 min-w-0"),y(t,"href",b=e[53].source_url),y(t,"target","_blank"),y(t,"rel","noopener noreferrer"),y(t,"class","flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(o,l),i(a,u),_&&_.m(a,null),i(t,h),C&&C.m(t,null),i(t,x)},p(e,s){2048&s[0]&&w!==(w=(e[53].title||e[53].source_name||"View Source")+"")&&v(l,w),e[53].source_name&&e[53].title?_?_.p(e,s):(_=Ie(e),_.c(),_.m(a,null)):_&&(_.d(1),_=null),e[53].credibility_score?C?C.p(e,s):(C=ze(e),C.c(),C.m(t,x)):C&&(C.d(1),C=null),2048&s[0]&&b!==(b=e[53].source_url)&&y(t,"href",b)},d(e){e&&d(t),_&&_.d(),C&&C.d()}}}function Oe(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L=ut(e[50].category)+"",S=e[40].label+"",A=e[50].title+"",R=e[50].description+"",j=e[50].incident_date&&Be(e),F=e[50].evidence&&e[50].evidence.length>0&&Ne(e);return{c(){t=g("div"),s=g("div"),n=g("div"),r=g("span"),a=m(L),o=f(),l=g("span"),u=m(S),h=f(),x=g("h3"),b=m(A),w=f(),k=g("p"),_=m(R),C=f(),j&&j.c(),$=f(),F&&F.c(),T=f(),y(r,"class","px-2.5 py-1 text-xs font-medium rounded bg-gray-100 text-gray-700"),y(l,"class","px-2.5 py-1 text-xs font-medium rounded"),y(l,"style",p=e[40].bg+" "+e[40].text),y(n,"class","flex items-center gap-2 mb-3"),y(x,"class","text-lg font-semibold text-gray-900 mb-2"),y(k,"class","text-gray-600 leading-relaxed"),y(s,"class","p-5"),y(t,"class","bg-white border border-gray-200 rounded-lg overflow-hidden")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(r,a),i(n,o),i(n,l),i(l,u),i(s,h),i(s,x),i(x,b),i(s,w),i(s,k),i(k,_),i(s,C),j&&j.m(s,null),i(s,$),F&&F.m(s,null),i(t,T)},p(e,t){2048&t[0]&&L!==(L=ut(e[50].category)+"")&&v(a,L),2048&t[0]&&S!==(S=e[40].label+"")&&v(u,S),2048&t[0]&&p!==(p=e[40].bg+" "+e[40].text)&&y(l,"style",p),2048&t[0]&&A!==(A=e[50].title+"")&&v(b,A),2048&t[0]&&R!==(R=e[50].description+"")&&v(_,R),e[50].incident_date?j?j.p(e,t):(j=Be(e),j.c(),j.m(s,$)):j&&(j.d(1),j=null),e[50].evidence&&e[50].evidence.length>0?F?F.p(e,t):(F=Ne(e),F.c(),F.m(s,null)):F&&(F.d(1),F=null)},d(e){e&&d(t),j&&j.d(),F&&F.d()}}}function Ue(t){let s,n;return{c(){s=p("svg"),n=p("path"),y(n,"stroke-linecap","round"),y(n,"stroke-linejoin","round"),y(n,"stroke-width","2"),y(n,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),y(s,"class","w-5 h-5 text-gray-400"),y(s,"fill","none"),y(s,"stroke","currentColor"),y(s,"viewBox","0 0 24 24")},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function Ye(t){let s;return{c(){s=g("div"),y(s,"class","w-5 h-5 border-2 rounded-full animate-spin"),k(s,"border-color",t[15].blue.primary),k(s,"border-top-color","transparent")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Ve(e){let t,s,n,r,a,o;return{c(){t=g("div"),s=g("p"),n=m('No artists found for "'),r=g("span"),a=m(e[1]),o=m('"'),y(r,"class","font-medium text-gray-700"),y(s,"class","text-gray-500"),y(t,"class","mt-2 bg-gray-50 border border-gray-200 rounded-lg p-6 text-center")},m(e,l){c(e,t,l),i(t,s),i(s,n),i(s,r),i(r,a),i(s,o)},p(e,t){2&t[0]&&v(a,e[1])},d(e){e&&d(t)}}}function Je(e){let t,s=V(e[2]),n=[];for(let t=0;t<s.length;t+=1)n[t]=We(Le(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","mt-2 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(557060&r[0]){let a;for(s=V(e[2]),a=0;a<s.length;a+=1){const o=Le(e,s,a);n[a]?n[a].p(o,r):(n[a]=We(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function Ke(e){let t,s,n=e[39].genres.slice(0,3).join(", ")+"";return{c(){t=g("p"),s=m(n),y(t,"class","text-sm text-gray-500 truncate")},m(e,n){c(e,t,n),i(t,s)},p(e,t){4&t[0]&&n!==(n=e[39].genres.slice(0,3).join(", ")+"")&&v(s,n)},d(e){e&&d(t)}}}function We(e){let t,s,n,r,a,o,l,u,h,b,w,_,C,$,T=e[39].canonical_name.charAt(0)+"",L=e[39].canonical_name+"",S=e[39].genres&&e[39].genres.length>0&&Ke(e);function A(){return e[28](e[39])}return{c(){t=g("button"),s=g("div"),n=m(T),r=f(),a=g("div"),o=g("p"),l=m(L),u=f(),S&&S.c(),h=f(),b=p("svg"),w=p("path"),_=f(),y(s,"class","w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium text-white"),k(s,"background","linear-gradient(135deg, "+e[15].blue.primary+", "+e[15].blue.light+")"),y(o,"class","font-medium text-gray-900 truncate"),y(a,"class","flex-1 min-w-0"),y(w,"stroke-linecap","round"),y(w,"stroke-linejoin","round"),y(w,"stroke-width","2"),y(w,"d","M9 5l7 7-7 7"),y(b,"class","w-4 h-4 text-gray-400"),y(b,"fill","none"),y(b,"stroke","currentColor"),y(b,"viewBox","0 0 24 24"),y(t,"type","button"),y(t,"class","w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors "+(e[49]>0?"border-t border-gray-100":""))},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(o,l),i(a,u),S&&S.m(a,null),i(t,h),i(t,b),i(b,w),i(t,_),C||($=x(t,"click",A),C=!0)},p(t,s){e=t,4&s[0]&&T!==(T=e[39].canonical_name.charAt(0)+"")&&v(n,T),4&s[0]&&L!==(L=e[39].canonical_name+"")&&v(l,L),e[39].genres&&e[39].genres.length>0?S?S.p(e,s):(S=Ke(e),S.c(),S.m(a,null)):S&&(S.d(1),S=null)},d(e){e&&d(t),S&&S.d(),C=!1,$()}}}function Qe(e){let t,s=V(e[4]),n=[];for(let t=0;t<s.length;t+=1)n[t]=rt($e(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","space-y-3")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(950736&r[0]){let a;for(s=V(e[4]),a=0;a<s.length;a+=1){const o=$e(e,s,a);n[a]?n[a].p(o,r):(n[a]=rt(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function Xe(t){let s,n;return{c(){s=g("div"),n=g("div"),y(n,"class","w-6 h-6 border-2 rounded-full animate-spin"),k(n,"border-color",t[15].blue.primary),k(n,"border-top-color","transparent"),y(s,"class","flex justify-center py-12")},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function Ze(e){let t;function s(e,t){return e[8]?st:0===e[7].length?tt:et}let n=s(e),r=n(e);return{c(){t=g("div"),r.c(),y(t,"class","mt-2 bg-white border border-gray-200 rounded-lg overflow-hidden")},m(e,s){c(e,t,s),r.m(t,null)},p(e,a){n===(n=s(e))&&r?r.p(e,a):(r.d(1),r=n(e),r&&(r.c(),r.m(t,null)))},d(e){e&&d(t),r.d()}}}function et(e){let t,s=V(e[7]),n=[];for(let t=0;t<s.length;t+=1)n[t]=nt(Te(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","max-h-64 overflow-y-auto divide-y divide-gray-100")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(524416&r[0]){let a;for(s=V(e[7]),a=0;a<s.length;a+=1){const o=Te(e,s,a);n[a]?n[a].p(o,r):(n[a]=nt(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function tt(t){let s;return{c(){s=g("p"),s.textContent="No artists in this category",y(s,"class","text-center py-6 text-gray-500")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function st(t){let s,n;return{c(){s=g("div"),n=g("div"),y(n,"class","w-5 h-5 border-2 rounded-full animate-spin"),k(n,"border-color",t[15].blue.primary),k(n,"border-top-color","transparent"),y(s,"class","flex justify-center py-6")},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function nt(e){let t,s,n,r,a,o,l,u,h,b,w,k,_,C,$,T,L=e[39].name.charAt(0)+"",S=e[39].name+"",A=e[40].label+"";function R(){return e[31](e[39])}return{c(){t=g("button"),s=g("div"),n=m(L),r=f(),a=g("p"),o=m(S),l=f(),u=g("span"),h=m(A),w=f(),k=p("svg"),_=p("path"),C=f(),y(s,"class","w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-xs font-medium text-gray-600"),y(a,"class","flex-1 font-medium text-gray-900 truncate"),y(u,"class","px-2 py-0.5 text-xs font-medium rounded"),y(u,"style",b=e[40].bg+" "+e[40].text),y(_,"stroke-linecap","round"),y(_,"stroke-linejoin","round"),y(_,"stroke-width","2"),y(_,"d","M9 5l7 7-7 7"),y(k,"class","w-4 h-4 text-gray-400"),y(k,"fill","none"),y(k,"stroke","currentColor"),y(k,"viewBox","0 0 24 24"),y(t,"type","button"),y(t,"class","w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(t,l),i(t,u),i(u,h),i(t,w),i(t,k),i(k,_),i(t,C),$||(T=x(t,"click",R),$=!0)},p(t,s){e=t,128&s[0]&&L!==(L=e[39].name.charAt(0)+"")&&v(n,L),128&s[0]&&S!==(S=e[39].name+"")&&v(o,S),128&s[0]&&A!==(A=e[40].label+"")&&v(h,A),128&s[0]&&b!==(b=e[40].bg+" "+e[40].text)&&y(u,"style",b)},d(e){e&&d(t),$=!1,T()}}}function rt(e){let t,s,r,a,o,l,u,h,b,w,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D=ut(e[43].id)+"",B=e[43].artist_count+"",N=e[43].subscribed?"Blocking":"Block All";function I(...t){return e[29](e[43],...t)}function z(){return e[30](e[43])}let q=e[6]===e[43].id&&Ze(e);return{c(){t=g("div"),s=g("button"),r=g("div"),a=g("div"),o=g("div"),l=p("svg"),u=p("path"),h=f(),b=g("div"),w=g("p"),_=m(D),C=f(),$=g("p"),T=m(B),L=m(" artists"),S=f(),A=g("button"),R=m(N),M=f(),q&&q.c(),E=f(),y(u,"stroke-linecap","round"),y(u,"stroke-linejoin","round"),y(u,"stroke-width","2"),y(u,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),y(l,"class","w-5 h-5"),k(l,"color",e[15].pink.primary),y(l,"fill","none"),y(l,"stroke","currentColor"),y(l,"viewBox","0 0 24 24"),y(o,"class","w-10 h-10 rounded-lg flex items-center justify-center"),k(o,"background","linear-gradient(135deg, "+e[15].pink.primary+"15, "+e[15].pink.light+"10)"),y(w,"class","font-medium text-gray-900"),y($,"class","text-sm text-gray-500"),y(a,"class","flex items-center gap-3"),y(A,"type","button"),y(A,"class","px-4 py-2 text-sm font-medium rounded-lg transition-all"),y(A,"style",j=e[43].subscribed?`background: ${e[15].pink.primary}; color: white;`:"background: white; border: 1px solid #e5e7eb; color: #374151;"),y(r,"class","flex items-center justify-between"),y(s,"type","button"),y(s,"class","w-full p-4 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all text-left"),y(s,"style",F=e[6]===e[43].id?`border-color: ${e[15].blue.primary}; box-shadow: 0 0 0 2px ${e[15].blue.primary}20;`:"")},m(e,n){c(e,t,n),i(t,s),i(s,r),i(r,a),i(a,o),i(o,l),i(l,u),i(a,h),i(a,b),i(b,w),i(w,_),i(b,C),i(b,$),i($,T),i($,L),i(r,S),i(r,A),i(A,R),i(t,M),q&&q.m(t,null),i(t,E),H||(P=[x(A,"click",I),x(s,"click",z)],H=!0)},p(n,r){e=n,16&r[0]&&D!==(D=ut(e[43].id)+"")&&v(_,D),16&r[0]&&B!==(B=e[43].artist_count+"")&&v(T,B),16&r[0]&&N!==(N=e[43].subscribed?"Blocking":"Block All")&&v(R,N),16&r[0]&&j!==(j=e[43].subscribed?`background: ${e[15].pink.primary}; color: white;`:"background: white; border: 1px solid #e5e7eb; color: #374151;")&&y(A,"style",j),80&r[0]&&F!==(F=e[6]===e[43].id?`border-color: ${e[15].blue.primary}; box-shadow: 0 0 0 2px ${e[15].blue.primary}20;`:"")&&y(s,"style",F),e[6]===e[43].id?q?q.p(e,r):(q=Ze(e),q.c(),q.m(t,E)):q&&(q.d(1),q=null)},d(e){e&&d(t),q&&q.d(),H=!1,n(P)}}}function at(e){let t,s,n,r,a=e[9].length+"";return{c(){t=g("span"),s=m("("),n=m(a),r=m(")"),y(t,"class","text-gray-500 font-normal")},m(e,a){c(e,t,a),i(t,s),i(t,n),i(t,r)},p(e,t){512&t[0]&&a!==(a=e[9].length+"")&&v(n,a)},d(e){e&&d(t)}}}function ot(e){let t,s,n=V(e[9]),r=[];for(let t=0;t<n.length;t+=1)r[t]=ct(Ce(e,n,t));return{c(){t=g("div"),s=g("div");for(let e=0;e<r.length;e+=1)r[e].c();y(s,"class","max-h-80 overflow-y-auto divide-y divide-gray-100"),y(t,"class","bg-white border border-gray-200 rounded-lg overflow-hidden")},m(e,n){c(e,t,n),i(t,s);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(s,null)},p(e,t){if(557568&t[0]){let a;for(n=V(e[9]),a=0;a<n.length;a+=1){const o=Ce(e,n,a);r[a]?r[a].p(o,t):(r[a]=ct(o),r[a].c(),r[a].m(s,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(e){e&&d(t),u(r,e)}}}function lt(t){let s;return{c(){s=g("div"),s.innerHTML='<p class="text-gray-600">No artists blocked yet</p> <p class="text-sm text-gray-500 mt-1">Subscribe to categories or search for artists</p>',y(s,"class","bg-gray-50 border border-gray-200 rounded-lg p-10 text-center")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function it(t){let s,n;return{c(){s=g("div"),n=g("div"),y(n,"class","w-6 h-6 border-2 rounded-full animate-spin"),k(n,"border-color",t[15].blue.primary),k(n,"border-top-color","transparent"),y(s,"class","flex justify-center py-12")},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function ct(e){let t,s,n,r,a,o,l,u,h,b,w,_,C,$,T,L,S,A,R,j,F=e[39].name.charAt(0)+"",M=e[39].name+"",E=ut(e[39].category)+"",H=e[40].label+"";function P(){return e[32](e[39])}return{c(){t=g("button"),s=g("div"),n=m(F),r=f(),a=g("div"),o=g("p"),l=m(M),u=f(),h=g("p"),b=m(E),w=f(),_=g("span"),C=m(H),T=f(),L=p("svg"),S=p("path"),A=f(),y(s,"class","w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium text-white"),k(s,"background","linear-gradient(135deg, "+e[15].pink.primary+", "+e[15].pink.light+")"),y(o,"class","font-medium text-gray-900 truncate"),y(h,"class","text-sm text-gray-500"),y(a,"class","flex-1 min-w-0"),y(_,"class","px-2 py-0.5 text-xs font-medium rounded"),y(_,"style",$=e[40].bg+" "+e[40].text),y(S,"stroke-linecap","round"),y(S,"stroke-linejoin","round"),y(S,"stroke-width","2"),y(S,"d","M9 5l7 7-7 7"),y(L,"class","w-4 h-4 text-gray-400"),y(L,"fill","none"),y(L,"stroke","currentColor"),y(L,"viewBox","0 0 24 24"),y(t,"type","button"),y(t,"class","w-full flex items-center gap-4 px-4 py-3 text-left hover:bg-gray-50 transition-colors")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(o,l),i(a,u),i(a,h),i(h,b),i(t,w),i(t,_),i(_,C),i(t,T),i(t,L),i(L,S),i(t,A),R||(j=x(t,"click",P),R=!0)},p(t,s){e=t,512&s[0]&&F!==(F=e[39].name.charAt(0)+"")&&v(n,F),512&s[0]&&M!==(M=e[39].name+"")&&v(l,M),512&s[0]&&E!==(E=ut(e[39].category)+"")&&v(b,E),512&s[0]&&H!==(H=e[40].label+"")&&v(C,H),512&s[0]&&$!==($=e[40].bg+" "+e[40].text)&&y(_,"style",$)},d(e){e&&d(t),R=!1,j()}}}function dt(t){let s,n,r;function a(e,t){return"home"===e[0]?Ae:"artist"===e[0]?Se:void 0}let o=a(t),l=o&&o(t);return{c(){s=g("div"),l&&l.c(),y(s,"class","min-h-screen bg-white")},m(e,a){c(e,s,a),l&&l.m(s,null),n||(r=x(window,"keydown",t[22]),n=!0)},p(e,t){o===(o=a(e))&&l?l.p(e,t):(l&&l.d(1),l=o&&o(e),l&&(l.c(),l.m(s,null)))},i:e,o:e,d(e){e&&d(s),l&&l.d(),n=!1,r()}}}function ut(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function gt(e){switch(e){case"egregious":return{bg:"background-color: #FFE5ED;",text:"color: #FF2C6E;",label:"Egregious"};case"severe":return{bg:"background-color: #FFECF1;",text:"color: #FF728F;",label:"Severe"};case"moderate":return{bg:"background-color: #E5F6FF;",text:"color: #009BD7;",label:"Moderate"};default:return{bg:"background-color: #E8F8E6;",text:"color: #30AF22;",label:"Minor"}}}function pt(e,t,s){let n,r="home",a="",o=[],l=!1,i=[],c=!0,d=null,u=[],g=!1,p=[],m=!1,f=null,h=!1,x=null,b=new Set;async function y(){s(5,c=!0);try{const e=await ne.get("/api/v1/categories");e.success&&e.data&&s(4,i=e.data)}catch(e){console.error("Failed to load categories:",e)}finally{s(5,c=!1)}}async function v(){s(10,m=!0);try{const e=await ne.get("/api/v1/categories/blocked-artists");e.success&&e.data&&s(9,p=e.data)}catch(e){console.error("Failed to load blocked artists:",e)}finally{s(10,m=!1)}}async function w(){try{const e=await ne.get("/api/v1/dnp/list");e.success&&e.data&&s(14,b=new Set(e.data.map(e=>e.artist_id)))}catch(e){console.error("Failed to load DNP list:",e)}}async function k(e){d===e?(s(6,d=null),s(7,u=[])):(s(6,d=e),await async function(e){s(8,g=!0);try{const t=await ne.get(`/api/v1/offenses/query?category=${e}`);t.success&&t.data?.artists?s(7,u=t.data.artists):s(7,u=[])}catch(e){s(7,u=[])}finally{s(8,g=!1)}}(e))}async function _(e,t){t.stopPropagation();const n=e.subscribed;s(4,i=i.map(t=>t.id===e.id?{...t,subscribed:!n}:t));try{n?await ne.delete(`/api/v1/categories/${e.id}/subscribe`):await ne.post(`/api/v1/categories/${e.id}/subscribe`),await v()}catch(t){s(4,i=i.map(t=>t.id===e.id?{...t,subscribed:n}:t))}}async function C(e,t){s(0,r="artist"),s(12,h=!0),s(11,f=null);try{const n=await ne.get(`/api/v1/offenses/query?artist_id=${e}`);n.success&&n.data?s(11,f=n.data):s(11,f={id:e,canonical_name:t,offenses:[]})}catch(n){s(11,f={id:e,canonical_name:t,offenses:[]})}finally{s(12,h=!1)}}function $(){s(0,r="home"),s(11,f=null),s(2,o=[]),s(1,a="")}async function T(e){s(13,x=e);const t=b.has(e);try{t?(await ne.delete(`/api/v1/dnp/list/${e}`),b.delete(e)):(await ne.post("/api/v1/dnp/list",{artist_id:e}),b.add(e)),s(14,b=new Set(b))}catch(e){console.error("Failed to toggle block:",e)}finally{s(13,x=null)}}S(async()=>{await Promise.all([y(),v(),w()])});return[r,a,o,l,i,c,d,u,g,p,m,f,h,x,b,{green:{primary:"#30AF22",light:"#59BA48"},blue:{primary:"#009BD7",light:"#00B4FF"},pink:{primary:"#FF2C6E",light:"#FF728F"}},function(){if(clearTimeout(n),!a.trim())return s(2,o=[]),void s(3,l=!1);s(3,l=!0),n=setTimeout(async()=>{try{const e=await ne.get(`/api/v1/artists/search?q=${encodeURIComponent(a.trim())}`);e.success&&e.data?s(2,o=e.data):s(2,o=[])}catch(e){s(2,o=[])}finally{s(3,l=!1)}},150)},k,_,C,$,T,function(e){"Escape"===e.key&&("artist"===r?$():o.length>0&&(s(2,o=[]),s(1,a="")))},()=>ge("sync"),()=>ge("analytics"),()=>ge("graph"),()=>ge("settings"),function(){a=this.value,s(1,a)},e=>C(e.id,e.canonical_name),(e,t)=>_(e,t),e=>k(e.id),e=>C(e.id,e.name),e=>C(e.id,e.name),()=>f&&T(f.id)]}class mt extends Z{constructor(e){super(),X(this,e,pt,dt,a,{},null,[-1,-1])}}function ft(e){let t,s,n;return{c(){t=g("div"),s=g("p"),n=m(e[3]),y(s,"class","text-sm"),k(s,"color",e[8].pink.primary),y(t,"class","mx-5 mt-4 p-4 rounded-lg"),k(t,"background-color","#FFE5ED"),k(t,"border","1px solid "+e[8].pink.light)},m(e,r){c(e,t,r),i(t,s),i(s,n)},p(e,t){8&t&&v(n,e[3])},d(e){e&&d(t)}}}function ht(t){let s;return{c(){s=g("p"),s.textContent="Not connected",y(s,"class","text-sm text-gray-500")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function xt(t){let s,n;return{c(){s=g("p"),n=m("Connected"),y(s,"class","text-sm font-medium"),k(s,"color",t[8].green.primary)},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function bt(t){let s;return{c(){s=g("p"),s.textContent="Loading...",y(s,"class","text-sm text-gray-500")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function yt(e){let t,s,n,r,a,o="spotify"===e[2]?"Connecting...":"Connect";return{c(){t=g("button"),s=m(o),t.disabled=n="spotify"===e[2],y(t,"class","px-4 py-2 bg-[#1DB954] text-white rounded-lg text-sm font-medium hover:bg-[#1ed760] transition-colors disabled:opacity-50")},m(n,o){c(n,t,o),i(t,s),r||(a=x(t,"click",e[15]),r=!0)},p(e,r){4&r&&o!==(o="spotify"===e[2]?"Connecting...":"Connect")&&v(s,o),4&r&&n!==(n="spotify"===e[2])&&(t.disabled=n)},d(e){e&&d(t),r=!1,a()}}}function vt(e){let t,s,n,r,a,o="spotify"===e[2]?"Disconnecting...":"Disconnect";return{c(){t=g("button"),s=m(o),t.disabled=n="spotify"===e[2],y(t,"class","px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50")},m(n,o){c(n,t,o),i(t,s),r||(a=x(t,"click",e[14]),r=!0)},p(e,r){4&r&&o!==(o="spotify"===e[2]?"Disconnecting...":"Disconnect")&&v(s,o),4&r&&n!==(n="spotify"===e[2])&&(t.disabled=n)},d(e){e&&d(t),r=!1,a()}}}function wt(t){let s;return{c(){s=g("p"),s.textContent="Not connected",y(s,"class","text-sm text-gray-500")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function kt(t){let s,n;return{c(){s=g("p"),n=m("Connected"),y(s,"class","text-sm font-medium"),k(s,"color",t[8].green.primary)},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function _t(t){let s;return{c(){s=g("p"),s.textContent="Loading...",y(s,"class","text-sm text-gray-500")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Ct(e){let t,s,n,r,a,o="apple"===e[2]?"Connecting...":"Connect";return{c(){t=g("button"),s=m(o),t.disabled=n="apple"===e[2],y(t,"class","px-4 py-2 bg-gradient-to-r from-[#FA2D48] to-[#A833B9] text-white rounded-lg text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50")},m(n,o){c(n,t,o),i(t,s),r||(a=x(t,"click",e[17]),r=!0)},p(e,r){4&r&&o!==(o="apple"===e[2]?"Connecting...":"Connect")&&v(s,o),4&r&&n!==(n="apple"===e[2])&&(t.disabled=n)},d(e){e&&d(t),r=!1,a()}}}function $t(e){let t,s,n,r,a,o="apple"===e[2]?"Disconnecting...":"Disconnect";return{c(){t=g("button"),s=m(o),t.disabled=n="apple"===e[2],y(t,"class","px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50")},m(n,o){c(n,t,o),i(t,s),r||(a=x(t,"click",e[16]),r=!0)},p(e,r){4&r&&o!==(o="apple"===e[2]?"Disconnecting...":"Disconnect")&&v(s,o),4&r&&n!==(n="apple"===e[2])&&(t.disabled=n)},d(e){e&&d(t),r=!1,a()}}}function Tt(t){let s,n,r,a;return{c(){s=p("svg"),n=p("path"),r=f(),a=g("span"),a.textContent="Sign out",y(n,"stroke-linecap","round"),y(n,"stroke-linejoin","round"),y(n,"stroke-width","2"),y(n,"d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"),y(s,"class","w-5 h-5"),y(s,"fill","none"),y(s,"stroke","currentColor"),y(s,"viewBox","0 0 24 24")},m(e,t){c(e,s,t),i(s,n),c(e,r,t),c(e,a,t)},p:e,d(e){e&&(d(s),d(r),d(a))}}}function Lt(t){let s,n,r;return{c(){s=g("div"),n=f(),r=g("span"),r.textContent="Signing out...",y(s,"class","w-4 h-4 border-2 rounded-full animate-spin"),k(s,"border-color",t[8].blue.primary),k(s,"border-top-color","transparent")},m(e,t){c(e,s,t),c(e,n,t),c(e,r,t)},p:e,d(e){e&&(d(s),d(n),d(r))}}}function St(t){let s,r,a,o,l,u,h,b,w,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I,z,q,G,O,U,Y,V,J,K,W,Q,X,Z,ee,te,se,ne,re,ae,oe,le,ie,ce,de,ue,ge,pe,me,fe,he,xe,be,ye,ve,we,ke,_e,Ce,$e,Te,Le,Se,Ae,Re,je,Fe,Me,Ee,He,Pe,De,Be=(t[7]?.email||"Not signed in")+"",Ne=t[3]&&ft(t);function Ie(e,t){return e[1]?bt:(null==U&&(U=!!e[9]("spotify")),U?xt:ht)}let ze=Ie(t),qe=ze(t);let Ge=function(e){return e[9]("spotify")?vt:yt}(t),Oe=Ge(t);function Ue(e,t){return e[1]?_t:(null==te&&(te=!!e[9]("apple")),te?kt:wt)}let Ye=Ue(t),Ve=Ye(t);let Je=function(e){return e[9]("apple")?$t:Ct}(t),Ke=Je(t);function We(e,t){return e[0]?Lt:Tt}let Qe=We(t),Xe=Qe(t);return{c(){s=g("div"),r=g("header"),a=g("div"),o=g("button"),l=p("svg"),u=p("path"),h=f(),b=g("h1"),b.textContent="Settings",w=f(),_=g("main"),C=g("section"),$=g("div"),$.innerHTML='<h2 class="font-semibold text-gray-900">Account</h2>',T=f(),L=g("div"),S=g("p"),S.textContent="Email",A=f(),R=g("p"),j=m(Be),F=f(),M=g("section"),E=g("div"),E.innerHTML='<h2 class="font-semibold text-gray-900">Music Services</h2> <p class="text-sm text-gray-500 mt-1">Connect your streaming accounts to sync your blocklist</p>',H=f(),Ne&&Ne.c(),P=f(),D=g("div"),B=g("div"),N=g("div"),I=g("div"),I.innerHTML='<svg class="w-7 h-7 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"></path></svg>',z=f(),q=g("div"),G=g("p"),G.textContent="Spotify",O=f(),qe.c(),Y=f(),Oe.c(),V=f(),J=g("div"),K=g("div"),W=g("div"),W.innerHTML='<svg class="w-7 h-7 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.801.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.295-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.042-1.785-.476-2.144-1.32-.238-.56-.223-1.136-.017-1.7.303-.825.96-1.277 1.743-1.49.294-.08.595-.13.893-.18.323-.054.65-.1.973-.157.274-.048.47-.202.53-.486a.707.707 0 00.017-.146c.002-1.633.002-3.265.002-4.898v-.07l-.06-.01c-2.097.4-4.194.8-6.29 1.202-.014.002-.032.014-.037.026-.006.016-.003.037-.003.056v7.36c0 .418-.052.832-.227 1.218-.282.622-.76 1.02-1.416 1.207-.313.09-.634.138-.96.166-.906.08-1.732-.4-2.134-1.203-.268-.534-.278-1.1-.096-1.66.267-.817.864-1.304 1.64-1.55.376-.12.763-.185 1.148-.25.278-.047.558-.088.832-.145.317-.065.522-.25.58-.574a.504.504 0 00.007-.115v-8.41c0-.25.042-.493.15-.72.183-.385.486-.62.882-.728.17-.047.346-.073.522-.11 2.55-.526 5.1-1.05 7.65-1.573.093-.02.19-.03.285-.03.316.004.528.2.613.5.032.113.044.233.044.35v5.9z"></path></svg>',Q=f(),X=g("div"),Z=g("p"),Z.textContent="Apple Music",ee=f(),Ve.c(),se=f(),Ke.c(),ne=f(),re=g("section"),ae=g("div"),ae.innerHTML='<h2 class="font-semibold text-gray-900">Preferences</h2>',oe=f(),le=g("div"),ie=g("div"),ce=g("div"),ce.innerHTML='<p class="font-medium text-gray-900">Block featured artists</p> <p class="text-sm text-gray-500 mt-0.5">Also block songs where artist is featured</p>',de=f(),ue=g("button"),ge=g("span"),pe=f(),me=g("div"),fe=g("div"),fe.innerHTML='<p class="font-medium text-gray-900">Block producer credits</p> <p class="text-sm text-gray-500 mt-0.5">Block songs produced by blocked artists</p>',he=f(),xe=g("button"),be=g("span"),ye=f(),ve=g("div"),we=g("div"),we.innerHTML='<p class="font-medium text-gray-900">News notifications</p> <p class="text-sm text-gray-500 mt-0.5">Get notified when new artists are added</p>',ke=f(),_e=g("button"),Ce=g("span"),$e=f(),Te=g("section"),Le=g("div"),Le.innerHTML='<h2 class="font-semibold text-gray-900">Account Actions</h2>',Se=f(),Ae=g("div"),Re=g("button"),Xe.c(),je=f(),Fe=g("button"),Me=m("Delete account"),Ee=f(),He=g("p"),He.textContent="No Drake in the House v1.0.0",y(u,"stroke-linecap","round"),y(u,"stroke-linejoin","round"),y(u,"stroke-width","2"),y(u,"d","M15 19l-7-7 7-7"),y(l,"class","w-5 h-5"),y(l,"fill","none"),y(l,"stroke","currentColor"),y(l,"viewBox","0 0 24 24"),y(o,"class","p-2 rounded-lg text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors"),k(o,"--focus-color",t[8].blue.primary),y(b,"class","text-xl font-semibold text-gray-900"),y(a,"class","max-w-2xl mx-auto px-4 py-4 flex items-center gap-4"),y(r,"class","sticky top-0 z-50 bg-white border-b border-gray-200"),y($,"class","px-5 py-4 border-b border-gray-200 bg-white"),y(S,"class","text-sm text-gray-500"),y(R,"class","mt-1 font-medium text-gray-900"),y(L,"class","p-5 bg-white"),y(C,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),y(E,"class","px-5 py-4 border-b border-gray-200 bg-white"),y(I,"class","w-12 h-12 bg-[#1DB954] rounded-full flex items-center justify-center"),y(G,"class","font-medium text-gray-900"),y(N,"class","flex items-center gap-4"),y(B,"class","p-5 flex items-center justify-between"),y(W,"class","w-12 h-12 bg-gradient-to-br from-[#FA2D48] to-[#A833B9] rounded-full flex items-center justify-center"),y(Z,"class","font-medium text-gray-900"),y(K,"class","flex items-center gap-4"),y(J,"class","p-5 flex items-center justify-between"),y(D,"class","bg-white divide-y divide-gray-100"),y(M,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),y(ae,"class","px-5 py-4 border-b border-gray-200 bg-white"),y(ge,"class","absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform"),k(ge,"left",t[4]?"22px":"2px"),y(ue,"type","button"),y(ue,"class","relative w-11 h-6 rounded-full transition-colors"),k(ue,"background-color",t[4]?t[8].blue.primary:"#d1d5db"),y(ie,"class","p-5 flex items-center justify-between"),y(be,"class","absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform"),k(be,"left",t[5]?"22px":"2px"),y(xe,"type","button"),y(xe,"class","relative w-11 h-6 rounded-full transition-colors"),k(xe,"background-color",t[5]?t[8].blue.primary:"#d1d5db"),y(me,"class","p-5 flex items-center justify-between"),y(Ce,"class","absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform"),k(Ce,"left",t[6]?"22px":"2px"),y(_e,"type","button"),y(_e,"class","relative w-11 h-6 rounded-full transition-colors"),k(_e,"background-color",t[6]?t[8].blue.primary:"#d1d5db"),y(ve,"class","p-5 flex items-center justify-between"),y(le,"class","bg-white divide-y divide-gray-100"),y(re,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),y(Le,"class","px-5 py-4 border-b border-gray-200 bg-white"),Re.disabled=t[0],y(Re,"class","w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 disabled:opacity-50"),y(Fe,"class","w-full px-4 py-3 rounded-lg text-sm font-medium transition-colors"),k(Fe,"background-color","#FFE5ED"),k(Fe,"color",t[8].pink.primary),k(Fe,"border","1px solid "+t[8].pink.light),y(Ae,"class","p-5 bg-white space-y-3"),y(Te,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),y(He,"class","text-center text-sm text-gray-400"),y(_,"class","max-w-2xl mx-auto px-4 py-6 space-y-6"),y(s,"class","min-h-screen bg-white")},m(e,n){c(e,s,n),i(s,r),i(r,a),i(a,o),i(o,l),i(l,u),i(a,h),i(a,b),i(s,w),i(s,_),i(_,C),i(C,$),i(C,T),i(C,L),i(L,S),i(L,A),i(L,R),i(R,j),i(_,F),i(_,M),i(M,E),i(M,H),Ne&&Ne.m(M,null),i(M,P),i(M,D),i(D,B),i(B,N),i(N,I),i(N,z),i(N,q),i(q,G),i(q,O),qe.m(q,null),i(B,Y),Oe.m(B,null),i(D,V),i(D,J),i(J,K),i(K,W),i(K,Q),i(K,X),i(X,Z),i(X,ee),Ve.m(X,null),i(J,se),Ke.m(J,null),i(_,ne),i(_,re),i(re,ae),i(re,oe),i(re,le),i(le,ie),i(ie,ce),i(ie,de),i(ie,ue),i(ue,ge),i(le,pe),i(le,me),i(me,fe),i(me,he),i(me,xe),i(xe,be),i(le,ye),i(le,ve),i(ve,we),i(ve,ke),i(ve,_e),i(_e,Ce),i(_,$e),i(_,Te),i(Te,Le),i(Te,Se),i(Te,Ae),i(Ae,Re),Xe.m(Re,null),i(Ae,je),i(Ae,Fe),i(Fe,Me),i(_,Ee),i(_,He),Pe||(De=[x(o,"click",t[13]),x(ue,"click",t[18]),x(xe,"click",t[19]),x(_e,"click",t[20]),x(Re,"click",t[12])],Pe=!0)},p(e,[t]){128&t&&Be!==(Be=(e[7]?.email||"Not signed in")+"")&&v(j,Be),e[3]?Ne?Ne.p(e,t):(Ne=ft(e),Ne.c(),Ne.m(M,P)):Ne&&(Ne.d(1),Ne=null),ze===(ze=Ie(e))&&qe?qe.p(e,t):(qe.d(1),qe=ze(e),qe&&(qe.c(),qe.m(q,null))),Oe.p(e,t),Ye===(Ye=Ue(e))&&Ve?Ve.p(e,t):(Ve.d(1),Ve=Ye(e),Ve&&(Ve.c(),Ve.m(X,null))),Ke.p(e,t),16&t&&k(ge,"left",e[4]?"22px":"2px"),16&t&&k(ue,"background-color",e[4]?e[8].blue.primary:"#d1d5db"),32&t&&k(be,"left",e[5]?"22px":"2px"),32&t&&k(xe,"background-color",e[5]?e[8].blue.primary:"#d1d5db"),64&t&&k(Ce,"left",e[6]?"22px":"2px"),64&t&&k(_e,"background-color",e[6]?e[8].blue.primary:"#d1d5db"),Qe===(Qe=We(e))&&Xe?Xe.p(e,t):(Xe.d(1),Xe=Qe(e),Xe&&(Xe.c(),Xe.m(Re,null))),1&t&&(Re.disabled=e[0])},i:e,o:e,d(e){e&&d(s),Ne&&Ne.d(),qe.d(),Oe.d(),Ve.d(),Ke.d(),Xe.d(),Pe=!1,n(De)}}}function At(e,t,s){let n;l(e,oe,e=>s(7,n=e));let r=!1,a=[],o=!0,i=null,c=null,d=!0,u=!1,g=!0;async function p(e){s(2,i=e),s(3,c=null);try{const t=await ne.post(`/api/v1/auth/oauth/${e}/link`);t.success&&t.data?.auth_url?window.location.href=t.data.auth_url:s(3,c="Failed to initiate connection")}catch(e){s(3,c="Failed to connect. Please try again.")}finally{s(2,i=null)}}async function m(e){s(2,i=e);try{(await ne.delete(`/api/v1/auth/oauth/${e}/unlink`)).success&&(a=a.filter(t=>t.provider!==e))}catch(e){console.error("Disconnect failed:",e)}finally{s(2,i=null)}}S(async()=>{await async function(){s(1,o=!0);try{const e=await ne.get("/api/v1/auth/oauth/accounts");e.success&&e.data&&(a=e.data)}catch(e){console.error("Failed to load connections:",e)}finally{s(1,o=!1)}}()});return[r,o,i,c,d,u,g,n,{green:{primary:"#30AF22",light:"#59BA48"},blue:{primary:"#009BD7",light:"#00B4FF"},pink:{primary:"#FF2C6E",light:"#FF728F"}},function(e){return a.some(t=>t.provider===e)},p,m,async function(){s(0,r=!0);try{await le.logout(),window.location.href="/"}catch(e){s(0,r=!1)}},()=>ge("home"),()=>m("spotify"),()=>p("spotify"),()=>m("apple"),()=>p("apple"),()=>s(4,d=!d),()=>s(5,u=!u),()=>s(6,g=!g)]}class Rt extends Z{constructor(e){super(),X(this,e,At,St,a,{})}}function jt(e){let t,s,r,a,o,l,u,p,h,b,w,k,_;return{c(){t=g("div"),t.innerHTML='<div class="w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div>',s=f(),r=g("h1"),r.textContent="Connection Failed",a=f(),o=g("p"),l=m(e[1]),u=f(),p=g("div"),h=g("button"),h.textContent="Try Again",b=f(),w=g("button"),w.textContent="Go Home",y(t,"class","mb-6"),y(r,"class","text-xl font-bold mb-2 text-red-400"),y(o,"class","text-gray-400 mb-6"),y(h,"class","px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium transition-colors"),y(w,"class","px-6 py-3 bg-rose-600 hover:bg-rose-700 rounded-lg font-medium transition-colors"),y(p,"class","flex gap-3 justify-center")},m(n,d){c(n,t,d),c(n,s,d),c(n,r,d),c(n,a,d),c(n,o,d),i(o,l),c(n,u,d),c(n,p,d),i(p,h),i(p,b),i(p,w),k||(_=[x(h,"click",e[3]),x(w,"click",e[4])],k=!0)},p(e,t){2&t&&v(l,e[1])},d(e){e&&(d(t),d(s),d(r),d(a),d(o),d(u),d(p)),k=!1,n(_)}}}function Ft(e){let t,s,n,r,a,o,l,u,p,h,b,w,k=Ht(e[2])+"";return{c(){t=g("div"),t.innerHTML='<div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>',s=f(),n=g("h1"),n.textContent="Connected!",r=f(),a=g("p"),o=m("Your "),l=m(k),u=m(" account has been linked successfully."),p=f(),h=g("button"),h.textContent="Go to Settings",y(t,"class","mb-6"),y(n,"class","text-xl font-bold mb-2 text-green-400"),y(a,"class","text-gray-400 mb-6"),y(h,"class","px-6 py-3 bg-rose-600 hover:bg-rose-700 rounded-lg font-medium transition-colors")},m(d,g){c(d,t,g),c(d,s,g),c(d,n,g),c(d,r,g),c(d,a,g),i(a,o),i(a,l),i(a,u),c(d,p,g),c(d,h,g),b||(w=x(h,"click",e[3]),b=!0)},p(e,t){4&t&&k!==(k=Ht(e[2])+"")&&v(l,k)},d(e){e&&(d(t),d(s),d(n),d(r),d(a),d(p),d(h)),b=!1,w()}}}function Mt(e){let t,s,n,r,a,o,l,u=Ht(e[2])+"";return{c(){t=g("div"),t.innerHTML='<div class="w-16 h-16 border-4 border-rose-500 border-t-transparent rounded-full animate-spin mx-auto"></div>',s=f(),n=g("h1"),r=m("Connecting "),a=m(u),o=f(),l=g("p"),l.textContent="Please wait while we complete the connection...",y(t,"class","mb-6"),y(n,"class","text-xl font-bold mb-2"),y(l,"class","text-gray-400")},m(e,d){c(e,t,d),c(e,s,d),c(e,n,d),i(n,r),i(n,a),c(e,o,d),c(e,l,d)},p(e,t){4&t&&u!==(u=Ht(e[2])+"")&&v(a,u)},d(e){e&&(d(t),d(s),d(n),d(o),d(l))}}}function Et(t){let s,n;function r(e,t){return"loading"===e[0]?Mt:"success"===e[0]?Ft:jt}let a=r(t),o=a(t);return{c(){s=g("div"),n=g("div"),o.c(),y(n,"class","bg-gray-800 rounded-xl border border-gray-600 p-8 max-w-md w-full text-center"),y(s,"class","min-h-screen bg-gray-900 text-white flex items-center justify-center p-4")},m(e,t){c(e,s,t),i(s,n),o.m(n,null)},p(e,[t]){a===(a=r(e))&&o?o.p(e,t):(o.d(1),o=a(e),o&&(o.c(),o.m(n,null)))},i:e,o:e,d(e){e&&d(s),o.d()}}}function Ht(e){switch(e){case"spotify":return"Spotify";case"apple":return"Apple Music";case"google":return"Google";case"github":return"GitHub";default:return e}}function Pt(e,t,s){let n="loading",r="",a="";return S(async()=>{const e=new URLSearchParams(window.location.search),t=e.get("code"),o=e.get("state"),l=e.get("error"),i=e.get("error_description"),c=window.location.pathname.split("/");if(s(2,a=c[c.length-1]||"unknown"),l)return s(0,n="error"),void s(1,r=i||l||"Authentication was cancelled or denied");if(!t||!o)return s(0,n="error"),void s(1,r="Missing authentication parameters");try{const e=await ne.post(`/api/v1/auth/oauth/${a}/link-callback`,{code:t,state:o});e.success?(s(0,n="success"),setTimeout(()=>{ge("settings")},1500)):(s(0,n="error"),s(1,r=e.message||"Failed to link account"))}catch(e){s(0,n="error"),s(1,r=e instanceof Error?e.message:"An unexpected error occurred")}}),[n,r,a,function(){ge("settings")},function(){ge("home")}]}class Dt extends Z{constructor(e){super(),X(this,e,Pt,Et,a,{})}}const Bt=te({status:[],runs:[],currentRun:null,health:null,canonicalArtists:[],isLoading:!1,isTriggering:!1,error:null}),Nt=se(Bt,e=>e.status.some(e=>"running"===e.status)),It=se(Bt,e=>e.status),zt=se(Bt,e=>e.runs.slice(0,10)),qt={fetchStatus:async()=>{Bt.update(e=>({...e,isLoading:!0,error:null}));try{const e=await ne.authenticatedRequest("GET","/api/v1/sync/status");return e.success&&e.data?(Bt.update(t=>({...t,status:e.data.platforms,isLoading:!1})),{success:!0}):(Bt.update(t=>({...t,isLoading:!1,error:e.message||"Failed to fetch sync status"})),{success:!1,message:e.message})}catch(e){return Bt.update(t=>({...t,isLoading:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},triggerSync:async e=>{Bt.update(e=>({...e,isTriggering:!0,error:null}));try{const t=await ne.authenticatedRequest("POST","/api/v1/sync/trigger",e);return t.success&&t.data?(Bt.update(e=>({...e,isTriggering:!1})),await qt.fetchStatus(),await qt.fetchRuns(),{success:!0,runId:t.data.run_id}):(Bt.update(e=>({...e,isTriggering:!1,error:t.message||"Failed to trigger sync"})),{success:!1,message:t.message})}catch(e){return Bt.update(t=>({...t,isTriggering:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},fetchRuns:async(e=20)=>{Bt.update(e=>({...e,isLoading:!0,error:null}));try{const t=await ne.authenticatedRequest("GET",`/api/v1/sync/runs?limit=${e}`);return t.success&&t.data?(Bt.update(e=>({...e,runs:t.data.runs,isLoading:!1})),{success:!0}):(Bt.update(e=>({...e,isLoading:!1,error:t.message||"Failed to fetch sync runs"})),{success:!1,message:t.message})}catch(e){return Bt.update(t=>({...t,isLoading:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},fetchRun:async e=>{try{const t=await ne.authenticatedRequest("GET",`/api/v1/sync/runs/${e}`);return t.success&&t.data?(Bt.update(e=>({...e,currentRun:t.data})),{success:!0,run:t.data}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},cancelRun:async e=>{try{const t=await ne.authenticatedRequest("POST",`/api/v1/sync/runs/${e}/cancel`);return t.success?(await qt.fetchRuns(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},fetchHealth:async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/sync/health");return e.success&&e.data?(Bt.update(t=>({...t,health:e.data})),{success:!0,health:e.data}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},searchArtists:async e=>{try{const t=await ne.authenticatedRequest("GET",`/api/v1/sync/search?q=${encodeURIComponent(e)}`);return t.success&&t.data?{success:!0,artists:t.data.artists}:{success:!1,message:t.message,artists:[]}}catch(e){return{success:!1,message:e.message,artists:[]}}},clearError:()=>{Bt.update(e=>({...e,error:null}))}};function Gt(e,t,s){const n=e.slice();return n[26]=t[s],n}function Ot(e,t,s){const n=e.slice();return n[29]=t[s],n}function Ut(e,t,s){const n=e.slice();n[26]=t[s];const r=n[8].find(function(...t){return e[18](n[26],...t)});return n[32]=r,n}function Yt(e,t,s){const n=e.slice();return n[26]=t[s],n}function Vt(e){let t,s;return{c(){t=g("span"),t.textContent="ðŸ”„",s=m(" Trigger Sync")},m(e,n){c(e,t,n),c(e,s,n)},d(e){e&&(d(t),d(s))}}}function Jt(e){let t,s;return{c(){t=g("span"),s=m("\n            Starting..."),y(t,"class","w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin")},m(e,n){c(e,t,n),c(e,s,n)},d(e){e&&(d(t),d(s))}}}function Kt(e){let t,s,n,r,a,o,l,p,h,x,b,w,k,_,C="healthy"===e[0]?"ðŸ’š":"degraded"===e[0]?"ðŸ’›":"â¤ï¸",$=V(e[1].health.platforms),T=[];for(let t=0;t<$.length;t+=1)T[t]=Wt(Yt(e,$,t));return{c(){t=g("div"),s=g("div"),n=g("div"),r=g("span"),a=m(C),o=f(),l=g("div"),p=g("span"),p.textContent="Overall Health:",h=f(),x=g("span"),b=m(e[0]),k=f(),_=g("div");for(let e=0;e<T.length;e+=1)T[e].c();y(r,"class","text-2xl"),y(p,"class","font-medium text-gray-900"),y(x,"class",w=e[6]+" font-semibold ml-2 capitalize"),y(n,"class","flex items-center gap-3"),y(_,"class","flex items-center gap-4 text-sm text-gray-500"),y(s,"class","flex items-center justify-between"),y(t,"class","bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(r,a),i(n,o),i(n,l),i(l,p),i(l,h),i(l,x),i(x,b),i(s,k),i(s,_);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(_,null)},p(e,t){if(1&t[0]&&C!==(C="healthy"===e[0]?"ðŸ’š":"degraded"===e[0]?"ðŸ’›":"â¤ï¸")&&v(a,C),1&t[0]&&v(b,e[0]),64&t[0]&&w!==(w=e[6]+" font-semibold ml-2 capitalize")&&y(x,"class",w),2&t[0]){let s;for($=V(e[1].health.platforms),s=0;s<$.length;s+=1){const n=Yt(e,$,s);T[s]?T[s].p(n,t):(T[s]=Wt(n),T[s].c(),T[s].m(_,null))}for(;s<T.length;s+=1)T[s].d(1);T.length=$.length}},d(e){e&&d(t),u(T,e)}}}function Wt(e){let t,s,n,r,a,o,l,u,p=e[26].is_healthy?"â—":"â—‹",h=e[26].platform+"";return{c(){t=g("div"),s=g("span"),n=m(p),a=f(),o=g("span"),l=m(h),u=f(),y(s,"class",r=e[26].is_healthy?"text-green-500":"text-red-500"),y(o,"class","capitalize"),y(t,"class","flex items-center gap-1")},m(e,r){c(e,t,r),i(t,s),i(s,n),i(t,a),i(t,o),i(o,l),i(t,u)},p(e,t){2&t[0]&&p!==(p=e[26].is_healthy?"â—":"â—‹")&&v(n,p),2&t[0]&&r!==(r=e[26].is_healthy?"text-green-500":"text-red-500")&&y(s,"class",r),2&t[0]&&h!==(h=e[26].platform+"")&&v(l,h)},d(e){e&&d(t)}}}function Qt(e){let t,s,n,r,a,o,l,u,p,h,b=e[1].error+"";return{c(){t=g("div"),s=g("div"),n=g("span"),n.textContent="âŒ",r=f(),a=g("span"),o=m(b),l=f(),u=g("button"),u.textContent="Dismiss",y(u,"type","button"),y(u,"class","ml-auto text-red-500 hover:text-red-700"),y(s,"class","flex items-center gap-2 text-red-700"),y(t,"class","bg-red-50 border border-red-200 rounded-xl p-4 mb-6")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(s,l),i(s,u),p||(h=x(u,"click",qt.clearError),p=!0)},p(e,t){2&t[0]&&b!==(b=e[1].error+"")&&v(o,b)},d(e){e&&d(t),p=!1,h()}}}function Xt(t){let s;return{c(){s=g("span"),s.textContent="Not synced",y(s,"class","text-xs text-gray-400")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Zt(e){let t,s,n,r,a,o=hs(e[32].status)+"",l=e[32].status+"";return{c(){t=g("span"),s=m(o),n=f(),r=m(l),y(t,"class",a="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium "+fs(e[32].status))},m(e,a){c(e,t,a),i(t,s),i(t,n),i(t,r)},p(e,n){256&n[0]&&o!==(o=hs(e[32].status)+"")&&v(s,o),256&n[0]&&l!==(l=e[32].status+"")&&v(r,l),256&n[0]&&a!==(a="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium "+fs(e[32].status))&&y(t,"class",a)},d(e){e&&d(t)}}}function es(e){let t,s,n,r,a,o,l,u,p,x,b,w,k,_,C=(e[32].artists_count?.toLocaleString()??0)+"",$=bs(e[32].last_sync)+"",T=e[32].error_message&&ts(e);return{c(){t=g("div"),s=g("div"),n=g("span"),n.textContent="Artists:",r=f(),a=g("span"),o=m(C),l=f(),u=g("div"),p=g("span"),p.textContent="Last sync:",x=f(),b=g("span"),w=m($),k=f(),T&&T.c(),_=h(),y(a,"class","font-medium"),y(s,"class","flex justify-between"),y(b,"class","font-medium"),y(u,"class","flex justify-between"),y(t,"class","space-y-1 text-sm text-gray-600")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(t,l),i(t,u),i(u,p),i(u,x),i(u,b),i(b,w),c(e,k,d),T&&T.m(e,d),c(e,_,d)},p(e,t){256&t[0]&&C!==(C=(e[32].artists_count?.toLocaleString()??0)+"")&&v(o,C),256&t[0]&&$!==($=bs(e[32].last_sync)+"")&&v(w,$),e[32].error_message?T?T.p(e,t):(T=ts(e),T.c(),T.m(_.parentNode,_)):T&&(T.d(1),T=null)},d(e){e&&(d(t),d(k),d(_)),T&&T.d(e)}}}function ts(e){let t,s,n=e[32].error_message+"";return{c(){t=g("div"),s=m(n),y(t,"class","mt-2 text-xs text-red-600 bg-red-50 rounded p-2")},m(e,n){c(e,t,n),i(t,s)},p(e,t){256&t[0]&&n!==(n=e[32].error_message+"")&&v(s,n)},d(e){e&&d(t)}}}function ss(e){let t,s,n,r,a,o,l,u,p,m;function h(e,t){return e[32]?Zt:Xt}let x=h(e),b=x(e),v=e[32]&&es(e);return{c(){t=g("div"),s=g("div"),n=g("div"),r=g("span"),r.textContent=`${e[26].icon}`,a=f(),o=g("div"),l=g("div"),l.textContent=`${e[26].name}`,u=f(),b.c(),p=f(),v&&v.c(),m=f(),y(r,"class","text-2xl"),y(l,"class","font-medium text-gray-900"),y(n,"class","flex items-center gap-3"),y(s,"class","flex items-start justify-between mb-3"),y(t,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(n,a),i(n,o),i(o,l),i(o,u),b.m(o,null),i(t,p),v&&v.m(t,null),i(t,m)},p(e,s){x===(x=h(e))&&b?b.p(e,s):(b.d(1),b=x(e),b&&(b.c(),b.m(o,null))),e[32]?v?v.p(e,s):(v=es(e),v.c(),v.m(t,m)):v&&(v.d(1),v=null)},d(e){e&&d(t),b.d(),v&&v.d()}}}function ns(e){let t,s,n,r,a,o=V(e[9]),l=[];for(let t=0;t<o.length;t+=1)l[t]=cs(Ot(e,o,t));return{c(){t=g("div"),s=g("table"),n=g("thead"),n.innerHTML='<tr><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Platform</th> <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th> <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th> <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Artists</th> <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Duration</th> <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Started</th> <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th></tr>',r=f(),a=g("tbody");for(let e=0;e<l.length;e+=1)l[e].c();y(n,"class","bg-gray-50 border-b border-gray-100"),y(a,"class","divide-y divide-gray-100"),y(s,"class","w-full"),y(t,"class","bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden")},m(e,o){c(e,t,o),i(t,s),i(s,n),i(s,r),i(s,a);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(a,null)},p(e,t){if(33280&t[0]){let s;for(o=V(e[9]),s=0;s<o.length;s+=1){const n=Ot(e,o,s);l[s]?l[s].p(n,t):(l[s]=cs(n),l[s].c(),l[s].m(a,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(e){e&&d(t),u(l,e)}}}function rs(t){let s;return{c(){s=g("div"),s.innerHTML='<span class="text-4xl mb-3 block">ðŸ“­</span> <p class="text-gray-600">No sync runs yet. Trigger your first sync above.</p>',y(s,"class","bg-gray-50 rounded-xl p-8 text-center")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function as(t){let s;return{c(){s=g("div"),s.innerHTML='<div class="w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>',y(s,"class","flex justify-center py-12")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function os(e){let t,s,n,r,a=e[29].errors_count+"";return{c(){t=g("span"),s=m("("),n=m(a),r=m(" errors)"),y(t,"class","text-red-500 ml-1")},m(e,a){c(e,t,a),i(t,s),i(t,n),i(t,r)},p(e,t){512&t[0]&&a!==(a=e[29].errors_count+"")&&v(n,a)},d(e){e&&d(t)}}}function ls(e){let t,s,n;function r(){return e[21](e[29])}return{c(){t=g("button"),t.textContent="Details",y(t,"type","button"),y(t,"class","text-indigo-600 hover:text-indigo-700 text-sm font-medium")},m(e,a){c(e,t,a),s||(n=x(t,"click",r),s=!0)},p(t,s){e=t},d(e){e&&d(t),s=!1,n()}}}function is(e){let t,s,n;function r(){return e[20](e[29])}return{c(){t=g("button"),t.textContent="Cancel",y(t,"type","button"),y(t,"class","text-red-600 hover:text-red-700 text-sm font-medium")},m(e,a){c(e,t,a),s||(n=x(t,"click",r),s=!0)},p(t,s){e=t},d(e){e&&d(t),s=!1,n()}}}function cs(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B=e[29].platform+"",N=e[29].sync_type+"",I=hs(e[29].status)+"",z=e[29].status+"",q=e[29].artists_processed.toLocaleString()+"",G=xs(e[29].duration_ms)+"",O=bs(e[29].started_at)+"",U=e[29].errors_count>0&&os(e);function Y(e,t){return"running"===e[29].status||"pending"===e[29].status?is:ls}let V=Y(e),J=V(e);return{c(){t=g("tr"),s=g("td"),n=g("span"),r=m(B),a=f(),o=g("td"),l=g("span"),u=m(N),h=f(),x=g("td"),b=g("span"),w=m(I),k=f(),_=m(z),$=f(),T=g("td"),L=m(q),S=f(),U&&U.c(),A=f(),R=g("td"),j=m(G),F=f(),M=g("td"),E=m(O),H=f(),P=g("td"),J.c(),D=f(),y(n,"class","capitalize font-medium"),y(s,"class","px-4 py-3"),y(l,"class",p="px-2 py-0.5 rounded text-xs "+("full"===e[29].sync_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700")),y(o,"class","px-4 py-3"),y(b,"class",C="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium "+fs(e[29].status)),y(x,"class","px-4 py-3"),y(T,"class","px-4 py-3 text-gray-600"),y(R,"class","px-4 py-3 text-gray-600"),y(M,"class","px-4 py-3 text-gray-600"),y(P,"class","px-4 py-3"),y(t,"class","hover:bg-gray-50")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(t,a),i(t,o),i(o,l),i(l,u),i(t,h),i(t,x),i(x,b),i(b,w),i(b,k),i(b,_),i(t,$),i(t,T),i(T,L),i(T,S),U&&U.m(T,null),i(t,A),i(t,R),i(R,j),i(t,F),i(t,M),i(M,E),i(t,H),i(t,P),J.m(P,null),i(t,D)},p(e,t){512&t[0]&&B!==(B=e[29].platform+"")&&v(r,B),512&t[0]&&N!==(N=e[29].sync_type+"")&&v(u,N),512&t[0]&&p!==(p="px-2 py-0.5 rounded text-xs "+("full"===e[29].sync_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"))&&y(l,"class",p),512&t[0]&&I!==(I=hs(e[29].status)+"")&&v(w,I),512&t[0]&&z!==(z=e[29].status+"")&&v(_,z),512&t[0]&&C!==(C="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium "+fs(e[29].status))&&y(b,"class",C),512&t[0]&&q!==(q=e[29].artists_processed.toLocaleString()+"")&&v(L,q),e[29].errors_count>0?U?U.p(e,t):(U=os(e),U.c(),U.m(T,null)):U&&(U.d(1),U=null),512&t[0]&&G!==(G=xs(e[29].duration_ms)+"")&&v(j,G),512&t[0]&&O!==(O=bs(e[29].started_at)+"")&&v(E,O),V===(V=Y(e))&&J?J.p(e,t):(J.d(1),J=V(e),J&&(J.c(),J.m(P,null)))},d(e){e&&d(t),U&&U.d(),J.d()}}}function ds(e){let t,s,r,a,o,l,p,m,h,v,k,C,$,T,L,S,A,R,j,F,M,E,H,D,B,N,I,z,q,G,O,U,Y,J,K,W,Q,X,Z,ee,te,se=V(e[10]),ne=[];for(let t=0;t<se.length;t+=1)ne[t]=us(Gt(e,se,t));function re(e,t){return e[1].isTriggering?ps:gs}let ae=re(e),oe=ae(e);return{c(){t=g("div"),s=g("div"),r=g("div"),r.innerHTML='<div class="w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center text-2xl mr-4">ðŸ”„</div> <div><h3 class="text-xl font-bold text-gray-900">Trigger Catalog Sync</h3> <p class="text-gray-600">Select platforms and sync options</p></div>',a=f(),o=g("div"),l=g("label"),l.textContent="Platforms",p=f(),m=g("div");for(let e=0;e<ne.length;e+=1)ne[e].c();h=f(),v=g("div"),k=g("label"),k.textContent="Sync Type",C=f(),$=g("div"),T=g("button"),L=g("div"),L.textContent="Incremental",S=f(),A=g("div"),A.textContent="Only new/changed artists",j=f(),F=g("button"),M=g("div"),M.textContent="Full",E=f(),H=g("div"),H.textContent="Complete catalog refresh",B=f(),N=g("div"),I=g("label"),I.textContent="Priority",z=f(),q=g("select"),G=g("option"),G.textContent="Low",O=g("option"),O.textContent="Normal",U=g("option"),U.textContent="High",Y=g("option"),Y.textContent="Critical",J=f(),K=g("div"),W=g("button"),W.textContent="Cancel",Q=f(),X=g("button"),oe.c(),y(r,"class","flex items-center mb-6"),y(l,"class","block text-sm font-medium text-gray-700 mb-3"),y(m,"class","grid grid-cols-2 gap-2"),y(o,"class","mb-6"),y(k,"class","block text-sm font-medium text-gray-700 mb-3"),y(L,"class","font-medium"),y(A,"class","text-xs text-gray-500"),y(T,"type","button"),y(T,"class",R="p-3 rounded-xl border-2 transition-all text-left "+("incremental"===e[3]?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300")),y(M,"class","font-medium"),y(H,"class","text-xs text-gray-500"),y(F,"type","button"),y(F,"class",D="p-3 rounded-xl border-2 transition-all text-left "+("full"===e[3]?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300")),y($,"class","grid grid-cols-2 gap-2"),y(v,"class","mb-6"),y(I,"for","priority"),y(I,"class","block text-sm font-medium text-gray-700 mb-2"),G.__value="low",w(G,G.__value),O.__value="normal",w(O,O.__value),U.__value="high",w(U,U.__value),Y.__value="critical",w(Y,Y.__value),y(q,"id","priority"),y(q,"class","w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),void 0===e[4]&&P(()=>e[25].call(q)),y(N,"class","mb-6"),y(W,"type","button"),y(W,"class","flex-1 px-4 py-3 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 font-medium transition-colors"),y(X,"type","button"),X.disabled=Z=0===e[2].length||e[1].isTriggering,y(X,"class","flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),y(K,"class","flex gap-3"),y(s,"class","bg-white rounded-2xl max-w-lg w-full p-6 shadow-xl"),y(s,"role","document"),y(t,"class","fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"),y(t,"role","dialog"),y(t,"aria-modal","true")},m(n,d){c(n,t,d),i(t,s),i(s,r),i(s,a),i(s,o),i(o,l),i(o,p),i(o,m);for(let e=0;e<ne.length;e+=1)ne[e]&&ne[e].m(m,null);i(s,h),i(s,v),i(v,k),i(v,C),i(v,$),i($,T),i(T,L),i(T,S),i(T,A),i($,j),i($,F),i(F,M),i(F,E),i(F,H),i(s,B),i(s,N),i(N,I),i(N,z),i(N,q),i(q,G),i(q,O),i(q,U),i(q,Y),_(q,e[4],!0),i(s,J),i(s,K),i(K,W),i(K,Q),i(K,X),oe.m(X,null),ee||(te=[x(T,"click",e[23]),x(F,"click",e[24]),x(q,"change",e[25]),x(W,"click",e[12]),x(X,"click",e[14]),x(s,"click",b(e[16])),x(t,"click",e[12])],ee=!0)},p(e,t){if(9220&t[0]){let s;for(se=V(e[10]),s=0;s<se.length;s+=1){const n=Gt(e,se,s);ne[s]?ne[s].p(n,t):(ne[s]=us(n),ne[s].c(),ne[s].m(m,null))}for(;s<ne.length;s+=1)ne[s].d(1);ne.length=se.length}8&t[0]&&R!==(R="p-3 rounded-xl border-2 transition-all text-left "+("incremental"===e[3]?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"))&&y(T,"class",R),8&t[0]&&D!==(D="p-3 rounded-xl border-2 transition-all text-left "+("full"===e[3]?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"))&&y(F,"class",D),16&t[0]&&_(q,e[4]),ae!==(ae=re(e))&&(oe.d(1),oe=ae(e),oe&&(oe.c(),oe.m(X,null))),6&t[0]&&Z!==(Z=0===e[2].length||e[1].isTriggering)&&(X.disabled=Z)},d(e){e&&d(t),u(ne,e),oe.d(),ee=!1,n(te)}}}function us(e){let t,s,n,r,a,o,l,u;function p(){return e[22](e[26])}return{c(){t=g("button"),s=g("span"),s.textContent=`${e[26].icon}`,n=f(),r=g("span"),r.textContent=`${e[26].name}`,a=f(),y(s,"class","text-xl"),y(r,"class","font-medium"),y(t,"type","button"),y(t,"class",o="p-3 rounded-xl border-2 transition-all text-left flex items-center gap-2 "+(e[2].includes(e[26].id)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"))},m(e,o){c(e,t,o),i(t,s),i(t,n),i(t,r),i(t,a),l||(u=x(t,"click",p),l=!0)},p(s,n){e=s,4&n[0]&&o!==(o="p-3 rounded-xl border-2 transition-all text-left flex items-center gap-2 "+(e[2].includes(e[26].id)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"))&&y(t,"class",o)},d(e){e&&d(t),l=!1,u()}}}function gs(e){let t;return{c(){t=m("Start Sync")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function ps(e){let t;return{c(){t=m("Starting...")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function ms(t){let s,r,a,o,l,p,m,b,v,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I;function z(e,t){return e[1].isTriggering?Jt:Vt}let q=z(t),G=q(t),O=t[1].health&&Kt(t),U=t[1].error&&Qt(t),Y=V(t[10]),J=[];for(let e=0;e<Y.length;e+=1)J[e]=ss(Ut(t,Y,e));function K(e,t){return e[1].isLoading?as:0===e[9].length?rs:ns}let W=K(t),Q=W(t),X=t[5]&&ds(t);return{c(){s=g("div"),r=g("div"),a=g("div"),o=g("button"),o.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n        Back to Home',l=f(),p=g("div"),m=g("div"),m.innerHTML='<h1 class="text-3xl font-bold text-gray-900 mb-2">Catalog Sync</h1> <p class="text-lg text-gray-600">Synchronize artist catalogs across streaming platforms.</p>',b=f(),v=g("button"),G.c(),k=f(),_=g("div"),O&&O.c(),C=f(),U&&U.c(),$=f(),T=g("div"),L=g("h2"),L.textContent="Platform Status",S=f(),A=g("div");for(let e=0;e<J.length;e+=1)J[e].c();R=f(),j=g("div"),F=g("div"),M=g("h2"),M.textContent="Recent Sync Runs",E=f(),H=g("button"),H.innerHTML="<span>ðŸ”„</span> Refresh",P=f(),Q.c(),D=f(),X&&X.c(),B=h(),y(o,"type","button"),y(o,"class","flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors mb-4"),y(v,"type","button"),v.disabled=w=t[7]||t[1].isTriggering,y(v,"class","px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"),y(p,"class","flex items-center justify-between"),y(a,"class","max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8"),y(r,"class","bg-white border-b border-gray-100"),y(L,"class","text-xl font-semibold text-gray-900 mb-4"),y(A,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"),y(T,"class","mb-8"),y(M,"class","text-xl font-semibold text-gray-900"),y(H,"type","button"),y(H,"class","text-indigo-600 hover:text-indigo-700 text-sm font-medium flex items-center gap-1"),y(F,"class","flex items-center justify-between mb-4"),y(_,"class","max-w-6xl mx-auto px-4 py-6 sm:px-6 lg:px-8"),y(s,"class","min-h-screen bg-gradient-to-b from-blue-50 to-white")},m(e,n){c(e,s,n),i(s,r),i(r,a),i(a,o),i(a,l),i(a,p),i(p,m),i(p,b),i(p,v),G.m(v,null),i(s,k),i(s,_),O&&O.m(_,null),i(_,C),U&&U.m(_,null),i(_,$),i(_,T),i(T,L),i(T,S),i(T,A);for(let e=0;e<J.length;e+=1)J[e]&&J[e].m(A,null);i(_,R),i(_,j),i(j,F),i(F,M),i(F,E),i(F,H),i(j,P),Q.m(j,null),c(e,D,n),X&&X.m(e,n),c(e,B,n),N||(I=[x(o,"click",t[17]),x(v,"click",t[11]),x(H,"click",t[19])],N=!0)},p(e,t){if(q!==(q=z(e))&&(G.d(1),G=q(e),G&&(G.c(),G.m(v,null))),130&t[0]&&w!==(w=e[7]||e[1].isTriggering)&&(v.disabled=w),e[1].health?O?O.p(e,t):(O=Kt(e),O.c(),O.m(_,C)):O&&(O.d(1),O=null),e[1].error?U?U.p(e,t):(U=Qt(e),U.c(),U.m(_,$)):U&&(U.d(1),U=null),1280&t[0]){let s;for(Y=V(e[10]),s=0;s<Y.length;s+=1){const n=Ut(e,Y,s);J[s]?J[s].p(n,t):(J[s]=ss(n),J[s].c(),J[s].m(A,null))}for(;s<J.length;s+=1)J[s].d(1);J.length=Y.length}W===(W=K(e))&&Q?Q.p(e,t):(Q.d(1),Q=W(e),Q&&(Q.c(),Q.m(j,null))),e[5]?X?X.p(e,t):(X=ds(e),X.c(),X.m(B.parentNode,B)):X&&(X.d(1),X=null)},i:e,o:e,d(e){e&&(d(s),d(D),d(B)),G.d(),O&&O.d(),U&&U.d(),u(J,e),Q.d(),X&&X.d(e),N=!1,n(I)}}}function fs(e){switch(e){case"running":return"bg-blue-100 text-blue-700";case"completed":return"bg-green-100 text-green-700";case"error":case"failed":return"bg-red-100 text-red-700";case"cancelled":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-600"}}function hs(e){switch(e){case"running":return"ðŸ”„";case"completed":return"âœ…";case"error":case"failed":return"âŒ";case"cancelled":return"â¹ï¸";default:return"â³"}}function xs(e){return e?e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`:"-"}function bs(e){if(!e)return"Never";const t=new Date(e),s=(new Date).getTime()-t.getTime();return s<6e4?"Just now":s<36e5?`${Math.floor(s/6e4)}m ago`:s<864e5?`${Math.floor(s/36e5)}h ago`:t.toLocaleDateString()}function ys(e,t,s){let n,r,a,o,i,c;l(e,Bt,e=>s(1,a=e)),l(e,Nt,e=>s(7,o=e)),l(e,It,e=>s(8,i=e)),l(e,zt,e=>s(9,c=e));let d=[],u="incremental",g="normal",p=!1;function m(){s(5,p=!1)}function f(e){d.includes(e)?s(2,d=d.filter(t=>t!==e)):s(2,d=[...d,e])}async function h(e){await qt.cancelRun(e)}S(async()=>{await Promise.all([qt.fetchStatus(),qt.fetchRuns(),qt.fetchHealth()])});return e.$$.update=()=>{2&e.$$.dirty[0]&&s(0,n=a.health?.overall_status??"unknown"),1&e.$$.dirty[0]&&s(6,r="healthy"===n?"text-green-600":"degraded"===n?"text-yellow-600":"text-red-600")},[n,a,d,u,g,p,r,o,i,c,[{id:"spotify",name:"Spotify",icon:"ðŸŽµ"},{id:"apple",name:"Apple Music",icon:"ðŸŽ"},{id:"tidal",name:"Tidal",icon:"ðŸŒŠ"},{id:"youtube",name:"YouTube Music",icon:"â–¶ï¸"},{id:"deezer",name:"Deezer",icon:"ðŸŽ§"}],function(){s(2,d=[]),s(3,u="incremental"),s(4,g="normal"),s(5,p=!0)},m,f,async function(){if(0===d.length)return;const e={platforms:d,sync_type:u,priority:g};(await qt.triggerSync(e)).success&&m()},h,function(t){A.call(this,e,t)},()=>ge("home"),(e,t)=>t.platform===e.id,()=>qt.fetchRuns(),e=>h(e.id),e=>qt.fetchRun(e.id),e=>f(e.id),()=>s(3,u="incremental"),()=>s(3,u="full"),function(){g=C(this),s(4,g)}]}class vs extends Z{constructor(e){super(),X(this,e,ys,ms,a,{},null,[-1,-1])}}const ws=te({dashboard:null,userStats:null,systemHealth:null,trends:{summary:null,artists:[],platforms:[]},reportTypes:[],reports:[],currentReport:null,troubleLeaderboard:[],tierDistribution:null,selectedArtistScore:null,revenueDistribution:null,topArtistsByRevenue:[],problematicArtistRevenue:[],payoutRates:[],isLoading:!1,error:null}),ks=se(ws,e=>"healthy"===e.systemHealth?.overall),_s=se(ws,e=>e.trends.artists.filter(e=>"rising"===e.trend)),Cs=se(ws,e=>e.trends.artists.filter(e=>"falling"===e.trend)),$s=async(e="last7days")=>{ws.update(e=>({...e,isLoading:!0,error:null}));try{const t=await ne.authenticatedRequest("GET",`/api/v1/analytics/dashboard?time_range=${e}`);return t.success&&t.data?(ws.update(e=>({...e,dashboard:t.data,isLoading:!1})),{success:!0}):(ws.update(e=>({...e,isLoading:!1,error:t.message||"Failed to fetch dashboard"})),{success:!1,message:t.message})}catch(e){return ws.update(t=>({...t,isLoading:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},Ts=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/analytics/dashboard/user-stats");return e.success&&e.data?(ws.update(t=>({...t,userStats:e.data})),{success:!0}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},Ls=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/analytics/health");return e.success&&e.data?(ws.update(t=>({...t,systemHealth:e.data})),{success:!0,health:e.data}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},Ss=async(e=7)=>{try{const t=await ne.authenticatedRequest("GET",`/api/v1/analytics/trends?period_days=${e}`);return t.success&&t.data?(ws.update(e=>({...e,trends:{...e.trends,summary:t.data}})),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},As=async(e=10)=>{try{const t=await ne.authenticatedRequest("GET",`/api/v1/analytics/trends/rising?limit=${e}`);return t.success&&t.data?(ws.update(e=>({...e,trends:{...e.trends,artists:[...e.trends.artists.filter(e=>"rising"!==e.trend),...t.data.artists.map(e=>({...e,trend:"rising"}))]}})),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},Rs=async(e=10)=>{try{const t=await ne.authenticatedRequest("GET",`/api/v1/analytics/trends/falling?limit=${e}`);return t.success&&t.data?(ws.update(e=>({...e,trends:{...e.trends,artists:[...e.trends.artists.filter(e=>"falling"!==e.trend),...t.data.artists.map(e=>({...e,trend:"falling"}))]}})),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},js=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/analytics/reports/types");return e.success&&e.data?(ws.update(t=>({...t,reportTypes:e.data.report_types})),{success:!0}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},Fs=async e=>{try{const t=await ne.authenticatedRequest("POST","/api/v1/analytics/reports",e);return t.success&&t.data?{success:!0,reportId:t.data.report_id}:{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},Ms=async e=>{try{const t=await ne.authenticatedRequest("GET",`/api/v1/analytics/reports/${e}`);return t.success&&t.data?(ws.update(e=>({...e,currentReport:t.data})),{success:!0,report:t.data}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message}}},Es=()=>{ws.update(e=>({...e,error:null}))},Hs=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/analytics/trouble-scores/distribution");return e.success&&e.data?(ws.update(t=>({...t,tierDistribution:e.data})),{success:!0}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},Ps=async(e=30,t)=>{try{const s=new URLSearchParams({days:e.toString()});t&&s.append("platform",t);const n=await ne.authenticatedRequest("GET",`/api/v1/analytics/revenue/distribution?${s}`);return n.success&&n.data?(ws.update(e=>({...e,revenueDistribution:n.data})),{success:!0}):{success:!1,message:n.message}}catch(e){return{success:!1,message:e.message}}},Ds=async(e=30,t="moderate",s=10)=>{try{const n=await ne.authenticatedRequest("GET",`/api/v1/analytics/revenue/problematic?days=${e}&min_tier=${t}&limit=${s}`);return n.success&&n.data?(ws.update(e=>({...e,problematicArtistRevenue:n.data.artists})),{success:!0}):{success:!1,message:n.message}}catch(e){return{success:!1,message:e.message}}},Bs=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/analytics/revenue/payout-rates");return e.success&&e.data?(ws.update(t=>({...t,payoutRates:e.data.rates})),{success:!0}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}};function Ns(e,t,s){const n=e.slice();return n[26]=t[s],n}function Is(e,t,s){const n=e.slice();return n[29]=t[s],n}function zs(e,t,s){const n=e.slice();return n[29]=t[s],n}function qs(e,t,s){const n=e.slice();n[34]=t[s];const r=Math.max(...n[6].data_points.map(e=>e.value));n[35]=r;const a=n[35]>0?n[34].value/n[35]*100:0;return n[36]=a,n}function Gs(e,t,s){const n=e.slice();return n[39]=t[s],n}function Os(t){let s,n,r=t[39].label+"";return{c(){s=g("option"),n=m(r),s.__value=t[39].value,w(s,s.__value)},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function Us(e){let t,s,n,r,a,o,l,u,p,h,b=e[0].error+"";return{c(){t=g("div"),s=g("div"),n=g("span"),n.textContent="âŒ",r=f(),a=g("span"),o=m(b),l=f(),u=g("button"),u.textContent="Dismiss",y(u,"type","button"),y(u,"class","ml-auto text-red-500 hover:text-red-700"),y(s,"class","flex items-center gap-2 text-red-700"),y(t,"class","bg-red-50 border border-red-200 rounded-xl p-4 mb-6")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(s,l),i(s,u),p||(h=x(u,"click",Es),p=!0)},p(e,t){1&t[0]&&b!==(b=e[0].error+"")&&v(o,b)},d(e){e&&d(t),p=!1,h()}}}function Ys(e){let t,s,n,r,a,o,l,u,p,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I,z,q,G,O,U,Y,V,J,K,W,Q,X,Z,ee,te,se,ne,re,ae,oe,le,ie,ce,de=yn(e[9]?.total_users)+"",ue=yn(e[9]?.active_users_today)+"",ge=yn(e[9]?.total_blocked_artists)+"",pe=yn(e[9]?.offense_detections_today)+"",me=e[8]&&Js(e),fe=e[7]&&Ks(e),he=e[6]&&tn(e);function xe(e,t){return 0===e[11].length?an:rn}let be=xe(e),ye=be(e);function ve(e,t){return 0===e[12].length?cn:ln}let we=ve(e),ke=we(e),_e=e[0].currentReport&&un(e);return{c(){t=g("div"),s=g("div"),n=g("div"),r=g("div"),r.textContent="ðŸ‘¥",a=f(),o=g("div"),l=g("div"),u=m(de),p=f(),x=g("div"),x.textContent="Total Users",b=f(),w=g("div"),k=g("div"),_=g("div"),_.textContent="ðŸŸ¢",C=f(),$=g("div"),T=g("div"),L=m(ue),S=f(),A=g("div"),A.textContent="Active Today",R=f(),j=g("div"),F=g("div"),M=g("div"),M.textContent="ðŸš«",E=f(),H=g("div"),P=g("div"),D=m(ge),B=f(),N=g("div"),N.textContent="Blocked Artists",I=f(),z=g("div"),q=g("div"),G=g("div"),G.textContent="ðŸ””",O=f(),U=g("div"),Y=g("div"),V=m(pe),J=f(),K=g("div"),K.textContent="Offenses Today",W=f(),me&&me.c(),Q=f(),fe&&fe.c(),X=f(),he&&he.c(),Z=f(),ee=g("div"),te=g("div"),se=g("h2"),se.innerHTML="<span>ðŸ“ˆ</span> Rising Artists",ne=f(),ye.c(),re=f(),ae=g("div"),oe=g("h2"),oe.innerHTML="<span>ðŸ“‰</span> Falling Artists",le=f(),ke.c(),ie=f(),_e&&_e.c(),ce=h(),y(r,"class","w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-xl"),y(l,"class","text-2xl font-bold text-gray-900"),y(x,"class","text-sm text-gray-500"),y(n,"class","flex items-center gap-3"),y(s,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(_,"class","w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-xl"),y(T,"class","text-2xl font-bold text-gray-900"),y(A,"class","text-sm text-gray-500"),y(k,"class","flex items-center gap-3"),y(w,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(M,"class","w-12 h-12 bg-red-100 rounded-full flex items-center justify-center text-xl"),y(P,"class","text-2xl font-bold text-gray-900"),y(N,"class","text-sm text-gray-500"),y(F,"class","flex items-center gap-3"),y(j,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(G,"class","w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-xl"),y(Y,"class","text-2xl font-bold text-gray-900"),y(K,"class","text-sm text-gray-500"),y(q,"class","flex items-center gap-3"),y(z,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(t,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"),y(se,"class","text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"),y(te,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm"),y(oe,"class","text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"),y(ae,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm"),y(ee,"class","grid md:grid-cols-2 gap-6 mb-8")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(n,a),i(n,o),i(o,l),i(l,u),i(o,p),i(o,x),i(t,b),i(t,w),i(w,k),i(k,_),i(k,C),i(k,$),i($,T),i(T,L),i($,S),i($,A),i(t,R),i(t,j),i(j,F),i(F,M),i(F,E),i(F,H),i(H,P),i(P,D),i(H,B),i(H,N),i(t,I),i(t,z),i(z,q),i(q,G),i(q,O),i(q,U),i(U,Y),i(Y,V),i(U,J),i(U,K),c(e,W,d),me&&me.m(e,d),c(e,Q,d),fe&&fe.m(e,d),c(e,X,d),he&&he.m(e,d),c(e,Z,d),c(e,ee,d),i(ee,te),i(te,se),i(te,ne),ye.m(te,null),i(ee,re),i(ee,ae),i(ae,oe),i(ae,le),ke.m(ae,null),c(e,ie,d),_e&&_e.m(e,d),c(e,ce,d)},p(e,t){512&t[0]&&de!==(de=yn(e[9]?.total_users)+"")&&v(u,de),512&t[0]&&ue!==(ue=yn(e[9]?.active_users_today)+"")&&v(L,ue),512&t[0]&&ge!==(ge=yn(e[9]?.total_blocked_artists)+"")&&v(D,ge),512&t[0]&&pe!==(pe=yn(e[9]?.offense_detections_today)+"")&&v(V,pe),e[8]?me?me.p(e,t):(me=Js(e),me.c(),me.m(Q.parentNode,Q)):me&&(me.d(1),me=null),e[7]?fe?fe.p(e,t):(fe=Ks(e),fe.c(),fe.m(X.parentNode,X)):fe&&(fe.d(1),fe=null),e[6]?he?he.p(e,t):(he=tn(e),he.c(),he.m(Z.parentNode,Z)):he&&(he.d(1),he=null),be===(be=xe(e))&&ye?ye.p(e,t):(ye.d(1),ye=be(e),ye&&(ye.c(),ye.m(te,null))),we===(we=ve(e))&&ke?ke.p(e,t):(ke.d(1),ke=we(e),ke&&(ke.c(),ke.m(ae,null))),e[0].currentReport?_e?_e.p(e,t):(_e=un(e),_e.c(),_e.m(ce.parentNode,ce)):_e&&(_e.d(1),_e=null)},d(e){e&&(d(t),d(W),d(Q),d(X),d(Z),d(ee),d(ie),d(ce)),me&&me.d(e),fe&&fe.d(e),he&&he.d(e),ye.d(),ke.d(),_e&&_e.d(e)}}}function Vs(t){let s;return{c(){s=g("div"),s.innerHTML='<div class="w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>',y(s,"class","flex justify-center py-12")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Js(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P=e[8].blocked_artists+"",D=e[8].subscriptions+"",B=e[8].manual_blocks+"",N=(e[8].last_sync??"Never")+"";return{c(){t=g("div"),s=g("h2"),s.textContent="Your Quick Stats",n=f(),r=g("div"),a=g("div"),o=g("div"),l=m(P),u=f(),p=g("div"),p.textContent="Blocked Artists",h=f(),x=g("div"),b=g("div"),w=m(D),k=f(),_=g("div"),_.textContent="Subscriptions",C=f(),$=g("div"),T=g("div"),L=m(B),S=f(),A=g("div"),A.textContent="Manual Blocks",R=f(),j=g("div"),F=g("div"),M=m(N),E=f(),H=g("div"),H.textContent="Last Sync",y(s,"class","text-lg font-semibold text-gray-900 mb-4"),y(o,"class","text-2xl font-bold text-indigo-600"),y(p,"class","text-sm text-gray-500"),y(a,"class","text-center"),y(b,"class","text-2xl font-bold text-indigo-600"),y(_,"class","text-sm text-gray-500"),y(x,"class","text-center"),y(T,"class","text-2xl font-bold text-indigo-600"),y(A,"class","text-sm text-gray-500"),y($,"class","text-center"),y(F,"class","text-sm font-medium text-gray-600"),y(H,"class","text-sm text-gray-500"),y(j,"class","text-center"),y(r,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-8")},m(e,d){c(e,t,d),i(t,s),i(t,n),i(t,r),i(r,a),i(a,o),i(o,l),i(a,u),i(a,p),i(r,h),i(r,x),i(x,b),i(b,w),i(x,k),i(x,_),i(r,C),i(r,$),i($,T),i(T,L),i($,S),i($,A),i(r,R),i(r,j),i(j,F),i(F,M),i(j,E),i(j,H)},p(e,t){256&t[0]&&P!==(P=e[8].blocked_artists+"")&&v(l,P),256&t[0]&&D!==(D=e[8].subscriptions+"")&&v(w,D),256&t[0]&&B!==(B=e[8].manual_blocks+"")&&v(L,B),256&t[0]&&N!==(N=(e[8].last_sync??"Never")+"")&&v(M,N)},d(e){e&&d(t)}}}function Ks(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I,z,q,G,O,U,Y,V,J,K,W,Q,X,Z,ee,te,se,ne="healthy"===e[7].overall?"ðŸ’š Healthy":"degraded"===e[7].overall?"ðŸ’› Degraded":"â¤ï¸ Unhealthy",re=kn(e[7].databases.postgres)+"",ae=kn(e[7].databases.redis)+"",oe=kn(e[7].databases.duckdb)+"",le=kn(e[7].databases.kuzu)+"",ie=kn(e[7].databases.lancedb)+"",ce=e[7].latencies_ms?.postgres&&Ws(e),de=e[7].latencies_ms?.redis&&Qs(e),ue=e[7].latencies_ms?.duckdb&&Xs(e),ge=e[7].latencies_ms?.kuzu&&Zs(e),pe=e[7].latencies_ms?.lancedb&&en(e);return{c(){t=g("div"),s=g("div"),n=g("h2"),n.textContent="System Health",r=f(),a=g("span"),o=m(ne),u=f(),p=g("div"),h=g("div"),x=g("div"),b=m(re),k=f(),_=g("div"),_.textContent="PostgreSQL",C=f(),ce&&ce.c(),$=f(),T=g("div"),L=g("div"),S=m(ae),R=f(),j=g("div"),j.textContent="Redis",F=f(),de&&de.c(),M=f(),E=g("div"),H=g("div"),P=m(oe),B=f(),N=g("div"),N.textContent="DuckDB",I=f(),ue&&ue.c(),z=f(),q=g("div"),G=g("div"),O=m(le),Y=f(),V=g("div"),V.textContent="Kuzu",J=f(),ge&&ge.c(),K=f(),W=g("div"),Q=g("div"),X=m(ie),ee=f(),te=g("div"),te.textContent="LanceDB",se=f(),pe&&pe.c(),y(n,"class","text-lg font-semibold text-gray-900"),y(a,"class",l="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+(e[10]?"bg-green-100 text-green-700":"bg-red-100 text-red-700")),y(s,"class","flex items-center justify-between mb-4"),y(x,"class",w=_n(e[7].databases.postgres)),y(_,"class","text-sm font-medium mt-1"),y(h,"class","text-center p-3 rounded-lg bg-gray-50"),y(L,"class",A=_n(e[7].databases.redis)),y(j,"class","text-sm font-medium mt-1"),y(T,"class","text-center p-3 rounded-lg bg-gray-50"),y(H,"class",D=_n(e[7].databases.duckdb)),y(N,"class","text-sm font-medium mt-1"),y(E,"class","text-center p-3 rounded-lg bg-gray-50"),y(G,"class",U=_n(e[7].databases.kuzu)),y(V,"class","text-sm font-medium mt-1"),y(q,"class","text-center p-3 rounded-lg bg-gray-50"),y(Q,"class",Z=_n(e[7].databases.lancedb)),y(te,"class","text-sm font-medium mt-1"),y(W,"class","text-center p-3 rounded-lg bg-gray-50"),y(p,"class","grid grid-cols-2 md:grid-cols-5 gap-4"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-8")},m(e,l){c(e,t,l),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(t,u),i(t,p),i(p,h),i(h,x),i(x,b),i(h,k),i(h,_),i(h,C),ce&&ce.m(h,null),i(p,$),i(p,T),i(T,L),i(L,S),i(T,R),i(T,j),i(T,F),de&&de.m(T,null),i(p,M),i(p,E),i(E,H),i(H,P),i(E,B),i(E,N),i(E,I),ue&&ue.m(E,null),i(p,z),i(p,q),i(q,G),i(G,O),i(q,Y),i(q,V),i(q,J),ge&&ge.m(q,null),i(p,K),i(p,W),i(W,Q),i(Q,X),i(W,ee),i(W,te),i(W,se),pe&&pe.m(W,null)},p(e,t){128&t[0]&&ne!==(ne="healthy"===e[7].overall?"ðŸ’š Healthy":"degraded"===e[7].overall?"ðŸ’› Degraded":"â¤ï¸ Unhealthy")&&v(o,ne),1024&t[0]&&l!==(l="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+(e[10]?"bg-green-100 text-green-700":"bg-red-100 text-red-700"))&&y(a,"class",l),128&t[0]&&re!==(re=kn(e[7].databases.postgres)+"")&&v(b,re),128&t[0]&&w!==(w=_n(e[7].databases.postgres))&&y(x,"class",w),e[7].latencies_ms?.postgres?ce?ce.p(e,t):(ce=Ws(e),ce.c(),ce.m(h,null)):ce&&(ce.d(1),ce=null),128&t[0]&&ae!==(ae=kn(e[7].databases.redis)+"")&&v(S,ae),128&t[0]&&A!==(A=_n(e[7].databases.redis))&&y(L,"class",A),e[7].latencies_ms?.redis?de?de.p(e,t):(de=Qs(e),de.c(),de.m(T,null)):de&&(de.d(1),de=null),128&t[0]&&oe!==(oe=kn(e[7].databases.duckdb)+"")&&v(P,oe),128&t[0]&&D!==(D=_n(e[7].databases.duckdb))&&y(H,"class",D),e[7].latencies_ms?.duckdb?ue?ue.p(e,t):(ue=Xs(e),ue.c(),ue.m(E,null)):ue&&(ue.d(1),ue=null),128&t[0]&&le!==(le=kn(e[7].databases.kuzu)+"")&&v(O,le),128&t[0]&&U!==(U=_n(e[7].databases.kuzu))&&y(G,"class",U),e[7].latencies_ms?.kuzu?ge?ge.p(e,t):(ge=Zs(e),ge.c(),ge.m(q,null)):ge&&(ge.d(1),ge=null),128&t[0]&&ie!==(ie=kn(e[7].databases.lancedb)+"")&&v(X,ie),128&t[0]&&Z!==(Z=_n(e[7].databases.lancedb))&&y(Q,"class",Z),e[7].latencies_ms?.lancedb?pe?pe.p(e,t):(pe=en(e),pe.c(),pe.m(W,null)):pe&&(pe.d(1),pe=null)},d(e){e&&d(t),ce&&ce.d(),de&&de.d(),ue&&ue.d(),ge&&ge.d(),pe&&pe.d()}}}function Ws(e){let t,s,n,r=e[7].latencies_ms.postgres+"";return{c(){t=g("div"),s=m(r),n=m("ms"),y(t,"class","text-xs text-gray-500")},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){128&t[0]&&r!==(r=e[7].latencies_ms.postgres+"")&&v(s,r)},d(e){e&&d(t)}}}function Qs(e){let t,s,n,r=e[7].latencies_ms.redis+"";return{c(){t=g("div"),s=m(r),n=m("ms"),y(t,"class","text-xs text-gray-500")},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){128&t[0]&&r!==(r=e[7].latencies_ms.redis+"")&&v(s,r)},d(e){e&&d(t)}}}function Xs(e){let t,s,n,r=e[7].latencies_ms.duckdb+"";return{c(){t=g("div"),s=m(r),n=m("ms"),y(t,"class","text-xs text-gray-500")},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){128&t[0]&&r!==(r=e[7].latencies_ms.duckdb+"")&&v(s,r)},d(e){e&&d(t)}}}function Zs(e){let t,s,n,r=e[7].latencies_ms.kuzu+"";return{c(){t=g("div"),s=m(r),n=m("ms"),y(t,"class","text-xs text-gray-500")},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){128&t[0]&&r!==(r=e[7].latencies_ms.kuzu+"")&&v(s,r)},d(e){e&&d(t)}}}function en(e){let t,s,n,r=e[7].latencies_ms.lancedb+"";return{c(){t=g("div"),s=m(r),n=m("ms"),y(t,"class","text-xs text-gray-500")},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){128&t[0]&&r!==(r=e[7].latencies_ms.lancedb+"")&&v(s,r)},d(e){e&&d(t)}}}function tn(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C=vn(e[6].trend)+"",$=Math.abs(e[6].change_percent).toFixed(1)+"",T=e[6].period+"",L=e[6].data_points.length>0&&sn(e);return{c(){t=g("div"),s=g("div"),n=g("h2"),n.textContent="Trend Summary",r=f(),a=g("span"),o=m(C),l=f(),u=m($),p=m("%"),x=f(),b=g("div"),w=m("Period: "),k=m(T),_=f(),L&&L.c(),y(n,"class","text-lg font-semibold text-gray-900"),y(a,"class",h=wn(e[6].trend)),y(s,"class","flex items-center justify-between mb-4"),y(b,"class","text-sm text-gray-500 mb-4"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-8")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(a,l),i(a,u),i(a,p),i(t,x),i(t,b),i(b,w),i(b,k),i(t,_),L&&L.m(t,null)},p(e,s){64&s[0]&&C!==(C=vn(e[6].trend)+"")&&v(o,C),64&s[0]&&$!==($=Math.abs(e[6].change_percent).toFixed(1)+"")&&v(u,$),64&s[0]&&h!==(h=wn(e[6].trend))&&y(a,"class",h),64&s[0]&&T!==(T=e[6].period+"")&&v(k,T),e[6].data_points.length>0?L?L.p(e,s):(L=sn(e),L.c(),L.m(t,null)):L&&(L.d(1),L=null)},d(e){e&&d(t),L&&L.d()}}}function sn(e){let t,s=V(e[6].data_points),n=[];for(let t=0;t<s.length;t+=1)n[t]=nn(qs(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","h-32 flex items-end gap-1")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(64&r[0]){let a;for(s=V(e[6].data_points),a=0;a<s.length;a+=1){const o=qs(e,s,a);n[a]?n[a].p(o,r):(n[a]=nn(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function nn(e){let t,s;return{c(){t=g("div"),y(t,"class","flex-1 bg-indigo-200 hover:bg-indigo-400 transition-colors rounded-t"),k(t,"height",e[36]+"%"),y(t,"title",s=e[34].date+": "+e[34].value)},m(e,s){c(e,t,s)},p(e,n){64&n[0]&&k(t,"height",e[36]+"%"),64&n[0]&&s!==(s=e[34].date+": "+e[34].value)&&y(t,"title",s)},d(e){e&&d(t)}}}function rn(e){let t,s=V(e[11].slice(0,5)),n=[];for(let t=0;t<s.length;t+=1)n[t]=on(zs(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","space-y-3")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(2048&r[0]){let a;for(s=V(e[11].slice(0,5)),a=0;a<s.length;a+=1){const o=zs(e,s,a);n[a]?n[a].p(o,r):(n[a]=on(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function an(t){let s;return{c(){s=g("p"),s.textContent="No rising artists detected.",y(s,"class","text-gray-500 text-sm")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function on(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$=e[29].artist_name+"",T=e[29].mentions+"",L=e[29].offense_count+"";return{c(){t=g("div"),s=g("div"),n=g("div"),r=m($),a=f(),o=g("div"),l=m(T),u=m(" mentions"),p=f(),h=g("div"),x=g("div"),b=m("+"),w=m(L),k=f(),_=g("div"),_.textContent="offenses",C=f(),y(n,"class","font-medium text-gray-900"),y(o,"class","text-xs text-gray-500"),y(x,"class","text-green-600 font-medium"),y(_,"class","text-xs text-gray-500"),y(h,"class","text-right"),y(t,"class","flex items-center justify-between p-3 bg-green-50 rounded-lg")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(s,a),i(s,o),i(o,l),i(o,u),i(t,p),i(t,h),i(h,x),i(x,b),i(x,w),i(h,k),i(h,_),i(t,C)},p(e,t){2048&t[0]&&$!==($=e[29].artist_name+"")&&v(r,$),2048&t[0]&&T!==(T=e[29].mentions+"")&&v(l,T),2048&t[0]&&L!==(L=e[29].offense_count+"")&&v(w,L)},d(e){e&&d(t)}}}function ln(e){let t,s=V(e[12].slice(0,5)),n=[];for(let t=0;t<s.length;t+=1)n[t]=dn(Is(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","space-y-3")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(4096&r[0]){let a;for(s=V(e[12].slice(0,5)),a=0;a<s.length;a+=1){const o=Is(e,s,a);n[a]?n[a].p(o,r):(n[a]=dn(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function cn(t){let s;return{c(){s=g("p"),s.textContent="No falling artists detected.",y(s,"class","text-gray-500 text-sm")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function dn(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C=e[29].artist_name+"",$=e[29].mentions+"",T=e[29].offense_count+"";return{c(){t=g("div"),s=g("div"),n=g("div"),r=m(C),a=f(),o=g("div"),l=m($),u=m(" mentions"),p=f(),h=g("div"),x=g("div"),b=m(T),w=f(),k=g("div"),k.textContent="offenses",_=f(),y(n,"class","font-medium text-gray-900"),y(o,"class","text-xs text-gray-500"),y(x,"class","text-red-600 font-medium"),y(k,"class","text-xs text-gray-500"),y(h,"class","text-right"),y(t,"class","flex items-center justify-between p-3 bg-red-50 rounded-lg")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(s,a),i(s,o),i(o,l),i(o,u),i(t,p),i(t,h),i(h,x),i(x,b),i(h,w),i(h,k),i(t,_)},p(e,t){4096&t[0]&&C!==(C=e[29].artist_name+"")&&v(r,C),4096&t[0]&&$!==($=e[29].mentions+"")&&v(l,$),4096&t[0]&&T!==(T=e[29].offense_count+"")&&v(b,T)},d(e){e&&d(t)}}}function un(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k=e[0].currentReport.id+"",_=e[0].currentReport.status+"";function C(e,t){return"processing"===e[0].currentReport.status?mn:"completed"===e[0].currentReport.status&&e[0].currentReport.download_url?pn:"failed"===e[0].currentReport.status?gn:void 0}let $=C(e),T=$&&$(e);return{c(){t=g("div"),s=g("h2"),s.textContent="Current Report",n=f(),r=g("div"),a=g("div"),o=g("div"),l=m(k),u=f(),p=g("div"),h=m("Status: "),x=g("span"),b=m(_),w=f(),T&&T.c(),y(s,"class","text-lg font-semibold text-gray-900 mb-4"),y(o,"class","font-medium"),y(x,"class","capitalize"),y(p,"class","text-sm text-gray-500"),y(r,"class","flex items-center justify-between"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm")},m(e,d){c(e,t,d),i(t,s),i(t,n),i(t,r),i(r,a),i(a,o),i(o,l),i(a,u),i(a,p),i(p,h),i(p,x),i(x,b),i(r,w),T&&T.m(r,null)},p(e,t){1&t[0]&&k!==(k=e[0].currentReport.id+"")&&v(l,k),1&t[0]&&_!==(_=e[0].currentReport.status+"")&&v(b,_),$===($=C(e))&&T?T.p(e,t):(T&&T.d(1),T=$&&$(e),T&&(T.c(),T.m(r,null)))},d(e){e&&d(t),T&&T.d()}}}function gn(e){let t,s,n=(e[0].currentReport.error??"Unknown error")+"";return{c(){t=g("span"),s=m(n),y(t,"class","text-red-600")},m(e,n){c(e,t,n),i(t,s)},p(e,t){1&t[0]&&n!==(n=(e[0].currentReport.error??"Unknown error")+"")&&v(s,n)},d(e){e&&d(t)}}}function pn(e){let t,s,n;return{c(){t=g("a"),s=m("Download"),y(t,"href",n=e[0].currentReport.download_url),y(t,"class","px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors")},m(e,n){c(e,t,n),i(t,s)},p(e,s){1&s[0]&&n!==(n=e[0].currentReport.download_url)&&y(t,"href",n)},d(e){e&&d(t)}}}function mn(e){let t,s,n,r,a,o,l,u=(e[0].currentReport.progress_percent??0)+"";return{c(){t=g("div"),s=g("div"),n=g("div"),r=f(),a=g("span"),o=m(u),l=m("%"),y(n,"class","h-full bg-indigo-600 transition-all"),k(n,"width",(e[0].currentReport.progress_percent??0)+"%"),y(s,"class","w-32 h-2 bg-gray-200 rounded-full overflow-hidden"),y(a,"class","text-sm text-gray-600"),y(t,"class","flex items-center gap-2")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(a,l)},p(e,t){1&t[0]&&k(n,"width",(e[0].currentReport.progress_percent??0)+"%"),1&t[0]&&u!==(u=(e[0].currentReport.progress_percent??0)+"")&&v(o,u)},d(e){e&&d(t)}}}function fn(e){let t,s,r,a,o,l,p,m,v,k,C,$,T,L,S,A,R,j,F,M,E,H,D,B,N,I,z,q,G,O,U,Y=V(e[0].reportTypes),J=[];for(let t=0;t<Y.length;t+=1)J[t]=hn(Ns(e,Y,t));let K=0===e[0].reportTypes.length&&xn();return{c(){t=g("div"),s=g("div"),r=g("div"),r.innerHTML='<div class="w-14 h-14 bg-purple-100 rounded-full flex items-center justify-center text-2xl mr-4">ðŸ“Š</div> <div><h3 class="text-xl font-bold text-gray-900">Generate Report</h3> <p class="text-gray-600">Configure and generate an analytics report</p></div>',a=f(),o=g("div"),l=g("label"),l.textContent="Report Type",p=f(),m=g("select");for(let e=0;e<J.length;e+=1)J[e].c();v=h(),K&&K.c(),k=f(),C=g("div"),$=g("label"),$.textContent="Format",T=f(),L=g("select"),S=g("option"),S.textContent="JSON",A=g("option"),A.textContent="CSV",R=g("option"),R.textContent="Parquet",j=g("option"),j.textContent="HTML",F=f(),M=g("div"),E=g("label"),H=g("input"),D=f(),B=g("span"),B.textContent="Include detailed breakdown",N=f(),I=g("div"),z=g("button"),z.textContent="Cancel",q=f(),G=g("button"),G.textContent="Generate",y(r,"class","flex items-center mb-6"),y(l,"for","report-type"),y(l,"class","block text-sm font-medium text-gray-700 mb-2"),y(m,"id","report-type"),y(m,"class","w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),void 0===e[3]&&P(()=>e[21].call(m)),y(o,"class","mb-4"),y($,"for","report-format"),y($,"class","block text-sm font-medium text-gray-700 mb-2"),S.__value="json",w(S,S.__value),A.__value="csv",w(A,A.__value),R.__value="parquet",w(R,R.__value),j.__value="html",w(j,j.__value),y(L,"id","report-format"),y(L,"class","w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),void 0===e[4]&&P(()=>e[22].call(L)),y(C,"class","mb-4"),y(H,"type","checkbox"),y(H,"class","w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"),y(B,"class","text-sm text-gray-700"),y(E,"class","flex items-center gap-2"),y(M,"class","mb-6"),y(z,"type","button"),y(z,"class","flex-1 px-4 py-3 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 font-medium transition-colors"),y(G,"type","button"),y(G,"class","flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 font-medium transition-colors"),y(I,"class","flex gap-3"),y(s,"class","bg-white rounded-2xl max-w-lg w-full p-6 shadow-xl"),y(s,"role","document"),y(t,"class","fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"),y(t,"role","dialog"),y(t,"aria-modal","true")},m(n,d){c(n,t,d),i(t,s),i(s,r),i(s,a),i(s,o),i(o,l),i(o,p),i(o,m);for(let e=0;e<J.length;e+=1)J[e]&&J[e].m(m,null);i(m,v),K&&K.m(m,null),_(m,e[3],!0),i(s,k),i(s,C),i(C,$),i(C,T),i(C,L),i(L,S),i(L,A),i(L,R),i(L,j),_(L,e[4],!0),i(s,F),i(s,M),i(M,E),i(E,H),H.checked=e[5],i(E,D),i(E,B),i(s,N),i(s,I),i(I,z),i(I,q),i(I,G),O||(U=[x(m,"change",e[21]),x(L,"change",e[22]),x(H,"change",e[23]),x(z,"click",e[16]),x(G,"click",e[17]),x(s,"click",b(e[18])),x(t,"click",e[16])],O=!0)},p(e,t){if(1&t[0]){let s;for(Y=V(e[0].reportTypes),s=0;s<Y.length;s+=1){const n=Ns(e,Y,s);J[s]?J[s].p(n,t):(J[s]=hn(n),J[s].c(),J[s].m(m,v))}for(;s<J.length;s+=1)J[s].d(1);J.length=Y.length}0===e[0].reportTypes.length?K||(K=xn(),K.c(),K.m(m,null)):K&&(K.d(1),K=null),9&t[0]&&_(m,e[3]),16&t[0]&&_(L,e[4]),32&t[0]&&(H.checked=e[5])},d(e){e&&d(t),u(J,e),K&&K.d(),O=!1,n(U)}}}function hn(e){let t,s,n,r=e[26].name+"";return{c(){t=g("option"),s=m(r),t.__value=n=e[26].id,w(t,t.__value)},m(e,n){c(e,t,n),i(t,s)},p(e,a){1&a[0]&&r!==(r=e[26].name+"")&&v(s,r),1&a[0]&&n!==(n=e[26].id)&&(t.__value=n,w(t,t.__value))},d(e){e&&d(t)}}}function xn(e){let t,s,n;return{c(){t=g("option"),t.textContent="User Activity",s=g("option"),s.textContent="Offense Summary",n=g("option"),n.textContent="Platform Statistics",t.__value="user_activity",w(t,t.__value),s.__value="offense_summary",w(s,s.__value),n.__value="platform_stats",w(n,n.__value)},m(e,r){c(e,t,r),c(e,s,r),c(e,n,r)},d(e){e&&(d(t),d(s),d(n))}}}function bn(t){let s,r,a,o,l,p,m,b,v,w,k,C,$,T,L,S,A,R,j,F=V(t[13]),M=[];for(let e=0;e<F.length;e+=1)M[e]=Os(Gs(t,F,e));let E=t[0].error&&Us(t);function H(e,t){return e[0].isLoading?Vs:Ys}let D=H(t),B=D(t),N=t[2]&&fn(t);return{c(){s=g("div"),r=g("div"),a=g("div"),o=g("button"),o.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n        Back to Home',l=f(),p=g("div"),m=g("div"),m.innerHTML='<h1 class="text-3xl font-bold text-gray-900 mb-2">Analytics Dashboard</h1> <p class="text-lg text-gray-600">Monitor system health, trends, and generate reports.</p>',b=f(),v=g("div"),w=g("select");for(let e=0;e<M.length;e+=1)M[e].c();k=f(),C=g("button"),C.innerHTML="<span>ðŸ“Š</span> Generate Report",$=f(),T=g("div"),E&&E.c(),L=f(),B.c(),S=f(),N&&N.c(),A=h(),y(o,"type","button"),y(o,"class","flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors mb-4"),y(w,"class","px-4 py-2 border border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),void 0===t[1]&&P(()=>t[20].call(w)),y(C,"type","button"),y(C,"class","px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors flex items-center gap-2"),y(v,"class","flex items-center gap-4"),y(p,"class","flex items-center justify-between"),y(a,"class","max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8"),y(r,"class","bg-white border-b border-gray-100"),y(T,"class","max-w-6xl mx-auto px-4 py-6 sm:px-6 lg:px-8"),y(s,"class","min-h-screen bg-gradient-to-b from-purple-50 to-white")},m(e,n){c(e,s,n),i(s,r),i(r,a),i(a,o),i(a,l),i(a,p),i(p,m),i(p,b),i(p,v),i(v,w);for(let e=0;e<M.length;e+=1)M[e]&&M[e].m(w,null);_(w,t[1],!0),i(v,k),i(v,C),i(s,$),i(s,T),E&&E.m(T,null),i(T,L),B.m(T,null),c(e,S,n),N&&N.m(e,n),c(e,A,n),R||(j=[x(o,"click",t[19]),x(w,"change",t[20]),x(w,"change",t[14]),x(C,"click",t[15])],R=!0)},p(e,t){if(8192&t[0]){let s;for(F=V(e[13]),s=0;s<F.length;s+=1){const n=Gs(e,F,s);M[s]?M[s].p(n,t):(M[s]=Os(n),M[s].c(),M[s].m(w,null))}for(;s<M.length;s+=1)M[s].d(1);M.length=F.length}8194&t[0]&&_(w,e[1]),e[0].error?E?E.p(e,t):(E=Us(e),E.c(),E.m(T,L)):E&&(E.d(1),E=null),D===(D=H(e))&&B?B.p(e,t):(B.d(1),B=D(e),B&&(B.c(),B.m(T,null))),e[2]?N?N.p(e,t):(N=fn(e),N.c(),N.m(A.parentNode,A)):N&&(N.d(1),N=null)},i:e,o:e,d(e){e&&(d(s),d(S),d(A)),u(M,e),E&&E.d(),B.d(),N&&N.d(e),R=!1,n(j)}}}function yn(e){return void 0===e?"0":e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()}function vn(e){switch(e){case"up":case"rising":return"ðŸ“ˆ";case"down":case"falling":return"ðŸ“‰";default:return"âž¡ï¸"}}function wn(e){switch(e){case"up":case"rising":return"text-green-600";case"down":case"falling":return"text-red-600";default:return"text-gray-600"}}function kn(e){return e?"âœ…":"âŒ"}function _n(e){return e?"text-green-600":"text-red-600"}function Cn(e,t,s){let n,r,a,o,i,c,d,u;l(e,ws,e=>s(0,i=e)),l(e,ks,e=>s(10,c=e)),l(e,_s,e=>s(11,d=e)),l(e,Cs,e=>s(12,u=e));let g="last7days",p=7,m=!1,f="user_activity",h="json",x=!0;const b=[{value:"last24h",label:"Last 24 Hours",days:1},{value:"last7days",label:"Last 7 Days",days:7},{value:"last30days",label:"Last 30 Days",days:30},{value:"last90days",label:"Last 90 Days",days:90}];function y(){s(2,m=!1)}async function v(e){const t=await Ms(e);t.success&&t.report&&("pending"!==t.report.status&&"processing"!==t.report.status||setTimeout(()=>v(e),2e3))}S(async()=>{await Promise.all([$s(g),Ts(),Ls(),Ss(p),As(),Rs(),js()])});return e.$$.update=()=>{1&e.$$.dirty[0]&&s(9,n=i.dashboard),1&e.$$.dirty[0]&&s(8,r=i.userStats),1&e.$$.dirty[0]&&s(7,a=i.systemHealth),1&e.$$.dirty[0]&&s(6,o=i.trends.summary)},[i,g,m,f,h,x,o,a,r,n,c,d,u,b,async function(){const e=b.find(e=>e.value===g);e&&(p=e.days,await Promise.all([$s(g),Ss(p)]))},function(){s(2,m=!0)},y,async function(){const e={report_type:f,format:h,time_range:g,include_details:x},t=await Fs(e);t.success&&t.reportId&&(v(t.reportId),y())},function(t){A.call(this,e,t)},()=>ge("home"),function(){g=C(this),s(1,g),s(13,b)},function(){f=C(this),s(3,f)},function(){h=C(this),s(4,h)},function(){x=this.checked,s(5,x)}]}class $n extends Z{constructor(e){super(),X(this,e,Cn,bn,a,{},null,[-1,-1])}}function Tn(e,t,s){const n=e.slice();return n[16]=t[s],n}function Ln(e,t,s){const n=e.slice();return n[19]=t[s],n[21]=s,n}function Sn(e,t,s){const n=e.slice();return n[22]=t[s],n}function An(e,t,s){const n=e.slice();return n[22]=t[s],n}function Rn(t){let s,n,r=t[22].label+"";return{c(){s=g("option"),n=m(r),s.__value=t[22].value,w(s,s.__value)},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function jn(e){let t,s,r,a,o,l,h,b,w,k,C,$,T,L,S,A,R,j,F,M,E,H,D,B,N,I,z,q,G,O,U,Y,J,K,W,Q,X,Z,ee,te,se,ne,re,ae,oe,le,ie,ce,de,ue,ge,pe,me,fe,he,xe,be,ye,ve,we,ke,_e,Ce,$e,Te,Le,Se,Ae,Re,je,Fe,Me,Ee,He,Pe,De,Be,Ne,Ie,ze,qe,Ge,Oe,Ue,Ye,Ve,Je,Ke,We,Qe,Xe,Ze,et,tt=zn(e[6]?.total_streams??0)+"",st=In(e[6]?.total_revenue)+"",nt=In(e[6]?.revenue_to_problematic_artists)+"",rt=(e[6]?.problematic_percentage??0).toFixed(1)+"",at=In(e[6]?.revenue_to_clean_artists)+"",ot=(100-(e[6]?.problematic_percentage??0)).toFixed(1)+"",lt=In(e[6]?.revenue_to_problematic_artists)+"",it=(e[6]?.problematic_percentage??0).toFixed(1)+"",ct=e[4]&&Mn(e),dt=V(e[8]),ut=[];for(let t=0;t<dt.length;t+=1)ut[t]=En(Sn(e,dt,t));function gt(e,t){return 0===e[5].length?Pn:Hn}let pt=gt(e),mt=pt(e),ft=V(e[3]),ht=[];for(let t=0;t<ft.length;t+=1)ht[t]=Bn(Tn(e,ft,t));return{c(){t=g("div"),s=g("div"),r=g("div"),a=g("div"),a.textContent="ðŸŽ§",o=f(),l=g("div"),h=g("div"),b=m(tt),w=f(),k=g("div"),k.textContent="Total Streams",C=f(),$=g("div"),T=g("div"),L=g("div"),L.textContent="ðŸ’°",S=f(),A=g("div"),R=g("div"),j=m(st),F=f(),M=g("div"),M.textContent="Total Revenue",E=f(),H=g("div"),D=g("div"),B=g("div"),B.textContent="âš ",N=f(),I=g("div"),z=g("div"),q=m(nt),G=f(),O=g("div"),O.textContent="To Problematic Artists",U=f(),Y=g("div"),J=g("div"),K=g("div"),K.textContent="ðŸ“ˆ",W=f(),Q=g("div"),X=g("div"),Z=m(rt),ee=m("%"),te=f(),se=g("div"),se.textContent="Problematic Share",ne=f(),re=g("div"),ae=g("h2"),ae.textContent="Revenue Distribution",oe=f(),le=g("div"),ie=g("div"),ce=p("svg"),de=p("circle"),ge=p("circle"),fe=f(),he=g("div"),xe=g("div"),be=g("div"),be.innerHTML='<div class="w-4 h-4 rounded bg-green-500"></div> <span class="text-gray-700">Clean Artists</span>',ye=f(),ve=g("div"),we=g("div"),ke=m(at),_e=f(),Ce=g("div"),$e=m(ot),Te=m("%"),Le=f(),Se=g("div"),Ae=g("div"),Ae.innerHTML='<div class="w-4 h-4 rounded bg-red-500"></div> <span class="text-gray-700">Problematic Artists</span>',Re=f(),je=g("div"),Fe=g("div"),Me=m(lt),Ee=f(),He=g("div"),Pe=m(it),De=m("%"),Be=f(),ct&&ct.c(),Ne=f(),Ie=g("div"),ze=g("div"),qe=g("h2"),qe.textContent="Top Problematic Artists by Your Revenue",Ge=f(),Oe=g("select");for(let e=0;e<ut.length;e+=1)ut[e].c();Ue=f(),mt.c(),Ye=f(),Ve=g("div"),Je=g("h2"),Je.textContent="Platform Payout Rates",Ke=f(),We=g("p"),We.textContent="Average payout per stream by platform. Actual rates vary based on subscription tier, region, and other factors.",Qe=f(),Xe=g("div");for(let e=0;e<ht.length;e+=1)ht[e].c();y(a,"class","w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-xl"),y(h,"class","text-2xl font-bold text-gray-900"),y(k,"class","text-sm text-gray-500"),y(r,"class","flex items-center gap-3"),y(s,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(L,"class","w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-xl"),y(R,"class","text-2xl font-bold text-gray-900"),y(M,"class","text-sm text-gray-500"),y(T,"class","flex items-center gap-3"),y($,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(B,"class","w-12 h-12 bg-red-100 rounded-full flex items-center justify-center text-xl"),y(z,"class","text-2xl font-bold text-red-600"),y(O,"class","text-sm text-gray-500"),y(D,"class","flex items-center gap-3"),y(H,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(K,"class","w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-xl"),y(X,"class","text-2xl font-bold text-purple-600"),y(se,"class","text-sm text-gray-500"),y(J,"class","flex items-center gap-3"),y(Y,"class","bg-white rounded-xl p-5 border border-gray-100 shadow-sm"),y(t,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"),y(ae,"class","text-lg font-semibold text-gray-900 mb-4"),y(de,"cx","50"),y(de,"cy","50"),y(de,"r","40"),y(de,"fill","none"),y(de,"stroke","#22c55e"),y(de,"stroke-width","20"),y(de,"stroke-dasharray",ue=2.51*(100-(e[6]?.problematic_percentage??0))+" 251"),y(de,"stroke-dashoffset","0"),y(ge,"cx","50"),y(ge,"cy","50"),y(ge,"r","40"),y(ge,"fill","none"),y(ge,"stroke","#ef4444"),y(ge,"stroke-width","20"),y(ge,"stroke-dasharray",pe=2.51*(e[6]?.problematic_percentage??0)+" 251"),y(ge,"stroke-dashoffset",me=-2.51*(100-(e[6]?.problematic_percentage??0))),y(ce,"class","w-40 h-40 transform -rotate-90"),y(ce,"viewBox","0 0 100 100"),y(ie,"class","relative w-40 h-40"),y(be,"class","flex items-center gap-2"),y(we,"class","font-semibold"),y(Ce,"class","text-sm text-gray-500"),y(ve,"class","text-right"),y(xe,"class","flex items-center justify-between"),y(Ae,"class","flex items-center gap-2"),y(Fe,"class","font-semibold text-red-600"),y(He,"class","text-sm text-gray-500"),y(je,"class","text-right"),y(Se,"class","flex items-center justify-between"),y(he,"class","flex-1 space-y-4"),y(le,"class","flex items-center gap-6"),y(re,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-8"),y(qe,"class","text-lg font-semibold text-gray-900"),y(Oe,"class","px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-indigo-500"),void 0===e[1]&&P(()=>e[14].call(Oe)),y(ze,"class","flex items-center justify-between mb-4"),y(Ie,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-8"),y(Je,"class","text-lg font-semibold text-gray-900 mb-4"),y(We,"class","text-sm text-gray-500 mb-4"),y(Xe,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"),y(Ve,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm")},m(n,d){c(n,t,d),i(t,s),i(s,r),i(r,a),i(r,o),i(r,l),i(l,h),i(h,b),i(l,w),i(l,k),i(t,C),i(t,$),i($,T),i(T,L),i(T,S),i(T,A),i(A,R),i(R,j),i(A,F),i(A,M),i(t,E),i(t,H),i(H,D),i(D,B),i(D,N),i(D,I),i(I,z),i(z,q),i(I,G),i(I,O),i(t,U),i(t,Y),i(Y,J),i(J,K),i(J,W),i(J,Q),i(Q,X),i(X,Z),i(X,ee),i(Q,te),i(Q,se),c(n,ne,d),c(n,re,d),i(re,ae),i(re,oe),i(re,le),i(le,ie),i(ie,ce),i(ce,de),i(ce,ge),i(le,fe),i(le,he),i(he,xe),i(xe,be),i(xe,ye),i(xe,ve),i(ve,we),i(we,ke),i(ve,_e),i(ve,Ce),i(Ce,$e),i(Ce,Te),i(he,Le),i(he,Se),i(Se,Ae),i(Se,Re),i(Se,je),i(je,Fe),i(Fe,Me),i(je,Ee),i(je,He),i(He,Pe),i(He,De),c(n,Be,d),ct&&ct.m(n,d),c(n,Ne,d),c(n,Ie,d),i(Ie,ze),i(ze,qe),i(ze,Ge),i(ze,Oe);for(let e=0;e<ut.length;e+=1)ut[e]&&ut[e].m(Oe,null);_(Oe,e[1],!0),i(Ie,Ue),mt.m(Ie,null),c(n,Ye,d),c(n,Ve,d),i(Ve,Je),i(Ve,Ke),i(Ve,We),i(Ve,Qe),i(Ve,Xe);for(let e=0;e<ht.length;e+=1)ht[e]&&ht[e].m(Xe,null);Ze||(et=[x(Oe,"change",e[14]),x(Oe,"change",e[10])],Ze=!0)},p(e,t){if(64&t&&tt!==(tt=zn(e[6]?.total_streams??0)+"")&&v(b,tt),64&t&&st!==(st=In(e[6]?.total_revenue)+"")&&v(j,st),64&t&&nt!==(nt=In(e[6]?.revenue_to_problematic_artists)+"")&&v(q,nt),64&t&&rt!==(rt=(e[6]?.problematic_percentage??0).toFixed(1)+"")&&v(Z,rt),64&t&&ue!==(ue=2.51*(100-(e[6]?.problematic_percentage??0))+" 251")&&y(de,"stroke-dasharray",ue),64&t&&pe!==(pe=2.51*(e[6]?.problematic_percentage??0)+" 251")&&y(ge,"stroke-dasharray",pe),64&t&&me!==(me=-2.51*(100-(e[6]?.problematic_percentage??0)))&&y(ge,"stroke-dashoffset",me),64&t&&at!==(at=In(e[6]?.revenue_to_clean_artists)+"")&&v(ke,at),64&t&&ot!==(ot=(100-(e[6]?.problematic_percentage??0)).toFixed(1)+"")&&v($e,ot),64&t&&lt!==(lt=In(e[6]?.revenue_to_problematic_artists)+"")&&v(Me,lt),64&t&&it!==(it=(e[6]?.problematic_percentage??0).toFixed(1)+"")&&v(Pe,it),e[4]?ct?ct.p(e,t):(ct=Mn(e),ct.c(),ct.m(Ne.parentNode,Ne)):ct&&(ct.d(1),ct=null),256&t){let s;for(dt=V(e[8]),s=0;s<dt.length;s+=1){const n=Sn(e,dt,s);ut[s]?ut[s].p(n,t):(ut[s]=En(n),ut[s].c(),ut[s].m(Oe,null))}for(;s<ut.length;s+=1)ut[s].d(1);ut.length=dt.length}if(258&t&&_(Oe,e[1]),pt===(pt=gt(e))&&mt?mt.p(e,t):(mt.d(1),mt=pt(e),mt&&(mt.c(),mt.m(Ie,null))),8&t){let s;for(ft=V(e[3]),s=0;s<ft.length;s+=1){const n=Tn(e,ft,s);ht[s]?ht[s].p(n,t):(ht[s]=Bn(n),ht[s].c(),ht[s].m(Xe,null))}for(;s<ht.length;s+=1)ht[s].d(1);ht.length=ft.length}},d(e){e&&(d(t),d(ne),d(re),d(Be),d(Ne),d(Ie),d(Ye),d(Ve)),ct&&ct.d(e),u(ut,e),mt.d(),u(ht,e),Ze=!1,n(et)}}}function Fn(t){let s;return{c(){s=g("div"),s.innerHTML='<div class="w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>',y(s,"class","flex justify-center py-12")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Mn(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P=e[4].low+"",D=e[4].moderate+"",B=e[4].high+"",N=e[4].critical+"";return{c(){t=g("div"),s=g("h2"),s.textContent="Artists by Trouble Tier",n=f(),r=g("div"),a=g("div"),o=g("div"),l=m(P),u=f(),p=g("div"),p.textContent="Low",h=f(),x=g("div"),b=g("div"),w=m(D),k=f(),_=g("div"),_.textContent="Moderate",C=f(),$=g("div"),T=g("div"),L=m(B),S=f(),A=g("div"),A.textContent="High",R=f(),j=g("div"),F=g("div"),M=m(N),E=f(),H=g("div"),H.textContent="Critical",y(s,"class","text-lg font-semibold text-gray-900 mb-4"),y(o,"class","text-2xl font-bold text-green-700"),y(p,"class","text-sm text-green-600"),y(a,"class","text-center p-4 bg-green-50 rounded-lg border border-green-200"),y(b,"class","text-2xl font-bold text-yellow-700"),y(_,"class","text-sm text-yellow-600"),y(x,"class","text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200"),y(T,"class","text-2xl font-bold text-orange-700"),y(A,"class","text-sm text-orange-600"),y($,"class","text-center p-4 bg-orange-50 rounded-lg border border-orange-200"),y(F,"class","text-2xl font-bold text-red-700"),y(H,"class","text-sm text-red-600"),y(j,"class","text-center p-4 bg-red-50 rounded-lg border border-red-200"),y(r,"class","grid grid-cols-4 gap-4"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-8")},m(e,d){c(e,t,d),i(t,s),i(t,n),i(t,r),i(r,a),i(a,o),i(o,l),i(a,u),i(a,p),i(r,h),i(r,x),i(x,b),i(b,w),i(x,k),i(x,_),i(r,C),i(r,$),i($,T),i(T,L),i($,S),i($,A),i(r,R),i(r,j),i(j,F),i(F,M),i(j,E),i(j,H)},p(e,t){16&t&&P!==(P=e[4].low+"")&&v(l,P),16&t&&D!==(D=e[4].moderate+"")&&v(w,D),16&t&&B!==(B=e[4].high+"")&&v(L,B),16&t&&N!==(N=e[4].critical+"")&&v(M,N)},d(e){e&&d(t)}}}function En(t){let s,n,r=t[22].label+"";return{c(){s=g("option"),n=m(r),s.__value=t[22].value,w(s,s.__value)},m(e,t){c(e,s,t),i(s,n)},p:e,d(e){e&&d(s)}}}function Hn(e){let t,s=V(e[5]),n=[];for(let t=0;t<s.length;t+=1)n[t]=Dn(Ln(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","space-y-3")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(32&r){let a;for(s=V(e[5]),a=0;a<s.length;a+=1){const o=Ln(e,s,a);n[a]?n[a].p(o,r):(n[a]=Dn(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function Pn(t){let s;return{c(){s=g("div"),s.innerHTML='<p>No problematic artists found in your listening history.</p> <p class="text-sm mt-2">This is great news! Your streaming revenue is going to clean artists.</p>',y(s,"class","text-center py-8 text-gray-500")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Dn(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D=e[19].artist_name+"",B=On(e[19].trouble_tier)+"",N=(e[19].trouble_score??0).toFixed(2)+"",I=In(e[19].total_revenue)+"",z=zn(e[19].total_streams)+"",q=e[19].percentage_of_user_spend.toFixed(1)+"";return{c(){t=g("div"),s=g("div"),n=g("div"),n.textContent=`${e[21]+1}`,r=f(),a=g("div"),o=g("div"),l=m(D),u=f(),p=g("div"),h=g("span"),x=m(B),w=f(),k=g("span"),_=m("Score: "),C=m(N),$=f(),T=g("div"),L=g("div"),S=m(I),A=f(),R=g("div"),j=m(z),F=m(" streams ("),M=m(q),E=m("%)"),H=f(),y(n,"class","w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600"),y(o,"class","font-medium text-gray-900"),y(h,"class",b="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+qn(e[19].trouble_tier)+" text-white"),y(p,"class","text-xs text-gray-500 flex items-center gap-2"),y(s,"class","flex items-center gap-4"),y(L,"class","font-semibold text-gray-900"),y(R,"class","text-xs text-gray-500"),y(T,"class","text-right"),y(t,"class",P="flex items-center justify-between p-4 rounded-lg border "+Gn(e[19].trouble_tier))},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(o,l),i(a,u),i(a,p),i(p,h),i(h,x),i(p,w),i(p,k),i(k,_),i(k,C),i(t,$),i(t,T),i(T,L),i(L,S),i(T,A),i(T,R),i(R,j),i(R,F),i(R,M),i(R,E),i(t,H)},p(e,s){32&s&&D!==(D=e[19].artist_name+"")&&v(l,D),32&s&&B!==(B=On(e[19].trouble_tier)+"")&&v(x,B),32&s&&b!==(b="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+qn(e[19].trouble_tier)+" text-white")&&y(h,"class",b),32&s&&N!==(N=(e[19].trouble_score??0).toFixed(2)+"")&&v(C,N),32&s&&I!==(I=In(e[19].total_revenue)+"")&&v(S,I),32&s&&z!==(z=zn(e[19].total_streams)+"")&&v(j,z),32&s&&q!==(q=e[19].percentage_of_user_spend.toFixed(1)+"")&&v(M,q),32&s&&P!==(P="flex items-center justify-between p-4 rounded-lg border "+Gn(e[19].trouble_tier))&&y(t,"class",P)},d(e){e&&d(t)}}}function Bn(e){let t,s,n,r,a,o,l,u,p,h,x=In(e[16].rate_per_stream)+"",b=e[16].platform.replace("_"," ")+"",w=e[16].rate_tier+"";return{c(){t=g("div"),s=g("div"),n=m(x),r=f(),a=g("div"),o=m(b),l=f(),u=g("div"),p=m(w),h=f(),y(s,"class","text-lg font-bold text-indigo-600"),y(a,"class","text-sm font-medium text-gray-700 capitalize"),y(u,"class","text-xs text-gray-500"),y(t,"class","text-center p-4 bg-gray-50 rounded-lg")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(t,l),i(t,u),i(u,p),i(t,h)},p(e,t){8&t&&x!==(x=In(e[16].rate_per_stream)+"")&&v(n,x),8&t&&b!==(b=e[16].platform.replace("_"," ")+"")&&v(o,b),8&t&&w!==(w=e[16].rate_tier+"")&&v(p,w)},d(e){e&&d(t)}}}function Nn(t){let s,r,a,o,l,p,m,h,b,v,w,k,C,$,T=V(t[7]),L=[];for(let e=0;e<T.length;e+=1)L[e]=Rn(An(t,T,e));function S(e,t){return e[2]?Fn:jn}let A=S(t),R=A(t);return{c(){s=g("div"),r=g("div"),a=g("div"),o=g("button"),o.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n        Back to Home',l=f(),p=g("div"),m=g("div"),m.innerHTML='<h1 class="text-3xl font-bold text-gray-900 mb-2">Your Streaming Impact</h1> <p class="text-lg text-gray-600">See where your streaming revenue goes and how much reaches problematic artists.</p>',h=f(),b=g("div"),v=g("select");for(let e=0;e<L.length;e+=1)L[e].c();w=f(),k=g("div"),R.c(),y(o,"type","button"),y(o,"class","flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors mb-4"),y(v,"class","px-4 py-2 border border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),void 0===t[0]&&P(()=>t[13].call(v)),y(b,"class","flex items-center gap-4"),y(p,"class","flex items-center justify-between"),y(a,"class","max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8"),y(r,"class","bg-white border-b border-gray-100"),y(k,"class","max-w-6xl mx-auto px-4 py-6 sm:px-6 lg:px-8"),y(s,"class","min-h-screen bg-gradient-to-b from-purple-50 to-white")},m(e,n){c(e,s,n),i(s,r),i(r,a),i(a,o),i(a,l),i(a,p),i(p,m),i(p,h),i(p,b),i(b,v);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(v,null);_(v,t[0],!0),i(s,w),i(s,k),R.m(k,null),C||($=[x(o,"click",t[12]),x(v,"change",t[13]),x(v,"change",t[9])],C=!0)},p(e,[t]){if(128&t){let s;for(T=V(e[7]),s=0;s<T.length;s+=1){const n=An(e,T,s);L[s]?L[s].p(n,t):(L[s]=Rn(n),L[s].c(),L[s].m(v,null))}for(;s<L.length;s+=1)L[s].d(1);L.length=T.length}129&t&&_(v,e[0]),A===(A=S(e))&&R?R.p(e,t):(R.d(1),R=A(e),R&&(R.c(),R.m(k,null)))},i:e,o:e,d(e){e&&d(s),u(L,e),R.d(),C=!1,n($)}}}function In(e){if(!e)return"$0.00";const t=parseFloat(e);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(t)}function zn(e){return new Intl.NumberFormat("en-US").format(e)}function qn(e){switch(e){case"critical":return"bg-red-600";case"high":return"bg-orange-500";case"moderate":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-400"}}function Gn(e){switch(e){case"critical":return"bg-red-50 border-red-200";case"high":return"bg-orange-50 border-orange-200";case"moderate":return"bg-yellow-50 border-yellow-200";case"low":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}}function On(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"}function Un(e,t,s){let n,r,a,o,i;l(e,ws,e=>s(11,i=e));let c=30,d="moderate",u=!0;const g=[{value:7,label:"Last 7 Days"},{value:30,label:"Last 30 Days"},{value:90,label:"Last 90 Days"},{value:365,label:"Last Year"}],p=[{value:"moderate",label:"Moderate+"},{value:"high",label:"High+"},{value:"critical",label:"Critical Only"}];async function m(){s(2,u=!0),await Promise.all([Ps(c),Ds(c,d,10),Hs(),Bs()]),s(2,u=!1)}S(async()=>{await m(),s(2,u=!1)});return e.$$.update=()=>{2048&e.$$.dirty&&s(6,n=i.revenueDistribution),2048&e.$$.dirty&&s(5,r=i.problematicArtistRevenue),2048&e.$$.dirty&&s(4,a=i.tierDistribution),2048&e.$$.dirty&&s(3,o=i.payoutRates)},[c,d,u,o,a,r,n,g,p,async function(){await m()},async function(){await Ds(c,d,10)},i,()=>ge("home"),function(){c=C(this),s(0,c),s(7,g)},function(){d=C(this),s(1,d),s(8,p)}]}class Yn extends Z{constructor(e){super(),X(this,e,Un,Nn,a,{})}}const Vn=te({currentNetwork:null,selectedArtist:null,collaborators:[],pathResult:null,blockedAnalysis:null,health:null,stats:null,isLoading:!1,isLoadingPath:!1,error:null}),Jn=se(Vn,e=>e.currentNetwork?.nodes??[]),Kn=se(Vn,e=>e.currentNetwork?.edges??[]);se(Vn,e=>e.currentNetwork?.nodes.filter(e=>e.is_blocked)??[]);const Wn=se(Vn,e=>e.blockedAnalysis?.at_risk_artists??[]);se(Vn,e=>"healthy"===e.health?.status);const Qn=async(e,t=2)=>{Vn.update(e=>({...e,isLoading:!0,error:null}));try{const s=await ne.authenticatedRequest("GET",`/api/v1/graph/artists/${e}/network?depth=${t}`);return s.success&&s.data?(Vn.update(e=>({...e,currentNetwork:s.data,isLoading:!1})),{success:!0}):(Vn.update(e=>({...e,isLoading:!1,error:s.message||"Failed to fetch artist network"})),{success:!1,message:s.message})}catch(e){return Vn.update(t=>({...t,isLoading:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},Xn=async(e,t=20)=>{Vn.update(e=>({...e,isLoading:!0,error:null}));try{const s=await ne.authenticatedRequest("GET",`/api/v1/graph/artists/${e}/collaborators?limit=${t}`);return s.success&&s.data?(Vn.update(e=>({...e,collaborators:s.data.collaborators,isLoading:!1})),{success:!0}):(Vn.update(e=>({...e,isLoading:!1,error:s.message||"Failed to fetch collaborators"})),{success:!1,message:s.message})}catch(e){return Vn.update(t=>({...t,isLoading:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},Zn=async(e,t)=>{Vn.update(e=>({...e,isLoadingPath:!0,error:null,pathResult:null}));try{const s=await ne.authenticatedRequest("GET",`/api/v1/graph/artists/${e}/path-to/${t}`);return s.success&&s.data?(Vn.update(e=>({...e,pathResult:s.data,isLoadingPath:!1})),{success:!0,path:s.data}):(Vn.update(e=>({...e,isLoadingPath:!1,error:s.message||"No path found"})),{success:!1,message:s.message})}catch(e){return Vn.update(t=>({...t,isLoadingPath:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},er=async()=>{Vn.update(e=>({...e,isLoading:!0,error:null}));try{const e=await ne.authenticatedRequest("POST","/api/v1/graph/blocked-network");return e.success&&e.data?(Vn.update(t=>({...t,blockedAnalysis:e.data,isLoading:!1})),{success:!0,analysis:e.data}):(Vn.update(t=>({...t,isLoading:!1,error:e.message||"Failed to analyze blocked network"})),{success:!1,message:e.message})}catch(e){return Vn.update(t=>({...t,isLoading:!1,error:e.message||"Network error"})),{success:!1,message:e.message}}},tr=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/graph/health");return e.success&&e.data?(Vn.update(t=>({...t,health:e.data})),{success:!0,health:e.data}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},sr=async()=>{try{const e=await ne.authenticatedRequest("GET","/api/v1/graph/stats");return e.success&&e.data?(Vn.update(t=>({...t,stats:e.data})),{success:!0,stats:e.data}):{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message}}},nr=e=>{Vn.update(t=>({...t,selectedArtist:e}))},rr=()=>{Vn.update(e=>({...e,error:null}))};function ar(e,t,s){const n=e.slice();return n[33]=t[s],n}function or(e,t,s){const n=e.slice();return n[36]=t[s],n}function lr(e,t,s){const n=e.slice();n[39]=t[s];const r=n[8].find(function(...t){return e[29](n[39],...t)});n[40]=r;const a=n[8].find(function(...t){return e[30](n[39],...t)});return n[41]=a,n}function ir(e,t,s){const n=e.slice();return n[44]=t[s],n}function cr(e,t,s){const n=e.slice();return n[47]=t[s],n}function dr(e,t,s){const n=e.slice();return n[36]=t[s],n[51]=s,n}function ur(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j,F,M=e[9].artist_count.toLocaleString()+"",E=e[9].collaboration_count.toLocaleString()+"",H=e[9].label_count.toLocaleString()+"",P=e[9].track_count.toLocaleString()+"";return{c(){t=g("div"),s=g("div"),n=g("div"),r=m(M),a=f(),o=g("div"),o.textContent="Artists",l=f(),u=g("div"),p=g("div"),h=m(E),x=f(),b=g("div"),b.textContent="Collaborations",w=f(),k=g("div"),_=g("div"),C=m(H),$=f(),T=g("div"),T.textContent="Labels",L=f(),S=g("div"),A=g("div"),R=m(P),j=f(),F=g("div"),F.textContent="Tracks",y(n,"class","text-2xl font-bold text-indigo-600"),y(o,"class","text-xs text-gray-500"),y(s,"class","bg-white rounded-lg p-4 border border-gray-100 shadow-sm text-center"),y(p,"class","text-2xl font-bold text-indigo-600"),y(b,"class","text-xs text-gray-500"),y(u,"class","bg-white rounded-lg p-4 border border-gray-100 shadow-sm text-center"),y(_,"class","text-2xl font-bold text-indigo-600"),y(T,"class","text-xs text-gray-500"),y(k,"class","bg-white rounded-lg p-4 border border-gray-100 shadow-sm text-center"),y(A,"class","text-2xl font-bold text-indigo-600"),y(F,"class","text-xs text-gray-500"),y(S,"class","bg-white rounded-lg p-4 border border-gray-100 shadow-sm text-center"),y(t,"class","grid grid-cols-4 gap-4 mb-6")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(s,a),i(s,o),i(t,l),i(t,u),i(u,p),i(p,h),i(u,x),i(u,b),i(t,w),i(t,k),i(k,_),i(_,C),i(k,$),i(k,T),i(t,L),i(t,S),i(S,A),i(A,R),i(S,j),i(S,F)},p(e,t){512&t[0]&&M!==(M=e[9].artist_count.toLocaleString()+"")&&v(r,M),512&t[0]&&E!==(E=e[9].collaboration_count.toLocaleString()+"")&&v(h,E),512&t[0]&&H!==(H=e[9].label_count.toLocaleString()+"")&&v(C,H),512&t[0]&&P!==(P=e[9].track_count.toLocaleString()+"")&&v(R,P)},d(e){e&&d(t)}}}function gr(e){let t,s,n,r,a,o,l,u,p,h,b=e[0].error+"";return{c(){t=g("div"),s=g("div"),n=g("span"),n.textContent="âŒ",r=f(),a=g("span"),o=m(b),l=f(),u=g("button"),u.textContent="Dismiss",y(u,"type","button"),y(u,"class","ml-auto text-red-500 hover:text-red-700"),y(s,"class","flex items-center gap-2 text-red-700"),y(t,"class","bg-red-50 border border-red-200 rounded-xl p-4 mb-6")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(a,o),i(s,l),i(s,u),p||(h=x(u,"click",rr),p=!0)},p(e,t){1&t[0]&&b!==(b=e[0].error+"")&&v(o,b)},d(e){e&&d(t),p=!1,h()}}}function pr(e){let t,s,r,a,o,l,u,p,m,h,b,v,k,_,C,$,T,L,S,A;function R(e,t){return e[0].isLoadingPath?fr:mr}let j=R(e),F=j(e),M=e[11]&&hr(e);return{c(){t=g("div"),s=g("h3"),s.textContent="Find Path Between Artists",r=f(),a=g("div"),o=g("div"),l=g("label"),l.textContent="Source Artist ID",u=f(),p=g("input"),m=f(),h=g("div"),b=g("label"),b.textContent="Target Artist ID",v=f(),k=g("input"),_=f(),C=g("div"),$=g("button"),F.c(),L=f(),M&&M.c(),y(s,"class","text-lg font-semibold text-gray-900 mb-4"),y(l,"for","path-source"),y(l,"class","block text-sm font-medium text-gray-700 mb-2"),y(p,"id","path-source"),y(p,"type","text"),y(p,"placeholder","Enter artist UUID"),y(p,"class","w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),y(b,"for","path-target"),y(b,"class","block text-sm font-medium text-gray-700 mb-2"),y(k,"id","path-target"),y(k,"type","text"),y(k,"placeholder","Enter artist UUID"),y(k,"class","w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),y($,"type","button"),$.disabled=T=!e[6]||!e[7]||e[0].isLoadingPath,y($,"class","w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors disabled:opacity-50"),y(C,"class","flex items-end"),y(a,"class","grid md:grid-cols-3 gap-4"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-6")},m(n,d){c(n,t,d),i(t,s),i(t,r),i(t,a),i(a,o),i(o,l),i(o,u),i(o,p),w(p,e[6]),i(a,m),i(a,h),i(h,b),i(h,v),i(h,k),w(k,e[7]),i(a,_),i(a,C),i(C,$),F.m($,null),i(t,L),M&&M.m(t,null),S||(A=[x(p,"input",e[24]),x(k,"input",e[25]),x($,"click",e[20])],S=!0)},p(e,s){64&s[0]&&p.value!==e[6]&&w(p,e[6]),128&s[0]&&k.value!==e[7]&&w(k,e[7]),j!==(j=R(e))&&(F.d(1),F=j(e),F&&(F.c(),F.m($,null))),193&s[0]&&T!==(T=!e[6]||!e[7]||e[0].isLoadingPath)&&($.disabled=T),e[11]?M?M.p(e,s):(M=hr(e),M.c(),M.m(t,null)):M&&(M.d(1),M=null)},d(e){e&&d(t),F.d(),M&&M.d(),S=!1,n(A)}}}function mr(e){let t;return{c(){t=m("Find Path")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function fr(e){let t;return{c(){t=m("Finding...")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function hr(e){let t,s,n,r,a,o,l,p=e[11].total_distance+"",h=V(e[11].path),x=[];for(let t=0;t<h.length;t+=1)x[t]=br(dr(e,h,t));return{c(){t=g("div"),s=g("div"),n=m("Path Found! ("),r=m(p),a=m(" hops)"),o=f(),l=g("div");for(let e=0;e<x.length;e+=1)x[e].c();y(s,"class","font-medium text-green-700 mb-2"),y(l,"class","flex items-center gap-2 flex-wrap"),y(t,"class","mt-4 p-4 bg-green-50 rounded-lg")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(s,r),i(s,a),i(t,o),i(t,l);for(let e=0;e<x.length;e+=1)x[e]&&x[e].m(l,null)},p(e,t){if(2048&t[0]&&p!==(p=e[11].total_distance+"")&&v(r,p),2048&t[0]){let s;for(h=V(e[11].path),s=0;s<h.length;s+=1){const n=dr(e,h,s);x[s]?x[s].p(n,t):(x[s]=br(n),x[s].c(),x[s].m(l,null))}for(;s<x.length;s+=1)x[s].d(1);x.length=h.length}},d(e){e&&d(t),u(x,e)}}}function xr(e){let t;return{c(){t=g("span"),t.textContent="â†’",y(t,"class","text-green-600")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function br(e){let t,s,n,r,a=e[36].name+"",o=e[51]<e[11].path.length-1&&xr();return{c(){t=g("span"),s=m(a),n=f(),o&&o.c(),r=h(),y(t,"class","px-2 py-1 bg-white rounded border border-green-200 text-sm")},m(e,a){c(e,t,a),i(t,s),c(e,n,a),o&&o.m(e,a),c(e,r,a)},p(e,t){2048&t[0]&&a!==(a=e[36].name+"")&&v(s,a),e[51]<e[11].path.length-1?o||(o=xr(),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(e){e&&(d(t),d(n),d(r)),o&&o.d(e)}}}function yr(e){let t;return{c(){t=g("div"),t.innerHTML='<div class="w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>',y(t,"class","absolute right-3 top-1/2 -translate-y-1/2")},m(e,s){c(e,t,s)},d(e){e&&d(t)}}}function vr(e){let t,s=V(e[2]),n=[];for(let t=0;t<s.length;t+=1)n[t]=kr(cr(e,s,t));return{c(){t=g("div");for(let e=0;e<n.length;e+=1)n[e].c();y(t,"class","mt-3 space-y-2 max-h-60 overflow-y-auto")},m(e,s){c(e,t,s);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(524292&r[0]){let a;for(s=V(e[2]),a=0;a<s.length;a+=1){const o=cr(e,s,a);n[a]?n[a].p(o,r):(n[a]=kr(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(e){e&&d(t),u(n,e)}}}function wr(e){let t,s,n=e[47].genres.slice(0,3).join(", ")+"";return{c(){t=g("div"),s=m(n),y(t,"class","text-xs text-gray-500")},m(e,n){c(e,t,n),i(t,s)},p(e,t){4&t[0]&&n!==(n=e[47].genres.slice(0,3).join(", ")+"")&&v(s,n)},d(e){e&&d(t)}}}function kr(e){let t,s,n,r,a,o,l,u=e[47].name+"",p=e[47].genres?.length&&wr(e);function h(){return e[27](e[47])}return{c(){t=g("button"),s=g("div"),n=m(u),r=f(),p&&p.c(),a=f(),y(s,"class","font-medium"),y(t,"type","button"),y(t,"class","w-full p-3 text-left hover:bg-indigo-50 rounded-lg transition-colors")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),p&&p.m(t,null),i(t,a),o||(l=x(t,"click",h),o=!0)},p(s,r){e=s,4&r[0]&&u!==(u=e[47].name+"")&&v(n,u),e[47].genres?.length?p?p.p(e,r):(p=wr(e),p.c(),p.m(t,a)):p&&(p.d(1),p=null)},d(e){e&&d(t),p&&p.d(),o=!1,l()}}}function _r(e){let t,s,n,r,a,o,l=e[13].name+"",p=V(e[12]),h=[];for(let t=0;t<p.length;t+=1)h[t]=Tr(ir(e,p,t));return{c(){t=g("div"),s=g("h3"),n=m("Collaborators of "),r=m(l),a=f(),o=g("div");for(let e=0;e<h.length;e+=1)h[e].c();y(s,"class","text-lg font-semibold text-gray-900 mb-4"),y(o,"class","space-y-2 max-h-80 overflow-y-auto"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm")},m(e,l){c(e,t,l),i(t,s),i(s,n),i(s,r),i(t,a),i(t,o);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(o,null)},p(e,t){if(8192&t[0]&&l!==(l=e[13].name+"")&&v(r,l),4096&t[0]){let s;for(p=V(e[12]),s=0;s<p.length;s+=1){const n=ir(e,p,s);h[s]?h[s].p(n,t):(h[s]=Tr(n),h[s].c(),h[s].m(o,null))}for(;s<h.length;s+=1)h[s].d(1);h.length=p.length}},d(e){e&&d(t),u(h,e)}}}function Cr(e){let t,s,n,r=e[44].track_title+"";return{c(){t=g("span"),s=m("â€¢ "),n=m(r)},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){4096&t[0]&&r!==(r=e[44].track_title+"")&&v(n,r)},d(e){e&&d(t)}}}function $r(e){let t,s,n,r=e[44].year+"";return{c(){t=g("span"),s=m("â€¢ "),n=m(r)},m(e,r){c(e,t,r),i(t,s),i(t,n)},p(e,t){4096&t[0]&&r!==(r=e[44].year+"")&&v(n,r)},d(e){e&&d(t)}}}function Tr(e){let t,s,n,r,a,o,l,u,p,h,x=e[44].artist_name+"",b=e[44].collab_type+"",w=e[44].track_title&&Cr(e),k=e[44].year&&$r(e);return{c(){t=g("div"),s=g("div"),n=m(x),r=f(),a=g("div"),o=g("span"),l=m(b),u=f(),w&&w.c(),p=f(),k&&k.c(),h=f(),y(s,"class","font-medium"),y(o,"class","capitalize"),y(a,"class","text-xs text-gray-500 flex items-center gap-2"),y(t,"class","p-3 bg-gray-50 rounded-lg")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(t,r),i(t,a),i(a,o),i(o,l),i(a,u),w&&w.m(a,null),i(a,p),k&&k.m(a,null),i(t,h)},p(e,t){4096&t[0]&&x!==(x=e[44].artist_name+"")&&v(n,x),4096&t[0]&&b!==(b=e[44].collab_type+"")&&v(l,b),e[44].track_title?w?w.p(e,t):(w=Cr(e),w.c(),w.m(a,p)):w&&(w.d(1),w=null),e[44].year?k?k.p(e,t):(k=$r(e),k.c(),k.m(a,null)):k&&(k.d(1),k=null)},d(e){e&&d(t),w&&w.d(),k&&k.d()}}}function Lr(e){let t,s,n,r,a,o=e[16].length+"",l=e[15].length+"";return{c(){t=g("div"),s=m(o),n=m(" nodes â€¢ "),r=m(l),a=m(" edges"),y(t,"class","text-sm text-gray-500")},m(e,o){c(e,t,o),i(t,s),i(t,n),i(t,r),i(t,a)},p(e,t){65536&t[0]&&o!==(o=e[16].length+"")&&v(s,o),32768&t[0]&&l!==(l=e[15].length+"")&&v(r,l)},d(e){e&&d(t)}}}function Sr(e){let t,s,n,r,a=V(e[15]),o=[];for(let t=0;t<a.length;t+=1)o[t]=Fr(lr(e,a,t));let l=V(e[8]),m=[];for(let t=0;t<l.length;t+=1)m[t]=Mr(or(e,l,t));return{c(){t=p("svg");for(let e=0;e<o.length;e+=1)o[e].c();s=h();for(let e=0;e<m.length;e+=1)m[e].c();n=f(),r=g("div"),r.innerHTML='<div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-indigo-500"></span> <span>Artist</span></div> <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-red-500"></span> <span>Blocked</span></div> <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-purple-500"></span> <span>Label</span></div> <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-green-500"></span> <span>Track</span></div>',y(t,"viewBox","0 0 600 400"),y(t,"class","w-full h-96 bg-gray-50 rounded-lg"),y(r,"class","flex items-center gap-6 mt-4 text-xs text-gray-600 justify-center")},m(e,a){c(e,t,a);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);i(t,s);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(t,null);c(e,n,a),c(e,r,a)},p(e,n){if(33024&n[0]){let r;for(a=V(e[15]),r=0;r<a.length;r+=1){const l=lr(e,a,r);o[r]?o[r].p(l,n):(o[r]=Fr(l),o[r].c(),o[r].m(t,s))}for(;r<o.length;r+=1)o[r].d(1);o.length=a.length}if(16640&n[0]){let s;for(l=V(e[8]),s=0;s<l.length;s+=1){const r=or(e,l,s);m[s]?m[s].p(r,n):(m[s]=Mr(r),m[s].c(),m[s].m(t,null))}for(;s<m.length;s+=1)m[s].d(1);m.length=l.length}},d(e){e&&(d(t),d(n),d(r)),u(o,e),u(m,e)}}}function Ar(t){let s;return{c(){s=g("div"),s.innerHTML='<span class="text-6xl mb-4">ðŸ•¸ï¸</span> <p>Search for an artist to explore their network</p>',y(s,"class","flex flex-col items-center justify-center h-96 text-gray-400")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function Rr(t){let s;return{c(){s=g("div"),s.innerHTML='<div class="w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>',y(s,"class","flex justify-center items-center h-96")},m(e,t){c(e,s,t)},p:e,d(e){e&&d(s)}}}function jr(e){let t,s,n,r,a,o,l;return{c(){t=p("line"),y(t,"x1",s=e[40].x),y(t,"y1",n=e[40].y),y(t,"x2",r=e[41].x),y(t,"y2",a=e[41].y),y(t,"stroke",o=Nr(e[39].type)),y(t,"stroke-width",l=e[39].weight),y(t,"stroke-opacity","0.6")},m(e,s){c(e,t,s)},p(e,i){33024&i[0]&&s!==(s=e[40].x)&&y(t,"x1",s),33024&i[0]&&n!==(n=e[40].y)&&y(t,"y1",n),33024&i[0]&&r!==(r=e[41].x)&&y(t,"x2",r),33024&i[0]&&a!==(a=e[41].y)&&y(t,"y2",a),32768&i[0]&&o!==(o=Nr(e[39].type))&&y(t,"stroke",o),32768&i[0]&&l!==(l=e[39].weight)&&y(t,"stroke-width",l)},d(e){e&&d(t)}}}function Fr(e){let t,s=e[40]&&e[41]&&jr(e);return{c(){s&&s.c(),t=h()},m(e,n){s&&s.m(e,n),c(e,t,n)},p(e,n){e[40]&&e[41]?s?s.p(e,n):(s=jr(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){e&&d(t),s&&s.d(e)}}}function Mr(e){let t,s,n,r,a,o,l,u,g=(e[36].name.length>12?e[36].name.substring(0,12)+"...":e[36].name)+"";return{c(){t=p("g"),s=p("circle"),a=p("text"),o=m(g),y(s,"r",n=e[36].id===e[14].center_artist_id?16:10),y(s,"fill",r=Br(e[36])),y(s,"stroke","white"),y(s,"stroke-width","2"),y(s,"class","cursor-pointer hover:opacity-80 transition-opacity"),y(a,"y",l=e[36].id===e[14].center_artist_id?28:22),y(a,"text-anchor","middle"),y(a,"font-size","10"),y(a,"fill","#374151"),y(a,"class","pointer-events-none"),y(t,"transform",u="translate("+e[36].x+", "+e[36].y+")")},m(e,n){c(e,t,n),i(t,s),i(t,a),i(a,o)},p(e,i){16640&i[0]&&n!==(n=e[36].id===e[14].center_artist_id?16:10)&&y(s,"r",n),256&i[0]&&r!==(r=Br(e[36]))&&y(s,"fill",r),256&i[0]&&g!==(g=(e[36].name.length>12?e[36].name.substring(0,12)+"...":e[36].name)+"")&&v(o,g),16640&i[0]&&l!==(l=e[36].id===e[14].center_artist_id?28:22)&&y(a,"y",l),256&i[0]&&u!==(u="translate("+e[36].x+", "+e[36].y+")")&&y(t,"transform",u)},d(e){e&&d(t)}}}function Er(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$,T,L,S,A,R,j=e[10].summary.total_blocked+"",F=e[10].summary.total_at_risk+"",M=e[10].summary.avg_collaborations_per_blocked.toFixed(1)+"",E=e[17].length>0&&Hr(e);return{c(){t=g("div"),s=g("h3"),s.textContent="Blocked Network Analysis",n=f(),r=g("div"),a=g("div"),o=g("div"),l=m(j),u=f(),p=g("div"),p.textContent="Blocked Artists",h=f(),x=g("div"),b=g("div"),w=m(F),k=f(),_=g("div"),_.textContent="At-Risk Artists",C=f(),$=g("div"),T=g("div"),L=m(M),S=f(),A=g("div"),A.textContent="Avg. Collaborations",R=f(),E&&E.c(),y(s,"class","text-lg font-semibold text-gray-900 mb-4"),y(o,"class","text-2xl font-bold text-red-600"),y(p,"class","text-xs text-gray-600"),y(a,"class","text-center p-3 bg-red-50 rounded-lg"),y(b,"class","text-2xl font-bold text-yellow-600"),y(_,"class","text-xs text-gray-600"),y(x,"class","text-center p-3 bg-yellow-50 rounded-lg"),y(T,"class","text-2xl font-bold text-gray-600"),y(A,"class","text-xs text-gray-600"),y($,"class","text-center p-3 bg-gray-50 rounded-lg"),y(r,"class","grid grid-cols-3 gap-4 mb-6"),y(t,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mt-6")},m(e,d){c(e,t,d),i(t,s),i(t,n),i(t,r),i(r,a),i(a,o),i(o,l),i(a,u),i(a,p),i(r,h),i(r,x),i(x,b),i(b,w),i(x,k),i(x,_),i(r,C),i(r,$),i($,T),i(T,L),i($,S),i($,A),i(t,R),E&&E.m(t,null)},p(e,s){1024&s[0]&&j!==(j=e[10].summary.total_blocked+"")&&v(l,j),1024&s[0]&&F!==(F=e[10].summary.total_at_risk+"")&&v(w,F),1024&s[0]&&M!==(M=e[10].summary.avg_collaborations_per_blocked.toFixed(1)+"")&&v(L,M),e[17].length>0?E?E.p(e,s):(E=Hr(e),E.c(),E.m(t,null)):E&&(E.d(1),E=null)},d(e){e&&d(t),E&&E.d()}}}function Hr(e){let t,s,n,r=V(e[17].slice(0,10)),a=[];for(let t=0;t<r.length;t+=1)a[t]=Pr(ar(e,r,t));return{c(){t=g("h4"),t.textContent="At-Risk Artists",s=f(),n=g("div");for(let e=0;e<a.length;e+=1)a[e].c();y(t,"class","font-medium text-gray-900 mb-3"),y(n,"class","space-y-2 max-h-48 overflow-y-auto")},m(e,r){c(e,t,r),c(e,s,r),c(e,n,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(n,null)},p(e,t){if(131072&t[0]){let s;for(r=V(e[17].slice(0,10)),s=0;s<r.length;s+=1){const o=ar(e,r,s);a[s]?a[s].p(o,t):(a[s]=Pr(o),a[s].c(),a[s].m(n,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},d(e){e&&(d(t),d(s),d(n)),u(a,e)}}}function Pr(e){let t,s,n,r,a,o,l,u,p,h,x,b,w,k,_,C,$=e[33].artist.name+"",T=e[33].blocked_collaborators+"",L=(100*e[33].risk_score).toFixed(0)+"";return{c(){t=g("div"),s=g("div"),n=g("div"),r=m($),a=f(),o=g("div"),l=m(T),u=m(" blocked collaborators"),p=f(),h=g("div"),x=g("div"),b=m(L),w=m("%"),k=f(),_=g("div"),_.textContent="risk",C=f(),y(n,"class","font-medium"),y(o,"class","text-xs text-gray-500"),y(x,"class","font-medium text-yellow-600"),y(_,"class","text-xs text-gray-500"),y(h,"class","text-right"),y(t,"class","flex items-center justify-between p-3 bg-yellow-50 rounded-lg")},m(e,d){c(e,t,d),i(t,s),i(s,n),i(n,r),i(s,a),i(s,o),i(o,l),i(o,u),i(t,p),i(t,h),i(h,x),i(x,b),i(x,w),i(h,k),i(h,_),i(t,C)},p(e,t){131072&t[0]&&$!==($=e[33].artist.name+"")&&v(r,$),131072&t[0]&&T!==(T=e[33].blocked_collaborators+"")&&v(l,T),131072&t[0]&&L!==(L=(100*e[33].risk_score).toFixed(0)+"")&&v(b,L)},d(e){e&&d(t)}}}function Dr(t){let s,r,a,o,l,u,p,h,b,k,_,C,$,T,L,S,A,R,j,F,M,E,H,P,D,B,N,I,z,q,G,O,U,Y,V,J,K,W,Q,X,Z,ee,te,se,ne,re,ae,oe,le,ie,ce,de=t[9]&&ur(t),ue=t[0].error&&gr(t),ge=t[5]&&pr(t),pe=t[3]&&yr(),me=t[2].length>0&&vr(t),fe=t[13]&&t[12].length>0&&_r(t),he=t[14]&&Lr(t);function xe(e,t){return e[0].isLoading?Rr:e[14]?Sr:Ar}let be=xe(t),ye=be(t),ve=t[10]&&Er(t);return{c(){s=g("div"),r=g("div"),a=g("div"),o=g("button"),o.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n        Back to Home',l=f(),u=g("div"),p=g("div"),p.innerHTML='<h1 class="text-3xl font-bold text-gray-900 mb-2">Graph Explorer</h1> <p class="text-lg text-gray-600">Explore artist collaboration networks and connections.</p>',h=f(),b=g("div"),k=g("button"),k.innerHTML="<span>ðŸ”</span> Path Finder",_=f(),C=g("button"),$=g("span"),$.textContent="âš ï¸",T=m(" Analyze Blocked"),S=f(),A=g("div"),de&&de.c(),R=f(),ue&&ue.c(),j=f(),ge&&ge.c(),F=f(),M=g("div"),E=g("div"),H=g("div"),P=g("h3"),P.textContent="Search Artist",D=f(),B=g("div"),N=g("input"),I=f(),pe&&pe.c(),z=f(),me&&me.c(),q=f(),G=g("div"),O=g("h3"),O.textContent="Network Depth",U=f(),Y=g("div"),V=g("input"),J=f(),K=g("span"),W=m(t[4]),Q=f(),X=g("p"),X.textContent="Higher depth = more connections but slower loading",Z=f(),fe&&fe.c(),ee=f(),te=g("div"),se=g("div"),ne=g("div"),re=g("h3"),re.textContent="Network Visualization",ae=f(),he&&he.c(),oe=f(),ye.c(),le=f(),ve&&ve.c(),y(o,"type","button"),y(o,"class","flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors mb-4"),y(k,"type","button"),y(k,"class","px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors flex items-center gap-2"),y(C,"type","button"),C.disabled=L=t[0].isLoading,y(C,"class","px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors flex items-center gap-2 disabled:opacity-50"),y(b,"class","flex items-center gap-3"),y(u,"class","flex items-center justify-between"),y(a,"class","max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8"),y(r,"class","bg-white border-b border-gray-100"),y(P,"class","text-lg font-semibold text-gray-900 mb-4"),y(N,"type","text"),y(N,"placeholder","Search for an artist..."),y(N,"class","w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"),y(B,"class","relative"),y(H,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-6"),y(O,"class","text-lg font-semibold text-gray-900 mb-4"),y(V,"type","range"),y(V,"min","1"),y(V,"max","4"),y(V,"class","flex-1"),y(K,"class","text-lg font-medium text-indigo-600 w-8"),y(Y,"class","flex items-center gap-4"),y(X,"class","text-xs text-gray-500 mt-2"),y(G,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm mb-6"),y(E,"class","lg:col-span-1"),y(re,"class","text-lg font-semibold text-gray-900"),y(ne,"class","flex items-center justify-between mb-4"),y(se,"class","bg-white rounded-xl p-6 border border-gray-100 shadow-sm"),y(te,"class","lg:col-span-2"),y(M,"class","grid lg:grid-cols-3 gap-6"),y(A,"class","max-w-6xl mx-auto px-4 py-6 sm:px-6 lg:px-8"),y(s,"class","min-h-screen bg-gradient-to-b from-emerald-50 to-white")},m(e,n){c(e,s,n),i(s,r),i(r,a),i(a,o),i(a,l),i(a,u),i(u,p),i(u,h),i(u,b),i(b,k),i(b,_),i(b,C),i(C,$),i(C,T),i(s,S),i(s,A),de&&de.m(A,null),i(A,R),ue&&ue.m(A,null),i(A,j),ge&&ge.m(A,null),i(A,F),i(A,M),i(M,E),i(E,H),i(H,P),i(H,D),i(H,B),i(B,N),w(N,t[1]),i(B,I),pe&&pe.m(B,null),i(H,z),me&&me.m(H,null),i(E,q),i(E,G),i(G,O),i(G,U),i(G,Y),i(Y,V),w(V,t[4]),i(Y,J),i(Y,K),i(K,W),i(G,Q),i(G,X),i(E,Z),fe&&fe.m(E,null),i(M,ee),i(M,te),i(te,se),i(se,ne),i(ne,re),i(ne,ae),he&&he.m(ne,null),i(se,oe),ye.m(se,null),i(te,le),ve&&ve.m(te,null),ie||(ce=[x(o,"click",t[22]),x(k,"click",t[23]),x(C,"click",t[21]),x(N,"input",t[26]),x(N,"input",t[18]),x(V,"change",t[28]),x(V,"input",t[28])],ie=!0)},p(e,t){1&t[0]&&L!==(L=e[0].isLoading)&&(C.disabled=L),e[9]?de?de.p(e,t):(de=ur(e),de.c(),de.m(A,R)):de&&(de.d(1),de=null),e[0].error?ue?ue.p(e,t):(ue=gr(e),ue.c(),ue.m(A,j)):ue&&(ue.d(1),ue=null),e[5]?ge?ge.p(e,t):(ge=pr(e),ge.c(),ge.m(A,F)):ge&&(ge.d(1),ge=null),2&t[0]&&N.value!==e[1]&&w(N,e[1]),e[3]?pe||(pe=yr(),pe.c(),pe.m(B,null)):pe&&(pe.d(1),pe=null),e[2].length>0?me?me.p(e,t):(me=vr(e),me.c(),me.m(H,null)):me&&(me.d(1),me=null),16&t[0]&&w(V,e[4]),16&t[0]&&v(W,e[4]),e[13]&&e[12].length>0?fe?fe.p(e,t):(fe=_r(e),fe.c(),fe.m(E,null)):fe&&(fe.d(1),fe=null),e[14]?he?he.p(e,t):(he=Lr(e),he.c(),he.m(ne,null)):he&&(he.d(1),he=null),be===(be=xe(e))&&ye?ye.p(e,t):(ye.d(1),ye=be(e),ye&&(ye.c(),ye.m(se,null))),e[10]?ve?ve.p(e,t):(ve=Er(e),ve.c(),ve.m(te,null)):ve&&(ve.d(1),ve=null)},i:e,o:e,d(e){e&&d(s),de&&de.d(),ue&&ue.d(),ge&&ge.d(),pe&&pe.d(),me&&me.d(),fe&&fe.d(),he&&he.d(),ye.d(),ve&&ve.d(),ie=!1,n(ce)}}}function Br(e){return e.is_blocked?"#EF4444":"label"===e.type?"#8B5CF6":"track"===e.type?"#10B981":"#6366F1"}function Nr(e){switch(e){case"collaborated_with":return"#94A3B8";case"signed_to":return"#8B5CF6";case"mentioned_in":return"#F59E0B";default:return"#CBD5E1"}}function Ir(e,t,s){let n,r,a,o,i,c,d,u,g,p;l(e,Vn,e=>s(0,d=e)),l(e,Kn,e=>s(15,u=e)),l(e,Jn,e=>s(16,g=e)),l(e,Wn,e=>s(17,p=e));let m="",f=[],h=!1,x=2,b=!1,y="",v="",w=[],k=null;var _;async function C(e){nr(e),await Qn(e.id,x),await Xn(e.id),s(1,m=""),s(2,f=[]),function(){k&&clearInterval(k);const e=600,t=400;s(8,w=g.map(s=>({...s,x:e/2+200*(Math.random()-.5),y:t/2+200*(Math.random()-.5),vx:0,vy:0})));let n=0;k=setInterval(()=>{n>100?k&&clearInterval(k):(w.forEach((s,n)=>{w.forEach((e,t)=>{if(n===t)return;const r=s.x-e.x,a=s.y-e.y,o=Math.sqrt(r*r+a*a)||1,l=500/(o*o);s.vx+=r/o*l,s.vy+=a/o*l}),u.forEach(e=>{if(e.source===s.id||e.target===s.id){const t=e.source===s.id?e.target:e.source,n=w.find(e=>e.id===t);if(n){const e=n.x-s.x,t=n.y-s.y;s.vx+=.01*e,s.vy+=.01*t}}}),s.vx+=.001*(e/2-s.x),s.vy+=.001*(t/2-s.y),s.vx*=.9,s.vy*=.9,s.x+=s.vx,s.y+=s.vy,s.x=Math.max(30,Math.min(e-30,s.x)),s.y=Math.max(30,Math.min(t-30,s.y))}),s(8,w=[...w]),n++)},50)}()}S(async()=>{await Promise.all([tr(),sr()])}),_=()=>{k&&clearInterval(k)},L().$$.on_destroy.push(_);return e.$$.update=()=>{1&e.$$.dirty[0]&&s(14,n=d.currentNetwork),1&e.$$.dirty[0]&&s(13,r=d.selectedArtist),1&e.$$.dirty[0]&&s(12,a=d.collaborators),1&e.$$.dirty[0]&&s(11,o=d.pathResult),1&e.$$.dirty[0]&&s(10,i=d.blockedAnalysis),1&e.$$.dirty[0]&&s(9,c=d.stats)},[d,m,f,h,x,b,y,v,w,c,i,o,a,r,n,u,g,p,async function(){if(m.trim()){s(3,h=!0);try{const e=await fetch(`/api/v1/sync/search?q=${encodeURIComponent(m)}`),t=await e.json();s(2,f=t.artists||[])}catch(e){console.error("Search failed:",e),s(2,f=[])}s(3,h=!1)}else s(2,f=[])},C,async function(){y&&v&&await Zn(y,v)},async function(){await er()},()=>ge("home"),()=>s(5,b=!b),function(){y=this.value,s(6,y)},function(){v=this.value,s(7,v)},function(){m=this.value,s(1,m)},e=>C(e),function(){var e;e=this.value,x=""===e?null:+e,s(4,x)},(e,t)=>t.id===e.source,(e,t)=>t.id===e.target]}class zr extends Z{constructor(e){super(),X(this,e,Ir,Dr,a,{},null,[-1,-1])}}function qr(t){let s,n;return s=new ve({}),{c(){J(s.$$.fragment)},m(e,t){K(s,e,t),n=!0},p:e,i(e){n||(U(s.$$.fragment,e),n=!0)},o(e){Y(s.$$.fragment,e),n=!1},d(e){W(s,e)}}}function Gr(e){let t,s,n,r;const a=[Xr,Qr,Wr,Kr,Jr,Vr],o=[];function l(e,t){return"settings"===e[1]?0:"sync"===e[1]?1:"analytics"===e[1]?2:"revenue-impact"===e[1]?3:"graph"===e[1]?4:5}return t=l(e),s=o[t]=a[t](e),{c(){s.c(),n=h()},m(e,s){o[t].m(e,s),c(e,n,s),r=!0},p(e,r){let i=t;t=l(e),t!==i&&(G(),Y(o[i],1,1,()=>{o[i]=null}),O(),s=o[t],s||(s=o[t]=a[t](e),s.c()),U(s,1),s.m(n.parentNode,n))},i(e){r||(U(s),r=!0)},o(e){Y(s),r=!1},d(e){e&&d(n),o[t].d(e)}}}function Or(t){let s,n,r,a,o,l,u,p,m,h,b;return{c(){s=g("div"),n=g("div"),r=g("div"),r.textContent="!",a=f(),o=g("h2"),o.textContent="Connection Failed",l=f(),u=g("p"),u.textContent="There was a problem connecting your account. Please try again.",p=f(),m=g("button"),m.textContent="Go Back",y(r,"class","text-red-500 text-6xl mb-4"),y(o,"class","text-2xl font-bold text-white mb-2"),y(u,"class","text-gray-400 mb-6"),y(m,"class","px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors"),y(n,"class","max-w-md w-full text-center"),y(s,"class","min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4")},m(e,d){c(e,s,d),i(s,n),i(n,r),i(n,a),i(n,o),i(n,l),i(n,u),i(n,p),i(n,m),h||(b=x(m,"click",t[3]),h=!0)},p:e,i:e,o:e,d(e){e&&d(s),h=!1,b()}}}function Ur(t){let s,n;return s=new Dt({}),{c(){J(s.$$.fragment)},m(e,t){K(s,e,t),n=!0},p:e,i(e){n||(U(s.$$.fragment,e),n=!0)},o(e){Y(s.$$.fragment,e),n=!1},d(e){W(s,e)}}}function Yr(t){let s;return{c(){s=g("div"),s.innerHTML='<div class="text-center"><div class="w-8 h-8 border-4 border-red-500 border-t-transparent rounded-full animate-spin mx-auto"></div> <p class="mt-4 text-gray-400">Loading...</p></div>',y(s,"class","min-h-screen flex items-center justify-center bg-gray-900")},m(e,t){c(e,s,t)},p:e,i:e,o:e,d(e){e&&d(s)}}}function Vr(e){let t,s;return t=new mt({}),{c(){J(t.$$.fragment)},m(e,n){K(t,e,n),s=!0},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Jr(e){let t,s;return t=new zr({}),{c(){J(t.$$.fragment)},m(e,n){K(t,e,n),s=!0},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Kr(e){let t,s;return t=new Yn({}),{c(){J(t.$$.fragment)},m(e,n){K(t,e,n),s=!0},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Wr(e){let t,s;return t=new $n({}),{c(){J(t.$$.fragment)},m(e,n){K(t,e,n),s=!0},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Qr(e){let t,s;return t=new vs({}),{c(){J(t.$$.fragment)},m(e,n){K(t,e,n),s=!0},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Xr(e){let t,s;return t=new Rt({}),{c(){J(t.$$.fragment)},m(e,n){K(t,e,n),s=!0},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Zr(e){let t,s,n,r;const a=[Yr,Ur,Or,Gr,qr],o=[];function l(e,t){return e[0]?"oauth-callback"===e[1]?1:"oauth-error"===e[1]?2:e[2]?3:4:0}return t=l(e),s=o[t]=a[t](e),{c(){s.c(),n=h()},m(e,s){o[t].m(e,s),c(e,n,s),r=!0},p(e,[r]){let i=t;t=l(e),t===i?o[t].p(e,r):(G(),Y(o[i],1,1,()=>{o[i]=null}),O(),s=o[t],s?s.p(e,r):(s=o[t]=a[t](e),s.c()),U(s,1),s.m(n.parentNode,n))},i(e){r||(U(s),r=!0)},o(e){Y(s),r=!1},d(e){e&&d(n),o[t].d(e)}}}function ea(e,t,s){let n,r;l(e,ue,e=>s(1,n=e)),l(e,ae,e=>s(2,r=e));let a=!1;S(async()=>{try{!function(){if("undefined"!=typeof window){window.addEventListener("popstate",e=>{const t=e.state?.route||pe(window.location.pathname);ue.set(t)});const e=pe(window.location.pathname);ue.set(e),document.title=`${de[e].title} - No Drake`}}(),await le.fetchProfile()}catch(e){console.error("Init error:",e)}finally{s(0,a=!0)}});return[a,n,r,()=>window.location.href="/"]}return new class extends Z{constructor(e){super(),X(this,e,ea,Zr,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
