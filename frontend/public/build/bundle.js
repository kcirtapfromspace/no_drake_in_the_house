var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,...n){if(null==t){for(const e of n)e(void 0);return e}const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(e,t,n){e.$$.on_destroy.push(a(t,n))}function c(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function g(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function f(e){return document.createTextNode(e)}function m(){return f(" ")}function h(){return f("")}function y(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function v(e,t,n,r){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}let k;function _(e){k=e}function $(e){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.on_mount.push(e)}const A=[],C=[];let T=[];const S=[],F=Promise.resolve();let j=!1;function L(e){T.push(e)}const E=new Set;let B=0;function M(){if(0!==B)return;const e=k;do{try{for(;B<A.length;){const e=A[B];B++,_(e),P(e.$$)}}catch(e){throw A.length=0,B=0,e}for(_(null),A.length=0,B=0;C.length;)C.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];E.has(t)||(E.add(t),t())}T.length=0}while(A.length);for(;S.length;)S.pop()();j=!1,E.clear(),_(e)}function P(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const D=new Set;let H;function I(){H={r:0,c:[],p:H}}function N(){H.r||r(H.c),H=H.p}function R(e,t){e&&e.i&&(D.delete(e),e.i(t))}function z(e,t,n,r){if(e&&e.o){if(D.has(e))return;D.add(e),H.c.push(()=>{D.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function O(e){return void 0!==e?.length?e:Array.from(e)}function U(e){e&&e.c()}function q(e,n,s){const{fragment:a,after_update:i}=e.$$;a&&a.m(n,s),L(()=>{const n=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]}),i.forEach(L)}function G(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];T.forEach(r=>-1===e.indexOf(r)?t.push(r):n.push(r)),n.forEach(e=>e()),T=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(A.push(e),j||(j=!0,F.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(t,o,s,a,i,c,l=null,d=[-1]){const p=k;_(t);const g=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};l&&l(g.root);let f=!1;if(g.ctx=s?s(t,o.props||{},(e,n,...r)=>{const o=r.length?r[0]:n;return g.ctx&&i(g.ctx[e],g.ctx[e]=o)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](o),f&&J(t,e)),n}):[],g.update(),f=!0,r(g.before_update),g.fragment=!!a&&a(g.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);g.fragment&&g.fragment.l(e),e.forEach(u)}else g.fragment&&g.fragment.c();o.intro&&R(t.$$.fragment),q(t,o.target,o.anchor),M()}_(p)}class W{$$=void 0;$$set=void 0;$destroy(){G(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const Y=[];function K(t,n=e){let r;const o=new Set;function a(e){if(s(t,e)&&(t=e,r)){const e=!Y.length;for(const e of o)e[1](),Y.push(e,t);if(e){for(let e=0;e<Y.length;e+=2)Y[e][0](Y[e+1]);Y.length=0}}}function i(e){a(e(t))}return{set:a,update:i,subscribe:function(s,c=e){const l=[s,c];return o.add(l),1===o.size&&(r=n(a,i)||e),s(t),()=>{o.delete(l),0===o.size&&r&&(r(),r=null)}}}}function Q(t,n,s){const i=!Array.isArray(t),c=i?[t]:t;if(!c.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return u=(t,s)=>{let u=!1;const d=[];let p=0,g=e;const f=()=>{if(p)return;g();const r=n(i?d[0]:d,t,s);l?t(r):g=o(r)?r:e},m=c.map((e,t)=>a(e,e=>{d[t]=e,p&=~(1<<t),u&&f()},()=>{p|=1<<t}));return u=!0,f(),function(){r(m),g(),u=!1}},{subscribe:K(s,u).subscribe};var u}const X=new class{constructor(e="http://localhost:3000"){Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"retryDelay",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),this.baseUrl=e}getAuthToken(){return localStorage.getItem("auth_token")}setAuthToken(e){localStorage.setItem("auth_token",e)}clearAuthToken(){localStorage.removeItem("auth_token")}createHeaders(e=!0){const t={"Content-Type":"application/json"};if(e){const e=this.getAuthToken();e&&(t.Authorization=`Bearer ${e}`)}return t}async handleResponse(e){const t=e.headers.get("content-type");let n;return n=t&&t.includes("application/json")?await e.json():{message:await e.text()},"object"==typeof n&&null!==n&&"success"in n?n:e.ok?{success:!0,data:n,timestamp:(new Date).toISOString()}:{success:!1,message:n.message||`HTTP ${e.status}: ${e.statusText}`,error_code:`HTTP_${e.status}`,timestamp:(new Date).toISOString()}}async withRetry(e,t=this.maxRetries){let n=null;for(let r=0;r<=t;r++)try{const n=await e();if(401===n.status||403===n.status||n.status>=400&&n.status<500)return this.handleResponse(n);if(n.ok)return this.handleResponse(n);if(r<t){const e=this.retryDelay*Math.pow(2,r);await new Promise(t=>setTimeout(t,e));continue}return this.handleResponse(n)}catch(e){if(n=e,r<t){const e=this.retryDelay*Math.pow(2,r);await new Promise(t=>setTimeout(t,e));continue}}return{success:!1,message:n?.message||"Network request failed after retries",error_code:"NETWORK_ERROR",timestamp:(new Date).toISOString()}}async get(e,t=!0){const n=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(n,{method:"GET",headers:this.createHeaders(t)}))}async post(e,t,n=!0){const r=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(r,{method:"POST",headers:this.createHeaders(n),body:t?JSON.stringify(t):void 0}))}async put(e,t,n=!0){const r=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(r,{method:"PUT",headers:this.createHeaders(n),body:t?JSON.stringify(t):void 0}))}async delete(e,t=!0){const n=`${this.baseUrl}${e}`;return this.withRetry(()=>fetch(n,{method:"DELETE",headers:this.createHeaders(t)}))}async handleAuthError(){try{const e=localStorage.getItem("refresh_token");if(!e)return!1;const t=await this.post("/api/v1/auth/refresh",{refresh_token:e},!1);return!(!t.success||!t.data)&&(this.setAuthToken(t.data.access_token),localStorage.setItem("refresh_token",t.data.refresh_token),!0)}catch(e){return console.error("Token refresh failed:",e),!1}}async authenticatedRequest(e,t,n){let r;switch(e){case"GET":r=await this.get(t);break;case"POST":r=await this.post(t,n);break;case"PUT":r=await this.put(t,n);break;case"DELETE":r=await this.delete(t)}if(!r.success&&"HTTP_401"===r.error_code){if(await this.handleAuthError())switch(e){case"GET":r=await this.get(t);break;case"POST":r=await this.post(t,n);break;case"PUT":r=await this.put(t,n);break;case"DELETE":r=await this.delete(t)}else this.clearAuthToken(),localStorage.removeItem("refresh_token"),window.dispatchEvent(new CustomEvent("auth:logout",{detail:{reason:"token_refresh_failed"}}))}return r}},Z=K({user:null,token:localStorage.getItem("auth_token"),refreshToken:localStorage.getItem("refresh_token"),isAuthenticated:!1,isLoading:!1,justRegistered:!1,oauthFlow:{provider:null,state:null,isInProgress:!1}}),ee=Q(Z,e=>e.isAuthenticated&&null!==e.token),te=Q(Z,e=>e.user);Q(Z,e=>e.justRegistered);const ne={login:async(e,t,n)=>{Z.update(e=>({...e,isLoading:!0}));const r=await X.post("/api/v1/auth/login",{email:e,password:t,totp_code:n},!1);if(r.success&&r.data){const{access_token:e,refresh_token:t}=r.data;return X.setAuthToken(e),localStorage.setItem("refresh_token",t),Z.update(n=>({...n,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1,justRegistered:!1})),await ne.fetchProfile(),{success:!0}}return Z.update(e=>({...e,isLoading:!1})),{success:!1,message:r.message||"Login failed"}},register:async(e,t,n,r)=>{Z.update(e=>({...e,isLoading:!0}));const o=await X.post("/api/v1/auth/register",{email:e,password:t,confirm_password:n,terms_accepted:r},!1);if(o.success){if(o.data?.access_token&&o.data?.refresh_token){const{access_token:e,refresh_token:t}=o.data;return X.setAuthToken(e),localStorage.setItem("refresh_token",t),Z.update(n=>({...n,token:e,refreshToken:t,isAuthenticated:!0,isLoading:!1,justRegistered:!0})),await ne.fetchProfile(),{success:!0,autoLogin:!0}}return Z.update(e=>({...e,isLoading:!1})),{success:!0,autoLogin:!1,message:o.message}}return Z.update(e=>({...e,isLoading:!1})),{success:!1,message:o.message||"Registration failed",errors:o.data?.errors||null}},fetchProfile:async()=>{if(!X.getAuthToken())return;const e=await X.authenticatedRequest("GET","/api/v1/users/profile");e.success&&e.data?Z.update(t=>({...t,user:e.data,isAuthenticated:!0})):console.error("Failed to fetch profile:",e.message)},logout:async()=>{if(X.getAuthToken())try{await X.authenticatedRequest("POST","/api/v1/auth/logout")}catch(e){console.error("Logout request failed:",e)}X.clearAuthToken(),localStorage.removeItem("refresh_token"),Z.set({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,justRegistered:!1,oauthFlow:{provider:null,state:null,isInProgress:!1}})},refreshToken:async()=>{const e=localStorage.getItem("refresh_token");if(!e)return!1;const t=await X.post("/api/v1/auth/refresh",{refresh_token:e},!1);if(t.success&&t.data){const{access_token:e,refresh_token:n}=t.data;return X.setAuthToken(e),localStorage.setItem("refresh_token",n),Z.update(t=>({...t,token:e,refreshToken:n,isAuthenticated:!0})),!0}return console.error("Token refresh failed:",t.message),!1},setup2FA:async()=>{try{const e=await api.post("/auth/2fa/setup");return e.success?{success:!0,qrCodeUrl:e.data.qr_code_url,secret:e.data.secret}:{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message||"Failed to setup 2FA"}}},verify2FA:async e=>{try{const t=await api.post("/auth/2fa/verify",{totp_code:e});return t.success?(await ne.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Failed to verify 2FA code"}}},disable2FA:async e=>{try{const t=await api.post("/auth/2fa/disable",{totp_code:e});return t.success?(await ne.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Failed to disable 2FA"}}},clearJustRegistered:()=>{Z.update(e=>({...e,justRegistered:!1}))},initiateOAuthFlow:async e=>{Z.update(t=>({...t,oauthFlow:{provider:e,state:null,isInProgress:!0}}));try{const t=await api.post(`/auth/oauth/${e}/initiate`);if(t.success){const{authorization_url:n,state:r}=t.data;return sessionStorage.setItem(`oauth_state_${e}`,r),Z.update(e=>({...e,oauthFlow:{...e.oauthFlow,state:r}})),window.location.href=n,{success:!0}}return Z.update(e=>({...e,oauthFlow:{provider:null,state:null,isInProgress:!1}})),{success:!1,message:t.message}}catch(e){return Z.update(e=>({...e,oauthFlow:{provider:null,state:null,isInProgress:!1}})),{success:!1,message:e.message||"Network error occurred"}}},completeOAuthFlow:async(e,t,n)=>{try{const r=sessionStorage.getItem(`oauth_state_${e}`);if(!r||r!==n)throw new Error("Invalid state parameter - possible CSRF attack");const o=await api.post(`/auth/oauth/${e}/callback`,{code:t,state:n,redirect_uri:window.location.origin+window.location.pathname});if(o.success){const{access_token:t,refresh_token:n}=o.data;return localStorage.setItem("auth_token",t),localStorage.setItem("refresh_token",n),Z.update(e=>({...e,token:t,refreshToken:n,isAuthenticated:!0,oauthFlow:{provider:null,state:null,isInProgress:!1}})),sessionStorage.removeItem(`oauth_state_${e}`),await ne.fetchProfile(),{success:!0}}throw new Error(o.message||"OAuth authentication failed")}catch(t){return sessionStorage.removeItem(`oauth_state_${e}`),Z.update(e=>({...e,oauthFlow:{provider:null,state:null,isInProgress:!1}})),{success:!1,message:t.message||"Authentication failed"}}},linkOAuthAccount:async e=>{try{const t=await api.post(`/auth/oauth/${e}/link`);if(t.success){const{authorization_url:n,state:r}=t.data;return sessionStorage.setItem(`oauth_link_state_${e}`,r),{success:!0,authorization_url:n,state:r}}return{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Network error occurred"}}},unlinkOAuthAccount:async e=>{try{const t=await api.delete(`/auth/oauth/${e}/unlink`);return t.success?(await ne.fetchProfile(),{success:!0}):{success:!1,message:t.message}}catch(e){return{success:!1,message:e.message||"Network error occurred"}}},getLinkedAccounts:async()=>{try{const e=await api.get("/auth/oauth/accounts");return e.success?{success:!0,data:e.data}:{success:!1,message:e.message}}catch(e){return{success:!1,message:e.message||"Network error occurred"}}}};if("undefined"!=typeof window){const e=localStorage.getItem("auth_token");e&&(X.setAuthToken(e),Z.update(t=>({...t,token:e,isAuthenticated:!0,justRegistered:!1})),ne.fetchProfile()),window.addEventListener("auth:logout",()=>{ne.logout()})}const re={"/":"home","/home":"home","/settings":"settings"},oe={home:"/",settings:"/settings","oauth-callback":"/auth/callback","oauth-error":"/auth/error"},se={home:{title:"Home",description:"Your music blocklist dashboard"},settings:{title:"Settings",description:"Account and connection settings"},"oauth-callback":{title:"Connecting...",description:"Processing authentication"},"oauth-error":{title:"Connection Error",description:"There was a problem connecting"}},ae=K("home");function ie(e){if(ae.set(e),"undefined"!=typeof window){const t=oe[e]||"/",n=se[e];window.history.pushState({route:e},n.title,t),document.title=`${n.title} - No Drake`}}function ce(e){return e.startsWith("/auth/callback")?"oauth-callback":e.startsWith("/auth/error")?"oauth-error":re[e]||"home"}function le(e){let t,n;return{c(){t=p("div"),n=f(e[2]),b(t,"class","bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg text-sm")},m(e,r){l(e,t,r),c(t,n)},p(e,t){4&t&&x(n,e[2])},d(e){e&&u(t)}}}function ue(e){let t,n;return{c(){t=p("div"),n=f(e[3]),b(t,"class","bg-green-900/50 border border-green-700 text-green-200 px-4 py-3 rounded-lg text-sm")},m(e,r){l(e,t,r),c(t,n)},p(e,t){8&t&&x(n,e[3])},d(e){e&&u(t)}}}function de(e){let t,n,r,o;return{c(){t=p("div"),n=p("input"),b(n,"type","password"),b(n,"placeholder","Confirm password"),n.required=!0,b(n,"minlength","8"),b(n,"class","w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent")},m(s,a){l(s,t,a),c(t,n),w(n,e[6]),r||(o=y(n,"input",e[11]),r=!0)},p(e,t){64&t&&n.value!==e[6]&&w(n,e[6])},d(e){e&&u(t),r=!1,o()}}}function pe(e){let t;return{c(){t=p("div"),b(t,"class","w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2")},m(e,n){l(e,t,n)},d(e){e&&u(t)}}}function ge(t){let n,o,s,a,i,d,g,h,v,k,_,$,A,C,T,S,F,j,L,E,B,M,P,D,H,I="login"===t[0]?"Sign in":"Create account",N="login"===t[0]?"Don't have an account? Sign up":"Already have an account? Sign in",R=t[2]&&le(t),z=t[3]&&ue(t),O="register"===t[0]&&de(t),U=t[1]&&pe();return{c(){n=p("div"),o=p("div"),s=p("div"),s.innerHTML='<span class="text-6xl">ðŸš«</span> <h1 class="text-3xl font-bold text-white mt-4">No Drake</h1> <p class="text-gray-400 mt-2">Block problematic artists from your music</p>',a=m(),i=p("form"),R&&R.c(),d=m(),z&&z.c(),g=m(),h=p("div"),v=p("input"),k=m(),_=p("div"),$=p("input"),A=m(),O&&O.c(),C=m(),T=p("button"),U&&U.c(),S=m(),F=f(I),j=m(),L=p("div"),E=p("button"),B=f(N),M=m(),P=p("div"),P.innerHTML='<div class="flex items-center space-x-3 text-gray-500"><svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span class="text-sm">AI-curated blocklists by category</span></div> <div class="flex items-center space-x-3 text-gray-500"><svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span class="text-sm">Block artists on Spotify &amp; Apple Music</span></div> <div class="flex items-center space-x-3 text-gray-500"><svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span class="text-sm">Blocks features &amp; collaborations too</span></div>',b(s,"class","text-center mb-8"),b(v,"type","email"),b(v,"placeholder","Email"),v.required=!0,b(v,"class","w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"),b($,"type","password"),b($,"placeholder","Password"),$.required=!0,b($,"minlength","8"),b($,"class","w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"),b(T,"type","submit"),T.disabled=t[1],b(T,"class","w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"),b(i,"class","space-y-4"),b(E,"type","button"),b(E,"class","text-gray-400 hover:text-white transition-colors"),b(L,"class","mt-6 text-center"),b(P,"class","mt-12 space-y-3"),b(o,"class","w-full max-w-sm"),b(n,"class","min-h-screen flex flex-col items-center justify-center bg-gray-900 px-4")},m(e,r){var u;l(e,n,r),c(n,o),c(o,s),c(o,a),c(o,i),R&&R.m(i,null),c(i,d),z&&z.m(i,null),c(i,g),c(i,h),c(h,v),w(v,t[4]),c(i,k),c(i,_),c(_,$),w($,t[5]),c(i,A),O&&O.m(i,null),c(i,C),c(i,T),U&&U.m(T,null),c(T,S),c(T,F),c(o,j),c(o,L),c(L,E),c(E,B),c(o,M),c(o,P),D||(H=[y(v,"input",t[9]),y($,"input",t[10]),y(i,"submit",(u=t[7],function(e){return e.preventDefault(),u.call(this,e)})),y(E,"click",t[8])],D=!0)},p(e,[t]){e[2]?R?R.p(e,t):(R=le(e),R.c(),R.m(i,d)):R&&(R.d(1),R=null),e[3]?z?z.p(e,t):(z=ue(e),z.c(),z.m(i,g)):z&&(z.d(1),z=null),16&t&&v.value!==e[4]&&w(v,e[4]),32&t&&$.value!==e[5]&&w($,e[5]),"register"===e[0]?O?O.p(e,t):(O=de(e),O.c(),O.m(i,C)):O&&(O.d(1),O=null),e[1]?U||(U=pe(),U.c(),U.m(T,S)):U&&(U.d(1),U=null),1&t&&I!==(I="login"===e[0]?"Sign in":"Create account")&&x(F,I),2&t&&(T.disabled=e[1]),1&t&&N!==(N="login"===e[0]?"Don't have an account? Sign up":"Already have an account? Sign in")&&x(B,N)},i:e,o:e,d(e){e&&u(n),R&&R.d(),z&&z.d(),O&&O.d(),U&&U.d(),D=!1,r(H)}}}function fe(e,t,n){let r="login",o=!1,s="",a="",i="",c="",l="";return[r,o,s,a,i,c,l,async function(){n(2,s=""),n(3,a=""),n(1,o=!0);try{if("login"===r){const e=await ne.login(i,c);e.success||n(2,s=e.message||"Login failed")}else{if(c!==l)return n(2,s="Passwords do not match"),void n(1,o=!1);const e=await ne.register(i,c,l,!0);e.success?n(3,a="Account created!"):n(2,s=e.message||"Registration failed")}}catch(e){n(2,s="Something went wrong. Please try again.")}finally{n(1,o=!1)}},function(){n(0,r="login"===r?"register":"login"),n(2,s=""),n(3,a=""),n(5,c=""),n(6,l="")},function(){i=this.value,n(4,i)},function(){c=this.value,n(5,c)},function(){l=this.value,n(6,l)}]}Q(ae,e=>se[e]);class me extends W{constructor(e){super(),V(this,e,fe,ge,s,{})}}function he(e,t,n){const r=e.slice();r[47]=t[n];const o=it(r[47].severity);return r[37]=o,r}function ye(e,t,n){const r=e.slice();return r[50]=t[n],r}function be(e,t,n){const r=e.slice();return r[53]=t[n],r}function xe(e,t,n){const r=e.slice();r[36]=t[n];const o=it(r[36].severity);return r[37]=o,r}function we(e,t,n){const r=e.slice();return r[40]=t[n],r}function ve(e,t,n){const r=e.slice();r[36]=t[n];const o=it(r[36].severity);return r[37]=o,r}function ke(e,t,n){const r=e.slice();return r[36]=t[n],r[46]=n,r}function _e(e){let t,n,r,o,s,a,i;function d(e,t){return e[12]?Ce:e[11]?Ae:void 0}let g=d(e),f=g&&g(e);return{c(){t=p("header"),n=p("div"),r=p("button"),r.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>\n          Back',o=m(),s=p("main"),f&&f.c(),b(r,"type","button"),b(r,"class","flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors"),b(n,"class","max-w-3xl mx-auto px-4 py-4"),b(t,"class","sticky top-0 z-50 bg-white border-b border-gray-200"),b(s,"class","max-w-3xl mx-auto px-4 py-6")},m(u,d){l(u,t,d),c(t,n),c(n,r),l(u,o,d),l(u,s,d),f&&f.m(s,null),a||(i=y(r,"click",e[20]),a=!0)},p(e,t){g===(g=d(e))&&f?f.p(e,t):(f&&f.d(1),f=g&&g(e),f&&(f.c(),f.m(s,null)))},d(e){e&&(u(t),u(o),u(s)),f&&f.d(),a=!1,i()}}}function $e(e){let t,n,o,s,a,i,d,h,x,k,_,$,A,C,T,S,F,j,L,E,B,M,P,D,H,I,N;function R(e,t){return e[3]?ze:Re}let z=R(e),O=z(e);function U(e,t){return e[2].length>0?Ue:e[1].length>1&&!e[3]?Oe:void 0}let q=U(e),G=q&&q(e);function J(e,t){return e[5]?Ve:Je}let V=J(e),W=V(e),Y=e[9].length>0&&et(e);function K(e,t){return e[10]?rt:0===e[9].length?nt:tt}let Q=K(e),X=Q(e);return{c(){t=p("header"),n=p("div"),o=p("div"),o.innerHTML='<h1 class="text-xl font-semibold text-gray-900">No Drake in the House</h1> <p class="text-sm" style="color: #666;">Curate your streaming</p>',s=m(),a=p("button"),i=g("svg"),d=g("path"),h=g("path"),x=m(),k=p("main"),_=p("section"),$=p("div"),A=p("input"),C=m(),T=p("div"),O.c(),S=m(),G&&G.c(),F=m(),j=p("section"),L=p("h2"),L.textContent="Block by Category",E=m(),W.c(),B=m(),M=p("section"),P=p("h2"),D=f("Your Blocked Artists\n          "),Y&&Y.c(),H=m(),X.c(),b(d,"stroke-linecap","round"),b(d,"stroke-linejoin","round"),b(d,"stroke-width","2"),b(d,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),b(h,"stroke-linecap","round"),b(h,"stroke-linejoin","round"),b(h,"stroke-width","2"),b(h,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),b(i,"class","w-5 h-5"),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"viewBox","0 0 24 24"),b(a,"class","p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors"),v(a,"hover","color: "+e[15].blue.primary),b(n,"class","max-w-3xl mx-auto px-4 py-4 flex justify-between items-center"),b(t,"class","sticky top-0 z-50 bg-white border-b border-gray-200"),b(A,"type","text"),b(A,"placeholder","Search artists..."),b(A,"class","w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-transparent transition-all"),v(A,"focus","ring: 2px solid "+e[15].blue.primary),b(T,"class","absolute right-3 top-1/2 -translate-y-1/2"),b($,"class","relative"),b(L,"class","text-lg font-semibold text-gray-900 mb-4"),b(P,"class","text-lg font-semibold text-gray-900 mb-4"),b(k,"class","max-w-3xl mx-auto px-4 py-6 space-y-8")},m(r,u){l(r,t,u),c(t,n),c(n,o),c(n,s),c(n,a),c(a,i),c(i,d),c(i,h),l(r,x,u),l(r,k,u),c(k,_),c(_,$),c($,A),w(A,e[1]),c($,C),c($,T),O.m(T,null),c(_,S),G&&G.m(_,null),c(k,F),c(k,j),c(j,L),c(j,E),W.m(j,null),c(k,B),c(k,M),c(M,P),c(P,D),Y&&Y.m(P,null),c(M,H),X.m(M,null),I||(N=[y(a,"click",e[23]),y(A,"input",e[24]),y(A,"input",e[16])],I=!0)},p(e,t){2&t[0]&&A.value!==e[1]&&w(A,e[1]),z===(z=R(e))&&O?O.p(e,t):(O.d(1),O=z(e),O&&(O.c(),O.m(T,null))),q===(q=U(e))&&G?G.p(e,t):(G&&G.d(1),G=q&&q(e),G&&(G.c(),G.m(_,null))),V===(V=J(e))&&W?W.p(e,t):(W.d(1),W=V(e),W&&(W.c(),W.m(j,null))),e[9].length>0?Y?Y.p(e,t):(Y=et(e),Y.c(),Y.m(P,null)):Y&&(Y.d(1),Y=null),Q===(Q=K(e))&&X?X.p(e,t):(X.d(1),X=Q(e),X&&(X.c(),X.m(M,null)))},d(e){e&&(u(t),u(x),u(k)),O.d(),G&&G.d(),W.d(),Y&&Y.d(),X.d(),I=!1,r(N)}}}function Ae(e){let t,n,r,o,s,a,i,d,g,w,k,_,$,A,C,T,S,F,j,L,E,B,M,P,D,H,I,N,R=e[11].canonical_name.charAt(0)+"",z=e[11].canonical_name+"",O=e[14].has(e[11].id)?"Blocked":"Not Blocked",U=e[11].genres&&e[11].genres.length>0&&Te(e);function q(e,t){return 18432&t[0]&&(L=null),e[13]===e[11]?.id?je:(null==L&&(L=!!e[14].has(e[11].id)),L?Fe:Se)}let G=q(e,[-1,-1]),J=G(e);function V(e,t){return e[11].offenses&&e[11].offenses.length>0?Ee:Le}let W=V(e),Y=W(e);return{c(){t=p("div"),n=p("div"),r=p("div"),o=p("div"),s=f(R),a=m(),i=p("div"),d=p("h1"),g=f(z),w=m(),U&&U.c(),k=m(),_=p("div"),$=p("div"),A=p("p"),A.textContent="Status",C=m(),T=p("p"),S=f(O),F=m(),j=p("button"),J.c(),M=m(),P=p("h2"),P.textContent="Documented Incidents",D=m(),Y.c(),H=h(),b(o,"class","w-16 h-16 rounded-xl flex items-center justify-center text-2xl font-bold text-white"),v(o,"background","linear-gradient(135deg, "+e[15].blue.primary+", "+e[15].blue.light+")"),b(d,"class","text-2xl font-bold text-gray-900"),b(r,"class","flex items-center gap-4"),b(n,"class","p-6"),v(n,"background","linear-gradient(135deg, "+e[15].blue.primary+"08, "+e[15].blue.light+"05)"),b(A,"class","text-sm text-gray-500"),b(T,"class","font-medium"),v(T,"color",e[14].has(e[11].id)?e[15].pink.primary:e[15].green.primary),b(j,"type","button"),j.disabled=E=e[13]===e[11]?.id,b(j,"class","px-5 py-2.5 rounded-lg font-medium transition-all disabled:opacity-50"),b(j,"style",B=e[14].has(e[11].id)?"background: #f3f4f6; color: #374151;":`background: ${e[15].pink.primary}; color: white;`),b(_,"class","px-6 py-4 border-t border-gray-100 flex items-center justify-between"),b(t,"class","bg-white border border-gray-200 rounded-lg overflow-hidden mb-6"),b(P,"class","text-lg font-semibold text-gray-900 mb-4")},m(u,p){l(u,t,p),c(t,n),c(n,r),c(r,o),c(o,s),c(r,a),c(r,i),c(i,d),c(d,g),c(i,w),U&&U.m(i,null),c(t,k),c(t,_),c(_,$),c($,A),c($,C),c($,T),c(T,S),c(_,F),c(_,j),J.m(j,null),l(u,M,p),l(u,P,p),l(u,D,p),Y.m(u,p),l(u,H,p),I||(N=y(j,"click",e[30]),I=!0)},p(e,t){2048&t[0]&&R!==(R=e[11].canonical_name.charAt(0)+"")&&x(s,R),2048&t[0]&&z!==(z=e[11].canonical_name+"")&&x(g,z),e[11].genres&&e[11].genres.length>0?U?U.p(e,t):(U=Te(e),U.c(),U.m(i,null)):U&&(U.d(1),U=null),18432&t[0]&&O!==(O=e[14].has(e[11].id)?"Blocked":"Not Blocked")&&x(S,O),18432&t[0]&&v(T,"color",e[14].has(e[11].id)?e[15].pink.primary:e[15].green.primary),G!==(G=q(e,t))&&(J.d(1),J=G(e),J&&(J.c(),J.m(j,null))),10240&t[0]&&E!==(E=e[13]===e[11]?.id)&&(j.disabled=E),18432&t[0]&&B!==(B=e[14].has(e[11].id)?"background: #f3f4f6; color: #374151;":`background: ${e[15].pink.primary}; color: white;`)&&b(j,"style",B),W===(W=V(e))&&Y?Y.p(e,t):(Y.d(1),Y=W(e),Y&&(Y.c(),Y.m(H.parentNode,H)))},d(e){e&&(u(t),u(M),u(P),u(D),u(H)),U&&U.d(),J.d(),Y.d(e),I=!1,N()}}}function Ce(t){let n,r;return{c(){n=p("div"),r=p("div"),b(r,"class","w-8 h-8 border-2 rounded-full animate-spin"),v(r,"border-color",t[15].blue.primary),v(r,"border-top-color","transparent"),b(n,"class","flex justify-center py-20")},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function Te(e){let t,n,r=e[11].genres.join(", ")+"";return{c(){t=p("p"),n=f(r),b(t,"class","text-gray-500 mt-1")},m(e,r){l(e,t,r),c(t,n)},p(e,t){2048&t[0]&&r!==(r=e[11].genres.join(", ")+"")&&x(n,r)},d(e){e&&u(t)}}}function Se(e){let t;return{c(){t=f("Block Artist")},m(e,n){l(e,t,n)},d(e){e&&u(t)}}}function Fe(e){let t;return{c(){t=f("Unblock")},m(e,n){l(e,t,n)},d(e){e&&u(t)}}}function je(e){let t;return{c(){t=p("span"),b(t,"class","inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin")},m(e,n){l(e,t,n)},d(e){e&&u(t)}}}function Le(t){let n;return{c(){n=p("div"),n.innerHTML='<p class="text-gray-600">No documented incidents</p> <p class="text-sm text-gray-500 mt-1">No offense records found for this artist</p>',b(n,"class","bg-gray-50 border border-gray-200 rounded-lg p-10 text-center")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function Ee(e){let t,n=O(e[11].offenses),r=[];for(let t=0;t<n.length;t+=1)r[t]=Ne(he(e,n,t));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();b(t,"class","space-y-4")},m(e,n){l(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(34816&o[0]){let s;for(n=O(e[11].offenses),s=0;s<n.length;s+=1){const a=he(e,n,s);r[s]?r[s].p(a,o):(r[s]=Ne(a),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function Be(e){let t,n,r=new Date(e[47].incident_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"";return{c(){t=p("p"),n=f(r),b(t,"class","text-sm text-gray-500 mt-4")},m(e,r){l(e,t,r),c(t,n)},p(e,t){2048&t[0]&&r!==(r=new Date(e[47].incident_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"")&&x(n,r)},d(e){e&&u(t)}}}function Me(e){let t,n,r,o,s,a,i,g=e[47].evidence.length+"",h=O(e[47].evidence),y=[];for(let t=0;t<h.length;t+=1)y[t]=Ie(ye(e,h,t));return{c(){t=p("div"),n=p("p"),r=f("Sources ("),o=f(g),s=f(")"),a=m(),i=p("div");for(let e=0;e<y.length;e+=1)y[e].c();b(n,"class","text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"),b(i,"class","space-y-2"),b(t,"class","mt-5 pt-5 border-t border-gray-100")},m(e,u){l(e,t,u),c(t,n),c(n,r),c(n,o),c(n,s),c(t,a),c(t,i);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(i,null)},p(e,t){if(2048&t[0]&&g!==(g=e[47].evidence.length+"")&&x(o,g),34816&t[0]){let n;for(h=O(e[47].evidence),n=0;n<h.length;n+=1){const r=ye(e,h,n);y[n]?y[n].p(r,t):(y[n]=Ie(r),y[n].c(),y[n].m(i,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=h.length}},d(e){e&&u(t),d(y,e)}}}function Pe(e){let t,n,r=e[50].source_name+"";return{c(){t=p("p"),n=f(r),b(t,"class","text-xs text-gray-500")},m(e,r){l(e,t,r),c(t,n)},p(e,t){2048&t[0]&&r!==(r=e[50].source_name+"")&&x(n,r)},d(e){e&&u(t)}}}function De(e){let t,n=O(Array(e[50].credibility_score)),r=[];for(let t=0;t<n.length;t+=1)r[t]=He(be(e,n,t));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();b(t,"class","flex gap-0.5"),v(t,"color",e[15].green.light)},m(e,n){l(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(2048&o[0]){let s;for(n=O(Array(e[50].credibility_score)),s=0;s<n.length;s+=1){const a=be(e,n,s);r[s]?r[s].p(a,o):(r[s]=He(),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function He(t){let n;return{c(){n=p("span"),n.textContent="â˜…",b(n,"class","text-xs")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function Ie(e){let t,n,r,o,s,a,i,d,h,y,w,k=(e[50].title||e[50].source_name||"View Source")+"",_=e[50].source_name&&e[50].title&&Pe(e),$=e[50].credibility_score&&De(e);return{c(){t=p("a"),n=g("svg"),r=g("path"),o=m(),s=p("div"),a=p("p"),i=f(k),d=m(),_&&_.c(),h=m(),$&&$.c(),y=m(),b(r,"stroke-linecap","round"),b(r,"stroke-linejoin","round"),b(r,"stroke-width","2"),b(r,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),b(n,"class","w-4 h-4 flex-shrink-0"),v(n,"color",e[15].blue.primary),b(n,"fill","none"),b(n,"stroke","currentColor"),b(n,"viewBox","0 0 24 24"),b(a,"class","text-sm font-medium text-gray-900 truncate"),b(s,"class","flex-1 min-w-0"),b(t,"href",w=e[50].source_url),b(t,"target","_blank"),b(t,"rel","noopener noreferrer"),b(t,"class","flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors")},m(e,u){l(e,t,u),c(t,n),c(n,r),c(t,o),c(t,s),c(s,a),c(a,i),c(s,d),_&&_.m(s,null),c(t,h),$&&$.m(t,null),c(t,y)},p(e,n){2048&n[0]&&k!==(k=(e[50].title||e[50].source_name||"View Source")+"")&&x(i,k),e[50].source_name&&e[50].title?_?_.p(e,n):(_=Pe(e),_.c(),_.m(s,null)):_&&(_.d(1),_=null),e[50].credibility_score?$?$.p(e,n):($=De(e),$.c(),$.m(t,y)):$&&($.d(1),$=null),2048&n[0]&&w!==(w=e[50].source_url)&&b(t,"href",w)},d(e){e&&u(t),_&&_.d(),$&&$.d()}}}function Ne(e){let t,n,r,o,s,a,i,d,g,h,y,w,v,k,_,$,A,C,T=at(e[47].category)+"",S=e[37].label+"",F=e[47].title+"",j=e[47].description+"",L=e[47].incident_date&&Be(e),E=e[47].evidence&&e[47].evidence.length>0&&Me(e);return{c(){t=p("div"),n=p("div"),r=p("div"),o=p("span"),s=f(T),a=m(),i=p("span"),d=f(S),h=m(),y=p("h3"),w=f(F),v=m(),k=p("p"),_=f(j),$=m(),L&&L.c(),A=m(),E&&E.c(),C=m(),b(o,"class","px-2.5 py-1 text-xs font-medium rounded bg-gray-100 text-gray-700"),b(i,"class","px-2.5 py-1 text-xs font-medium rounded"),b(i,"style",g=e[37].bg+" "+e[37].text),b(r,"class","flex items-center gap-2 mb-3"),b(y,"class","text-lg font-semibold text-gray-900 mb-2"),b(k,"class","text-gray-600 leading-relaxed"),b(n,"class","p-5"),b(t,"class","bg-white border border-gray-200 rounded-lg overflow-hidden")},m(e,u){l(e,t,u),c(t,n),c(n,r),c(r,o),c(o,s),c(r,a),c(r,i),c(i,d),c(n,h),c(n,y),c(y,w),c(n,v),c(n,k),c(k,_),c(n,$),L&&L.m(n,null),c(n,A),E&&E.m(n,null),c(t,C)},p(e,t){2048&t[0]&&T!==(T=at(e[47].category)+"")&&x(s,T),2048&t[0]&&S!==(S=e[37].label+"")&&x(d,S),2048&t[0]&&g!==(g=e[37].bg+" "+e[37].text)&&b(i,"style",g),2048&t[0]&&F!==(F=e[47].title+"")&&x(w,F),2048&t[0]&&j!==(j=e[47].description+"")&&x(_,j),e[47].incident_date?L?L.p(e,t):(L=Be(e),L.c(),L.m(n,A)):L&&(L.d(1),L=null),e[47].evidence&&e[47].evidence.length>0?E?E.p(e,t):(E=Me(e),E.c(),E.m(n,null)):E&&(E.d(1),E=null)},d(e){e&&u(t),L&&L.d(),E&&E.d()}}}function Re(t){let n,r;return{c(){n=g("svg"),r=g("path"),b(r,"stroke-linecap","round"),b(r,"stroke-linejoin","round"),b(r,"stroke-width","2"),b(r,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),b(n,"class","w-5 h-5 text-gray-400"),b(n,"fill","none"),b(n,"stroke","currentColor"),b(n,"viewBox","0 0 24 24")},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function ze(t){let n;return{c(){n=p("div"),b(n,"class","w-5 h-5 border-2 rounded-full animate-spin"),v(n,"border-color",t[15].blue.primary),v(n,"border-top-color","transparent")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function Oe(e){let t,n,r,o,s,a;return{c(){t=p("div"),n=p("p"),r=f('No artists found for "'),o=p("span"),s=f(e[1]),a=f('"'),b(o,"class","font-medium text-gray-700"),b(n,"class","text-gray-500"),b(t,"class","mt-2 bg-gray-50 border border-gray-200 rounded-lg p-6 text-center")},m(e,i){l(e,t,i),c(t,n),c(n,r),c(n,o),c(o,s),c(n,a)},p(e,t){2&t[0]&&x(s,e[1])},d(e){e&&u(t)}}}function Ue(e){let t,n=O(e[2]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Ge(ke(e,n,t));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();b(t,"class","mt-2 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden")},m(e,n){l(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(557060&o[0]){let s;for(n=O(e[2]),s=0;s<n.length;s+=1){const a=ke(e,n,s);r[s]?r[s].p(a,o):(r[s]=Ge(a),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function qe(e){let t,n,r=e[36].genres.slice(0,3).join(", ")+"";return{c(){t=p("p"),n=f(r),b(t,"class","text-sm text-gray-500 truncate")},m(e,r){l(e,t,r),c(t,n)},p(e,t){4&t[0]&&r!==(r=e[36].genres.slice(0,3).join(", ")+"")&&x(n,r)},d(e){e&&u(t)}}}function Ge(e){let t,n,r,o,s,a,i,d,h,w,k,_,$,A,C=e[36].canonical_name.charAt(0)+"",T=e[36].canonical_name+"",S=e[36].genres&&e[36].genres.length>0&&qe(e);function F(){return e[25](e[36])}return{c(){t=p("button"),n=p("div"),r=f(C),o=m(),s=p("div"),a=p("p"),i=f(T),d=m(),S&&S.c(),h=m(),w=g("svg"),k=g("path"),_=m(),b(n,"class","w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium text-white"),v(n,"background","linear-gradient(135deg, "+e[15].blue.primary+", "+e[15].blue.light+")"),b(a,"class","font-medium text-gray-900 truncate"),b(s,"class","flex-1 min-w-0"),b(k,"stroke-linecap","round"),b(k,"stroke-linejoin","round"),b(k,"stroke-width","2"),b(k,"d","M9 5l7 7-7 7"),b(w,"class","w-4 h-4 text-gray-400"),b(w,"fill","none"),b(w,"stroke","currentColor"),b(w,"viewBox","0 0 24 24"),b(t,"type","button"),b(t,"class","w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors "+(e[46]>0?"border-t border-gray-100":""))},m(e,u){l(e,t,u),c(t,n),c(n,r),c(t,o),c(t,s),c(s,a),c(a,i),c(s,d),S&&S.m(s,null),c(t,h),c(t,w),c(w,k),c(t,_),$||(A=y(t,"click",F),$=!0)},p(t,n){e=t,4&n[0]&&C!==(C=e[36].canonical_name.charAt(0)+"")&&x(r,C),4&n[0]&&T!==(T=e[36].canonical_name+"")&&x(i,T),e[36].genres&&e[36].genres.length>0?S?S.p(e,n):(S=qe(e),S.c(),S.m(s,null)):S&&(S.d(1),S=null)},d(e){e&&u(t),S&&S.d(),$=!1,A()}}}function Je(e){let t,n=O(e[4]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Ze(we(e,n,t));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();b(t,"class","space-y-3")},m(e,n){l(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(950736&o[0]){let s;for(n=O(e[4]),s=0;s<n.length;s+=1){const a=we(e,n,s);r[s]?r[s].p(a,o):(r[s]=Ze(a),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function Ve(t){let n,r;return{c(){n=p("div"),r=p("div"),b(r,"class","w-6 h-6 border-2 rounded-full animate-spin"),v(r,"border-color",t[15].blue.primary),v(r,"border-top-color","transparent"),b(n,"class","flex justify-center py-12")},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function We(e){let t;function n(e,t){return e[8]?Qe:0===e[7].length?Ke:Ye}let r=n(e),o=r(e);return{c(){t=p("div"),o.c(),b(t,"class","mt-2 bg-white border border-gray-200 rounded-lg overflow-hidden")},m(e,n){l(e,t,n),o.m(t,null)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t,null)))},d(e){e&&u(t),o.d()}}}function Ye(e){let t,n=O(e[7]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Xe(ve(e,n,t));return{c(){t=p("div");for(let e=0;e<r.length;e+=1)r[e].c();b(t,"class","max-h-64 overflow-y-auto divide-y divide-gray-100")},m(e,n){l(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(524416&o[0]){let s;for(n=O(e[7]),s=0;s<n.length;s+=1){const a=ve(e,n,s);r[s]?r[s].p(a,o):(r[s]=Xe(a),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function Ke(t){let n;return{c(){n=p("p"),n.textContent="No artists in this category",b(n,"class","text-center py-6 text-gray-500")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function Qe(t){let n,r;return{c(){n=p("div"),r=p("div"),b(r,"class","w-5 h-5 border-2 rounded-full animate-spin"),v(r,"border-color",t[15].blue.primary),v(r,"border-top-color","transparent"),b(n,"class","flex justify-center py-6")},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function Xe(e){let t,n,r,o,s,a,i,d,h,w,v,k,_,$,A,C,T=e[36].name.charAt(0)+"",S=e[36].name+"",F=e[37].label+"";function j(){return e[28](e[36])}return{c(){t=p("button"),n=p("div"),r=f(T),o=m(),s=p("p"),a=f(S),i=m(),d=p("span"),h=f(F),v=m(),k=g("svg"),_=g("path"),$=m(),b(n,"class","w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-xs font-medium text-gray-600"),b(s,"class","flex-1 font-medium text-gray-900 truncate"),b(d,"class","px-2 py-0.5 text-xs font-medium rounded"),b(d,"style",w=e[37].bg+" "+e[37].text),b(_,"stroke-linecap","round"),b(_,"stroke-linejoin","round"),b(_,"stroke-width","2"),b(_,"d","M9 5l7 7-7 7"),b(k,"class","w-4 h-4 text-gray-400"),b(k,"fill","none"),b(k,"stroke","currentColor"),b(k,"viewBox","0 0 24 24"),b(t,"type","button"),b(t,"class","w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors")},m(e,u){l(e,t,u),c(t,n),c(n,r),c(t,o),c(t,s),c(s,a),c(t,i),c(t,d),c(d,h),c(t,v),c(t,k),c(k,_),c(t,$),A||(C=y(t,"click",j),A=!0)},p(t,n){e=t,128&n[0]&&T!==(T=e[36].name.charAt(0)+"")&&x(r,T),128&n[0]&&S!==(S=e[36].name+"")&&x(a,S),128&n[0]&&F!==(F=e[37].label+"")&&x(h,F),128&n[0]&&w!==(w=e[37].bg+" "+e[37].text)&&b(d,"style",w)},d(e){e&&u(t),A=!1,C()}}}function Ze(e){let t,n,o,s,a,i,d,h,w,k,_,$,A,C,T,S,F,j,L,E,B,M,P,D,H=at(e[40].id)+"",I=e[40].artist_count+"",N=e[40].subscribed?"Blocking":"Block All";function R(...t){return e[26](e[40],...t)}function z(){return e[27](e[40])}let O=e[6]===e[40].id&&We(e);return{c(){t=p("div"),n=p("button"),o=p("div"),s=p("div"),a=p("div"),i=g("svg"),d=g("path"),h=m(),w=p("div"),k=p("p"),_=f(H),$=m(),A=p("p"),C=f(I),T=f(" artists"),S=m(),F=p("button"),j=f(N),B=m(),O&&O.c(),M=m(),b(d,"stroke-linecap","round"),b(d,"stroke-linejoin","round"),b(d,"stroke-width","2"),b(d,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),b(i,"class","w-5 h-5"),v(i,"color",e[15].pink.primary),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"viewBox","0 0 24 24"),b(a,"class","w-10 h-10 rounded-lg flex items-center justify-center"),v(a,"background","linear-gradient(135deg, "+e[15].pink.primary+"15, "+e[15].pink.light+"10)"),b(k,"class","font-medium text-gray-900"),b(A,"class","text-sm text-gray-500"),b(s,"class","flex items-center gap-3"),b(F,"type","button"),b(F,"class","px-4 py-2 text-sm font-medium rounded-lg transition-all"),b(F,"style",L=e[40].subscribed?`background: ${e[15].pink.primary}; color: white;`:"background: white; border: 1px solid #e5e7eb; color: #374151;"),b(o,"class","flex items-center justify-between"),b(n,"type","button"),b(n,"class","w-full p-4 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all text-left"),b(n,"style",E=e[6]===e[40].id?`border-color: ${e[15].blue.primary}; box-shadow: 0 0 0 2px ${e[15].blue.primary}20;`:"")},m(e,r){l(e,t,r),c(t,n),c(n,o),c(o,s),c(s,a),c(a,i),c(i,d),c(s,h),c(s,w),c(w,k),c(k,_),c(w,$),c(w,A),c(A,C),c(A,T),c(o,S),c(o,F),c(F,j),c(t,B),O&&O.m(t,null),c(t,M),P||(D=[y(F,"click",R),y(n,"click",z)],P=!0)},p(r,o){e=r,16&o[0]&&H!==(H=at(e[40].id)+"")&&x(_,H),16&o[0]&&I!==(I=e[40].artist_count+"")&&x(C,I),16&o[0]&&N!==(N=e[40].subscribed?"Blocking":"Block All")&&x(j,N),16&o[0]&&L!==(L=e[40].subscribed?`background: ${e[15].pink.primary}; color: white;`:"background: white; border: 1px solid #e5e7eb; color: #374151;")&&b(F,"style",L),80&o[0]&&E!==(E=e[6]===e[40].id?`border-color: ${e[15].blue.primary}; box-shadow: 0 0 0 2px ${e[15].blue.primary}20;`:"")&&b(n,"style",E),e[6]===e[40].id?O?O.p(e,o):(O=We(e),O.c(),O.m(t,M)):O&&(O.d(1),O=null)},d(e){e&&u(t),O&&O.d(),P=!1,r(D)}}}function et(e){let t,n,r,o,s=e[9].length+"";return{c(){t=p("span"),n=f("("),r=f(s),o=f(")"),b(t,"class","text-gray-500 font-normal")},m(e,s){l(e,t,s),c(t,n),c(t,r),c(t,o)},p(e,t){512&t[0]&&s!==(s=e[9].length+"")&&x(r,s)},d(e){e&&u(t)}}}function tt(e){let t,n,r=O(e[9]),o=[];for(let t=0;t<r.length;t+=1)o[t]=ot(xe(e,r,t));return{c(){t=p("div"),n=p("div");for(let e=0;e<o.length;e+=1)o[e].c();b(n,"class","max-h-80 overflow-y-auto divide-y divide-gray-100"),b(t,"class","bg-white border border-gray-200 rounded-lg overflow-hidden")},m(e,r){l(e,t,r),c(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null)},p(e,t){if(557568&t[0]){let s;for(r=O(e[9]),s=0;s<r.length;s+=1){const a=xe(e,r,s);o[s]?o[s].p(a,t):(o[s]=ot(a),o[s].c(),o[s].m(n,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d(e){e&&u(t),d(o,e)}}}function nt(t){let n;return{c(){n=p("div"),n.innerHTML='<p class="text-gray-600">No artists blocked yet</p> <p class="text-sm text-gray-500 mt-1">Subscribe to categories or search for artists</p>',b(n,"class","bg-gray-50 border border-gray-200 rounded-lg p-10 text-center")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function rt(t){let n,r;return{c(){n=p("div"),r=p("div"),b(r,"class","w-6 h-6 border-2 rounded-full animate-spin"),v(r,"border-color",t[15].blue.primary),v(r,"border-top-color","transparent"),b(n,"class","flex justify-center py-12")},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function ot(e){let t,n,r,o,s,a,i,d,h,w,k,_,$,A,C,T,S,F,j,L,E=e[36].name.charAt(0)+"",B=e[36].name+"",M=at(e[36].category)+"",P=e[37].label+"";function D(){return e[29](e[36])}return{c(){t=p("button"),n=p("div"),r=f(E),o=m(),s=p("div"),a=p("p"),i=f(B),d=m(),h=p("p"),w=f(M),k=m(),_=p("span"),$=f(P),C=m(),T=g("svg"),S=g("path"),F=m(),b(n,"class","w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium text-white"),v(n,"background","linear-gradient(135deg, "+e[15].pink.primary+", "+e[15].pink.light+")"),b(a,"class","font-medium text-gray-900 truncate"),b(h,"class","text-sm text-gray-500"),b(s,"class","flex-1 min-w-0"),b(_,"class","px-2 py-0.5 text-xs font-medium rounded"),b(_,"style",A=e[37].bg+" "+e[37].text),b(S,"stroke-linecap","round"),b(S,"stroke-linejoin","round"),b(S,"stroke-width","2"),b(S,"d","M9 5l7 7-7 7"),b(T,"class","w-4 h-4 text-gray-400"),b(T,"fill","none"),b(T,"stroke","currentColor"),b(T,"viewBox","0 0 24 24"),b(t,"type","button"),b(t,"class","w-full flex items-center gap-4 px-4 py-3 text-left hover:bg-gray-50 transition-colors")},m(e,u){l(e,t,u),c(t,n),c(n,r),c(t,o),c(t,s),c(s,a),c(a,i),c(s,d),c(s,h),c(h,w),c(t,k),c(t,_),c(_,$),c(t,C),c(t,T),c(T,S),c(t,F),j||(L=y(t,"click",D),j=!0)},p(t,n){e=t,512&n[0]&&E!==(E=e[36].name.charAt(0)+"")&&x(r,E),512&n[0]&&B!==(B=e[36].name+"")&&x(i,B),512&n[0]&&M!==(M=at(e[36].category)+"")&&x(w,M),512&n[0]&&P!==(P=e[37].label+"")&&x($,P),512&n[0]&&A!==(A=e[37].bg+" "+e[37].text)&&b(_,"style",A)},d(e){e&&u(t),j=!1,L()}}}function st(t){let n,r,o;function s(e,t){return"home"===e[0]?$e:"artist"===e[0]?_e:void 0}let a=s(t),i=a&&a(t);return{c(){n=p("div"),i&&i.c(),b(n,"class","min-h-screen bg-white")},m(e,s){l(e,n,s),i&&i.m(n,null),r||(o=y(window,"keydown",t[22]),r=!0)},p(e,t){a===(a=s(e))&&i?i.p(e,t):(i&&i.d(1),i=a&&a(e),i&&(i.c(),i.m(n,null)))},i:e,o:e,d(e){e&&u(n),i&&i.d(),r=!1,o()}}}function at(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function it(e){switch(e){case"egregious":return{bg:"background-color: #FFE5ED;",text:"color: #FF2C6E;",label:"Egregious"};case"severe":return{bg:"background-color: #FFECF1;",text:"color: #FF728F;",label:"Severe"};case"moderate":return{bg:"background-color: #E5F6FF;",text:"color: #009BD7;",label:"Moderate"};default:return{bg:"background-color: #E8F8E6;",text:"color: #30AF22;",label:"Minor"}}}function ct(e,t,n){let r,o="home",s="",a=[],i=!1,c=[],l=!0,u=null,d=[],p=!1,g=[],f=!1,m=null,h=!1,y=null,b=new Set;async function x(){n(5,l=!0);try{const e=await X.get("/api/v1/categories");e.success&&e.data&&n(4,c=e.data)}catch(e){console.error("Failed to load categories:",e)}finally{n(5,l=!1)}}async function w(){n(10,f=!0);try{const e=await X.get("/api/v1/categories/blocked-artists");e.success&&e.data&&n(9,g=e.data)}catch(e){console.error("Failed to load blocked artists:",e)}finally{n(10,f=!1)}}async function v(){try{const e=await X.get("/api/v1/dnp/list");e.success&&e.data&&n(14,b=new Set(e.data.map(e=>e.artist_id)))}catch(e){console.error("Failed to load DNP list:",e)}}async function k(e){u===e?(n(6,u=null),n(7,d=[])):(n(6,u=e),await async function(e){n(8,p=!0);try{const t=await X.get(`/api/v1/offenses/query?category=${e}`);t.success&&t.data?.artists?n(7,d=t.data.artists):n(7,d=[])}catch(e){n(7,d=[])}finally{n(8,p=!1)}}(e))}async function _(e,t){t.stopPropagation();const r=e.subscribed;n(4,c=c.map(t=>t.id===e.id?{...t,subscribed:!r}:t));try{r?await X.delete(`/api/v1/categories/${e.id}/subscribe`):await X.post(`/api/v1/categories/${e.id}/subscribe`),await w()}catch(t){n(4,c=c.map(t=>t.id===e.id?{...t,subscribed:r}:t))}}async function A(e,t){n(0,o="artist"),n(12,h=!0),n(11,m=null);try{const r=await X.get(`/api/v1/offenses/query?artist_id=${e}`);r.success&&r.data?n(11,m=r.data):n(11,m={id:e,canonical_name:t,offenses:[]})}catch(r){n(11,m={id:e,canonical_name:t,offenses:[]})}finally{n(12,h=!1)}}function C(){n(0,o="home"),n(11,m=null),n(2,a=[]),n(1,s="")}async function T(e){n(13,y=e);const t=b.has(e);try{t?(await X.delete(`/api/v1/dnp/list/${e}`),b.delete(e)):(await X.post("/api/v1/dnp/list",{artist_id:e}),b.add(e)),n(14,b=new Set(b))}catch(e){console.error("Failed to toggle block:",e)}finally{n(13,y=null)}}$(async()=>{await Promise.all([x(),w(),v()])});return[o,s,a,i,c,l,u,d,p,g,f,m,h,y,b,{green:{primary:"#30AF22",light:"#59BA48"},blue:{primary:"#009BD7",light:"#00B4FF"},pink:{primary:"#FF2C6E",light:"#FF728F"}},function(){if(clearTimeout(r),!s.trim())return n(2,a=[]),void n(3,i=!1);n(3,i=!0),r=setTimeout(async()=>{try{const e=await X.get(`/api/v1/artists/search?q=${encodeURIComponent(s.trim())}`);e.success&&e.data?n(2,a=e.data):n(2,a=[])}catch(e){n(2,a=[])}finally{n(3,i=!1)}},150)},k,_,A,C,T,function(e){"Escape"===e.key&&("artist"===o?C():a.length>0&&(n(2,a=[]),n(1,s="")))},()=>ie("settings"),function(){s=this.value,n(1,s)},e=>A(e.id,e.canonical_name),(e,t)=>_(e,t),e=>k(e.id),e=>A(e.id,e.name),e=>A(e.id,e.name),()=>m&&T(m.id)]}class lt extends W{constructor(e){super(),V(this,e,ct,st,s,{},null,[-1,-1])}}function ut(e){let t,n,r;return{c(){t=p("div"),n=p("p"),r=f(e[3]),b(n,"class","text-sm"),v(n,"color",e[8].pink.primary),b(t,"class","mx-5 mt-4 p-4 rounded-lg"),v(t,"background-color","#FFE5ED"),v(t,"border","1px solid "+e[8].pink.light)},m(e,o){l(e,t,o),c(t,n),c(n,r)},p(e,t){8&t&&x(r,e[3])},d(e){e&&u(t)}}}function dt(t){let n;return{c(){n=p("p"),n.textContent="Not connected",b(n,"class","text-sm text-gray-500")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function pt(t){let n,r;return{c(){n=p("p"),r=f("Connected"),b(n,"class","text-sm font-medium"),v(n,"color",t[8].green.primary)},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function gt(t){let n;return{c(){n=p("p"),n.textContent="Loading...",b(n,"class","text-sm text-gray-500")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function ft(e){let t,n,r,o,s,a="spotify"===e[2]?"Connecting...":"Connect";return{c(){t=p("button"),n=f(a),t.disabled=r="spotify"===e[2],b(t,"class","px-4 py-2 bg-[#1DB954] text-white rounded-lg text-sm font-medium hover:bg-[#1ed760] transition-colors disabled:opacity-50")},m(r,a){l(r,t,a),c(t,n),o||(s=y(t,"click",e[15]),o=!0)},p(e,o){4&o&&a!==(a="spotify"===e[2]?"Connecting...":"Connect")&&x(n,a),4&o&&r!==(r="spotify"===e[2])&&(t.disabled=r)},d(e){e&&u(t),o=!1,s()}}}function mt(e){let t,n,r,o,s,a="spotify"===e[2]?"Disconnecting...":"Disconnect";return{c(){t=p("button"),n=f(a),t.disabled=r="spotify"===e[2],b(t,"class","px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50")},m(r,a){l(r,t,a),c(t,n),o||(s=y(t,"click",e[14]),o=!0)},p(e,o){4&o&&a!==(a="spotify"===e[2]?"Disconnecting...":"Disconnect")&&x(n,a),4&o&&r!==(r="spotify"===e[2])&&(t.disabled=r)},d(e){e&&u(t),o=!1,s()}}}function ht(t){let n;return{c(){n=p("p"),n.textContent="Not connected",b(n,"class","text-sm text-gray-500")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function yt(t){let n,r;return{c(){n=p("p"),r=f("Connected"),b(n,"class","text-sm font-medium"),v(n,"color",t[8].green.primary)},m(e,t){l(e,n,t),c(n,r)},p:e,d(e){e&&u(n)}}}function bt(t){let n;return{c(){n=p("p"),n.textContent="Loading...",b(n,"class","text-sm text-gray-500")},m(e,t){l(e,n,t)},p:e,d(e){e&&u(n)}}}function xt(e){let t,n,r,o,s,a="apple"===e[2]?"Connecting...":"Connect";return{c(){t=p("button"),n=f(a),t.disabled=r="apple"===e[2],b(t,"class","px-4 py-2 bg-gradient-to-r from-[#FA2D48] to-[#A833B9] text-white rounded-lg text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50")},m(r,a){l(r,t,a),c(t,n),o||(s=y(t,"click",e[17]),o=!0)},p(e,o){4&o&&a!==(a="apple"===e[2]?"Connecting...":"Connect")&&x(n,a),4&o&&r!==(r="apple"===e[2])&&(t.disabled=r)},d(e){e&&u(t),o=!1,s()}}}function wt(e){let t,n,r,o,s,a="apple"===e[2]?"Disconnecting...":"Disconnect";return{c(){t=p("button"),n=f(a),t.disabled=r="apple"===e[2],b(t,"class","px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors disabled:opacity-50")},m(r,a){l(r,t,a),c(t,n),o||(s=y(t,"click",e[16]),o=!0)},p(e,o){4&o&&a!==(a="apple"===e[2]?"Disconnecting...":"Disconnect")&&x(n,a),4&o&&r!==(r="apple"===e[2])&&(t.disabled=r)},d(e){e&&u(t),o=!1,s()}}}function vt(t){let n,r,o,s;return{c(){n=g("svg"),r=g("path"),o=m(),s=p("span"),s.textContent="Sign out",b(r,"stroke-linecap","round"),b(r,"stroke-linejoin","round"),b(r,"stroke-width","2"),b(r,"d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"),b(n,"class","w-5 h-5"),b(n,"fill","none"),b(n,"stroke","currentColor"),b(n,"viewBox","0 0 24 24")},m(e,t){l(e,n,t),c(n,r),l(e,o,t),l(e,s,t)},p:e,d(e){e&&(u(n),u(o),u(s))}}}function kt(t){let n,r,o;return{c(){n=p("div"),r=m(),o=p("span"),o.textContent="Signing out...",b(n,"class","w-4 h-4 border-2 rounded-full animate-spin"),v(n,"border-color",t[8].blue.primary),v(n,"border-top-color","transparent")},m(e,t){l(e,n,t),l(e,r,t),l(e,o,t)},p:e,d(e){e&&(u(n),u(r),u(o))}}}function _t(t){let n,o,s,a,i,d,h,w,k,_,$,A,C,T,S,F,j,L,E,B,M,P,D,H,I,N,R,z,O,U,q,G,J,V,W,Y,K,Q,X,Z,ee,te,ne,re,oe,se,ae,ie,ce,le,ue,de,pe,ge,fe,me,he,ye,be,xe,we,ve,ke,_e,$e,Ae,Ce,Te,Se,Fe,je,Le,Ee,Be,Me,Pe,De,He,Ie=(t[7]?.email||"Not signed in")+"",Ne=t[3]&&ut(t);function Re(e,t){return e[1]?gt:(null==G&&(G=!!e[9]("spotify")),G?pt:dt)}let ze=Re(t),Oe=ze(t);let Ue=function(e){return e[9]("spotify")?mt:ft}(t),qe=Ue(t);function Ge(e,t){return e[1]?bt:(null==te&&(te=!!e[9]("apple")),te?yt:ht)}let Je=Ge(t),Ve=Je(t);let We=function(e){return e[9]("apple")?wt:xt}(t),Ye=We(t);function Ke(e,t){return e[0]?kt:vt}let Qe=Ke(t),Xe=Qe(t);return{c(){n=p("div"),o=p("header"),s=p("div"),a=p("button"),i=g("svg"),d=g("path"),h=m(),w=p("h1"),w.textContent="Settings",k=m(),_=p("main"),$=p("section"),A=p("div"),A.innerHTML='<h2 class="font-semibold text-gray-900">Account</h2>',C=m(),T=p("div"),S=p("p"),S.textContent="Email",F=m(),j=p("p"),L=f(Ie),E=m(),B=p("section"),M=p("div"),M.innerHTML='<h2 class="font-semibold text-gray-900">Music Services</h2> <p class="text-sm text-gray-500 mt-1">Connect your streaming accounts to sync your blocklist</p>',P=m(),Ne&&Ne.c(),D=m(),H=p("div"),I=p("div"),N=p("div"),R=p("div"),R.innerHTML='<svg class="w-7 h-7 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"></path></svg>',z=m(),O=p("div"),U=p("p"),U.textContent="Spotify",q=m(),Oe.c(),J=m(),qe.c(),V=m(),W=p("div"),Y=p("div"),K=p("div"),K.innerHTML='<svg class="w-7 h-7 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.801.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.295-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.042-1.785-.476-2.144-1.32-.238-.56-.223-1.136-.017-1.7.303-.825.96-1.277 1.743-1.49.294-.08.595-.13.893-.18.323-.054.65-.1.973-.157.274-.048.47-.202.53-.486a.707.707 0 00.017-.146c.002-1.633.002-3.265.002-4.898v-.07l-.06-.01c-2.097.4-4.194.8-6.29 1.202-.014.002-.032.014-.037.026-.006.016-.003.037-.003.056v7.36c0 .418-.052.832-.227 1.218-.282.622-.76 1.02-1.416 1.207-.313.09-.634.138-.96.166-.906.08-1.732-.4-2.134-1.203-.268-.534-.278-1.1-.096-1.66.267-.817.864-1.304 1.64-1.55.376-.12.763-.185 1.148-.25.278-.047.558-.088.832-.145.317-.065.522-.25.58-.574a.504.504 0 00.007-.115v-8.41c0-.25.042-.493.15-.72.183-.385.486-.62.882-.728.17-.047.346-.073.522-.11 2.55-.526 5.1-1.05 7.65-1.573.093-.02.19-.03.285-.03.316.004.528.2.613.5.032.113.044.233.044.35v5.9z"></path></svg>',Q=m(),X=p("div"),Z=p("p"),Z.textContent="Apple Music",ee=m(),Ve.c(),ne=m(),Ye.c(),re=m(),oe=p("section"),se=p("div"),se.innerHTML='<h2 class="font-semibold text-gray-900">Preferences</h2>',ae=m(),ie=p("div"),ce=p("div"),le=p("div"),le.innerHTML='<p class="font-medium text-gray-900">Block featured artists</p> <p class="text-sm text-gray-500 mt-0.5">Also block songs where artist is featured</p>',ue=m(),de=p("button"),pe=p("span"),ge=m(),fe=p("div"),me=p("div"),me.innerHTML='<p class="font-medium text-gray-900">Block producer credits</p> <p class="text-sm text-gray-500 mt-0.5">Block songs produced by blocked artists</p>',he=m(),ye=p("button"),be=p("span"),xe=m(),we=p("div"),ve=p("div"),ve.innerHTML='<p class="font-medium text-gray-900">News notifications</p> <p class="text-sm text-gray-500 mt-0.5">Get notified when new artists are added</p>',ke=m(),_e=p("button"),$e=p("span"),Ae=m(),Ce=p("section"),Te=p("div"),Te.innerHTML='<h2 class="font-semibold text-gray-900">Account Actions</h2>',Se=m(),Fe=p("div"),je=p("button"),Xe.c(),Le=m(),Ee=p("button"),Be=f("Delete account"),Me=m(),Pe=p("p"),Pe.textContent="No Drake in the House v1.0.0",b(d,"stroke-linecap","round"),b(d,"stroke-linejoin","round"),b(d,"stroke-width","2"),b(d,"d","M15 19l-7-7 7-7"),b(i,"class","w-5 h-5"),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"viewBox","0 0 24 24"),b(a,"class","p-2 rounded-lg text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors"),v(a,"--focus-color",t[8].blue.primary),b(w,"class","text-xl font-semibold text-gray-900"),b(s,"class","max-w-2xl mx-auto px-4 py-4 flex items-center gap-4"),b(o,"class","sticky top-0 z-50 bg-white border-b border-gray-200"),b(A,"class","px-5 py-4 border-b border-gray-200 bg-white"),b(S,"class","text-sm text-gray-500"),b(j,"class","mt-1 font-medium text-gray-900"),b(T,"class","p-5 bg-white"),b($,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),b(M,"class","px-5 py-4 border-b border-gray-200 bg-white"),b(R,"class","w-12 h-12 bg-[#1DB954] rounded-full flex items-center justify-center"),b(U,"class","font-medium text-gray-900"),b(N,"class","flex items-center gap-4"),b(I,"class","p-5 flex items-center justify-between"),b(K,"class","w-12 h-12 bg-gradient-to-br from-[#FA2D48] to-[#A833B9] rounded-full flex items-center justify-center"),b(Z,"class","font-medium text-gray-900"),b(Y,"class","flex items-center gap-4"),b(W,"class","p-5 flex items-center justify-between"),b(H,"class","bg-white divide-y divide-gray-100"),b(B,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),b(se,"class","px-5 py-4 border-b border-gray-200 bg-white"),b(pe,"class","absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform"),v(pe,"left",t[4]?"22px":"2px"),b(de,"type","button"),b(de,"class","relative w-11 h-6 rounded-full transition-colors"),v(de,"background-color",t[4]?t[8].blue.primary:"#d1d5db"),b(ce,"class","p-5 flex items-center justify-between"),b(be,"class","absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform"),v(be,"left",t[5]?"22px":"2px"),b(ye,"type","button"),b(ye,"class","relative w-11 h-6 rounded-full transition-colors"),v(ye,"background-color",t[5]?t[8].blue.primary:"#d1d5db"),b(fe,"class","p-5 flex items-center justify-between"),b($e,"class","absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform"),v($e,"left",t[6]?"22px":"2px"),b(_e,"type","button"),b(_e,"class","relative w-11 h-6 rounded-full transition-colors"),v(_e,"background-color",t[6]?t[8].blue.primary:"#d1d5db"),b(we,"class","p-5 flex items-center justify-between"),b(ie,"class","bg-white divide-y divide-gray-100"),b(oe,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),b(Te,"class","px-5 py-4 border-b border-gray-200 bg-white"),je.disabled=t[0],b(je,"class","w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 disabled:opacity-50"),b(Ee,"class","w-full px-4 py-3 rounded-lg text-sm font-medium transition-colors"),v(Ee,"background-color","#FFE5ED"),v(Ee,"color",t[8].pink.primary),v(Ee,"border","1px solid "+t[8].pink.light),b(Fe,"class","p-5 bg-white space-y-3"),b(Ce,"class","bg-gray-50 border border-gray-200 rounded-xl overflow-hidden"),b(Pe,"class","text-center text-sm text-gray-400"),b(_,"class","max-w-2xl mx-auto px-4 py-6 space-y-6"),b(n,"class","min-h-screen bg-white")},m(e,r){l(e,n,r),c(n,o),c(o,s),c(s,a),c(a,i),c(i,d),c(s,h),c(s,w),c(n,k),c(n,_),c(_,$),c($,A),c($,C),c($,T),c(T,S),c(T,F),c(T,j),c(j,L),c(_,E),c(_,B),c(B,M),c(B,P),Ne&&Ne.m(B,null),c(B,D),c(B,H),c(H,I),c(I,N),c(N,R),c(N,z),c(N,O),c(O,U),c(O,q),Oe.m(O,null),c(I,J),qe.m(I,null),c(H,V),c(H,W),c(W,Y),c(Y,K),c(Y,Q),c(Y,X),c(X,Z),c(X,ee),Ve.m(X,null),c(W,ne),Ye.m(W,null),c(_,re),c(_,oe),c(oe,se),c(oe,ae),c(oe,ie),c(ie,ce),c(ce,le),c(ce,ue),c(ce,de),c(de,pe),c(ie,ge),c(ie,fe),c(fe,me),c(fe,he),c(fe,ye),c(ye,be),c(ie,xe),c(ie,we),c(we,ve),c(we,ke),c(we,_e),c(_e,$e),c(_,Ae),c(_,Ce),c(Ce,Te),c(Ce,Se),c(Ce,Fe),c(Fe,je),Xe.m(je,null),c(Fe,Le),c(Fe,Ee),c(Ee,Be),c(_,Me),c(_,Pe),De||(He=[y(a,"click",t[13]),y(de,"click",t[18]),y(ye,"click",t[19]),y(_e,"click",t[20]),y(je,"click",t[12])],De=!0)},p(e,[t]){128&t&&Ie!==(Ie=(e[7]?.email||"Not signed in")+"")&&x(L,Ie),e[3]?Ne?Ne.p(e,t):(Ne=ut(e),Ne.c(),Ne.m(B,D)):Ne&&(Ne.d(1),Ne=null),ze===(ze=Re(e))&&Oe?Oe.p(e,t):(Oe.d(1),Oe=ze(e),Oe&&(Oe.c(),Oe.m(O,null))),qe.p(e,t),Je===(Je=Ge(e))&&Ve?Ve.p(e,t):(Ve.d(1),Ve=Je(e),Ve&&(Ve.c(),Ve.m(X,null))),Ye.p(e,t),16&t&&v(pe,"left",e[4]?"22px":"2px"),16&t&&v(de,"background-color",e[4]?e[8].blue.primary:"#d1d5db"),32&t&&v(be,"left",e[5]?"22px":"2px"),32&t&&v(ye,"background-color",e[5]?e[8].blue.primary:"#d1d5db"),64&t&&v($e,"left",e[6]?"22px":"2px"),64&t&&v(_e,"background-color",e[6]?e[8].blue.primary:"#d1d5db"),Qe===(Qe=Ke(e))&&Xe?Xe.p(e,t):(Xe.d(1),Xe=Qe(e),Xe&&(Xe.c(),Xe.m(je,null))),1&t&&(je.disabled=e[0])},i:e,o:e,d(e){e&&u(n),Ne&&Ne.d(),Oe.d(),qe.d(),Ve.d(),Ye.d(),Xe.d(),De=!1,r(He)}}}function $t(e,t,n){let r;i(e,te,e=>n(7,r=e));let o=!1,s=[],a=!0,c=null,l=null,u=!0,d=!1,p=!0;async function g(e){n(2,c=e),n(3,l=null);try{const t=await X.post(`/api/v1/auth/oauth/${e}/link`);t.success&&t.data?.auth_url?window.location.href=t.data.auth_url:n(3,l="Failed to initiate connection")}catch(e){n(3,l="Failed to connect. Please try again.")}finally{n(2,c=null)}}async function f(e){n(2,c=e);try{(await X.delete(`/api/v1/auth/oauth/${e}/unlink`)).success&&(s=s.filter(t=>t.provider!==e))}catch(e){console.error("Disconnect failed:",e)}finally{n(2,c=null)}}$(async()=>{await async function(){n(1,a=!0);try{const e=await X.get("/api/v1/auth/oauth/accounts");e.success&&e.data&&(s=e.data)}catch(e){console.error("Failed to load connections:",e)}finally{n(1,a=!1)}}()});return[o,a,c,l,u,d,p,r,{green:{primary:"#30AF22",light:"#59BA48"},blue:{primary:"#009BD7",light:"#00B4FF"},pink:{primary:"#FF2C6E",light:"#FF728F"}},function(e){return s.some(t=>t.provider===e)},g,f,async function(){n(0,o=!0);try{await ne.logout(),window.location.href="/"}catch(e){n(0,o=!1)}},()=>ie("home"),()=>f("spotify"),()=>g("spotify"),()=>f("apple"),()=>g("apple"),()=>n(4,u=!u),()=>n(5,d=!d),()=>n(6,p=!p)]}class At extends W{constructor(e){super(),V(this,e,$t,_t,s,{})}}function Ct(e){let t,n,o,s,a,i,d,g,h,w,v,k,_;return{c(){t=p("div"),t.innerHTML='<div class="w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div>',n=m(),o=p("h1"),o.textContent="Connection Failed",s=m(),a=p("p"),i=f(e[1]),d=m(),g=p("div"),h=p("button"),h.textContent="Try Again",w=m(),v=p("button"),v.textContent="Go Home",b(t,"class","mb-6"),b(o,"class","text-xl font-bold mb-2 text-red-400"),b(a,"class","text-gray-400 mb-6"),b(h,"class","px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium transition-colors"),b(v,"class","px-6 py-3 bg-rose-600 hover:bg-rose-700 rounded-lg font-medium transition-colors"),b(g,"class","flex gap-3 justify-center")},m(r,u){l(r,t,u),l(r,n,u),l(r,o,u),l(r,s,u),l(r,a,u),c(a,i),l(r,d,u),l(r,g,u),c(g,h),c(g,w),c(g,v),k||(_=[y(h,"click",e[3]),y(v,"click",e[4])],k=!0)},p(e,t){2&t&&x(i,e[1])},d(e){e&&(u(t),u(n),u(o),u(s),u(a),u(d),u(g)),k=!1,r(_)}}}function Tt(e){let t,n,r,o,s,a,i,d,g,h,w,v,k=jt(e[2])+"";return{c(){t=p("div"),t.innerHTML='<div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto"><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>',n=m(),r=p("h1"),r.textContent="Connected!",o=m(),s=p("p"),a=f("Your "),i=f(k),d=f(" account has been linked successfully."),g=m(),h=p("button"),h.textContent="Go to Settings",b(t,"class","mb-6"),b(r,"class","text-xl font-bold mb-2 text-green-400"),b(s,"class","text-gray-400 mb-6"),b(h,"class","px-6 py-3 bg-rose-600 hover:bg-rose-700 rounded-lg font-medium transition-colors")},m(u,p){l(u,t,p),l(u,n,p),l(u,r,p),l(u,o,p),l(u,s,p),c(s,a),c(s,i),c(s,d),l(u,g,p),l(u,h,p),w||(v=y(h,"click",e[3]),w=!0)},p(e,t){4&t&&k!==(k=jt(e[2])+"")&&x(i,k)},d(e){e&&(u(t),u(n),u(r),u(o),u(s),u(g),u(h)),w=!1,v()}}}function St(e){let t,n,r,o,s,a,i,d=jt(e[2])+"";return{c(){t=p("div"),t.innerHTML='<div class="w-16 h-16 border-4 border-rose-500 border-t-transparent rounded-full animate-spin mx-auto"></div>',n=m(),r=p("h1"),o=f("Connecting "),s=f(d),a=m(),i=p("p"),i.textContent="Please wait while we complete the connection...",b(t,"class","mb-6"),b(r,"class","text-xl font-bold mb-2"),b(i,"class","text-gray-400")},m(e,u){l(e,t,u),l(e,n,u),l(e,r,u),c(r,o),c(r,s),l(e,a,u),l(e,i,u)},p(e,t){4&t&&d!==(d=jt(e[2])+"")&&x(s,d)},d(e){e&&(u(t),u(n),u(r),u(a),u(i))}}}function Ft(t){let n,r;function o(e,t){return"loading"===e[0]?St:"success"===e[0]?Tt:Ct}let s=o(t),a=s(t);return{c(){n=p("div"),r=p("div"),a.c(),b(r,"class","bg-gray-800 rounded-xl border border-gray-600 p-8 max-w-md w-full text-center"),b(n,"class","min-h-screen bg-gray-900 text-white flex items-center justify-center p-4")},m(e,t){l(e,n,t),c(n,r),a.m(r,null)},p(e,[t]){s===(s=o(e))&&a?a.p(e,t):(a.d(1),a=s(e),a&&(a.c(),a.m(r,null)))},i:e,o:e,d(e){e&&u(n),a.d()}}}function jt(e){switch(e){case"spotify":return"Spotify";case"apple":return"Apple Music";case"google":return"Google";case"github":return"GitHub";default:return e}}function Lt(e,t,n){let r="loading",o="",s="";return $(async()=>{const e=new URLSearchParams(window.location.search),t=e.get("code"),a=e.get("state"),i=e.get("error"),c=e.get("error_description"),l=window.location.pathname.split("/");if(n(2,s=l[l.length-1]||"unknown"),i)return n(0,r="error"),void n(1,o=c||i||"Authentication was cancelled or denied");if(!t||!a)return n(0,r="error"),void n(1,o="Missing authentication parameters");try{const e=await X.post(`/api/v1/auth/oauth/${s}/link-callback`,{code:t,state:a});e.success?(n(0,r="success"),setTimeout(()=>{ie("settings")},1500)):(n(0,r="error"),n(1,o=e.error||"Failed to link account"))}catch(e){n(0,r="error"),n(1,o=e instanceof Error?e.message:"An unexpected error occurred")}}),[r,o,s,function(){ie("settings")},function(){ie("home")}]}class Et extends W{constructor(e){super(),V(this,e,Lt,Ft,s,{})}}function Bt(t){let n,r;return n=new me({}),{c(){U(n.$$.fragment)},m(e,t){q(n,e,t),r=!0},p:e,i(e){r||(R(n.$$.fragment,e),r=!0)},o(e){z(n.$$.fragment,e),r=!1},d(e){G(n,e)}}}function Mt(e){let t,n,r,o;const s=[Nt,It],a=[];function i(e,t){return"settings"===e[1]?0:1}return t=i(e),n=a[t]=s[t](e),{c(){n.c(),r=h()},m(e,n){a[t].m(e,n),l(e,r,n),o=!0},p(e,o){let c=t;t=i(e),t!==c&&(I(),z(a[c],1,1,()=>{a[c]=null}),N(),n=a[t],n||(n=a[t]=s[t](e),n.c()),R(n,1),n.m(r.parentNode,r))},i(e){o||(R(n),o=!0)},o(e){z(n),o=!1},d(e){e&&u(r),a[t].d(e)}}}function Pt(t){let n,r,o,s,a,i,d,g,f,h,x;return{c(){n=p("div"),r=p("div"),o=p("div"),o.textContent="!",s=m(),a=p("h2"),a.textContent="Connection Failed",i=m(),d=p("p"),d.textContent="There was a problem connecting your account. Please try again.",g=m(),f=p("button"),f.textContent="Go Back",b(o,"class","text-red-500 text-6xl mb-4"),b(a,"class","text-2xl font-bold text-white mb-2"),b(d,"class","text-gray-400 mb-6"),b(f,"class","px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors"),b(r,"class","max-w-md w-full text-center"),b(n,"class","min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4")},m(e,u){l(e,n,u),c(n,r),c(r,o),c(r,s),c(r,a),c(r,i),c(r,d),c(r,g),c(r,f),h||(x=y(f,"click",t[3]),h=!0)},p:e,i:e,o:e,d(e){e&&u(n),h=!1,x()}}}function Dt(t){let n,r;return n=new Et({}),{c(){U(n.$$.fragment)},m(e,t){q(n,e,t),r=!0},p:e,i(e){r||(R(n.$$.fragment,e),r=!0)},o(e){z(n.$$.fragment,e),r=!1},d(e){G(n,e)}}}function Ht(t){let n;return{c(){n=p("div"),n.innerHTML='<div class="text-center"><div class="w-8 h-8 border-4 border-red-500 border-t-transparent rounded-full animate-spin mx-auto"></div> <p class="mt-4 text-gray-400">Loading...</p></div>',b(n,"class","min-h-screen flex items-center justify-center bg-gray-900")},m(e,t){l(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}function It(e){let t,n;return t=new lt({}),{c(){U(t.$$.fragment)},m(e,r){q(t,e,r),n=!0},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){z(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Nt(e){let t,n;return t=new At({}),{c(){U(t.$$.fragment)},m(e,r){q(t,e,r),n=!0},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){z(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Rt(e){let t,n,r,o;const s=[Ht,Dt,Pt,Mt,Bt],a=[];function i(e,t){return e[0]?"oauth-callback"===e[1]?1:"oauth-error"===e[1]?2:e[2]?3:4:0}return t=i(e),n=a[t]=s[t](e),{c(){n.c(),r=h()},m(e,n){a[t].m(e,n),l(e,r,n),o=!0},p(e,[o]){let c=t;t=i(e),t===c?a[t].p(e,o):(I(),z(a[c],1,1,()=>{a[c]=null}),N(),n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),R(n,1),n.m(r.parentNode,r))},i(e){o||(R(n),o=!0)},o(e){z(n),o=!1},d(e){e&&u(r),a[t].d(e)}}}function zt(e,t,n){let r,o;i(e,ae,e=>n(1,r=e)),i(e,ee,e=>n(2,o=e));let s=!1;$(async()=>{try{!function(){if("undefined"!=typeof window){window.addEventListener("popstate",e=>{const t=e.state?.route||ce(window.location.pathname);ae.set(t)});const e=ce(window.location.pathname);ae.set(e),document.title=`${se[e].title} - No Drake`}}(),await ne.fetchProfile()}catch(e){console.error("Init error:",e)}finally{n(0,s=!0)}});return[s,r,o,()=>window.location.href="/"]}return new class extends W{constructor(e){super(),V(this,e,zt,Rt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
